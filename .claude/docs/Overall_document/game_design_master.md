# ローグライク カードバトル RPG 全体設計書 V2.0

## 更新履歴

- V2.0: **設計の根本的変更** - ローグライト要素削除、持ち帰り型ダンジョン RPG へ転換

---

## 1. ゲームコンセプト

### 1.1 ジャンルの再定義

> **持ち帰り型ダンジョン RPG × カードバトル**
> 生還を目指す、計画的な探索と成長

**参考作品:**

- 風来のシレン（持ち帰り型）
- Slay the Spire（カードバトル）
- ダークソウル（死亡ペナルティの重さ）

---

### 1.2 設計思想の転換

```
【持ち帰り型の利点】
探索 → 生還 → 装備・アイテム・Gold・魂を保持 → 成長
       ↓
     死亡 → 全ロスト（装備・アイテム・Gold・魂獲得分）
       ↓
   BaseCampの装備・カード・Goldは保持

利点:
- リスク・リターンが明確
- 生還の達成感
- 持ち帰るタイミングの戦略性
- 探索回数制限によるプレッシャー
```

---

## 2. ゲームの核心メカニクス

### 2.1 コアループ

```
┌─────────────────────────────────────────────┐
│                                             │
│  BaseCamp（安全地帯）                         │
│  ├─ 装備強化（Blacksmith）                    │
│  ├─ 装備購入（Shop）                          │
│  ├─ デッキ編成（Library）                     │
│  └─ 魂の残滓でレベルアップ（Sanctuary）         │
│                                             │
└──────────────┬──────────────────────────────┘
               │ 装備・デッキを選んで出発
               ↓
┌─────────────────────────────────────────────┐
│  Dungeon（危険地帯）                          │
│  ├─ 戦闘 → 魔石・装備・カード熟練度上昇・魂を獲得  │
│  ├─ 深層へ進むか、帰還するか判断                 │
│  └─ 2つの選択肢:                              │
│     [A] 生還 → 全て持ち帰り                    │
│     [B] 死亡 → 全ロスト                       │
└──────────────┬──────────────────────────────┘
               │
               ↓
      [A] 生還の場合:
      - BaseCampに装備・イベント入手でのGold・魂を持ち帰り
      - 次の探索に向けた強化
      - 探索回数カウント +1

      [B] 死亡の場合:
      - Dungeon内の装備・アイテム全ロスト
      - 獲得したGold・魂の残滓もゼロ
      - BaseCampの装備・カード・Goldは保持
      - 探索回数カウント +1
               ↓
      探索回数制限（例: 10回以内に深層到達）
```

---

### 2.2 リスク・リターンの設計

#### 生還のメリット（リターン）

| 持ち帰れるもの | 説明                           |
| -------------- | ------------------------------ |
| Gold           | Dungeon 内で獲得した Gold 全額 |
| 装備           | Dungeon 内で獲得した装備       |
| アイテム       | Dungeon 内で拾った消耗品       |
| 魂の残滓       | 魔物を倒して獲得した経験値     |

※ ダンジョン内での gold の入手は特定のイベントのみ。戦闘報酬で gold は入手できない。

**生還の判断ポイント:**

- HP 残量
- 装備の耐久度（AP）
- 手持ちの回復アイテム
- 高レベルの武器や魔石の入手
- 次の深度の危険性

#### 死亡のデメリット（リスク）

| ロストするもの       | 説明                                       |
| -------------------- | ------------------------------------------ |
| Dungeon 内の装備     | 持ち込んだ装備・獲得した装備、全てロスト   |
| Dungeon 内のアイテム | 持ち込んだ消耗品・拾った消耗品、全てロスト |
| 獲得した Gold        | Dungeon 内で獲得した Gold ゼロに           |
| 獲得した魂の残滓     | その探索で獲得した魂、ゼロに               |

**保持されるもの（重要）:**

- BaseCamp に保管している装備
- BaseCamp の Gold 残高
- 過去の探索で持ち帰った魂の残滓（累計レベル）
- カード図鑑・装備図鑑・魔物図鑑
- Sanctuary で解放した恒久強化

**設計意図:**

- 死亡は痛いが、全てを失うわけではない
- 慎重なプレイとリスク管理を促す
- 「もう一歩進むか、帰るか」のジレンマ

---

### 2.3 探索回数制限システム

#### 制限の目的

**なぜ制限が必要か:**

- 無限の試行錯誤を防ぐ
- 各探索に重みを持たせる
- プレイヤーに計画性を求める
- ゲーム全体の緊張感を維持

#### 制限の仕組み

**基本ルール:**

```
制限回数: 10回（仮）
現在回数: X回

残り回数 = 10 - X

残り0回 → ゲームオーバー（最深到達失敗）
```

**探索 1 回のカウント:**

- Dungeon に入る → 探索開始
- 生還 or 死亡 → 探索回数 +1

**例外ルール:**

- BaseCamp への帰還は何度でも可能
- 探索中の転移石使用も 1 回とカウント

#### 制限回数の調整

**難易度による変動:**
| 難易度 | 探索回数制限 | 想定プレイスタイル |
|--------|------------|------------------|
| Easy | 15 回 | 十分な試行錯誤が可能 |
| Normal | 10 回 | 計画的な探索が必要 |
| Hard | 7 回 | 失敗が許されない |

**Sanctuary での拡張:**

- スキルツリーで「探索回数 +1」を解放可能
- 最大 +3 回まで拡張

---

## 3. 進行システムの全体像

### 3.1 成長の軸

ゲーム内の成長は**3 つの軸**で構成されます：

#### (1) 装備の成長（ラン内 + 恒久）

**特徴:**

- BaseCamp で強化・購入
- Dungeon に持ち込む
- 生還すれば持ち帰り、死亡すればロスト

**成長要素:**

- 装備レベル（Lv0-3）
- 装備品質（poor/normal/good/master）
- 装備の種類（Common → Legendary）

**リスク:**

- 高レベル装備を持ち込む → 死亡時のロスト大
- 低レベル装備で挑む → クリアが困難

#### (2) カードの成長（恒久）

**特徴:**

- カード自体はロストしない（図鑑に記録）
- 使用回数で熟練度が上がる
- 熟練度でカードが進化

**成長要素:**

- カード熟練度（Lv1-5）
- カード進化（新たな効果・分岐）

**保持:**

- カードの習得状態はロストしない
- デッキ構成は Library で保存

#### (3) 魂の残滓（経験値システム・恒久）

**特徴:**

- 魔物を倒すと魂を獲得
- 生還すれば累計に加算
- 死亡すればその探索分はゼロ

**成長要素:**

- Sanctuary でスキルツリー解放
- 基礎ステータス強化（HP/インベントリ容量）
- 特殊能力解放（実装検討中）

**経験値の計算:**

```typescript
獲得魂のレアリティ = 敵の強さ
経験値量（累計魂）= 獲得魂を換算
魔物の魂:（拡張可能）
- 雑魚（下位）: 小魂（=累計魂*10）
- 雑魚（中位）: 中魂（=累計魂*50）
- 雑魚（上位）: 大魂（=累計魂*100）
- 強敵（フロアボス）: 荘厳なる鬼魂（=累計魂*500）
- ボス（深層にいる邪神）: 荒ぶる神魂（=累計魂*1000）
```

**レベルアップ:**

```
累計魂  スキルポイント
0-99    0
100-299  1
300-599  2
600-999  3
1000+    4
...
```

---

### 3.2 ゲーム全体の流れ

#### フェーズ 1: 準備期（探索 1-3 回目）

**目標:** 基礎を固める

```
- Shopで初期装備を購入
- Blacksmithで装備を強化（Lv1程度）
- Libraryでデッキを構築
- 深度1-2を探索し、魂と熟練度を蓄積
```

#### フェーズ 2: 成長期（探索 4-7 回目）

**目標:** 戦力を強化

```
- 持ち帰ったGoldで装備をアップグレード
- Blacksmithで品質上昇（ガチャ）に挑戦
- Sanctuaryでスキルツリー解放
- 深度3-4に挑戦
- リスクとリターンを天秤にかける判断
```

#### フェーズ 3: 挑戦期（探索 8-10 回目）

**目標:** 深層到達

```
- 最高の装備とデッキで挑む
- 深度5（最深層）に到達
- 最後の探索は生還か全ロストか
- 探索回数制限ギリギリの緊張感
```

---

### 3.3 エンディング条件

**成功条件:**

```
探索回数制限内に深度5のボスを撃破し、生還
```

**失敗条件:**

```
探索回数を使い果たす（10回探索しても深度5に到達できず）
```

**評価:**

```
S: 探索5回以内でクリア
A: 探索7回以内でクリア
B: 探索10回以内でクリア
C: 探索回数超過（失敗）
```

---

## 4. 各システムの役割（再定義）

### 4.1 BaseCamp 施設の再定義

#### Guild（酒場）

**役割:** ゲームの起点

- キャラクター選択
- 探索回数の確認
- 現在の状況サマリー

#### Shop（取引所）

**役割:** 装備調達の中心

- 装備購入（Gold 消費）
- 装備売却（不要装備の換金）
- 魔石 →Gold 換金

**重要な変更:**

- 日替わりセールは削除（探索回数制限があるため）

#### Blacksmith（鍛冶屋）

**役割:** 装備の極限強化

- レベルアップ（Lv0-3）
- 品質上昇（ガチャ要素）
- 修理（AP 回復）
- 解体（魔石還元）

**戦略:**

- 高レベル装備はリスクが高いが強力
- 品質ガチャで最高品質を狙うか

#### Sanctuary（神殿）

**役割:** 魂の残滓による恒久強化

**大幅変更:**

```
旧: 死亡時に魂獲得 → 恒久強化（ローグライト）
新: 魔物撃破で魂獲得 → 生還で累計加算 → 恒久強化
```

**スキルツリー:**

- 基礎ステータス強化（HP/Gold）
- 探索回数 +1
- 特殊能力（鑑定/拡張）

#### Library（図書館）

**役割:** ビルド研究・記録管理

- デッキ編成
- 装備セット保存
- 図鑑（カード/装備/魔物）
- セーブ/ロード

#### Dungeon Gate（深淵の入口）

**役割:** 探索開始

- 深度選択
- 探索回数確認
- **転移石の選択（持ち帰り用）**

---

### 4.2 リソースエコノミーの再設計

#### Gold の流れ

```
【獲得】
1. 魔石・装備をbaseCamp内での売却

2. Dungeon探索 → イベント発生(未実装)
              ↓
         生還 → BaseCampに持ち帰り
              ↓
         死亡 → ゼロ（ロスト）

【消費】
BaseCamp:
- Shop: 装備購入
- Blacksmith: 強化・修理
```

#### 魔石の流れ

```
【獲得】
1. Dungeon探索 → 魔物ドロップ
              ↓
   イベント発生 → 魔石入手
              ↓
         生還 → BaseCampに持ち帰り
              ↓
         死亡 → ゼロに（ロスト）

【消費】
- Blacksmith: 装備強化
- Shop: Gold換金（緊急時）
```

#### 魂の残滓の流れ

```
【獲得】
Dungeon探索 → 魔物撃破 → 魂獲得（経験値的）
              ↓
         生還 → 累計に加算（恒久）
              ↓
         死亡 → その探索分はゼロ（ロスト）

【消費】
- Sanctuary: スキルツリー解放
```

**重要な設計:**

- 魂の残滓は「その探索で獲得した分」のみロスト
- 過去の探索で蓄積した累計はロストしない

---

## 5. 難易度設計の方針

### 5.1 難易度曲線

```
深度1: チュートリアル的な難易度
      雑魚敵のみ、装備なしでもクリア可能

深度2: 基礎装備が必要
      装備Lv0-1でクリア可能

深度3: 戦略が必要
      装備Lv1-2 + デッキ構成の最適化

深度4: 高難度
      装備Lv2-3 + 品質good以上推奨

深度5: 最高難度
      最高装備 + 最適デッキ + Sanctuary強化必須
```

### 5.2 死亡ペナルティのバランス

**設計目標:**

- 死亡は痛いが、致命的ではない
- 慎重なプレイを促す
- 生還のタイミングを戦略的に選ぶ

**調整ポイント:**

```
死亡ペナルティの重さ = 持ち込んだ装備の価値 + 獲得したリソース

序盤: 装備の価値が低い → ペナルティ小
中盤: 装備の価値が上がる → ペナルティ中
終盤: 最高装備を持ち込む → ペナルティ大
```

### 5.3 探索回数制限のバランス

**目標:**

- 慎重なプレイヤー: 7-8 回で深度 5 到達
- 平均的なプレイヤー: 9-10 回で深度 5 到達
- 無謀なプレイヤー: 探索回数超過（ゲームオーバー）

**調整方法:**

- Sanctuary で「探索回数 +1, +2, +3」を解放可能
- プレイテスト後にデフォルト回数を調整

---

## 6. プレイヤー体験の設計

### 6.1 目指すプレイ体験

**緊張感:**

- 「この装備を持ち込むべきか」
- 「もう一歩進むか、ここで帰るか」
- 「探索回数があと 2 回しかない」

**達成感:**

- 「無事に生還できた！」
- 「高レベル装備を持ち帰れた！」
- 「深度 5 に到達した！」

**戦略性:**

- 装備の選択
- 帰還のタイミング
- デッキ構成
- スキルツリーの選択

### 6.2 プレイヤーの選択肢

**探索前:**

```
[1] どの装備を持ち込むか
    - 高レベル装備（リスク大、リターン大）
    - 低レベル装備（リスク小、リターン小）

[2] どのデッキで挑むか
    - 攻撃特化
    - 防御重視
    - バランス型

[3] どの深度に挑むか
    - 深度1-2（安全、報酬少）
    - 深度3-4（危険、報酬中）
    - 深度5（最危険、報酬大）
```

**探索中:**

```
[1] 戦闘後の選択
    - 次の部屋へ進む
    - 転移石で帰還

[2] 装備が手に入った
    - 装備して続行（リスク増）
    - 持ち帰り優先で帰還

[3] HP残量の判断
    - まだ戦える → 深層へ
    - 危険水域 → 帰還
```

---

## 7. ゲームフロー全体図

```
┌─────────────────────────────────────────────┐
│  ゲーム開始                                  │
│  - 探索回数: 0 / 10                         │
│  - 魂の残滓: 0                               │
│  - Gold: 500                                 │
└──────────────┬──────────────────────────────┘
               ↓
┌─────────────────────────────────────────────┐
│  BaseCamp（準備）                            │
│  - Shop: 初期装備購入                        │
│  - Library: デッキ構築                       │
│  - Blacksmith: 装備強化                      │
│  - Sanctuary: スキルツリー（魂があれば）     │
└──────────────┬──────────────────────────────┘
               ↓
         Dungeon探索
               ↓
    ┌──────────┴──────────┐
    │                     │
  生還                  死亡
    │                     │
    ↓                     ↓
全て持ち帰り          全ロスト
    │                     │
    └──────────┬──────────┘
               ↓
         探索回数 +1
               ↓
     探索回数 < 10?
         │        │
        Yes       No
         │        ↓
         │    ゲームオーバー
         ↓    （探索回数超過）
    BaseCampに戻る
         ↓
    深度5クリア?
         │        │
        No        Yes
         │        ↓
         └──→  エンディング
               （成功）
```

---

## 8. 設計の優先順位

### 8.1 Phase 1（MVP）

**目標:** 基本ループの実装

```
□ BaseCamp基本機能（Guild/Shop/Blacksmith/sanctuary）
□ Dungeon探索（深度1-3）
□ 生還・死亡システム
□ 探索回数制限
□ 魂の残滓（経験値）システム
□ 基本的なSanctuaryスキルツリー
```

### 8.2 Phase 2（拡張）

**目標:** 戦略性の追加

```
□ Blacksmith品質ガチャ
□ Library図鑑・デッキ編成
□ カード熟練度システム
□ Sanctuaryスキルツリー拡張
□ 深度4-5の実装
```

### 8.3 Phase 3（完成）

**目標:** バランス調整と演出

```
□ 難易度調整
□ 探索回数制限の調整
□ 演出・アニメーション
□ UI/UX最適化
□ エンディング実装
```

---

## 9. 参照ドキュメント

```
GAME_DESIGN_MASTER_V2 [本文書]
├── BASE_CAMP_DESIGN_V2（要修正）
│   ├── GUILD_DESIGN_V2.1
│   ├── SHOP_DESIGN_V1（要修正）
│   ├── BLACKSMITH_DESIGN_V1
│   ├── SANCTUARY_DESIGN_V1（要大幅修正）
│   └── LIBRARY_DESIGN_V1
├── battle_logic.md
├── card_system.md
└── dungeon_system.md（要作成）
```

**次のステップ:**

1. BaseCamp 設計の修正（特に Sanctuary）
2. Dungeon 探索システムの詳細設計
3. 探索回数制限 UI の設計

---

## まとめ

### 新しいゲーム設計の核心

**ジャンル:**

> 持ち帰り型ダンジョン RPG × カードバトル

**コアメカニクス:**

> 生還 or 死亡の選択 + 探索回数制限

**3 つの成長軸:**

1. 装備の成長（リスク・リターン）
2. カードの成長（恒久）
3. 魂の残滓（経験値・恒久）

**プレイヤー体験:**

> 「もう一歩進むか、帰るか」のジレンマ
> 探索回数制限による緊張感
> 生還の達成感
