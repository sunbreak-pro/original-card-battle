/* =========================================
   Battle Hand Area
   =========================================
   Hand container, card wrappers, pile icons, controls.
   ========================================= */

/* =========================================
   Hand Container
   ========================================= */
@import "../../core/variables.css";
.hand-container {
  position: absolute;
  bottom: 2vh;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  align-items: flex-end;
  width: 65%;
  height: 30%;
  z-index: 100;
  padding-bottom: 2vh;
}

/* =========================================
   Card Wrapper (Fan Layout)
   ========================================= */
.card-wrapper {
  position: relative;
  width: 13vh;
  aspect-ratio: 2 / 3;
  margin-left: -2vh;
  transform-origin: center bottom;
  transform: translateY(var(--y)) rotate(var(--rot));
  transition: transform 0.2s cubic-bezier(0.33, 1, 0.68, 1), margin 0.2s;
  cursor: pointer;
  animation-fill-mode: both;
}

.card-wrapper:first-child {
  margin-left: 0;
}

/* Hover: lift and straighten card */
.card-wrapper:hover {
  z-index: 1000 !important;
  transform: translateY(-1vh) rotate(0deg) scale(1.2) !important;
  margin-left: 1vh;
  margin-right: 1vh;
}

/* Adjacent card shifts right */
.card-wrapper:hover + .card-wrapper {
  transform: translateX(4vh) translateY(var(--y)) rotate(var(--rot));
}

/* =========================================
   Card Base
   ========================================= */
.card {
  width: 125%;
  height: 125%;
  background: linear-gradient(145deg, var(--theme-primary) 0%, var(--theme-secondary) 50%, var(--theme-primary) 100%);
  border: 0.25vh solid #000;
  border-radius: 1vh;
  padding: 1vh;
  position: relative;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0.5vh 2vh rgba(0, 0, 0, 0.8), inset 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
}

.card.playable {
  border: 0.1vh solid #cfcfcf;
}

.card.unplayable {
  opacity: 0.6;
  filter: grayscale(0.5);
}

/* =========================================
   Card Elements
   ========================================= */
.card-cost {
  position: absolute;
  top: -1.2vh;
  left: -1.2vh;
  width: 3.5vh;
  height: 3.5vh;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 2.2vh;
  color: #ffffff;
  border: 0.3vh solid #000;
  box-shadow: 0 0 .3vh #000;
  z-index: 5;
}

.card-badge {
  position: absolute;
  top: 0.5vh;
  right: 0.5vh;
  padding: 0.3vh 0.6vh;
  border-radius: 0.5vh;
  font-size: 1.2vh;
  font-weight: bold;
  text-transform: uppercase;
  text-shadow: 0 0 0.5vh #000;
  box-shadow: 0 .2vw rgba(0, 0, 0, 0.5);
}

.card-name {
  font-size: 1.8vh;
  font-weight: bold;
  text-align: center;
  margin-top: 2.8vh;
  margin-bottom: 0.5vh;
  text-shadow: 0 0 .2vh;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: white;
  border: 0.2vh solid rgba(255, 255, 255, 0.3);
  border-radius: 10px;
}
.card-name.rarity-common {
  background-color: var(--color-rarity-common);
}
.card-name.rarity-uncommon {
  background-color: var(--color-rarity-uncommon);
}
.card-name.rarity-rare {
  background-color: var(--color-rarity-rare);
}
.card-name.rarity-epic {
  background-color: var(--color-rarity-epic);
}
.card-name.rarity-legendary {
  background-color: var(--color-rarity-legendary);
}

.card-desc-box {
  flex: 1;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 0.8vh;
  border: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-top: .5vh;
  padding: 0.5vh;
  overflow: hidden;
}

.card-desc-text {
  font-size: 1.43vh;
  text-align: center;
  line-height: 1.3;
  color: rgba(255, 255, 255, 0.9);
}

.card-power {
  margin-top: 0.5vh;
  font-size: 1.6vh;
  font-weight: bold;
  color: #f9ed7f;
}

/* =========================================
   Mastery Info
   ========================================= */
.mastery-info {
  margin-top: auto;
}

.mastery-labels {
  display: flex;
  justify-content: space-between;
  font-size: 1.2vh;
  margin-bottom: 0.2vh;
}

.mastery-bar-bg {
  width: 100%;
  height: 0.6vh;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 0.3vh;
  overflow: hidden;
}

.mastery-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--theme-secondary), var(--theme-accent));
}

/* =========================================
   Depth Dots
   ========================================= */
.depth-dots {
  display: flex;
  justify-content: center;
  gap: 0.4vh;
  margin-top: 0.5vh;
}

.depth-dot {
  width: 1vh;
  height: 1vh;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.3);
  background: rgba(0, 0, 0, 0.5);
}

.depth-dot.active {
  background: var(--theme-accent);
  box-shadow: 0 0 0.5vh var(--theme-glow);
  border-color: white;
}

/* =========================================
   Pile Icons (Draw/Discard)
   ========================================= */
.pile-icon {
  position: absolute;
  bottom: 4vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1vh;
  cursor: pointer;
  transition: transform 0.2s;
  z-index: 50;
  font-size: 2.3vh;
  font-weight: bold;
}

.pile-icon:hover {
  transform: scale(1.1);
}

.pile-icon.draw {
  right: 3vw;
}

.pile-icon.discard {
  left: 3vw;
}

.pile-visual {
  width: 7vh;
  height: 9.5vh;
  background: linear-gradient(135deg, var(--theme-primary), var(--theme-secondary));
  border: 0.3vh solid var(--theme-accent);
  border-radius: 1vh;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 4vh;
  box-shadow: 0 0.5vh 1.5vh rgba(0, 0, 0, 0.6);
}

.pile-visual:hover {
  border-color: var(--theme-bg);
  background: linear-gradient(135deg, var(--theme-hover));
}

.pile-count {
  font-size: 2vh;
  font-weight: bold;
  text-shadow: 0 0 0.5vh var(--theme-glow);
}

/* =========================================
   Energy Display
   ========================================= */
.energy-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1vh 1vw;
  border: 0.2vh solid var(--theme-accent);
  border-radius: 1vh;
  font-size: 2vh;
  font-weight: bold;
  background: rgba(0, 0, 0, 0.6);
  z-index: 50;
}

.energy-label {
  font-size: 1.5vh;
  margin-bottom: 0.5vh;
}

/* =========================================
   End Turn Button
   ========================================= */
.end-turn-btn {
  position: absolute;
  right: 2vw;
  bottom: 25vh;
  padding: 1.5vh 2vw;
  border-radius: 1vh;
  background: linear-gradient(135deg, var(--theme-secondary), var(--theme-accent));
  border: 0.3vh solid var(--theme-accent);
  color: white;
  font-size: 2vh;
  font-weight: bold;
  cursor: pointer;
  z-index: 50;
  transition: all 0.2s;
}

.end-turn-btn:hover {
  transform: translateY(-0.5vh);
  box-shadow: 0 0 2vh var(--theme-glow);
  background: linear-gradient(135deg, var(--theme-hover));
}

/* =========================================
   Draw/Discard Animations
   ========================================= */
.card-wrapper.drawing {
  pointer-events: none;
  z-index: 1000;
  animation: cardDrawIn 0.8s cubic-bezier(0, 0, 0.9, 1) both;
}

.card-wrapper.discarding {
  pointer-events: none;
  z-index: 1000;
  animation: discardToPile 0.6s cubic-bezier(0.8, -0.38, 0.035, 0.025) forwards;
}
