*{margin:0;padding:0;box-sizing:border-box}:root{font-family:var(--font-primary, "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif);line-height:var(--line-height-base, 1.5);font-weight:var(--font-weight-normal, 400);color-scheme:dark;color:var(--color-text-primary, rgba(255, 255, 255, .87));background-color:var(--color-bg-dark, #0a0a0a);font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{margin:0;padding:0;width:100vw;height:100vh;overflow:hidden;background:var(--color-bg-dark, #0a0a0a)}#root{width:100%;height:100%;display:flex;justify-content:center;align-items:center}button{font-family:inherit;cursor:pointer;transition:var(--transition-fast, all .2s ease)}button:disabled{cursor:not-allowed;opacity:.5}::-webkit-scrollbar{width:.5vw}::-webkit-scrollbar-track{background:#1a141080;border-radius:var(--radius-sm, 4px)}::-webkit-scrollbar-thumb{background:#8a629e4d;border-radius:var(--radius-sm, 4px)}::-webkit-scrollbar-thumb:hover{background:#8a629e80}.battle-screen{width:100vw;height:100vh;background-image:url(/assets/images/depth_1_background.png);background-size:cover;background-position:center;background-repeat:no-repeat;border-radius:1vh;box-shadow:inset 0 0 6vh #00000080;position:relative;display:flex;flex-direction:column;padding:0 1.5vh 1.5vh 1.5vw;gap:1.5vh;overflow:hidden;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;box-sizing:border-box}.battle-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:.8vh;z-index:10;background:#99999980;padding:0 0 0 1.5vh;border-radius:.8vh}.depth-info{font-size:1.8vh;font-weight:700;text-transform:uppercase;letter-spacing:.15vw}.battle-field{position:absolute;top:10vh;left:5vw;display:flex;flex-direction:row;justify-content:space-around;align-items:flex-end;width:90vw;height:51vh;margin:0}.player-section{display:flex;flex-direction:row;align-items:flex-end;justify-content:center;gap:4vh;width:30vw;height:100%}.player-field{flex:.75;gap:1.5vh;align-items:center;display:flex;flex-direction:column}.energy-and-ability{flex:.25;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2vh}.character-name{font-size:3vh;font-weight:700;text-shadow:0 0 1vh var(--theme-glow)}.character-visual{width:20vh;height:20vh;border-radius:1.5vh;position:relative;display:flex;align-items:center;justify-content:center;font-size:10vh}.character-visual img{width:100%;height:100%;object-fit:contain;border-radius:1.5vh}.enemy-image{filter:drop-shadow(0 0 1vh rgb(193,55,55))}.player-image{filter:drop-shadow(0 0 1vh rgb(48,115,191))}.turn-message-slide{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:4vh 6vw;width:40vw;z-index:1000;background:#000000e6;border:.4vh solid var(--theme-accent);border-radius:2vh;box-shadow:0 0 6vh var(--theme-glow),inset 0 0 3vh #000c;animation:turnMessageAppear 2.5s ease-in-out forwards;pointer-events:none}.turn-message-text{font-size:5vh;font-weight:700;color:var(--theme-accent);text-shadow:0 0 2vh var(--theme-glow);text-align:center;letter-spacing:.5vw}.status-container{position:relative;width:100%;display:flex;flex-direction:column;gap:1vh}.status-bar-row{display:flex;align-items:center;width:100%;height:2.5vh}.hp-value{display:flex;justify-content:center;position:absolute;top:0;left:50%;transform:translate(-50%);z-index:100;font-size:1.4vh;font-weight:700;color:#000;text-shadow:0 0 .5vh rgba(255,100,100,.8);margin-bottom:.2vh}.value-badge{width:5vh;height:120%;display:flex;justify-content:center;align-items:center;font-size:1.1vh;font-weight:700;border-radius:.5vh;color:#fff;text-shadow:0 0 .3vh #000;white-space:nowrap;margin-right:.5vh;transition:background-color .2s ease,box-shadow .2s ease}.value-badge.ap-badge{background:linear-gradient(135deg,gray,#606060);border:.2vh solid #999}.value-badge.guard-badge{background:linear-gradient(135deg,#48c,#36a);border:.1vh solid #66aaff}.value-badge.energy-badge{background:linear-gradient(135deg,#2b9f0e,#1d7a09);border:.1vh solid #3cb82a}.value-badge.consuming{animation:energyConsume .6s ease-out}.break-badge{width:5vh;height:120%;display:flex;align-items:center;justify-content:center;background-color:red;color:#fff;border-radius:.5vh;animation:breakFlash 1.8s infinite;margin-right:.5vh;font-size:1.2vh}.Armor-border{flex:1;position:relative;height:120%;background:#00000080;border:.5vh solid rgba(255,255,255,.2);border-radius:.5vh;overflow:hidden}.unified-bar-container{flex:1;position:relative;height:100%;background:#00000080;border:.15vh solid rgba(255,255,255,.2);border-radius:.5vh;overflow:hidden}.bar-fill{position:absolute;top:0;left:0;z-index:1;height:100%;transition:width .3s ease}.bar-fill.hp-fill{background:linear-gradient(90deg,#d94a4a,#ff6b6b);box-shadow:inset 0 0 .5vh #fff3}.bar-fill.ap-overlay{z-index:2;opacity:.75;height:100%;background:linear-gradient(90deg,gray,#a0a0a0)}.bar-fill.guard-fill{background:linear-gradient(90deg,#48c,#69f)}.bar-fill.energy-fill{background:linear-gradient(90deg,#3cb82a,#1d7a09);box-shadow:0 0 .5vh #1d7a09}.energy-bar-container{flex:1;position:relative;height:80%;display:flex;align-items:center;border:.2vh solid rgba(255,255,255,.2);border-radius:.8vh;overflow:hidden}.energy-bar-fill{height:100%;background:linear-gradient(90deg,var(--theme-secondary) 0%,var(--theme-accent) 100%);box-shadow:0 0 .5vh var(--theme-glow);transition:width .3s ease}.energy-value{flex:.15;position:relative;display:flex;justify-content:center;align-items:center;font-size:1.1vh;font-weight:700;border-radius:20%;background-color:#2b9f0e;color:#fff;text-shadow:0 0 .3vh #000;white-space:nowrap;height:100%;margin-right:.6vh;transition:background-color .3s ease}.hand-container{position:absolute;bottom:0;left:0;display:flex;justify-content:space-between;align-items:flex-end;width:100%;height:25vh;z-index:100;padding:1.5vh 0;background:radial-gradient(ellipse at 50% 100%,rgba(73,196,73,.25) 0%,transparent 50%),radial-gradient(ellipse at 75% 80%,rgba(73,196,73,.15) 0%,transparent 40%),radial-gradient(ellipse at 25% 80%,rgba(98,106,98,.2) 0%,transparent 40%),linear-gradient(to bottom,#4848484d,#48484880);border-radius:8vh 8vh 0 0;border:.2vh solid rgba(173,173,173,.5);border-bottom:none;box-sizing:border-box}.pile-section{display:flex;flex-direction:row;justify-content:space-around;align-items:center;height:100%;width:16vw;padding:.8vh .8vw}.card-container{display:flex;justify-content:center;align-items:flex-end;flex:1;height:100%;padding:0;gap:-2vh;margin-right:10vh}.button-frame{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:13vw;padding:1.5vh .8vw;gap:1.5vh}.action-btn{width:100%;max-width:12vw;height:4vh;border-radius:1vh;border:.25vh solid;color:#fff;font-size:1.5vh;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 .3vh .6vh #0006;margin-right:10vh}.action-btn:hover{transform:translateY(-.3vh);box-shadow:0 .6vh 1.2vh #00000080}.end-phase-btn{background:linear-gradient(180deg,#424242 19%,#9e9d9d 88%);border-color:#666}.end-phase-btn:hover{background:linear-gradient(180deg,#525252 19%,#aeadad 88%)}.use-item-btn{background:linear-gradient(180deg,#2c8f30,#73ff5c);border-color:#2c8f30}.use-item-btn:hover{background:linear-gradient(180deg,#3ca040,#83ff6c)}.flee-btn{background:linear-gradient(180deg,#7b1a1a,#ff665c);border-color:#7b1a1a}.flee-btn:hover{background:linear-gradient(180deg,#8b2a2a,#ff766c)}.card-wrapper{position:relative;width:11vh;aspect-ratio:2 / 3;margin-left:-1.5vh;transform-origin:center bottom;transform:translateY(var(--y)) rotate(var(--rot));transition:transform .15s ease-out;cursor:pointer;animation-fill-mode:both;will-change:transform}.card-wrapper:first-child{margin-left:0}.card-wrapper:hover{z-index:1000!important;transform:translate(1vh) translateY(-1vh) rotate(0) scale(1.15)!important}.card-wrapper:hover+.card-wrapper{transform:translate(2vh) translateY(var(--y)) rotate(var(--rot))}.card{width:125%;height:125%;border:.25vh solid #000;border-radius:1vh;padding:1vh;position:relative;display:flex;flex-direction:column;box-shadow:0 .5vh 2vh #000c,inset 0 .5vh 1vh #0000004d}.card.playable{border:.1vh solid #cfcfcf}.card.unplayable{opacity:.6;filter:grayscale(.5)}.card-cost{position:absolute;top:-1.2vh;left:-1.2vh;width:3.5vh;height:3.5vh;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:2.2vh;color:#fff;border:.3vh solid #000;box-shadow:0 0 .3vh #000;z-index:5}.card-badge{position:absolute;top:.5vh;right:.5vh;padding:.3vh .6vh;border-radius:.5vh;font-size:1.2vh;font-weight:700;text-transform:uppercase;text-shadow:0 0 .5vh #000;box-shadow:0 .2vw #00000080}.card-name{font-size:1.8vh;font-weight:700;text-align:center;margin-top:2.8vh;margin-bottom:.5vh;text-shadow:0 0 .2vh;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff;border:.2vh solid rgba(255,255,255,.3);border-radius:10px}.card-name.mastery-0{background-color:var(--color-mastery-0)}.card-name.mastery-1{background-color:var(--color-mastery-1)}.card-name.mastery-2{background-color:var(--color-mastery-2)}.card-name.mastery-3{background-color:var(--color-mastery-3)}.card-desc-box{flex:1;background:#0006;border-radius:.8vh;border:1px solid rgba(255,255,255,.1);display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:.5vh;padding:.5vh;overflow:hidden}.card-desc-text{font-size:1.43vh;text-align:center;line-height:1.3;color:#ffffffe6}.card-power{margin-top:.5vh;font-size:1.6vh;font-weight:700;color:#f9ed7f}.mastery-info{margin-top:auto}.mastery-labels{display:flex;justify-content:space-between;font-size:1.2vh;margin-bottom:.2vh}.pile-icon{display:flex;flex-direction:column;align-items:center;gap:.6vh;cursor:pointer;transition:transform .2s;font-size:1.6vh;font-weight:700}.pile-icon:hover{transform:scale(1.1)}.pile-visual{width:5vh;height:6.5vh;background:linear-gradient(135deg,#4a3a6a,#2a1a4a);border:.25vh solid #9B7ED9;border-radius:.8vh;display:flex;align-items:center;justify-content:center;font-size:2.8vh;box-shadow:0 .4vh 1.2vh #0009}.pile-visual:hover{border-color:#b89ee9;background:linear-gradient(135deg,#5a4a7a,#3a2a5a)}.pile-count{font-size:1.4vh;font-weight:700;color:#fff}.energy-display{display:flex;flex-direction:column;align-items:center;padding:1vh 1vw;border-radius:1vh;font-size:2vh;font-weight:700;background:#0009;z-index:50}.energy-label{font-size:1.5vh;margin-bottom:.5vh}.card-wrapper.drawing{pointer-events:none;z-index:1000;animation:cardDrawIn .8s cubic-bezier(0,0,.9,1) both}.card-wrapper.discarding{pointer-events:none;z-index:1000;animation:discardToPile .6s cubic-bezier(.8,-.38,.035,.025) forwards}.enemy-section{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;width:20vw;height:26vw}.enemy-img{width:100%;object-fit:contain}.enemy-layout-double .enemy-row{display:flex;gap:3vw;justify-content:center;align-items:flex-end}.enemy-layout-triple{justify-content:center}.enemy-layout-triple .enemy-row.front-row{display:flex;gap:4vh;justify-content:space-between;align-items:flex-end;width:100%}.enemy-layout-triple .enemy-row-top{display:flex;justify-content:center}.enemy-layout-triple .enemy-row-bottom{display:flex;gap:4vw;justify-content:center}.enemy-name-row{display:flex;align-items:center;justify-content:center;gap:.8vh;margin-bottom:.5vh}.action-icon-wrapper{position:relative;cursor:pointer}.action-icon{display:flex;align-items:center;justify-content:center;width:3vh;height:3vh;font-size:2vh;border-radius:.4vh;background:#00000080;border:.15vh solid rgba(255,255,255,.3);transition:all .2s ease}.action-icon:hover{transform:scale(1.1)}.action-icon-attack{border-color:#e24051;background:#ff00194d}.action-icon-guard{border-color:#6599ce;background:#4488cc4d}.action-icon-debuff{border-color:#a457cb;background:#a852d34d}.action-icon-special{border-color:#fa0;background:#ffaa004d}.tooltip-energy{font-size:1.2vh;color:#aaa}.next-action{margin-top:1vh;text-align:center}.action-value{font-size:2.5vh;color:#d94a4a;font-weight:700}.next-action-tooltip{position:absolute;top:-2vh;left:50%;transform:translate(-50%) translateY(-100%);background:#000000f2;border:.2vh solid var(--theme-accent);border-radius:1vh;padding:1vh 1.5vw;z-index:1000;min-width:12vw;box-shadow:0 0 2vh var(--theme-glow);animation:tooltipFadeIn .2s ease-out}.tooltip-header{font-size:1.4vh;color:#888;margin-bottom:.5vh;text-align:center}.tooltip-action-name{font-size:2vh;font-weight:700;color:var(--theme-accent);text-align:center;margin-bottom:.5vh}.tooltip-damage{display:flex;align-items:center;justify-content:center;gap:.5vw;font-size:1.8vh;color:#ff6b6b}.damage-icon{font-size:1.6vh}.damage-value{font-weight:700}.hit-count{font-size:1.4vh;color:#fa4}.tooltip-guard{display:flex;align-items:center;justify-content:center;gap:.5vw;font-size:1.8vh;color:#6bafff}.guard-icon{font-size:1.6vh}.guard-value{font-weight:700}.tooltip-debuffs{display:flex;gap:.5vw;justify-content:center;flex-wrap:wrap;margin-top:.5vh}.debuff-tag{font-size:1.2vh;padding:.2vh .5vw;background:#ff64644d;border:1px solid #ff6464;border-radius:.3vh;color:#ff6464}.energy-consuming{animation:energyConsume .6s ease-out}@keyframes energyConsume{0%{box-shadow:0 0 .5vh #fa0c}50%{box-shadow:0 0 1.5vh #ff6400}to{box-shadow:none}}.enemy-energy .bar-fill.energy-fill{background:linear-gradient(90deg,#c80,#fa0);box-shadow:0 0 .5vh #ffaa0080}.enemy-energy .value-badge.energy-badge{background:linear-gradient(135deg,#c80,#a60);border:.1vh solid #ffaa00}.enemy-status{width:100%;display:flex;flex-direction:column;gap:.3vh}.enemy-status .status-bar-row{height:1.8vh}.enemy-status .bar-value-top{font-size:1.2vh}.enemy-status .value-badge{min-width:3.5vh;font-size:.9vh}.enemy-energy .energy-bar-fill{background:linear-gradient(90deg,#c80,#fa0);box-shadow:0 0 .5vh #ffaa0080;transition:width .5s cubic-bezier(.4,0,.2,1)}.enemy-energy .energy-label{color:#fa0;text-shadow:0 0 .5vh rgba(255,170,0,.5)}.enemy-energy .energy-value{transition:all .3s ease}.enemy-energy .energy-value.consuming{animation:energyConsume .6s ease-out}.sword-energy-display{display:flex;flex-direction:column;align-items:center;text-align:center;gap:.8vh;padding:1.2vh .8vw;border:.25vh solid #dcdcdc;border-radius:.8vh;background:#fdbebe99;z-index:50;min-width:8vw;width:10vw;height:auto}.sword-energy-label{font-size:1.5vh;font-weight:700;color:#ff9f66;text-shadow:0 0 .4vh #ff6b35;margin:.15vh}.sword-energy-bar-container{display:flex;align-items:center;gap:1vw;width:100%}.sword-energy-bar{flex:1;height:2vh;background:#0009;border:.15vh solid #ff6b35;border-radius:.4vh;position:relative;overflow:hidden}.sword-energy-bonus{font-size:1.4vh;font-weight:700;color:#ffcc80;text-shadow:0 0 .5vh #ff6b35;white-space:nowrap}.sword-energy-fill{height:100%;background:linear-gradient(90deg,#ff6b35,#ff9f66,#ffcc80);transition:width .3s ease,background .5s ease,box-shadow .5s ease;box-shadow:0 0 1vh #ff6b35;position:relative}.sword-energy-fill.level-mid{background:linear-gradient(90deg,#ff9f66,gold,#ffcc80);box-shadow:0 0 1.5vh #ffd70099}.sword-energy-fill.level-high{background:linear-gradient(90deg,gold,#ff8c00,#ff4500);box-shadow:0 0 2vh #ff4500b3}.sword-energy-fill.level-max{background:linear-gradient(90deg,#ff4500,red,#f60);box-shadow:0 0 2.5vh #f00c;animation:swordEnergyMaxPulse 1s ease-in-out infinite}.sword-energy-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.5vh;font-weight:700;color:#fff;text-shadow:0 0 .5vh black}.sword-energy-effects{display:flex;gap:.5vw;flex-wrap:wrap;justify-content:center}.effect-badge{font-size:1vh;padding:.25vh .5vw;border-radius:.25vh;font-weight:700;transition:all .3s ease}.effect-badge.inactive{background:#64646433;border:1px solid rgba(150,150,150,.4);color:#96969699}.effect-badge.crit.active{background:#ffd7004d;border:1px solid #ffd700;color:gold;box-shadow:0 0 .8vh #ffd70066}.effect-badge.pierce.active{background:#64c8ff4d;border:1px solid #64c8ff;color:#64c8ff;box-shadow:0 0 .8vh #64c8ff66}.effect-badge.max.active{background:#ff323266;border:1px solid #ff3232;color:#ff3232;animation:maxEnergyPulse .5s ease-in-out infinite alternate}.turn-order-indicator{display:flex;align-items:center;gap:.8vh;background:linear-gradient(90deg,#000,#414040 78%,#797878);opacity:.81;border-radius:1vh;padding:1.2vh 2.4vw;box-shadow:0 .3vh 1vh #0006;height:100%}.phase-icon-diamond{width:2.6vh;height:2.6vh;transform:rotate(-45deg);border-radius:.6vh;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.phase-icon-diamond.player{background:#48c;border:2px solid #66aaff}.phase-icon-diamond.player.active{box-shadow:0 0 1.2vh #48cc;transform:rotate(-45deg) scale(1.15)}.phase-icon-diamond.enemy{background:#fff;border:1px solid #ff6666}.phase-icon-diamond.enemy.active{box-shadow:0 0 1.2vh #f669;transform:rotate(-45deg) scale(1.15)}.icon-letter{transform:rotate(45deg);font-size:1.6vh;font-weight:700}.phase-icon-diamond.player .icon-letter{color:#fff;text-shadow:0 0 .3vh rgba(0,0,0,.5)}.phase-icon-diamond.enemy .icon-letter{color:#f66}.phase-arrow{font-size:1.6vh;color:#888;margin:0 .3vh}.phase-icon{width:3vh;height:3vh;display:flex;align-items:center;justify-content:center;border-radius:50%;border:.2vh solid rgba(255,255,255,.3);background:#ffffff1a;transition:all .3s ease}.phase-icon.active{border-color:#000;box-shadow:0 0 1vh gray;transform:scale(1.3)}.phase-icon.player-icon{background:#4a9d6d4d;border-color:#4a9d6d}.phase-icon.player-icon.active{background:#4a9d6d99;box-shadow:0 0 1vh #4a9d6dcc}.phase-icon.enemy-icon{background:#dc35454d;border-color:#dc3545}.phase-icon.enemy-icon.active{background:#dc354599;box-shadow:0 0 1vh #dc3545cc}.icon-placeholder{font-size:1.4vh;font-weight:700;color:#fff;text-shadow:0 0 .3vh rgba(0,0,0,.5)}.indicator-header{text-align:center;font-size:14px;font-weight:700;color:#fff;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.speed-comparison{display:flex;align-items:center;justify-content:space-between;gap:12px}.actor-info{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px;border-radius:6px;transition:all .3s ease}.first-actor{background:#4a9d6d4d;border:2px solid #4a9d6d;box-shadow:0 0 10px #4a9d6d80}.second-actor{background:#ffffff0d;border:2px solid rgba(255,255,255,.2)}.actor-name{font-size:12px;font-weight:600;color:#ccc;text-transform:uppercase}.speed-value{font-size:20px;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.5)}.first-actor .speed-value{color:#4a9d6d}.speed-bonus{display:flex;align-items:center;gap:4px;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600;margin-top:4px}.player-bonus{background:#4a9d6d66;color:#4a9d6d;border:1px solid #4a9d6d}.enemy-bonus{background:#dc354566;color:#dc3545;border:1px solid #dc3545}.bonus-icon{font-size:14px}.bonus-name{font-weight:700}.first-indicator{font-size:10px;font-weight:700;color:#4a9d6d;background:#4a9d6d33;padding:2px 8px;border-radius:3px;margin-top:4px;text-transform:uppercase}.vs-divider{display:flex;align-items:center;justify-content:center;font-size:18px;color:#ffffff80}.vs-icon{animation:pulse 2s ease-in-out infinite}@keyframes pulse{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}}@media(max-width:768px){.turn-order-indicator{min-width:240px;padding:10px}.speed-value{font-size:18px}.bonus-name{font-size:10px}}.victory-screen{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#0a1a0a,#1a2a1a,#0a1a0a);display:flex;align-items:center;justify-content:center;overflow:hidden;z-index:10000;animation:victoryFadeIn .8s ease-out}@keyframes victoryFadeIn{0%{opacity:0}to{opacity:1}}.victory-bg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}.victory-particles{position:absolute;width:100%;height:100%;background-image:radial-gradient(3px 3px at 20% 30%,rgba(212,175,55,.8),transparent),radial-gradient(3px 3px at 60% 70%,rgba(212,175,55,.6),transparent),radial-gradient(2px 2px at 50% 50%,rgba(255,215,0,.4),transparent),radial-gradient(2px 2px at 80% 10%,rgba(212,175,55,.5),transparent),radial-gradient(3px 3px at 90% 60%,rgba(255,215,0,.7),transparent);background-size:200% 200%;animation:particlesFloat 15s ease-in-out infinite}@keyframes particlesFloat{0%,to{transform:translate(0);opacity:.6}25%{transform:translate(10px,-10px);opacity:1}50%{transform:translate(-10px,10px);opacity:.6}75%{transform:translate(10px,10px);opacity:1}}.victory-glow{position:absolute;top:50%;left:50%;width:80%;height:80%;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(212,175,55,.3) 0%,transparent 70%);animation:glowPulse 3s ease-in-out infinite}@keyframes glowPulse{0%,to{opacity:.4;transform:translate(-50%,-50%) scale(1)}50%{opacity:.8;transform:translate(-50%,-50%) scale(1.1)}}.victory-content{position:relative;z-index:10;max-width:900px;width:90%;display:flex;flex-direction:column;align-items:center;gap:3rem;padding:2rem}.victory-title{text-align:center;animation:titleSlideDown 1s cubic-bezier(.34,1.56,.64,1)}@keyframes titleSlideDown{0%{transform:translateY(-100px);opacity:0}to{transform:translateY(0);opacity:1}}.victory-text{font-size:6rem;font-weight:700;color:#d4af37;text-shadow:0 0 30px rgba(212,175,55,.8),0 0 60px rgba(212,175,55,.5),0 4px 8px rgba(0,0,0,.8);letter-spacing:.5rem;margin:0;animation:textGlow 2s ease-in-out infinite}@keyframes textGlow{0%,to{text-shadow:0 0 30px rgba(212,175,55,.8),0 0 60px rgba(212,175,55,.5),0 4px 8px rgba(0,0,0,.8)}50%{text-shadow:0 0 40px rgba(212,175,55,1),0 0 80px rgba(212,175,55,.7),0 4px 8px rgba(0,0,0,.8)}}.victory-subtitle{font-size:1.5rem;color:#d4af37cc;margin-top:1rem;font-style:italic;letter-spacing:.2rem}.battle-stats{display:flex;gap:2rem;opacity:0;transform:translateY(30px);transition:all .6s ease-out}.battle-stats.show{opacity:1;transform:translateY(0)}.stat-card{background:linear-gradient(135deg,#1a2a1acc,#2a3e2acc);border:2px solid rgba(212,175,55,.5);border-radius:12px;padding:1.5rem 2rem;display:flex;flex-direction:column;align-items:center;gap:.5rem;min-width:150px;box-shadow:0 8px 24px #0009,0 0 20px #d4af3733;transition:all .3s ease}.stat-card:hover{transform:translateY(-5px);border-color:#d4af37cc;box-shadow:0 12px 32px #000c,0 0 30px #d4af374d}.stat-icon{font-size:2.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.6))}.stat-value{font-size:2rem;font-weight:700;color:#d4af37;text-shadow:0 2px 4px rgba(0,0,0,.8)}.stat-label{font-size:.9rem;color:#ffffffb3;text-transform:uppercase;letter-spacing:.1rem}.rewards-section{width:100%;opacity:0;transform:translateY(30px);transition:all .8s ease-out .3s}.rewards-section.show{opacity:1;transform:translateY(0)}.rewards-title{font-size:2.5rem;font-weight:700;color:#d4af37;text-align:center;margin-bottom:2rem;text-shadow:0 0 20px rgba(212,175,55,.6)}.rewards-grid{display:flex;gap:2rem;justify-content:center;margin-bottom:2rem}.reward-item{background:linear-gradient(135deg,#1a2a1ae6,#2a3e2ae6);border:2px solid rgba(212,175,55,.5);border-radius:12px;padding:2rem 3rem;display:flex;flex-direction:column;align-items:center;gap:1rem;box-shadow:0 8px 24px #0009;animation:rewardPop .6s cubic-bezier(.34,1.56,.64,1)}@keyframes rewardPop{0%{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}.reward-item.souls{animation-delay:.2s;border-color:#a855f799}.reward-item.souls:hover{border-color:#a855f7;box-shadow:0 12px 32px #a855f74d}.reward-item.magic-stones{animation-delay:.4s;border-color:#60a5fa99}.reward-item.magic-stones:hover{border-color:#60a5fa;box-shadow:0 12px 32px #60a5fa4d}.reward-detail{font-size:.9rem;color:#fff9;margin-top:.25rem}.reward-icon{font-size:3rem;filter:drop-shadow(0 4px 8px rgba(0,0,0,.6))}.reward-amount{font-size:1.5rem;font-weight:700;color:#d4af37;text-shadow:0 2px 4px rgba(0,0,0,.8)}.card-rewards{margin-top:2rem}.card-rewards-title{font-size:1.5rem;color:#d4af37;text-align:center;margin-bottom:1rem}.card-rewards-list{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.reward-card{background:linear-gradient(135deg,#2a3e2ae6,#1a2a1ae6);border:2px solid rgba(212,175,55,.6);border-radius:8px;padding:1rem 1.5rem;display:flex;flex-direction:column;align-items:center;gap:.5rem;min-width:120px;box-shadow:0 4px 12px #0009;animation:cardSlideIn .5s ease-out backwards}@keyframes cardSlideIn{0%{transform:translate(-50px);opacity:0}to{transform:translate(0);opacity:1}}.reward-card-name{font-size:1rem;font-weight:700;color:#fff;text-align:center}.reward-card-rarity{font-size:.8rem;color:#ffffffb3;text-transform:uppercase;letter-spacing:.1rem}.continue-button{padding:1.5rem 4rem;background:linear-gradient(135deg,#2a4a2a,#4a7a4a);border:3px solid #d4af37;border-radius:12px;color:#fff;font-size:1.5rem;font-weight:700;text-transform:uppercase;letter-spacing:.2rem;cursor:pointer;box-shadow:0 8px 24px #0009,0 0 30px #d4af374d;transition:all .3s ease;opacity:0;transform:scale(.9)}.continue-button.show{opacity:1;transform:scale(1);transition:all .6s ease-out .8s}.continue-button:hover{background:linear-gradient(135deg,#3a5a3a,#5a8a5a);border-color:gold;transform:scale(1.05);box-shadow:0 12px 32px #000c,0 0 40px #d4af3780}.continue-button:active{transform:scale(.98);box-shadow:0 4px 16px #0009}@media(max-width:768px){.victory-text{font-size:4rem}.battle-stats,.rewards-grid{flex-direction:column;gap:1rem}.continue-button{padding:1rem 3rem;font-size:1.2rem}}.defeat-screen{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#1a0a0a,#2a0a0a,#1a0a0a);display:flex;align-items:center;justify-content:center;overflow:hidden;z-index:10000;animation:defeatFadeIn 1s ease-out}@keyframes defeatFadeIn{0%{opacity:0}to{opacity:1}}.defeat-bg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}.defeat-particles{position:absolute;width:100%;height:100%;background-image:radial-gradient(2px 2px at 20% 30%,rgba(139,0,0,.6),transparent),radial-gradient(2px 2px at 60% 70%,rgba(139,0,0,.4),transparent),radial-gradient(1px 1px at 50% 50%,rgba(178,34,34,.3),transparent),radial-gradient(1px 1px at 80% 10%,rgba(139,0,0,.5),transparent),radial-gradient(2px 2px at 90% 60%,rgba(178,34,34,.6),transparent);background-size:200% 200%;animation:defeatParticlesDrift 20s ease-in-out infinite}@keyframes defeatParticlesDrift{0%,to{transform:translate(0);opacity:.5}33%{transform:translate(-15px,15px);opacity:.8}66%{transform:translate(15px,-15px);opacity:.5}}.defeat-glow{position:absolute;top:50%;left:50%;width:80%;height:80%;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(139,0,0,.25) 0%,transparent 70%);animation:defeatGlowPulse 4s ease-in-out infinite}@keyframes defeatGlowPulse{0%,to{opacity:.3;transform:translate(-50%,-50%) scale(1)}50%{opacity:.6;transform:translate(-50%,-50%) scale(1.15)}}.defeat-content{position:relative;z-index:10;max-width:900px;width:90%;display:flex;flex-direction:column;align-items:center;gap:3rem;padding:2rem}.defeat-title{text-align:center;animation:defeatTitleShake 1.5s cubic-bezier(.36,.07,.19,.97)}@keyframes defeatTitleShake{0%,to{transform:translate(0) translateY(0)}10%,30%,50%,70%,90%{transform:translate(-10px) translateY(5px)}20%,40%,60%,80%{transform:translate(10px) translateY(-5px)}}.defeat-text{font-size:6rem;font-weight:700;color:#8b0000;text-shadow:0 0 30px rgba(139,0,0,.8),0 0 60px rgba(139,0,0,.5),0 4px 8px rgba(0,0,0,.9);letter-spacing:.5rem;margin:0;animation:defeatTextFlicker 3s ease-in-out infinite}@keyframes defeatTextFlicker{0%,to{opacity:1;text-shadow:0 0 30px rgba(139,0,0,.8),0 0 60px rgba(139,0,0,.5),0 4px 8px rgba(0,0,0,.9)}50%{opacity:.8;text-shadow:0 0 20px rgba(139,0,0,.6),0 0 40px rgba(139,0,0,.3),0 4px 8px rgba(0,0,0,.9)}}.defeat-subtitle{font-size:1.5rem;color:#b22222cc;margin-top:1rem;font-style:italic;letter-spacing:.2rem}.defeat-stats{display:flex;gap:2rem;opacity:0;transform:translateY(30px);transition:all .6s ease-out}.defeat-stats.show{opacity:1;transform:translateY(0)}.defeat-stat-card{background:linear-gradient(135deg,#2a1a1acc,#3e2a2acc);border:2px solid rgba(139,0,0,.5);border-radius:12px;padding:1.5rem 2rem;display:flex;flex-direction:column;align-items:center;gap:.5rem;min-width:150px;box-shadow:0 8px 24px #0009,0 0 20px #8b000033;transition:all .3s ease}.defeat-stat-card:hover{transform:translateY(-5px);border-color:#8b0000cc;box-shadow:0 12px 32px #000c,0 0 30px #8b00004d}.defeat-stat-icon{font-size:2.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.6))}.defeat-stat-value{font-size:2rem;font-weight:700;color:#b22222;text-shadow:0 2px 4px rgba(0,0,0,.8)}.defeat-stat-label{font-size:.9rem;color:#ffffffb3;text-transform:uppercase;letter-spacing:.1rem;text-align:center}.defeat-options{display:flex;gap:2rem;opacity:0;transform:scale(.9);transition:all .8s ease-out .3s}.defeat-options.show{opacity:1;transform:scale(1)}.defeat-button{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem 3rem;border:3px solid;border-radius:12px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 24px #0009;min-width:200px}.defeat-button .button-icon{font-size:3rem;filter:drop-shadow(0 4px 8px rgba(0,0,0,.6))}.defeat-button .button-text{letter-spacing:.1rem;text-transform:uppercase}.defeat-button.retry{background:linear-gradient(135deg,#2a1a1a,#4a2a2a);border-color:#b22222;color:#fff}.defeat-button.retry:hover{background:linear-gradient(135deg,#3a2a2a,#5a3a3a);border-color:#dc143c;transform:translateY(-5px);box-shadow:0 12px 32px #000c,0 0 30px #b2222266}.defeat-button.camp{background:linear-gradient(135deg,#1a2a2a,#2a4a4a);border-color:#4682b4;color:#fff}.defeat-button.camp:hover{background:linear-gradient(135deg,#2a3a3a,#3a5a5a);border-color:#5f9ea0;transform:translateY(-5px);box-shadow:0 12px 32px #000c,0 0 30px #4682b466}.defeat-button:active{transform:scale(.95);box-shadow:0 4px 16px #0009}.defeat-message{text-align:center;font-size:1.2rem;color:#b22222b3;font-style:italic;opacity:0;transform:translateY(20px);transition:all .8s ease-out .6s}.defeat-message.show{opacity:1;transform:translateY(0)}.defeat-message p{margin:0;letter-spacing:.1rem}@media(max-width:768px){.defeat-text{font-size:4rem}.defeat-stats,.defeat-options{flex-direction:column;gap:1rem}.defeat-button{padding:1.5rem 2rem;min-width:unset;width:100%}}.battle-modal-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#84848480;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:var(--z-modal, 1000);display:flex;align-items:center;justify-content:center;animation:fadeIn .2s ease-out}.battle-modal-content{width:80vw;max-width:1000px;height:80vh;background-color:#3a1d1a;border:.4vh solid #ff9d5c;border-radius:2vh;box-shadow:0 0 5vh #ff9d5c;display:flex;flex-direction:column;padding:2vh;animation:scaleIn .3s cubic-bezier(.175,.885,.32,1.275)}.battle-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2vh;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:1vh}.battle-modal-header h2{font-size:3vh;color:var(--theme-accent);text-shadow:0 0 1vh var(--theme-glow);margin:0}.battle-modal-close-btn{background:none;border:none;color:#fff;font-size:4vh;cursor:pointer;line-height:1}.battle-modal-close-btn:hover{color:var(--theme-accent)}.battle-modal-body{flex:1;overflow-y:auto;padding:1vh}.battle-modal-body .card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(calc(var(--card-base-width, 13vh)),1fr));gap:2vh;justify-items:center}.modal-card-wrapper{width:calc(var(--card-base-width, 13vh) * .9);aspect-ratio:2 / 3}.battle-empty-message{text-align:center;margin-top:24vh;font-size:7vh;color:#888}.use-item-modal-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fff6;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:var(--z-modal, 1000);display:flex;align-items:center;justify-content:center;animation:fadeIn .2s ease-out}.use-item-modal-content{width:80vw;max-width:90vw;max-height:80vh;background:linear-gradient(180deg,#1a1a2e,#2d2d44 90%);border-image:linear-gradient(to right,#2c8f30,#73ff5c) 1;border-radius:16px;box-shadow:0 8px 32px #00000080;display:flex;flex-direction:column;overflow:hidden;animation:scaleIn .3s cubic-bezier(.175,.885,.32,1.275)}.use-item-modal-header{display:flex;justify-content:space-between;align-items:center;padding:0 20px;height:60px;background:linear-gradient(180deg,#2c8f30,#1a6b1d);border-radius:12px 12px 0 0}.use-item-modal-title{font-size:24px;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.3)}.use-item-close-btn{width:36px;height:36px;background:#ffffff21;border:1px solid rgba(255,255,255,.25);border-radius:50%;color:#fff;font-size:18px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s,transform .2s}.use-item-close-btn:hover{background:#ffffff40;transform:scale(1.1)}.use-item-grid{display:flex;flex-wrap:wrap;gap:16px;padding:24px;overflow-y:auto;align-items:flex-start;justify-content:flex-start}.use-item-card{width:120px;height:140px;background:linear-gradient(180deg,#3a2a4a,#2a1a3a);border:2px solid #4a3a5a;border-radius:12px;display:flex;flex-direction:column;align-items:center;padding:12px 8px;gap:8px;cursor:pointer;transition:transform .2s,box-shadow .2s,border-color .2s;box-shadow:0 4px 8px #0006}.use-item-card:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000080;border-color:#73ff5c}.item-icon-container{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#ff6b6b,#c92a2a)}.item-icon-container.rarity-common{background:linear-gradient(135deg,#888,#555)}.item-icon-container.rarity-uncommon{background:linear-gradient(135deg,#a9e34b,#66a80f)}.item-icon-container.rarity-rare{background:linear-gradient(135deg,#74c0fc,#1c7ed6)}.item-icon-container.rarity-epic{background:linear-gradient(135deg,#b197fc,#7950f2)}.item-icon-container.rarity-legendary{background:linear-gradient(135deg,#ffa94d,#e8590c)}.item-icon{font-size:28px}.item-name{font-size:14px;font-weight:600;color:#fff;text-align:center;line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.item-quantity{font-size:12px;color:#aaa}.no-items-message{width:100%;text-align:center;padding:40px 20px;font-size:16px;color:#888}.item-used-warning{background:#ffa50033;border:1px solid #ffa500;border-radius:8px;padding:12px 16px;margin:0 24px;text-align:center;color:orange;font-size:14px;font-weight:600}.use-item-card.disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.use-item-card.disabled:hover{transform:none;box-shadow:0 4px 8px #0006;border-color:#4a3a5a}.facility-header{position:relative;top:0;left:0;display:flex;flex-direction:row;justify-content:space-between;background:#737db799;border-radius:0 0 10px 10px;height:41px;padding:0;margin-bottom:1rem;width:100%;margin-left:auto;margin-right:auto;gap:0}.basecamp-variant .page-title{display:flex;align-items:center;justify-content:center;width:15vw;border-radius:0 10px 10px 5px;height:100%}.basecamp-variant .basecamp-title-text{font-size:1.95rem;font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5);letter-spacing:1.5px}.basecamp-variant .remaining-life{display:flex;align-items:center;background-color:#41404080;padding:2px 8px;margin-right:2vw;border:2px solid rgba(46,45,45,.5);border-radius:10px;height:100%}.basecamp-variant .heart-icon{width:4vw;filter:drop-shadow(0 1px 2px rgba(0,0,0,.3))}.basecamp-variant .resource-frame{display:flex;align-items:stretch;height:100%;gap:0}.basecamp-variant .gold-frame{display:flex;align-items:center;justify-content:center;position:relative;background-color:#1b1b1a;border:2px solid rgba(90,90,90,.5);border-radius:.8vh;width:fit-content;padding:1vw 1.5vw;height:100%;opacity:.9}.basecamp-variant .gold-icon{position:absolute;top:50%;left:0%;transform:translate(-50%,-10%);width:4.5vw}.basecamp-variant .gold-amount{font-size:1.28rem;font-weight:700;color:#d7d701;text-shadow:0 1px 2px rgba(251,251,251,.5)}.basecamp-variant .magic-stone-frame{display:flex;align-items:center;gap:1.5vw;padding:0 12px;height:100%}.basecamp-variant .stone-item{display:flex;align-items:center;justify-content:center;position:relative;background-color:#141414;border:2px solid rgba(90,90,90,.5);border-radius:.8vh;width:fit-content;height:100%;padding:1vw;opacity:.9}.basecamp-variant .stone-icon{position:absolute;top:40%;left:0%;transform:translate(-50%,-20%);filter:drop-shadow(0 1px 2px rgba(0,0,0,.4))}.basecamp-variant .stone-icon.small{width:5.4vw}.basecamp-variant .stone-icon.medium{width:5.8vw}.basecamp-variant .stone-icon.large{width:6.1vw}.basecamp-variant .stone-icon.huge{object-fit:cover;width:7vw}.basecamp-variant .stone-count-value{font-size:1.28rem;font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5);min-width:16px}@media(max-width:768px){.facility-header.basecamp-variant{height:auto;flex-wrap:wrap;padding:8px;gap:8px}.basecamp-variant .page-title{padding:6px 12px;border-radius:8px}.basecamp-variant .basecamp-title-text{font-size:.95rem}.basecamp-variant .heart-icon{width:20px;height:20px}.basecamp-variant .resource-frame{flex-wrap:wrap;gap:6px}.basecamp-variant .magic-stone-frame{padding:4px 10px;border-radius:8px;gap:6px}.basecamp-variant .stone-icon.small,.basecamp-variant .stone-icon.medium{width:18px;height:18px}.basecamp-variant .stone-icon.large{width:20px;height:20px}.basecamp-variant .stone-icon.huge{width:22px;height:26px}}.base-camp{width:100vw;height:100vh;background:linear-gradient(135deg,#0a0a1a,#1a0a1a,#0a0a1a);position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:center;box-sizing:border-box}.camp-background{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}.bg-stars{position:absolute;width:100%;height:100%;background-image:radial-gradient(2px 2px at 20% 30%,rgba(255,255,255,.8),transparent),radial-gradient(2px 2px at 60% 70%,rgba(255,255,255,.6),transparent),radial-gradient(1px 1px at 50% 50%,rgba(255,255,255,.4),transparent),radial-gradient(1px 1px at 80% 10%,rgba(255,255,255,.5),transparent),radial-gradient(2px 2px at 90% 60%,rgba(255,255,255,.7),transparent);background-size:200% 200%;animation:twinkle 8s ease-in-out infinite}.bg-fog{position:absolute;bottom:0;width:100%;height:35%;background:linear-gradient(to top,rgba(100,80,120,.3) 0%,transparent 100%);animation:fogDrift 15s ease-in-out infinite}.bg-ground{position:absolute;bottom:0;width:100%;height:15%;background:linear-gradient(to top,#1a0f1a 0%,transparent 100%)}.facilities-grid{position:relative;z-index:10;display:grid;grid-template-columns:repeat(3,1fr);gap:5% 5%;width:80%;height:75%;margin-top:5%;padding:0}@media(max-width:1024px){.facilities-grid{grid-template-columns:repeat(2,1fr)}}@media(max-width:640px){.facilities-grid{grid-template-columns:1fr}}.facility-card{position:relative;width:100%;height:100%;aspect-ratio:1;background:linear-gradient(135deg,#1a1a2e,#2a2a3e);border:3px solid rgba(138,98,158,.5);border-radius:16px;padding:3%;cursor:pointer;transition:all .4s cubic-bezier(.34,1.56,.64,1);overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;box-shadow:0 8px 24px #0009,inset 0 2px 4px #ffffff0d}.facility-card:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(138,98,158,.1) 0%,transparent 70%);opacity:0;transition:opacity .4s ease}.facility-card.hovered:before{opacity:1}.facility-card.dungeon{border-color:#9a4ad999}.facility-card.dungeon.hovered{border-color:#9a4ad9;box-shadow:0 12px 32px #9a4ad966,inset 0 2px 8px #9a4ad933}.facility-card.shop{border-color:#d9ae4a99}.facility-card.shop.hovered{border-color:#d9ae4a;box-shadow:0 12px 32px #d9ae4a66,inset 0 2px 8px #d9ae4a33}.facility-card.blacksmith{border-color:#d95e4a99}.facility-card.blacksmith.hovered{border-color:#d95e4a;box-shadow:0 12px 32px #d95e4a66,inset 0 2px 8px #d95e4a33}.facility-card.church{border-color:#e0d0f099}.facility-card.church.hovered{border-color:#e0d0f0;box-shadow:0 12px 32px #e0d0f066,inset 0 2px 8px #e0d0f033}.facility-card.training{border-color:#4a8ed999}.facility-card.training.hovered{border-color:#4a8ed9;box-shadow:0 12px 32px #4a8ed966,inset 0 2px 8px #4a8ed933}.facility-card.tavern{border-color:#9dd94a99}.facility-card.tavern.hovered{border-color:#9dd94a;box-shadow:0 12px 32px #9dd94a66,inset 0 2px 8px #9dd94a33}.facility-card.locked{opacity:.5;cursor:not-allowed;filter:grayscale(.7)}.facility-card.locked:hover{transform:none;box-shadow:0 8px 24px #0009}.facility-card.unlocked:hover{transform:translateY(-8px) scale(1.02)}.facility-bg-pattern{position:absolute;top:0;left:0;width:100%;height:100%;background-image:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(255,255,255,.02) 10px,rgba(255,255,255,.02) 20px),repeating-linear-gradient(-45deg,transparent,transparent 10px,rgba(255,255,255,.02) 10px,rgba(255,255,255,.02) 20px);opacity:.5;z-index:1}.facility-glow{position:absolute;top:50%;left:50%;width:80%;height:80%;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(138,98,158,.15) 0%,transparent 70%);z-index:2;transition:opacity .4s ease}.facility-card.hovered .facility-glow{opacity:1.5}.facility-icon{position:relative;z-index:10;font-size:5rem;margin-bottom:1rem;filter:drop-shadow(0 4px 8px rgba(0,0,0,.6));transition:transform .4s cubic-bezier(.34,1.56,.64,1)}.facility-card.hovered .facility-icon{transform:scale(1.15) rotate(5deg)}.facility-name{position:relative;z-index:10;font-size:1.5rem;font-weight:700;color:#e0d0f0;margin-bottom:.75rem;text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(138,98,158,.5);letter-spacing:1px}.facility-description{position:relative;z-index:10;font-size:.95rem;color:#e0d0f0b3;line-height:1.5;max-width:90%}.facility-lock{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:20;border-radius:16px}.lock-icon{font-size:3rem;margin-bottom:.5rem;animation:lockShake 2s ease-in-out infinite}.lock-text{font-size:1.2rem;font-weight:700;color:#ff6b6b;text-shadow:0 2px 4px rgba(0,0,0,.8)}.facility-hover-effect{position:absolute;bottom:1rem;left:50%;transform:translate(-50%);z-index:15;animation:hoverBounce 1s ease-in-out infinite}.hover-text{font-size:1.1rem;font-weight:700;color:#fff;text-shadow:0 0 10px rgba(138,98,158,.8),0 2px 4px rgba(0,0,0,.8);letter-spacing:2px}.hover-text.enter{color:#7cdc4d}.camp-footer{position:relative;z-index:10;margin-top:auto;padding-top:1rem;text-align:center}.facility-detail{width:100vw;height:100vh;background:linear-gradient(135deg,#0a0a1a,#1a0a1a,#0a0a1a);padding:2rem;box-sizing:border-box;display:flex;flex-direction:column}.back-button{padding:.75rem 1.5rem;background:#8a629e4d;border:2px solid rgba(138,98,158,.6);border-radius:8px;color:#e0d0f0;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s ease;width:fit-content;margin-bottom:2rem}.back-button:hover{background:#f9a48080;border-color:#28172b04;transform:translate(-4px)}.facility-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.facility-content h2{font-size:3rem;color:#e0d0f0;margin-bottom:1rem;text-shadow:0 0 20px rgba(138,98,158,.8)}.coming-soon{font-size:1.5rem;color:#e0d0f080;font-style:italic}.guild-background{position:absolute;top:0vh;right:0vh;width:100vw;height:100vh;opacity:.8;z-index:0;pointer-events:none}.guild-screen{position:relative;width:100vw;height:100vh;display:grid;grid-template-rows:auto auto 1fr auto;color:#e8d5b7;box-sizing:border-box;z-index:1}.guild-header{text-align:center;margin-bottom:1.5vh;padding-bottom:1rem;border-bottom:2px solid rgba(232,213,183,.2)}.guild-title{font-size:5vh;margin:0 0 .5rem;color:#f4e4c1;text-shadow:0 0 10px rgba(244,228,193,.5)}.guild-subtitle{font-size:1.8vh;color:#b89968;margin:0;font-style:italic}.guild-tabs{display:flex;justify-content:center;gap:1rem;margin-bottom:1.5vh}.tab-icon{font-size:2.5vh}.tab-label{font-size:1.6vh;font-weight:600}.guild-content{max-width:90vw;margin:0 auto;background:#1a1410f2;border:2px solid rgba(232,213,183,.2);border-radius:12px;padding:2vh 2vw;height:90%;overflow-y:auto}.promotion-tab{display:grid;grid-template-columns:1fr 1fr;gap:2vw;height:fit-content}.promotion-tab-left,.promotion-tab-right{display:flex;flex-direction:column;gap:1.5vh}.grade-progression{display:flex;align-items:center;justify-content:center;gap:2vw;padding:1.5vh 1vw;background:#e8d5b70d;border-radius:8px}.grade-box{display:flex;flex-direction:column;align-items:center;gap:.8vh;padding:1.5vh 2vw;background:#2d1f1a99;border-radius:8px;border:2px solid rgba(232,213,183,.2)}.grade-box.current{border-color:#b89968}.grade-box.next{border-color:#f4e4c1;background:#f4e4c11a}.grade-label{font-size:1.4vh;color:#b89968;text-transform:uppercase;letter-spacing:1px}.grade-name{font-size:2vh;font-weight:700;color:#f4e4c1}.arrow{font-size:3vh;color:#b89968}.exam-section{padding:1vh 1vw;background:#e8d5b708;border-radius:8px}.guild-section-title{font-size:1.9vh;color:#f4e4c1;margin:0 0 1vh;padding-bottom:.6vh;border-bottom:1px solid rgba(232,213,183,.2)}.requirements-list{display:flex;flex-direction:column;gap:1vh}.requirement{display:flex;align-items:center;gap:1vw;padding:1vh 1vw;background:#2d1f1a66;border-radius:6px;border:2px solid transparent}.requirement.met{border-color:#4caf5080;background:#4caf501a}.requirement.unmet{border-color:#f4433680;background:#f443361a}.requirement-icon{font-size:2vh;font-weight:700}.requirement.met .requirement-icon{color:#4caf50}.requirement.unmet .requirement-icon{color:#f44336}.requirement-text{color:#e8d5b7;font-size:1.6vh}.exam-description{color:#c9b69a;line-height:1.6;margin:0;font-size:1.6vh}.recommendations{display:flex;gap:2vw;margin-bottom:1vh}.recommendation-item{display:flex;gap:.5vw;align-items:baseline}.stat-label{color:#b89968;font-weight:600;font-size:1.6vh}.stat-value{color:#f4e4c1;font-size:1.9vh;font-weight:700}.recommendation-note{color:#9d8766;font-size:1.4vh;font-style:italic;margin:0}.rewards-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.8vh}.rewards-list li{padding:.8vh 1vw;background:#f4e4c10d;border-left:3px solid #f4e4c1;border-radius:4px;color:#e8d5b7;font-size:1.6vh}.exam-warnings{display:flex;flex-direction:column;gap:.8vh;padding:1.5vh 1vw;background:#ffc1070d;border:1px solid rgba(255,193,7,.3);border-radius:8px}.warning-item{display:flex;align-items:center;gap:1vw}.warning-text{color:#c9b69a;font-size:1.5vh}.start-exam-button{margin-top:auto;padding:1.5vh 2vw;font-size:1.7vh;font-weight:700;background:linear-gradient(135deg,#8b6914,#d4af37);border:2px solid #f4e4c1;border-radius:8px;color:#1a1410;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:1px}.start-exam-button.enabled:hover{transform:scale(1.05);box-shadow:0 0 20px #d4af3780}.start-exam-button.disabled{background:#2d1f1a99;border-color:#e8d5b74d;color:#6d5d4b;cursor:not-allowed;opacity:.6}.promotion-unavailable{text-align:center;padding:4vh 2vw}.promotion-unavailable h2{font-size:3.5vh;color:#f4e4c1;margin-bottom:2vh}.current-grade-display{display:flex;flex-direction:column;align-items:center;gap:1vh;margin:3vh 0;padding:2vh 2vw;background:#f4e4c11a;border:2px solid #f4e4c1;border-radius:8px}.grade-value{font-size:3vh;font-weight:700;color:#d4af37}.flavor-text{color:#b89968;font-style:italic;line-height:1.6;font-size:1.6vh}.placeholder-tab{display:flex;justify-content:center;align-items:center;min-height:fit-content}.placeholder-content{text-align:center;max-width:40vw}.placeholder-title{font-size:3.5vh;color:#f4e4c1;margin-bottom:2vh}.placeholder-description{color:#c9b69a;line-height:1.6;margin-bottom:3vh;font-size:1.6vh}.feature-preview{text-align:left;background:#e8d5b70d;padding:2vh 2vw;border-radius:8px;border:1px solid rgba(232,213,183,.2)}.feature-preview h3{color:#f4e4c1;margin-top:0;font-size:2vh}.feature-preview ul{color:#b89968;line-height:1.8;font-size:1.5vh}.feature-preview li{margin-bottom:1vh}.shop-screen{width:100vw;height:100vh;display:grid;grid-template-rows:auto auto 1fr auto;background-image:linear-gradient(135deg,#231f1fd9,#241c1cd9),url(/assets/images/Shop-background.png);background-size:cover;background-position:center;background-repeat:no-repeat;color:#e8d5b7;box-sizing:border-box;overflow:hidden}.shop-header{text-align:center;margin-bottom:1.5vh;padding-bottom:1vh;border-bottom:2px solid rgba(212,175,55,.3)}.shop-title-row{margin-bottom:1vh}.shop-title{font-size:4.5vh;margin:0;color:#d4af37;text-shadow:0 0 15px rgba(212,175,55,.5)}.shop-resources{display:flex;justify-content:center;gap:3vw}.resource-display{display:flex;align-items:center;gap:.5vw;padding:.8vh 1.5vw;background:#2d1f1af2;border-radius:6px;border:1px solid rgba(212,175,55,.3)}.shop-tabs{display:flex;justify-content:center;gap:1vw;margin-bottom:1.5vh}.shop-content{background-color:#6b4423;max-width:90vw;margin:0 auto;background:#1a1410f2;border:2px solid rgba(212,175,55,.2);border-radius:12px;padding:2vh 2vw;height:90%;overflow-y:auto}.shop-section-title{font-size:2vh;color:#d4af37;margin:0 0 1.5vh;padding-bottom:.8vh;border-bottom:1px solid rgba(212,175,55,.3)}.shop-notification{position:fixed;top:10vh;left:50%;transform:translate(-50%);padding:1.5vh 3vw;background:#d4af37e6;color:#1a1612;border-radius:8px;font-weight:700;font-size:1.8vh;z-index:1000;animation:fadeInOut 2s ease}.buy-tab{display:flex;flex-direction:column;gap:2vh}.shop-section{padding:1.5vh 1.5vw;background:#2d1f1af2;border-radius:8px}.shop-items-grid{display:flex;flex-direction:column;gap:1vh}.shop-item{display:grid;grid-template-columns:4vh 1fr auto auto;align-items:center;gap:1vw;padding:1.2vh 1.5vw;background:#2d1f1af2;border:1px solid rgba(212,175,55,.2);border-radius:8px;transition:all .2s ease}.shop-item:hover{background:#2d1f1ab3;border-color:#d4af3766}.shop-item.unaffordable{opacity:.5}.shop-item.pack{border-color:#d4af3766;background:#d4af370d}.item-icon{font-size:2.5vh;text-align:center}.item-info{display:flex;flex-direction:column;gap:.3vh}.item-name{font-size:1.6vh;font-weight:700;color:#f4e4c1}.item-description{font-size:1.3vh;color:#b89968}.item-price{font-size:1.7vh;font-weight:700;color:#d4af37;min-width:6vw;text-align:right}.buy-button.pack-buy{background:linear-gradient(135deg,#6b4423,#a67c52)}.pack-result{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#1a1410f2;border:3px solid #d4af37;border-radius:12px;padding:3vh 3vw;z-index:1000;text-align:center;min-width:30vw;animation:packOpen .3s ease}.sell-tab{height:100%}.sell-layout{display:grid;grid-template-columns:1fr 25vw;gap:2vw;height:100%}.sell-items-section{display:flex;flex-direction:column}.empty-inventory{display:flex;justify-content:center;align-items:center;height:20vh;color:#6d5d4b;font-size:1.8vh}.sell-items-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(12vw,1fr));gap:1vh;max-height:50vh;overflow-y:auto;padding-right:.5vw}.sell-item{display:flex;flex-direction:column;align-items:center;padding:1vh .5vw;background:#2d1f1af2;border:2px solid rgba(212,175,55,.2);border-radius:8px;cursor:pointer;transition:all .2s ease}.sell-item:hover{border-color:#d4af3780;background:#2d1f1ab3}.sell-item.selected{border-color:#d4af37;background:#d4af371a}.sell-item .item-icon{font-size:3vh;margin-bottom:.5vh}.sell-item .item-name{font-size:1.3vh;text-align:center;color:#e8d5b7}.item-sell-price{font-size:1.2vh;color:#d4af37;margin-top:.3vh}.sell-item.rarity-rare{border-color:#2196f366}.sell-item.rarity-epic{border-color:#9c27b066}.sell-item.rarity-legendary{border-color:#ff980080}.sell-detail-panel{background:#2d1f1af2;border:2px solid rgba(212,175,55,.2);border-radius:8px;padding:1.5vh 1.5vw}.item-detail{display:flex;flex-direction:column;gap:1.5vh}.detail-name{font-size:2vh;margin:0}.detail-info{display:flex;flex-direction:column;gap:.5vh}.info-row{display:flex;justify-content:space-between;font-size:1.4vh;padding:.5vh 0;border-bottom:1px solid rgba(212,175,55,.1)}.sell-action{margin-top:auto;padding-top:1.5vh;border-top:1px solid rgba(212,175,55,.3)}.sell-price{font-size:1.8vh;color:#d4af37;margin-bottom:1vh;text-align:center}.exchange-tab{display:flex;flex-direction:column;gap:2vh}.exchange-section{padding:2vh 2vw;background:#2d1f1af2;border-radius:8px}.stone-list{display:flex;flex-direction:column;gap:1vh}.stone-row{display:grid;grid-template-columns:4vh 1fr 6vw 6vw auto;align-items:center;gap:1vw;padding:1vh 1.5vw;background:#2d1f1af2;border-radius:6px}.stone-exchange-btn{padding:.6vh 1vw;background:linear-gradient(135deg,#8b6914,#d4af37);border:1px solid #f4e4c1;border-radius:4px;color:#1a1612;font-size:1.3vh;font-weight:700;cursor:pointer;transition:all .2s ease}.stone-exchange-btn:hover:not(:disabled){transform:scale(1.05);box-shadow:0 0 8px #d4af3780}.stone-exchange-btn:disabled{background:#2d1f1a99;border-color:#e8d5b74d;color:#6d5d4b;cursor:not-allowed}.stone-icon{font-size:2.5vh;text-align:center}.stone-label{font-size:1.5vh;color:#e8d5b7}.stone-count{font-size:1.5vh;color:#b89968;text-align:right}.stone-value{font-size:1.4vh;color:#6d5d4b;text-align:right}.stone-total{font-size:1.6vh;font-weight:700;color:#d4af37;text-align:right}.total-value span{color:#b89968}.total-value strong{color:#d4af37}.exchange-controls{display:flex;align-items:center;gap:2vw;margin-bottom:2vh}.exchange-input-group{display:flex;align-items:center;gap:.8vw}.exchange-input-group label{font-size:1.5vh;color:#b89968}.exchange-input{width:10vw;padding:.8vh 1vw;background:#2d1f1af2;border:2px solid rgba(212,175,55,.3);border-radius:6px;color:#f4e4c1;font-size:1.6vh;text-align:right}.exchange-input:focus{outline:none;border-color:#d4af37}.input-suffix{font-size:1.5vh;color:#d4af37}.exchange-button{padding:1vh 2vw;background:linear-gradient(135deg,#8b6914,#d4af37);border:2px solid #f4e4c1;border-radius:6px;color:#1a1612;font-size:1.5vh;font-weight:700;cursor:pointer;transition:all .2s ease}.exchange-button:hover:not(:disabled){transform:scale(1.05);box-shadow:0 0 10px #d4af3780}.exchange-button:disabled{background:#2d1f1a99;border-color:#e8d5b74d;color:#6d5d4b;cursor:not-allowed}.quick-exchange{display:flex;align-items:center;gap:1vw;background:#5f3e32f2;padding:1.5vh;justify-content:space-between}.quick-exchange-tittle{font-size:1.4vh;color:#b89968;font-weight:700;flex:.85}.quick-exchange-value{font-size:1.4vh;color:#d4af37;font-weight:700;flex:.15}.quick-button{padding:.8vh 1.5vw;background:#2d1f1a99;border:1px solid rgba(212,175,55,.3);border-radius:4px;color:#e8d5b7;font-size:1.3vh;cursor:pointer;transition:all .2s ease;margin-right:.5vw}.quick-button:hover:not(:disabled){background:#d4af3733;border-color:#d4af3780}.quick-button:disabled{opacity:.4;cursor:not-allowed}.exchange-note{font-size:1.3vh;color:#6d5d4b;font-style:italic;margin:0}.mastery-bar-bg{width:100%;height:.6vh;background:#0009;border-radius:.3vh;overflow:hidden}.mastery-bar-fill{height:100%;background:linear-gradient(90deg,var(--theme-secondary, #666),var(--theme-accent, #aaa));transition:width .3s ease}.progress-bar{width:100%;height:1vh;background:#0000004d;border-radius:4px;overflow:hidden}.progress-bar-fill{height:100%;transition:width .3s ease}.progress-bar-fill.primary{background:linear-gradient(90deg,var(--color-primary, #666),var(--color-accent, #aaa))}.progress-bar-fill.success{background:linear-gradient(90deg,#2e7d32,#4caf50)}.progress-bar-fill.warning{background:linear-gradient(90deg,#ed6c02,#ff9800)}.progress-bar-fill.danger{background:linear-gradient(90deg,#c62828,#f44336)}.storage-container{height:100vh;width:100vw;background-image:linear-gradient(135deg,#1a1612d9,#2a1810d9),url(/assets/images/Storage-background.png);background-size:cover;background-position:center;background-repeat:no-repeat;color:#e8d5b7;display:flex;flex-direction:column;overflow:hidden}.storage-header{padding:1.5vh 2vw;background:#2d1f1af2;border-bottom:2px solid rgba(255,111,0,.3);display:flex;justify-content:space-between;align-items:center}.storage-title{font-size:4.5vh;margin:0;color:#ff6f00;text-shadow:0 0 15px rgba(255,111,0,.5)}.storage-resources{display:flex;gap:2vw;font-size:1.8vh}.storage-gold,.storage-magic-stones{display:flex;align-items:center;gap:.5vw;padding:.8vh 1.5vw;background:#2d1f1af2;border-radius:6px;border:1px solid rgba(212,175,55,.5);color:#ffd54f}.nav{display:flex;justify-content:space-between;align-items:center;background:#1a1410f2;border-bottom:2px solid rgba(255,111,0,.2);padding:.8vh 0}.storage-tabs{display:flex;gap:1vw;padding:.8vh 2vw}.back-content{padding:0 1.8vw 0 0}.storage-content{flex:1;padding:1.5vh 1.5vw;overflow:hidden}.items-tab-content{display:flex;gap:1vw;height:100%;background:#1a1410f2;border:2px solid rgba(255,111,0,.2);border-radius:12px;padding:1.5vh 1.5vw}.dual-grid-panel{display:flex;gap:.5vw;flex:1}.storage-grid-section{background:#2d1f1af2;border:2px solid rgba(255,111,0,.2);border-radius:8px;padding:1vh;flex:1;display:flex;flex-direction:column;max-width:33.5vw;max-height:fit-content;overflow:hidden}.storage-grid-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:.8vh;margin-bottom:.8vh;border-bottom:1px solid rgba(255,111,0,.3)}.storage-grid-title{font-size:2vh;color:#ff6f00;font-weight:700;text-shadow:0 0 8px rgba(255,111,0,.3)}.storage-grid-count{font-size:1.3vh;color:#b89968}.compact-grid{display:grid;grid-template-columns:repeat(3,1fr);padding:1vh;overflow-y:auto;overflow-x:auto}.compact-grid.storage-grid{grid-template-columns:repeat(4,1fr);gap:1vh}.compact-grid.inventory-grid{grid-template-columns:repeat(4,1fr);gap:1.2vh}.item-card-compact{width:11.5vw;height:9vh;aspect-ratio:1;background:#2d1f1af2;border:2px solid rgba(255,111,0,.2);border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;transition:all .2s ease;padding:.8vh}.item-card-compact:hover{transform:scale(1.1);z-index:1;border-color:#ff6f0080;background:#2d1f1ab3}.item-card-compact.item-card-selected{border-color:#ff6f00;background:#ff6f001a;box-shadow:0 0 10px #ff6f0080;transform:scale(1.08)}.item-card-compact.item-card-empty{opacity:.3;cursor:default}.item-card-compact.item-card-empty:hover{transform:none;border-color:#ff6f0033;background:#2d1f1a80}.empty-placeholder{color:#6d5d4b;font-size:1.7vh}.item-level-compact{position:absolute;top:.2vh;right:.2vw;background:#ff6f00cc;color:#fff;font-size:1.2vh;padding:.2vh .5vw;border-radius:4px;font-weight:700}.item-stack-compact{position:absolute;bottom:.2vh;right:.2vw;background:#4caf50cc;color:#fff;font-size:1.2vh;padding:.2vh .5vw;border-radius:4px;font-weight:700}.item-card-compact.rarity-common{border-color:#c1c1c180}.item-card-compact.rarity-uncommon{border-color:#4caf5080}.item-card-compact.rarity-rare{border-color:#2196f399}.item-card-compact.rarity-epic{border-color:#9c27b099}.item-card-compact.rarity-legendary{border-color:#ffc107b3}.transfer-buttons{display:flex;flex-direction:column;margin-block:1vh;gap:1vh;padding:0 .3vw;align-self:center}.transfer-buttons-equip{display:flex;flex-direction:row;margin-block:1vh;gap:1vh;padding:0 .3vw;align-self:center}.storage-detail-panel{min-width:24vw;flex-shrink:0;margin-right:2vw}.equip-detail-panel{min-width:20vw;height:100%;flex-shrink:0;margin-right:.5vw}.item-detail-panel{width:23vw;background:#2d1f1af2;border:2px solid rgba(255,111,0,.3);border-radius:8px;height:100%;display:flex;flex-direction:column;gap:1vh;overflow-y:auto;justify-content:center}.item-detail-placeholder{color:#6d5d4b;font-size:2.5vh;text-align:center}.item-detail-icon{font-size:2vh;text-align:center}.item-detail-name{background:#1a141099;border-radius:8px;padding:1vh;font-size:3.1vh;margin:0;text-align:center;color:#f4e4c1}.item-detail-rarity{font-size:1.9vh;text-align:center}.item-detail-stats{display:flex;flex-direction:column;gap:.4vh;padding:1vh 1vw;background:#1a141080;border:1px solid rgba(255,111,0,.2);border-radius:6px;font-size:1.9vh}.item-detail-stat{color:#e8d5b7}.item-detail-effects{padding:1vh 1vw;background:#1a141080;border:1px solid rgba(255,111,0,.2);border-radius:6px}.item-detail-effects h4{margin:0 0 .5vh;font-size:1.9vh;color:#ff6f00}.item-detail-effect{font-size:1.9vh;color:#90caf9;margin-bottom:.3vh}.item-detail-description{font-size:1.8vh;line-height:1.4;color:#b89968;padding:1vh 1vw;background:#1a141080;border:1px solid rgba(255,111,0,.2);border-radius:6px;font-style:italic}.item-detail-type{font-size:1.9vh;color:#b89968}.item-detail-sell-price{font-size:1.9vh;color:#ffd54f}.item-detail-actions{display:flex;flex-direction:column;gap:.5vh;margin-top:auto}.item-action-button{padding:1vh 1vw;background:#2d1f1af2;border:2px solid rgba(255,111,0,.3);border-radius:6px;color:#e8d5b7;font-size:1.4vh;cursor:pointer;transition:all .2s ease}.item-action-button:hover{background:#ff6f0033;border-color:#ff6f00;color:#fff}.item-action-button.equip{background:linear-gradient(135deg,#8b3a14,#ff6f00);color:#fff;border-color:#ff6f00;font-weight:700}.item-action-button.equip:hover{box-shadow:0 0 10px #ff6f0080}.item-action-button.delete{background:linear-gradient(135deg,#8b1414,#c62828);color:#fff;border-color:#ef5350}.item-action-button.delete:hover{box-shadow:0 0 10px #f4433680}.equipment-tab-content{display:flex;justify-content:space-between;gap:1.5vw;height:100%;background:#1a1410f2;border:2px solid rgba(255,111,0,.2);border-radius:12px;padding:1.5vh 1.5vw}.equipment-list-panel{flex:1;background:#2d1f1af2;border:2px solid rgba(255,111,0,.2);border-radius:8px;padding:1vh;display:flex;flex-direction:column;max-width:45vw;overflow:hidden}.equipment-list-grid{grid-template-columns:repeat(3,1fr);gap:1vh;overflow-y:auto}.empty-list-message{color:#6d5d4b;font-size:1.8vh;text-align:center;padding:2vh;grid-column:span 4}.equipment-right-panel{width:fit-content;display:flex;flex-direction:column;gap:1.5vh}.equipment-slots-section{background:#2d1f1af2;border:2px solid rgba(255,111,0,.3);border-radius:8px;padding:1vh}.storage-section-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:.8vh;margin-bottom:.8vh;border-bottom:1px solid rgba(255,111,0,.3)}.storage-section-title{font-size:2vh;color:#ff6f00;font-weight:700;text-shadow:0 0 8px rgba(255,111,0,.3)}.storage-section-count{font-size:1.3vh;color:#b89968}.equip-slots-grid-compact{display:grid;grid-template-columns:repeat(3,1fr);gap:1vh 1vw}.equip-slot-compact{background:#2d1f1af2;border:2px solid rgba(255,111,0,.2);border-radius:8px;padding:.8vh .5vw;display:flex;flex-direction:column;align-items:center;gap:.3vh;cursor:pointer;transition:all .2s ease}.equip-slot-compact:hover{border-color:#ff6f0080;transform:translateY(-2px);background:#2d1f1ab3}.equip-slot-compact.equip-slot-selected{border-color:#ff6f00;background:#ff6f001a;box-shadow:0 0 10px #ff6f0080}.equip-slot-compact.equip-slot-filled{background:linear-gradient(135deg,#2d1f1a99,#3c281e99)}.equip-slot-label-compact{font-size:1vh;color:#b89968;text-transform:uppercase;letter-spacing:.03vw}.equip-slot-icon-compact{font-size:2.2vh}.equip-slot-name-compact{font-size:1.1vh;color:#e8d5b7;text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.equip-slot-empty-compact{font-size:1.5vh;color:#6d5d4b}.equipment-inventory-section{width:100%;background:#2d1f1af2;border:2px solid rgba(255,111,0,.2);border-radius:8px;padding:1vh}.equipment-inventory-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1vh}.equipment-actions{display:flex;flex-wrap:wrap;gap:.5vh;padding:.8vh;border-radius:6px;min-height:5vh}.equipment-actions .item-action-button{flex:1;min-width:8vw}.equipment-grid-panel{flex:1;background:#2d1f1a80;border:2px solid rgba(255,111,0,.3);border-radius:8px;padding:1vh;display:flex;align-items:center;justify-content:center}.equip-slots-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2vh 2vw;max-width:50vw}.equip-slot-card{background:#2d1f1a80;border:2px solid rgba(255,111,0,.2);border-radius:8px;padding:1.5vh 1vw;display:flex;flex-direction:column;align-items:center;gap:.5vh;cursor:pointer;transition:all .2s ease;min-width:12vw}.equip-slot-card:hover{border-color:#ff6f0080;transform:translateY(-2px);background:#2d1f1ab3}.equip-slot-card.equip-slot-selected{border-color:#ff6f00;background:#ff6f001a;box-shadow:0 0 12px #ff6f0080}.equip-slot-card.equip-slot-filled{background:linear-gradient(135deg,#2d1f1a99,#3c281e99)}.equip-slot-label{font-size:1.2vh;color:#b89968;text-transform:uppercase;letter-spacing:.05vw}.equip-slot-icon{font-size:3vh}.equip-slot-name{font-size:1.4vh;color:#e8d5b7;text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.equip-slot-empty{font-size:2vh;color:#6d5d4b}.storage-message{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:2vh 3vw;background:#1a1410f2;border:2px solid #ff6f00;border-radius:8px;font-size:1.8vh;color:#f4e4c1;text-align:center;z-index:1000;box-shadow:0 0 20px #ff6f004d}.storage-footer{padding:1vh 2vw;background:#2d1f1af2;border-top:2px solid rgba(255,111,0,.3)}.item-detail-panel::-webkit-scrollbar,.detail-panel::-webkit-scrollbar,.compact-grid::-webkit-scrollbar{width:.5vw}.item-detail-panel::-webkit-scrollbar-track,.detail-panel::-webkit-scrollbar-track,.compact-grid::-webkit-scrollbar-track{background:#1a141080;border-radius:4px}.item-detail-panel::-webkit-scrollbar-thumb,.detail-panel::-webkit-scrollbar-thumb,.compact-grid::-webkit-scrollbar-thumb{background:#ff6f004d;border-radius:4px}.item-detail-panel::-webkit-scrollbar-thumb:hover,.detail-panel::-webkit-scrollbar-thumb:hover,.compact-grid::-webkit-scrollbar-thumb:hover{background:#ff6f0080}.item-card{width:9vw;height:9vw;background:#2d1f1a80;border:2px solid rgba(255,111,0,.2);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;position:relative;transition:all .3s ease}.item-card:hover{transform:scale(1.05);box-shadow:0 0 15px #ff6f0066;border-color:#ff6f0080}.item-card-selected{border-color:#ff6f00;background:#ff6f001a;box-shadow:0 0 20px #ff6f0099;transform:scale(1.08)}.item-card-empty{opacity:.3;cursor:default}.item-card-empty:hover{transform:none;box-shadow:none}.item-card-icon{font-size:2vh;margin-bottom:.5vh}.item-card-name{line-height:1.2;font-size:1.4rem;text-align:center;color:#e8d5b7}.item-card-level{position:absolute;top:.5vh;right:.5vw;background:#ff6f00cc;color:#fff;padding:.3vh .6vw;border-radius:4px;font-size:1.3vh;font-weight:700}.item-card-stack{position:absolute;bottom:.5vh;right:.5vw;background:#4caf50cc;color:#fff;padding:.3vh .6vw;border-radius:4px;font-size:1.3vh;font-weight:700}.delete-modal-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:var(--z-modal, 1000)}.delete-modal{background:#5d4037;border:.3vh solid #ff6f00;border-radius:1vh;padding:2vh 2vw;min-width:25vw;max-width:40vw;box-shadow:0 0 3vh #00000080}.delete-modal-header{border-bottom:.2vh solid #8d6e63;padding-bottom:1vh;margin-bottom:1.5vh}.delete-modal-title{margin:0;font-size:2.5vh;color:#ff6f00;text-align:center}.delete-modal-content{display:flex;flex-direction:column;align-items:center;gap:1.5vh}.delete-modal-message{margin:0;font-size:1.8vh;color:#ffecb3;text-align:center}.delete-modal-item-info{display:flex;align-items:center;gap:1vw;padding:1vh 1.5vw;background:#4e342e;border-radius:.5vh;border:.15vh solid #8d6e63}.delete-modal-item-icon{font-size:2.5vh}.delete-modal-item-name{font-size:2vh;font-weight:700}.delete-modal-warning{margin:0;font-size:1.4vh;color:#ef5350;font-style:italic}.delete-modal-actions{display:flex;justify-content:center;gap:2vw;margin-top:2vh;padding-top:1.5vh;border-top:.2vh solid #8d6e63}.delete-modal-button{padding:1vh 2vw;border-radius:.5vh;font-size:1.6vh;cursor:pointer;transition:all .2s ease;min-width:8vw}.delete-modal-cancel{background:#6d4c41;border:.15vh solid #8d6e63;color:#ffecb3}.delete-modal-cancel:hover{background:#5d4037;border-color:#bcaaa4}.delete-modal-confirm{background:#c62828;border:.15vh solid #ef5350;color:#fff;font-weight:700}.delete-modal-confirm:hover{background:#b71c1c;border-color:#e53935}.blacksmith-background{position:absolute;top:-15vh;right:0vh;width:55vw;height:140vh;opacity:.8;z-index:0;pointer-events:none}.blacksmith-screen{position:relative;width:100vw;height:100vh;display:grid;grid-template-rows:auto auto 1fr auto;color:#e8d5b7;box-sizing:border-box;overflow:hidden;z-index:1}.blacksmith-header{text-align:center;margin-bottom:1.5vh;padding-bottom:1vh;border-bottom:2px solid rgba(255,107,53,.3)}.blacksmith-title-row{margin-bottom:1vh}.blacksmith-title{font-size:4.5vh;margin:0;color:#ff6b35;text-shadow:0 0 15px rgba(255,107,53,.5)}.blacksmith-resources{display:flex;justify-content:center;gap:3vw}.resource-display{display:flex;align-items:center;gap:.5vw;padding:.8vh 1.5vw;background:#2d1f1af2;border-radius:6px;border:1px solid rgba(255,107,53,.3)}.blacksmith-tabs{display:flex;justify-content:center;gap:1vw;margin-bottom:1.5vh}.blacksmith-content{max-width:90vw;margin:0 auto;background:#1a1410f2;border:2px solid rgba(255,107,53,.2);border-radius:12px;padding:2vh 2vw;height:90%;overflow-y:auto}.blacksmith-section-title{font-size:2vh;color:#ff6b35;margin:0 0 1.5vh;padding-bottom:.8vh;border-bottom:1px solid rgba(255,107,53,.3)}.blacksmith-notification{position:fixed;top:10vh;left:50%;transform:translate(-50%);padding:1.5vh 3vw;background:#ff6b35e6;color:#1a1612;border-radius:8px;font-weight:700;font-size:1.8vh;z-index:1000;animation:fadeInOut 2s ease}.blacksmith-notification.success{background:#4caf50e6}.blacksmith-notification.error{background:#f44336e6;color:#fff}.tab-layout{display:grid;grid-template-columns:1fr 30vw;gap:2vw;height:100%}.equipment-list-section{display:flex;flex-direction:column}.equipment-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(12vw,1fr));gap:1vh;max-height:55vh;overflow-y:auto;padding-right:.5vw}.equipment-card{display:flex;flex-direction:column;align-items:center;padding:1vh .5vw;background:#2d1f1af2;border:2px solid rgba(255,107,53,.2);border-radius:8px;cursor:pointer;transition:all .2s ease;position:relative}.equipment-card:hover{border-color:#ff6b3580;background:#2d1f1ab3}.equipment-card.selected{border-color:#ff6b35;background:#ff6b351a}.equipment-card .item-icon{font-size:3vh;margin-bottom:.5vh}.equipment-card .item-name{font-size:1.3vh;text-align:center;color:#e8d5b7;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.quality-badge.poor{background:#888;color:#fff}.quality-badge.normal{background:#555;color:#fff}.quality-badge.good{background:#4ade80;color:#1a1612}.quality-badge.master{background:#fbbf24;color:#1a1612}.durability-bar{width:100%;height:.5vh;background:#0000004d;border-radius:2px;margin-top:.5vh;overflow:hidden}.durability-fill{height:100%;background:linear-gradient(90deg,#ff6b35,#4ade80);transition:width .3s ease}.durability-fill.low{background:linear-gradient(90deg,#f44336,#ff6b35)}.durability-fill.critical{background:#f44336}.equipment-card.rarity-common{border-color:#b0b0b066}.equipment-card.rarity-uncommon{border-color:#4caf5066}.equipment-card.rarity-rare{border-color:#2196f380}.equipment-card.rarity-epic{border-color:#9c27b080}.equipment-card.rarity-legendary{border-color:#ff980099}.detail-panel{background:#2d1f1af2;border:2px solid rgba(255,107,53,.2);border-radius:8px;padding:1.5vh 1.5vw;display:flex;flex-direction:column}.badge{padding:.2vh .5vw;border-radius:4px;font-size:1.1vh;font-weight:700}.badge.quality-poor{background:#888;color:#fff}.badge.quality-normal{background:#555;color:#fff}.badge.quality-good{background:#4ade804d;color:#4ade80}.badge.quality-master{background:#fbbf244d;color:#fbbf24}.stats-section{padding:1vh 0;border-top:1px solid rgba(255,107,53,.2);border-bottom:1px solid rgba(255,107,53,.2)}.durability-display{display:flex;align-items:center;gap:1vw;margin:1vh 0}.durability-display .label{font-size:1.4vh;color:#b89968}.durability-display .bar{flex:1;height:1.5vh;background:#0000004d;border-radius:4px;overflow:hidden}.durability-display .fill{height:100%;background:linear-gradient(90deg,#ff6b35,#4ade80);transition:width .3s ease}.durability-display .text{font-size:1.3vh;color:#f4e4c1;min-width:6vw;text-align:right}.action-section{margin-top:auto;padding-top:1.5vh;border-top:1px solid rgba(255,107,53,.3)}.action-button{width:100%;padding:1.2vh 0;background:linear-gradient(135deg,#8b3a14,#ff6b35);border:2px solid #f4e4c1;border-radius:8px;color:#fff;font-size:1.6vh;font-weight:700;cursor:pointer;transition:all .2s ease;margin-bottom:1vh}.action-button:hover:not(:disabled){transform:scale(1.02);box-shadow:0 0 15px #ff6b3580}.action-button.secondary{background:#2d1f1af2;border-color:#ff6b3580;color:#e8d5b7}.action-button.secondary:hover:not(:disabled){background:#ff6b3533}.quality-options{display:flex;flex-direction:column;gap:1vh;margin:1vh 0}.quality-option{display:flex;flex-direction:column;padding:1vh 1vw;background:#2d1f1af2;border:2px solid rgba(255,107,53,.2);border-radius:8px;cursor:pointer;transition:all .2s ease}.quality-option:hover{border-color:#ff6b3580;background:#2d1f1ab3}.quality-option.selected{border-color:#ff6b35;background:#ff6b351a}.quality-option.disabled{opacity:.5;cursor:not-allowed}.quality-option-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5vh}.quality-option-name{font-size:1.5vh;font-weight:700;color:#f4e4c1}.quality-option-chance{font-size:1.4vh;color:#4ade80}.quality-option-desc{font-size:1.2vh;color:#b89968;margin-bottom:.5vh}.quality-option-cost{display:flex;gap:1.5vw;font-size:1.2vh}.repair-all-section{display:flex;justify-content:space-between;align-items:center;padding:1.5vh 1.5vw;background:#2d1f1af2;border:1px solid rgba(255,107,53,.3);border-radius:8px;margin-bottom:2vh}.repair-all-info{display:flex;flex-direction:column;gap:.3vh}.repair-all-title{font-size:1.6vh;font-weight:700;color:#f4e4c1}.repair-all-cost{font-size:1.4vh;color:#d4af37}.repair-all-button{padding:1vh 2vw;background:linear-gradient(135deg,#8b3a14,#ff6b35);border:2px solid #f4e4c1;border-radius:8px;color:#fff;font-size:1.4vh;font-weight:700;cursor:pointer;transition:all .2s ease}.repair-all-button:hover:not(:disabled){transform:scale(1.05);box-shadow:0 0 10px #ff6b3580}.repair-all-button:disabled{background:#2d1f1a99;border-color:#e8d5b74d;color:#6d5d4b;cursor:not-allowed}.dismantle-warning{display:flex;align-items:center;gap:1vw;padding:1vh 1.5vw;background:#f443361a;border:1px solid rgba(244,67,54,.3);border-radius:8px;margin-bottom:1vh}.warning-icon{font-size:2vh}.warning-text{font-size:1.3vh;color:#f44336}.dismantle-preview{padding:1vh 1vw;background:#0003;border-radius:4px;margin-bottom:1vh}.preview-row{display:flex;justify-content:space-between;font-size:1.4vh;padding:.3vh 0}.preview-row .label{color:#b89968}.preview-row .value{color:#f4e4c1}.preview-row .value.gold{color:#d4af37}.preview-row .value.bonus{color:#4ade80}.confirm-modal{background:#1a1410f2;border:3px solid #ff6b35;border-radius:12px;padding:3vh 3vw;min-width:25vw;max-width:40vw}.confirm-modal h3{font-size:2.2vh;color:#ff6b35;margin:0 0 1.5vh}.sanctuary-background{position:absolute;top:0;left:0;width:100vw;height:100vh;opacity:.9;z-index:0;pointer-events:none}.sanctuary-screen{position:relative;width:100vw;height:100vh;display:grid;grid-template-rows:auto 1fr auto;color:#e8e0f0;padding-bottom:3vh;box-sizing:border-box;overflow:hidden;z-index:1}.sanctuary-header{text-align:center;margin-bottom:1.5vh;padding-bottom:1vh;border-bottom:2px solid rgba(85,30,136,.3)}.sanctuary-title-row{margin-bottom:1vh}.sanctuary-title{font-size:4vh;margin:0;color:#a855f7;text-shadow:0 0 20px rgba(168,85,247,.6);letter-spacing:.3vw}.sanctuary-subtitle{font-size:1.6vh;color:#9f7aea;margin:.5vh 0 0;opacity:.6}.sanctuary-resources{display:flex;justify-content:center;gap:3vw;margin-top:1vh}.soul-display{display:flex;align-items:center;gap:.8vw;padding:1vh 2vw;background:#581c87f2;border-radius:8px;border:1px solid rgba(168,85,247,.4);opacity:1}.soul-display.total{border-color:#a855f799}.soul-display.current-run{color:#fff;border-color:#1a0746cc;background:#5d2dcc66}.soul-icon{font-size:2.5vh;filter:drop-shadow(0 0 8px rgba(168,85,247,.8))}.soul-info{display:flex;flex-direction:column}.soul-label{font-size:1.2vh;color:#dbd3e9}.soul-value{font-size:2vh;font-weight:700;color:#e9d5ff}.exploration-display{display:flex;align-items:center;gap:.5vw;padding:1vh 1.5vw;background:#3b82f6f2;border-radius:8px;border:1px solid rgba(59,130,246,.4)}.exploration-icon{font-size:2vh}.exploration-value{font-size:1.6vh;color:#93c5fd}.sanctuary-content{display:grid;grid-template-columns:1fr 28vw;padding-inline:3vw;gap:2vw;overflow:hidden}.skill-tree-container{position:relative;display:flex;justify-content:center;align-items:center;background:#0f0a1af2;border:2px solid rgba(168,85,247,.2);border-radius:50px;overflow:hidden;opacity:.9}.skill-tree{position:relative;width:50vh;height:50vh;max-width:90%;max-height:90%}.center-orb{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8vh;height:8vh;background:radial-gradient(circle,#a855f7,#7c3aed,#581c87);border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:0 0 30px #a855f799,inset 0 0 15px #fff3;z-index:10;border:2px solid rgba(233,213,255,.5)}.center-orb-icon{font-size:2.5vh;filter:drop-shadow(0 0 5px rgba(255,255,255,.5))}.center-orb-value{font-size:1.4vh;font-weight:700;color:#fff;text-shadow:0 0 5px rgba(0,0,0,.5)}.tier-ring{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;border:1px dashed rgba(168,85,247,.2);pointer-events:none}.tier-ring.tier-1{width:20vh;height:20vh}.tier-ring.tier-2{width:32vh;height:32vh}.tier-ring.tier-3{width:44vh;height:44vh}.skill-node{position:absolute;width:6vh;height:6vh;transform:translate(-50%,-50%);border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:all .3s ease;border:2px solid transparent;z-index:5}.skill-node-inner{width:100%;height:100%;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#1e1432f2;border:2px solid rgba(100,100,100,.3);transition:all .3s ease}.skill-node .node-icon{font-size:2.2vh;transition:all .3s ease}.skill-node .node-cost{font-size:1vh;color:#9f7aea;margin-top:.2vh}.skill-node.locked .skill-node-inner{background:#1e1e2899;border-color:#5050644d;opacity:.7}.skill-node.locked .node-icon{filter:grayscale(100%)}.skill-node.locked .node-cost{color:#666}.skill-node.available .skill-node-inner{background:#581c87f2;border-color:#a855f799;animation:pulse-available 2s ease-in-out infinite}.skill-node.available:hover .skill-node-inner{background:#8b5cf6f2;border-color:#d8b4fe;box-shadow:0 0 25px #a855f7b3,0 0 40px #8b5cf666;transform:scale(1.1)}.skill-node.unlocked .skill-node-inner{background:linear-gradient(135deg,#a855f766,#8b5cf666);border-color:#d8b4fe;box-shadow:0 0 20px #a855f766}.skill-node.unlocked .node-icon{filter:drop-shadow(0 0 5px rgba(255,255,255,.5))}.skill-node.unlocked .node-cost{color:#d8b4fe}.skill-node.selected .skill-node-inner{border-color:#fff;box-shadow:0 0 20px #ffffff80}.skill-node:focus{outline:none}.skill-node:focus .skill-node-inner{outline:2px solid #fff;outline-offset:3px}.skill-node:focus:not(:focus-visible) .skill-node-inner{outline:none}.skill-node:focus-visible .skill-node-inner{outline:2px solid #fff;outline-offset:3px;box-shadow:0 0 20px #ffffff80}.connection-line{position:absolute;height:3px;background:#78648c66;transform-origin:left center;z-index:1;pointer-events:none;border-radius:2px}.connection-line.unlocked{height:4px;background:linear-gradient(90deg,#a855f7e6,#8b5cf6e6);box-shadow:0 0 8px #a855f799,0 0 16px #a855f74d}.connection-line.available{height:3px;background:linear-gradient(90deg,#a855f780,#8b5cf680);box-shadow:0 0 6px #a855f74d;animation:pulse-line 2s ease-in-out infinite}@keyframes pulse-line{0%,to{opacity:.7}50%{opacity:1}}.detail-panel{background:#1e1432f2;border:2px solid rgba(168,85,247,.3);border-radius:12px;padding:2vh 1.5vw;display:flex;flex-direction:column;overflow-y:auto}.no-selection{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;color:#6d5d8b;text-align:center}.detail-header{display:flex;align-items:center;gap:1vw;padding-bottom:1.5vh;border-bottom:1px solid rgba(168,85,247,.3)}.detail-icon{font-size:4vh;filter:drop-shadow(0 0 8px rgba(168,85,247,.5))}.detail-name{font-size:2vh;margin:0;color:#e9d5ff}.detail-badges{display:flex;gap:.5vw;margin-top:.5vh}.badge{padding:.3vh .6vw;border-radius:4px;font-size:1.1vh;font-weight:700}.detail-description{font-size:1.4vh;color:#c4b5fd;line-height:1.6;padding:1vh 0}.unlock-button-container{margin-top:1.5vh}.progress-stats{display:flex;justify-content:center;gap:2vw;margin-top:1vh;padding-top:1vh;border-top:1px solid rgba(168,85,247,.2)}.stat-item{display:flex;flex-direction:column;align-items:center;gap:.3vh}.stat-value{font-size:1.8vh;font-weight:700;color:#d8b4fe}.stat-label{font-size:1.1vh;color:#9f7aea}.skill-node.just-unlocked .skill-node-inner{animation:unlock-success .5s ease-out}.sanctuary-notification{position:fixed;top:10vh;left:50%;transform:translate(-50%);padding:1.5vh 3vw;background:#581c87f2;border:2px solid #a855f7;color:#e9d5ff;border-radius:8px;font-weight:700;font-size:1.8vh;z-index:1000;animation:notification-slide 3s ease;box-shadow:0 0 30px #a855f780}.sanctuary-notification.success{background:#22c55ef2;border-color:#4ade80;color:#dcfce7}.sanctuary-notification.error{background:#ef4444f2;border-color:#f87171;color:#fef2f2}@keyframes notification-slide{0%{opacity:0;transform:translate(-50%) translateY(-20px)}10%{opacity:.5;transform:translate(-50%) translateY(0)}90%{opacity:.5;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(-20px)}}.class-restriction{display:flex;align-items:center;gap:.5vw;padding:.5vh 1vw;background:#a855f733;border:1px solid rgba(168,85,247,.4);border-radius:6px;font-size:1.2vh;color:#c4b5fd;margin-top:.5vh}.class-restriction.swordsman{border-color:#ef444466}.class-restriction.mage{border-color:#3b82f666}.class-restriction.summoner{border-color:#22c55e66}@media(max-width:1200px){.sanctuary-content{grid-template-columns:1fr 35vw;gap:1.5vw}.skill-tree{width:45vh;height:45vh}.skill-node{width:5vh;height:5vh}.skill-node .node-icon{font-size:1.8vh}.skill-node .node-cost{font-size:.9vh}.sanctuary-resources{gap:2vw}.soul-display{padding:.8vh 1.5vw}}@media(max-width:900px){.sanctuary-content{grid-template-columns:1fr;grid-template-rows:1fr auto;gap:1vh}.detail-panel{max-height:30vh;overflow-y:auto}.skill-tree{width:40vh;height:40vh}.sanctuary-resources{flex-wrap:wrap;gap:1vw}.progress-stats{flex-wrap:wrap;gap:1.5vw}}@media(max-width:600px){.sanctuary-screen{padding:1vh 1vw}.skill-tree{width:35vh;height:35vh}.skill-node{width:4.5vh;height:4.5vh}.center-orb{width:6vh;height:6vh}.center-orb-icon{font-size:2vh}.center-orb-value{font-size:1.2vh}.tier-ring.tier-1{width:16vh;height:16vh}.tier-ring.tier-2{width:26vh;height:26vh}.tier-ring.tier-3{width:36vh;height:36vh}.detail-panel{padding:1.5vh 1vw}.detail-icon{font-size:3vh}.detail-name{font-size:1.6vh}.sanctuary-back-button{padding:1vh 2vw;font-size:1.4vh}}:root{--font-primary: "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;--font-weight-normal: 400;--font-weight-bold: 700;--line-height-base: 1.5;--color-hp: #d94a4a;--color-hp-light: #ff6b6b;--color-ap: #808080;--color-ap-light: #a0a0a0;--color-guard: #4488cc;--color-guard-light: #6699ff;--color-energy: #2b9f0e;--color-energy-light: #3cb82a;--color-success: #4caf50;--color-success-dark: rgba(76, 175, 80, .9);--color-error: #f44336;--color-error-dark: rgba(244, 67, 54, .9);--color-warning: #ffc107;--color-warning-dark: rgba(255, 193, 7, .8);--color-mastery-0: #343434;--color-mastery-1: #2196f3;--color-mastery-2: #9c27b0;--color-mastery-3: #ff9800;--color-quality-poor: #5b5b5b;--color-quality-normal: #9ee2e2;--color-quality-good: #05e758;--color-quality-master: #fb2424;--color-gold: #d4af37;--color-gold-light: #ffd54f;--color-gold-dark: #8b6914;--color-magic-stone: #6495ed;--blacksmith-primary: #ff6b35;--blacksmith-secondary: #ff9f66;--blacksmith-bg: rgba(45, 31, 26, .95);--blacksmith-bg-dark: rgba(26, 20, 16, .95);--blacksmith-border: rgba(255, 107, 53, .3);--blacksmith-text: #e8d5b7;--blacksmith-accent: #f4e4c1;--shop-primary: #d4af37;--shop-secondary: #ffd700;--shop-bg: rgba(45, 31, 26, .95);--shop-bg-dark: rgba(26, 20, 16, .95);--shop-border: rgba(212, 175, 55, .3);--shop-text: #e8d5b7;--shop-accent: #f4e4c1;--sanctuary-primary: #a855f7;--sanctuary-secondary: #7c3aed;--sanctuary-bg: rgba(30, 20, 50, .95);--sanctuary-bg-dark: rgba(88, 28, 135, .95);--sanctuary-border: rgba(168, 85, 247, .3);--sanctuary-text: #e8e0f0;--sanctuary-accent: #e9d5ff;--storage-primary: #ff6f00;--storage-secondary: #ffa000;--storage-bg: rgba(45, 31, 26, .95);--storage-bg-dark: rgba(26, 20, 16, .95);--storage-border: rgba(255, 111, 0, .3);--storage-text: #e8d5b7;--storage-accent: #f4e4c1;--guild-primary: #f4e4c1;--guild-secondary: #e8d5b7;--guild-bg: rgba(45, 31, 26, .8);--guild-bg-dark: rgba(26, 20, 16, .6);--guild-border: rgba(232, 213, 183, .3);--guild-text: #e8d5b7;--guild-accent: #f4e4c1;--library-primary: #a855f7;--library-secondary: #9f7aea;--library-bg: rgba(30, 20, 50, .8);--library-bg-dark: rgba(15, 10, 26, .95);--library-border: rgba(168, 85, 247, .3);--library-text: #e8e0f0;--library-accent: #e9d5ff;--theme-primary: #1a1a24;--theme-secondary: #2a2a3d;--theme-accent: #8b7aa8;--theme-glow: rgba(139, 122, 168, .25);--theme-hover: #a090b0;--spacing-xs: .5vh;--spacing-sm: 1vh;--spacing-md: 1.5vh;--spacing-lg: 2vh;--spacing-xl: 3vh;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--radius-round: 50%;--transition-fast: .2s ease;--transition-normal: .3s ease;--transition-slow: .4s ease;--z-base: 1;--z-dropdown: 100;--z-modal: 1000;--z-notification: 1100;--z-tooltip: 1200;--card-base-width: 13vh;--card-aspect-ratio: 2 / 3}@keyframes notification-slide{0%{opacity:0;transform:translate(-50%) translateY(-20px)}10%{opacity:1;transform:translate(-50%) translateY(0)}90%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(-20px)}}@keyframes fadeInOut{0%{opacity:0;transform:translate(-50%) translateY(-20px)}15%{opacity:1;transform:translate(-50%) translateY(0)}85%{opacity:1;transform:translate(-50%) translateY(0)}to{opacity:0;transform:translate(-50%) translateY(-20px)}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes scaleIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}@keyframes cardDrawIn{0%{opacity:0;transform:translate(40vw,10vh) scale(.2) rotate(45deg)}to{opacity:1;transform:translate(0) scale(1) rotate(var(--rot))}}@keyframes discardToPile{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:translate(-50vw,1.5vh) scale(.1) rotate(-90deg)}}@keyframes turnMessageAppear{0%{opacity:0;transform:translate(-50%,-50%) translate(100vw)}40%,60%{opacity:1;transform:translate(-50%,-50%) translate(0)}to{opacity:0;transform:translate(-50%,-50%) translate(-100vw)}}@keyframes breakFlash{0%{box-shadow:0 0 #ff0019cc;transform:scale(1)}50%{box-shadow:0 0 1vh .5vh #ff001980;transform:scale(1.1)}to{box-shadow:0 0 #ff001900;transform:scale(1)}}@keyframes energyConsume{0%{box-shadow:0 0 #fa0c;transform:scale(1)}50%{box-shadow:0 0 1vh .5vh #ffaa0080;transform:scale(1.05)}to{box-shadow:0 0 #fa00;transform:scale(1)}}@keyframes swordEnergyMaxPulse{0%,to{box-shadow:0 0 2vh #f009}50%{box-shadow:0 0 3vh #ff6400}}@keyframes maxEnergyPulse{0%{box-shadow:0 0 .5vh #ff3232;transform:scale(1)}to{box-shadow:0 0 1.5vh #ff3232;transform:scale(1.1)}}@keyframes tooltipFadeIn{0%{opacity:0;transform:translate(-50%) translateY(-90%)}to{opacity:1;transform:translate(-50%) translateY(-100%)}}@keyframes pulse-available{0%,to{box-shadow:0 0 10px #a855f74d}50%{box-shadow:0 0 20px #a855f799}}@keyframes glow-unlock{0%{box-shadow:0 0 10px #a855f780}to{box-shadow:0 0 25px #a855f7cc}}@keyframes unlock-success{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}@keyframes twinkle{0%,to{opacity:.6}50%{opacity:1}}@keyframes fogDrift{0%,to{transform:translate(0)}50%{transform:translate(20px)}}@keyframes titleGlow{0%,to{text-shadow:0 0 20px rgba(138,98,158,.8),0 0 40px rgba(138,98,158,.4),0 4px 8px rgba(0,0,0,.8)}50%{text-shadow:0 0 30px rgba(138,98,158,1),0 0 60px rgba(138,98,158,.6),0 4px 8px rgba(0,0,0,.8)}}@keyframes lockShake{0%,to{transform:rotate(0)}25%{transform:rotate(-5deg)}75%{transform:rotate(5deg)}}@keyframes hoverBounce{0%,to{transform:translate(-50%) translateY(0)}50%{transform:translate(-50%) translateY(-8px)}}@keyframes packOpen{0%{transform:translate(-50%,-50%) scale(.8);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}.notification-toast{position:fixed;top:10vh;left:50%;transform:translate(-50%);padding:1.5vh 3vw;border-radius:8px;font-weight:700;font-size:1.8vh;z-index:var(--z-notification, 1100);animation:notification-slide 2s ease}.notification-toast.success{background:var(--color-success-dark, rgba(76, 175, 80, .9));color:#dcfce7;border:2px solid var(--color-success, #4caf50)}.notification-toast.error{background:var(--color-error-dark, rgba(244, 67, 54, .9));color:#fff;border:2px solid var(--color-error, #f44336)}.notification-toast.warning{background:var(--color-warning-dark, rgba(255, 193, 7, .8));color:#1a1612;border:2px solid var(--color-warning, #ffc107)}.blacksmith-notification,.notification-toast.blacksmith{background:#ff6b35e6;color:#1a1612;border:none;animation:fadeInOut 2s ease}.blacksmith-notification.success,.notification-toast.blacksmith.success{background:var(--color-success-dark)}.blacksmith-notification.error,.notification-toast.blacksmith.error{background:var(--color-error-dark);color:#fff}.shop-notification,.notification-toast.shop{background:#d4af37e6;color:#1a1612;border:none;animation:fadeInOut 2s ease}.sanctuary-notification,.notification-toast.sanctuary{background:#581c87f2;border:2px solid #a855f7;color:#e9d5ff;box-shadow:0 0 30px #a855f780;animation:notification-slide 3s ease}.sanctuary-notification.success,.notification-toast.sanctuary.success{background:#22c55ef2;border-color:#4ade80;color:#dcfce7}.sanctuary-notification.error,.notification-toast.sanctuary.error{background:#ef4444f2;border-color:#f87171;color:#fef2f2}.storage-notification,.notification-toast.storage{background:#1a1410f2;border:2px solid #ff6f00;color:#f4e4c1;box-shadow:0 0 20px #ff6f004d}.tab-navigation{display:flex;justify-content:center;gap:1vw;margin-bottom:1.5vh}.tab-item{display:flex;flex-direction:column;align-items:center;gap:.5vh;padding:1.2vh 2vw;background:var(--tab-bg, rgba(45, 31, 26, .95));border:2px solid var(--tab-border, rgba(255, 255, 255, .3));border-radius:8px;color:var(--tab-text, #b89968);cursor:pointer;transition:all .3s ease}.tab-item:hover{background:var(--tab-bg-hover, rgba(45, 31, 26, .98));border-color:var(--tab-border-hover, rgba(255, 255, 255, .5));transform:translateY(-2px)}.tab-item.active{background:var(--tab-bg-active, rgba(255, 255, 255, .15));border-color:var(--tab-accent, #fff);color:var(--tab-text-active, #f4e4c1)}.tab-icon{font-size:2.2vh}.tab-label{font-size:1.5vh;font-weight:600}.blacksmith-tabs{--tab-bg: rgba(45, 31, 26, .95);--tab-border: rgba(255, 107, 53, .3);--tab-border-hover: rgba(255, 107, 53, .5);--tab-bg-active: rgba(255, 107, 53, .15);--tab-accent: #ff6b35}.blacksmith-tab{display:flex;flex-direction:column;align-items:center;gap:.5vh;padding:1.2vh 2vw;background:#2d1f1af2;border:2px solid rgba(255,107,53,.3);border-radius:8px;color:#b89968;cursor:pointer;transition:all .3s ease}.blacksmith-tab:hover{background:#2d1f1afa;border-color:#ff6b3580;transform:translateY(-2px)}.blacksmith-tab.active{background:#ff6b3526;border-color:#ff6b35;color:#f4e4c1}.shop-tabs{--tab-bg: rgba(45, 31, 26, .95);--tab-border: rgba(212, 175, 55, .3);--tab-border-hover: rgba(212, 175, 55, .5);--tab-bg-active: rgba(212, 175, 55, .15);--tab-accent: #d4af37}.shop-tab{display:flex;flex-direction:column;align-items:center;gap:.5vh;padding:1.2vh 2vw;background:#2d1f1af2;border:2px solid rgba(212,175,55,.3);border-radius:8px;color:#b89968;cursor:pointer;transition:all .3s ease}.shop-tab:hover{background:#2d1f1afa;border-color:#d4af3780;transform:translateY(-2px)}.shop-tab.active{background:#d4af3726;border-color:#d4af37;color:#f4e4c1}.guild-tabs{--tab-bg: rgba(45, 31, 26, .6);--tab-border: rgba(232, 213, 183, .3);--tab-border-hover: rgba(232, 213, 183, .5);--tab-bg-active: rgba(232, 213, 183, .15);--tab-accent: #f4e4c1}.guild-tab{display:flex;flex-direction:column;align-items:center;gap:.8vh;padding:1.5vh 2vw;background:#2d1f1a99;border:2px solid rgba(232,213,183,.3);border-radius:8px;color:#b89968;cursor:pointer;transition:all .3s ease}.guild-tab:hover{background:#2d1f1acc;border-color:#e8d5b780;transform:translateY(-2px)}.guild-tab.active{background:#e8d5b726;border-color:#f4e4c1;color:#f4e4c1}.library-tabs{--tab-bg: rgba(30, 20, 50, .8);--tab-border: rgba(100, 100, 100, .3);--tab-border-hover: rgba(168, 85, 247, .5);--tab-bg-active: rgba(88, 28, 135, .6);--tab-accent: #a855f7;--tab-text: #9f7aea;--tab-text-active: #e9d5ff}.storage-tabs{--tab-bg: rgba(45, 31, 26, .95);--tab-border: rgba(255, 111, 0, .3);--tab-border-hover: rgba(255, 111, 0, .5);--tab-bg-active: rgba(255, 111, 0, .15);--tab-accent: #ff6f00}.storage-tab{padding:1.2vh 2vw;background:#2d1f1af2;border:2px solid rgba(255,111,0,.3);border-radius:8px;color:#b89968;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.storage-tab:hover{background:#2d1f1afa;border-color:#ff6f0080;transform:translateY(-2px)}.storage-tab-active{background:#ff6f0026;border-color:#ff6f00;color:#f4e4c1;font-weight:700}.back-button{display:block;margin:1vh auto 0;padding:1.2vh 2vw;background:var(--btn-bg, rgba(45, 31, 26, .95));border:2px solid var(--btn-border, rgba(255, 255, 255, .3));border-radius:8px;color:var(--btn-text, #e8d5b7);font-size:1.6vh;cursor:pointer;transition:all .3s ease}.back-button:hover{background:var(--btn-bg-hover, rgba(45, 31, 26, 1));border-color:var(--btn-accent, #fff);transform:scale(1.05)}.blacksmith-back-button{display:block;margin:1vh auto 0;padding:1.2vh 2vw;background:#2d1f1af2;border:2px solid rgba(255,107,53,.3);border-radius:8px;color:#e8d5b7;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.blacksmith-back-button:hover{background:#2d1f1a;border-color:#ff6b35;transform:scale(1.05)}.shop-back-button{display:block;margin:1vh auto 0;padding:1.2vh 2vw;background:#2d1f1af2;border:2px solid rgba(212,175,55,.3);border-radius:8px;color:#e8d5b7;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.shop-back-button:hover{background:#2d1f1a;border-color:#d4af37;transform:scale(1.05)}.sanctuary-back-button{display:block;margin:1.5vh auto 0;padding:1.2vh 2.5vw;background:#1e1432f2;border:2px solid rgba(168,85,247,.3);border-radius:8px;color:#e8e0f0;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.sanctuary-back-button:hover{background:#581c8766;border-color:#a855f7;transform:scale(1.05)}.guild-back-button{display:block;margin:0 auto;padding:1.5vh 2vw;background:#2d1f1acc;border:2px solid rgba(232,213,183,.3);border-radius:8px;color:#e8d5b7;font-size:1.8vh;cursor:pointer;transition:all .3s ease}.guild-back-button:hover{background:#2d1f1a;border-color:#f4e4c1;transform:scale(1.05)}.storage-back-button{padding:1vh 2vw;background:#2d1f1af2;border:2px solid rgba(255,111,0,.3);border-radius:8px;color:#e8d5b7;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.storage-back-button:hover{background:#2d1f1a;border-color:#ff6f00;transform:scale(1.05)}.action-button{width:100%;padding:1.2vh 0;background:linear-gradient(135deg,var(--btn-gradient-start, #8b3a14) 0%,var(--btn-gradient-end, #ff6b35) 100%);border:2px solid var(--btn-border-color, #f4e4c1);border-radius:8px;color:#fff;font-size:1.6vh;font-weight:700;cursor:pointer;transition:all .2s ease;margin-bottom:1vh}.action-button:hover:not(:disabled){transform:scale(1.02);box-shadow:0 0 15px var(--btn-glow, rgba(255, 107, 53, .5))}.action-button:disabled{background:#2d1f1af2;border-color:#e8d5b74d;color:#6d5d4b;cursor:not-allowed}.action-button.secondary{background:#2d1f1af2;border-color:var(--btn-secondary-border, rgba(255, 107, 53, .5));color:#e8d5b7}.action-button.secondary:hover:not(:disabled){background:var(--btn-secondary-bg-hover, rgba(255, 107, 53, .2))}.action-button.danger{background:linear-gradient(135deg,#8b1414,#f44336)}.action-button.danger:hover:not(:disabled){box-shadow:0 0 15px #f4433680}.buy-button{padding:.8vh 1.2vw;background:linear-gradient(135deg,#8b6914,#d4af37);border:1px solid #f4e4c1;border-radius:6px;color:#1a1612;font-size:1.4vh;font-weight:700;cursor:pointer;transition:all .2s ease}.buy-button:hover:not(:disabled){transform:scale(1.05);box-shadow:0 0 10px #d4af3780}.buy-button:disabled{background:#2d1f1af2;border-color:#e8d5b74d;color:#6d5d4b;cursor:not-allowed}.sell-button{width:100%;padding:1.2vh 0;background:linear-gradient(135deg,#8b6914,#d4af37);border:2px solid #f4e4c1;border-radius:8px;color:#1a1612;font-size:1.6vh;font-weight:700;cursor:pointer;transition:all .2s ease}.sell-button:hover{transform:scale(1.02);box-shadow:0 0 15px #d4af3780}.transfer-btn{width:2.5vw;height:4vh;background:#2d1f1af2;border:2px solid rgba(255,111,0,.3);border-radius:6px;color:#e8d5b7;font-size:1.5vh;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.transfer-btn:hover:not(:disabled){background:#ff6f004d;border-color:#ff6f00;color:#fff;transform:scale(1.05)}.transfer-btn:disabled{opacity:.3;cursor:not-allowed}.unlock-button{position:relative;width:100%;padding:1.5vh 0;background:linear-gradient(135deg,#581c87,#7c3aed);border:2px solid #a855f7;border-radius:8px;color:#fff;font-size:1.6vh;font-weight:700;cursor:pointer;transition:all .3s ease;overflow:hidden}.unlock-button:hover:not(:disabled){background:linear-gradient(135deg,#6b21a8,#8b5cf6);box-shadow:0 0 20px #a855f780}.unlock-button:disabled{background:#322846f2;border-color:#6464644d;color:#666;cursor:not-allowed}.unlock-button .button-text{position:relative;z-index:2}.unlock-progress{position:absolute;top:0;left:0;height:100%;background:#a855f766;transition:width .05s linear;z-index:1}.unlock-button.unlocking{animation:glow-unlock .5s ease-in-out infinite alternate}.confirm-button{padding:1vh 2vw;border-radius:6px;font-size:1.4vh;font-weight:700;cursor:pointer;transition:all .2s ease}.confirm-button.cancel{background:#2d1f1af2;border:2px solid rgba(255,107,53,.3);color:#e8d5b7}.confirm-button.cancel:hover{background:#ff6b3533}.confirm-button.confirm{background:linear-gradient(135deg,#8b1414,#f44336);border:2px solid #f44336;color:#fff}.confirm-button.confirm:hover{box-shadow:0 0 15px #f4433680}.badge{padding:.2vh .5vw;border-radius:4px;font-size:1.1vh;font-weight:700;color:#fff}.attack-badge{border:var(--border-color-attack, #700000) .2vh solid;background-color:#bc1d1d}.guard-badge{border:var(--border-color-guard, #004070) .2vh solid;background-color:#0070dd}.skill-badge{border:var(--border-color-skill, #006400) .2vh solid;background-color:#00bf00}.stance-badge{border:var(--border-color-stance, #5500ff) .2vh solid;background-color:#50f}.level-badge{position:absolute;top:.3vh;right:.3vw;padding:.2vh .4vw;background:#ff6b35cc;border-radius:4px;font-size:1vh;font-weight:700;color:#fff}.level-badge.max{background:#9c27b0cc}.badge.level{background:#ff6b354d;color:#ff6b35}.quality-badge{position:absolute;top:.3vh;left:.3vw;padding:.2vh .4vw;border-radius:4px;font-size:1vh;font-weight:700}.quality-badge.poor,.badge.quality-poor{background:#888;color:#fff}.quality-badge.normal,.badge.quality-normal{background:#555;color:#fff}.quality-badge.good,.badge.quality-good{background:#4ade804d;color:#4ade80}.quality-badge.master,.badge.quality-master{background:#fbbf244d;color:#fbbf24}.quality-poor{background:linear-gradient(135deg,#2d1f1a99,#3c281e99)}.quality-normal{background:linear-gradient(135deg,#3c281e99,#4b322899)}.quality-good{background:linear-gradient(135deg,#1e3a5f99,#2c528299)}.quality-master{background:linear-gradient(135deg,#4a148c99,#6a1b9a99)}.equipment-card.rarity-epic,.item-card-compact.rarity-epic,.sell-item.rarity-epic{border-color:#9c27b080}.equipment-card.rarity-legendary,.item-card-compact.rarity-legendary,.sell-item.rarity-legendary{border-color:#ff980099}.badge.tier{background:#a855f74d;color:#d8b4fe}.badge.category{color:#fff}.badge.category.hp{background:#ef444466}.badge.category.gold{background:#eab30866}.badge.category.utility{background:#22c55e66}.badge.category.class{background:#a855f766}.badge.category.exploration{background:#3b82f666}.badge.category.combat{background:#f9731666}.badge.status{padding:.3vh .8vw}.badge.status.unlocked{background:#a855f766;color:#d8b4fe}.badge.status.available{background:#22c55e66;color:#86efac}.badge.status.locked{background:#64646466;color:#9ca3af}.enemy-badge{padding:.3vh .8vw;border-radius:4px;font-size:1.1vh;font-weight:700}.enemy-badge.normal{background:#a855f74d;color:#d8b4fe}.enemy-badge.boss{background:#ef44444d;color:#fca5a5}.coming-soon-badge{display:inline-block;padding:1vh 2vw;background:#ffc10733;border:2px solid rgba(255,193,7,.5);border-radius:20px;color:#ffc107;font-weight:700;margin-bottom:3vh;font-size:1.6vh}.pack-badge{display:inline-block;padding:.3vh .6vw;background:#d4af374d;border-radius:4px;font-size:1.2vh;color:#d4af37;margin-top:.3vh}.detail-panel{background:var(--panel-bg, rgba(45, 31, 26, .95));border:2px solid var(--panel-border, rgba(255, 255, 255, .2));border-radius:8px;padding:1.5vh 1.5vw;display:flex;flex-direction:column}.no-selection{display:flex;justify-content:center;align-items:center;height:100%;color:#6d5d4b;font-size:1.6vh}.item-detail{display:flex;flex-direction:column;gap:1.5vh;height:100%}.detail-header{display:flex;align-items:center;gap:1vw}.detail-icon{font-size:4vh}.detail-title{flex:1}.detail-name{font-size:2vh;margin:0;color:#f4e4c1}.detail-badges{display:flex;gap:.5vw;margin-top:.3vh}.detail-description{font-size:1.4vh;color:#b89968;line-height:1.5;margin:0}.stats-section{padding:1vh 0;border-top:1px solid var(--panel-border, rgba(255, 255, 255, .2));border-bottom:1px solid var(--panel-border, rgba(255, 255, 255, .2))}.stat-row{display:flex;justify-content:space-between;font-size:1.4vh;padding:.3vh 0}.stat-row .label{color:#b89968}.stat-row .value{color:#f4e4c1}.stat-row .value.improved{color:#4ade80}.info-row{display:flex;justify-content:space-between;font-size:1.4vh;padding:.5vh 0;border-bottom:1px solid rgba(255,255,255,.1)}.info-row span:first-child{color:#b89968}.action-section{margin-top:auto;padding-top:1.5vh;border-top:1px solid var(--panel-border, rgba(255, 255, 255, .3))}.cost-display{display:flex;justify-content:center;gap:2vw;margin-bottom:1vh;padding:.8vh 1vw;background:#0003;border-radius:4px}.cost-item{display:flex;align-items:center;gap:.3vw;font-size:1.4vh}.cost-item.gold{color:#d4af37}.cost-item.stones{color:#6495ed}.cost-item.insufficient{color:#f44336}.resource-display{display:flex;align-items:center;gap:.5vw;padding:.8vh 1.5vw;background:#2d1f1af2;border-radius:6px;border:1px solid rgba(255,255,255,.3)}.resource-display.gold{border-color:#d4af3780}.resource-display.stones{border-color:#6495ed80}.resource-icon{font-size:2vh}.resource-value{font-size:1.8vh;font-weight:700;color:#f4e4c1}.detail-panel.sanctuary{background:#1e1432f2;border:2px solid rgba(168,85,247,.3);border-radius:12px;padding:2vh 1.5vw;overflow-y:auto}.detail-panel.sanctuary .no-selection{flex-direction:column;text-align:center;color:#6d5d8b}.no-selection-icon{font-size:5vh;margin-bottom:2vh;opacity:.5}.no-selection-text{font-size:1.6vh}.node-detail{display:flex;flex-direction:column;gap:1.5vh;height:100%}.node-detail .detail-header{padding-bottom:1.5vh;border-bottom:1px solid rgba(168,85,247,.3)}.node-detail .detail-icon{filter:drop-shadow(0 0 8px rgba(168,85,247,.5))}.node-detail .detail-name{color:#e9d5ff}.effects-section{padding:1vh 0;border-top:1px solid rgba(168,85,247,.2)}.effects-title{font-size:1.4vh;color:#9f7aea;margin-bottom:.8vh}.effect-item{display:flex;align-items:center;gap:.5vw;padding:.5vh 0;font-size:1.3vh}.effect-bullet{width:.8vh;height:.8vh;background:#a855f7;border-radius:50%}.effect-text{color:#e9d5ff}.prerequisites-section{padding:1vh 0;border-top:1px solid rgba(168,85,247,.2)}.prerequisites-title{font-size:1.4vh;color:#9f7aea;margin-bottom:.8vh}.prerequisite-item{display:flex;align-items:center;gap:.5vw;padding:.3vh 0;font-size:1.2vh}.prerequisite-status{font-size:1.3vh}.prerequisite-name{color:#c4b5fd}.prerequisite-name.met{color:#86efac}.prerequisite-name.unmet{color:#f87171}.cost-section{display:flex;align-items:center;justify-content:center;gap:1vw;padding:1.5vh 0;background:#581c87f2;border-radius:8px;margin-top:auto}.cost-icon{font-size:2vh}.cost-amount{font-size:2vh;font-weight:700;color:#e9d5ff}.cost-label{font-size:1.4vh;color:#9f7aea}.cost-section.affordable{border:1px solid rgba(34,197,94,.4)}.cost-section.insufficient{border:1px solid rgba(239,68,68,.4)}.cost-section.insufficient .cost-amount{color:#f87171}.empty-message{display:flex;justify-content:center;align-items:center;height:20vh;color:#6d5d4b;font-size:1.8vh}.modal-content{background:var(--modal-bg, rgba(26, 20, 16, .95));border:2px solid var(--modal-border, rgba(255, 255, 255, .3));border-radius:var(--radius-lg, 12px);box-shadow:0 0 5vh var(--modal-glow, rgba(138, 98, 158, .3));display:flex;flex-direction:column;padding:2vh;animation:scaleIn .3s cubic-bezier(.175,.885,.32,1.275)}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2vh;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:1vh}.modal-header h2,.modal-header h3{margin:0;color:var(--modal-title-color, #f4e4c1)}.modal-close-btn{background:none;border:none;color:#fff;font-size:4vh;cursor:pointer;line-height:1;transition:color .2s ease}.modal-close-btn:hover{color:var(--modal-accent, #ff6b35)}.modal-body{flex:1;overflow-y:auto;padding:1vh}.confirm-modal-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:var(--z-modal, 1000)}.confirm-modal{background:#1a1410f2;border:3px solid var(--modal-accent, #ff6b35);border-radius:12px;padding:3vh 3vw;min-width:25vw;max-width:40vw}.confirm-modal h3{font-size:2.2vh;color:var(--modal-accent, #ff6b35);margin:0 0 1.5vh}.confirm-modal p{font-size:1.5vh;color:#e8d5b7;margin:0 0 2vh}.confirm-buttons{display:flex;justify-content:flex-end;gap:1vw}.pack-result{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#1a1410f2;border:3px solid #d4af37;border-radius:12px;padding:3vh 3vw;z-index:var(--z-modal, 1000);text-align:center;min-width:30vw;animation:packOpen .3s ease}.pack-result h3{font-size:2.5vh;color:#d4af37;margin:0 0 2vh}.pack-items{display:flex;flex-direction:column;gap:.8vh}.pack-item-result{padding:.8vh 1vw;background:#d4af371a;border-left:3px solid #d4af37;border-radius:4px;font-size:1.5vh;text-align:left}.storage-message{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:2vh 3vw;background:#1a1410f2;border:2px solid #ff6f00;border-radius:8px;font-size:1.8vh;color:#f4e4c1;text-align:center;z-index:var(--z-modal, 1000);box-shadow:0 0 20px #ff6f004d}.unlocked-message{display:flex;align-items:center;justify-content:center;gap:.8vw;padding:1.5vh 0;background:#581c87f2;border:1px solid rgba(168,85,247,.4);border-radius:8px;color:#d8b4fe;font-size:1.5vh}.unlocked-icon{font-size:1.8vh}.locked-message{padding:1vh;background:#322846f2;border:1px solid rgba(100,100,100,.3);border-radius:8px;color:#9ca3af;font-size:1.3vh;text-align:center}.library-screen{position:relative;width:100vw;height:100vh;display:flex;flex-direction:column;background:linear-gradient(135deg,#0f0a1a,#1a0f2e,#0d0815);color:#e8e0f0;padding-bottom:2vh;box-sizing:border-box;overflow:hidden}.library-header{text-align:center;margin-bottom:2vh;padding-bottom:1.5vh;border-bottom:2px solid rgba(168,85,247,.3)}.library-title{font-size:4vh;margin:0;color:#a855f7;text-shadow:0 0 20px rgba(168,85,247,.6);letter-spacing:.3vw}.library-subtitle{font-size:1.6vh;color:#9f7aea;margin:.5vh 0 0;opacity:.6}.library-tabs{display:flex;justify-content:center;gap:1vw;margin-bottom:2vh}.library-tab{padding:1vh 2vw;background:#1e1432cc;border:2px solid rgba(100,100,100,.3);border-radius:8px;color:#9f7aea;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.library-tab:hover{border-color:#a855f780;background:#581c874d}.library-tab.active{background:#581c8799;border-color:#a855f7;color:#e9d5ff}.library-content{flex:1;display:flex;flex-direction:column;overflow:hidden;padding:0 3vw}.library-filters{display:flex;gap:1vw;margin-bottom:1.5vh;padding:1vh 1vw;background:#1e143299;border-radius:8px;flex-wrap:wrap;align-items:center}.filter-group{display:flex;align-items:center;gap:.5vw}.filter-label{font-size:1.3vh;color:#9f7aea}.filter-select{padding:.6vh 1vw;background:#581c8766;border:1px solid rgba(168,85,247,.3);border-radius:4px;color:#e9d5ff;font-size:1.3vh;cursor:pointer}.filter-select:focus{outline:none;border-color:#a855f7}.search-input{padding:.6vh 1vw;background:#1e1432cc;border:1px solid rgba(168,85,247,.3);border-radius:4px;color:#e9d5ff;font-size:1.3vh;width:15vw}.search-input::placeholder{color:#6b5b8b}.search-input:focus{outline:none;border-color:#a855f7}.library-content .card-grid{display:grid;border:2px solid rgba(100,100,100,.3);border-radius:12px;grid-template-columns:repeat(auto-fill,minmax(calc(var(--card-base-width, 15vh) * .75 + 1vw),1fr));gap:4vw;overflow-y:auto;padding:2vh;flex:1;justify-items:center}.encyclopedia-card-wrapper{width:calc(var(--card-base-width, 13vh) * .75);aspect-ratio:2 / 3;transition:transform .3s ease}.encyclopedia-card-wrapper:hover{transform:scale(1.1);z-index:10}.library-screen .enemy-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(20vw,1fr));gap:1.5vw;overflow-y:auto;padding:1vh;flex:1}.library-screen .enemy-card{background:#1e1432e6;border:2px solid rgba(100,100,100,.3);border-radius:10px;padding:1.5vh 1.2vw;transition:all .3s ease}.library-screen .enemy-card:hover{border-color:#a855f780;transform:translateY(-.5vh)}.library-screen .enemy-card.boss{border-color:#ef444480;background:#32141ee6}.library-screen .enemy-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1vh;padding-bottom:.8vh;border-bottom:1px solid rgba(168,85,247,.2)}.library-screen .enemy-name{font-size:1.8vh;color:#e9d5ff;margin:0}.library-screen .enemy-name-ja{font-size:1.3vh;color:#9f7aea;margin-top:.3vh}.library-screen .enemy-badge{padding:.3vh .8vw;border-radius:4px;font-size:1.1vh;font-weight:700}.library-screen .enemy-badge.normal{background:#a855f74d;color:#d8b4fe}.library-screen .enemy-badge.boss{background:#ef44444d;color:#fca5a5}.library-screen .enemy-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:.5vh;margin-bottom:1vh}.library-screen .enemy-stat{display:flex;flex-direction:column;align-items:center;padding:.5vh;background:#0000004d;border-radius:4px}.library-screen .enemy-stat-label{font-size:1vh;color:#9f7aea}.library-screen .enemy-stat-value{font-size:1.4vh;font-weight:700;color:#e9d5ff}.library-screen .enemy-description{font-size:1.2vh;color:#a78bfa;line-height:1.5}.tips-container{display:flex;flex-direction:column;gap:1vh;overflow-y:auto;padding:1vh;flex:1}.tips-category{margin-bottom:1.5vh}.tips-category-header{display:flex;align-items:center;gap:1vw;padding:1vh 1vw;background:#581c8766;border-radius:8px;margin-bottom:1vh;cursor:pointer}.tips-category-icon{font-size:2vh}.tips-category-title{font-size:1.8vh;color:#e9d5ff;flex:1}.tips-category-count{font-size:1.3vh;color:#9f7aea}.tips-list{display:flex;flex-direction:column;gap:.8vh;padding-left:1vw}.tip-card{background:#1e1432cc;border:1px solid rgba(168,85,247,.2);border-radius:8px;padding:1.2vh 1.2vw;cursor:pointer;transition:all .3s ease}.tip-card:hover{border-color:#a855f780;background:#581c8733}.tip-card.expanded{background:#581c874d;border-color:#a855f7}.tip-title{font-size:1.5vh;color:#e9d5ff;margin-bottom:.5vh}.tip-content{font-size:1.3vh;color:#a78bfa;line-height:1.6;display:none}.tip-card.expanded .tip-content{display:block;margin-top:1vh;padding-top:1vh;border-top:1px solid rgba(168,85,247,.2)}.library-stats{display:flex;justify-content:center;gap:3vw;padding:1vh;background:#1e143299;border-radius:8px;margin-bottom:1.5vh}.stat-item{display:flex;flex-direction:column;align-items:center}.stat-value{font-size:2vh;font-weight:700;color:#a855f7}.stat-label{font-size:1.2vh;color:#9f7aea}.library-back-button{display:block;margin:1.5vh auto 0;padding:1.2vh 2.5vw;background:#1e1432f2;border:2px solid rgba(168,85,247,.3);border-radius:8px;color:#e8e0f0;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.library-back-button:hover{background:#581c8766;border-color:#a855f7;transform:scale(1.05)}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#6b5b8b}.empty-state-icon{font-size:5vh;margin-bottom:2vh;opacity:.5}.empty-state-text{font-size:1.8vh}@media(max-width:1200px){.card-grid{grid-template-columns:repeat(auto-fill,minmax(15vw,1fr))}.enemy-grid{grid-template-columns:repeat(auto-fill,minmax(28vw,1fr))}}.dungeon-gate-screen{width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;background:linear-gradient(135deg,#0a0a0f,#151520,#0d0d15);color:#e0e0e5;padding-bottom:3vh;box-sizing:border-box;overflow:hidden}.dungeon-gate-header{text-align:center;margin-bottom:3vh}.dungeon-gate-title{font-size:5vh;margin:0;color:#c9a0dc;text-shadow:0 0 20px rgba(201,160,220,.5);letter-spacing:.3vw}.dungeon-gate-subtitle{font-size:1.8vh;color:#8a7a9a;margin:1vh 0 0;font-style:italic}.depth-selection-container{flex:1;display:flex;flex-direction:column;align-items:center;width:100%;max-width:90vw}.depth-selection-title{font-size:2.5vh;color:#a090b0;margin:0 0 2vh;text-transform:uppercase;letter-spacing:.2vw}.depth-cards-grid{display:flex;gap:2vw;justify-content:center;flex-wrap:wrap;width:100%}.depth-card{position:relative;width:15vw;min-width:140px;height:35vh;min-height:280px;background:transparent;border:none;cursor:pointer;padding:0;transition:transform .3s ease}.depth-card:hover{transform:translateY(-1vh) scale(1.02)}.depth-card-inner{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;padding:2vh 1vw;box-sizing:border-box;background:linear-gradient(180deg,var(--depth-primary) 0%,rgba(10,10,15,.95) 100%);border:2px solid var(--depth-secondary);border-radius:12px;transition:all .3s ease}.depth-card:hover .depth-card-inner{border-color:var(--depth-accent);box-shadow:0 0 25px var(--depth-glow)}.depth-card.selected .depth-card-inner{border-color:var(--depth-hover);box-shadow:0 0 30px var(--depth-glow),inset 0 0 20px var(--depth-glow)}.depth-number{font-size:8vh;font-weight:700;color:var(--depth-accent);text-shadow:0 0 15px var(--depth-glow);line-height:1;margin-bottom:1vh}.depth-name-container{display:flex;flex-direction:column;align-items:center;margin-bottom:1.5vh}.depth-name-jp{font-size:3vh;color:var(--depth-accent);font-weight:700;text-shadow:0 0 10px var(--depth-glow)}.depth-name-en{font-size:1.4vh;color:#888;text-transform:uppercase;letter-spacing:.1vw;margin-top:.3vh}.depth-description{font-size:1.3vh;color:#999;text-align:center;margin:0;padding:0 .5vw;flex:1;display:flex;align-items:center}.depth-level{font-size:1.4vh;color:var(--depth-secondary);padding:.5vh 1.5vw;background:#0000004d;border-radius:4px;margin-top:auto}.depth-selected-indicator{position:absolute;bottom:-1.5vh;left:50%;transform:translate(-50%);width:0;height:0;border-left:1vw solid transparent;border-right:1vw solid transparent;border-bottom:1.5vh solid var(--depth-accent);filter:drop-shadow(0 0 10px var(--depth-glow))}.dungeon-gate-actions{margin-top:3vh;display:flex;justify-content:center}.start-exploration-button{padding:2vh 5vw;font-size:2vh;font-weight:700;color:#fff;background:linear-gradient(135deg,#3d2066,#5a3494);border:2px solid #8b5cf6;border-radius:8px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.1vw}.start-exploration-button:hover:not(:disabled){background:linear-gradient(135deg,#4c2980,#6b40b0);box-shadow:0 0 20px #8b5cf680;transform:scale(1.05)}.start-exploration-button:disabled{background:#32323c99;border-color:#6464784d;color:#666;cursor:not-allowed}.dungeon-gate-back-button{position:absolute;bottom:3vh;left:3vw;padding:1.2vh 2vw;background:#1e1e28cc;border:2px solid rgba(150,150,170,.3);border-radius:8px;color:#c0c0d0;font-size:1.6vh;cursor:pointer;transition:all .3s ease}.dungeon-gate-back-button:hover{background:#323246cc;border-color:#b4b4c880;transform:scale(1.05)}@media(max-width:1200px){.depth-cards-grid{gap:1.5vw}.depth-card{width:18vw;min-width:120px}}@media(max-width:800px){.depth-cards-grid{flex-wrap:wrap;gap:2vh}.depth-card{width:25vw;min-width:100px;height:30vh;min-height:200px}.depth-number{font-size:6vh}.depth-name-jp{font-size:2.5vh}}.node-map-screen{width:100vw;height:100vh;display:flex;flex-direction:column;background:linear-gradient(135deg,var(--map-primary, #0a0a0f) 0%,#0d0d15 50%,var(--map-primary, #0a0a0f) 100%);color:#e0e0e5;padding:2vh 2vw;box-sizing:border-box;overflow:hidden}.node-map-loading{display:flex;justify-content:center;align-items:center;font-size:2vh;color:#888}.node-map-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:1.5vh;border-bottom:2px solid var(--map-secondary, rgba(100, 100, 120, .3));margin-bottom:1vh}.node-map-title-row{display:flex;align-items:center;gap:1.5vw}.node-map-depth-badge{font-size:2.5vh;font-weight:700;color:var(--map-accent, #c9a0dc);padding:.5vh 1.5vw;background:var(--map-primary, rgba(60, 40, 80, .4));border:2px solid var(--map-secondary, rgba(150, 100, 180, .4));border-radius:8px;text-shadow:0 0 10px var(--map-glow, rgba(200, 160, 220, .5))}.node-map-title{font-size:3vh;margin:0;color:#c0c0d0}.node-map-stats{display:flex;gap:2vw}.node-map-stats .stat-item{display:flex;flex-direction:column;align-items:center}.node-map-stats .stat-label{font-size:1.2vh;color:#888;text-transform:uppercase}.node-map-stats .stat-value{font-size:2vh;font-weight:700;color:var(--map-accent, #c9a0dc)}.node-map-container{flex:1;display:flex;justify-content:center;align-items:center;padding:2vh 3vw}.node-map-grid{position:relative;width:60vw;height:70vh;max-width:800px;max-height:600px;background:#0a0a1480;border:2px solid var(--map-secondary, rgba(100, 100, 120, .3));border-radius:12px}.connection-lines-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}.connection-line{stroke:#64647866;stroke-width:2;transition:stroke .3s ease}.connection-line.unlocked{stroke:var(--map-accent, rgba(150, 100, 180, .8));filter:drop-shadow(0 0 4px var(--map-glow, rgba(150, 100, 180, .5)))}.nodes-layer{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.node-row{position:absolute;left:0;width:100%;height:0}.node-wrapper{position:absolute;transform:translate(-50%,-50%)}.map-node{position:relative;width:7vh;height:7vh;border-radius:50%;cursor:default;transition:all .3s ease}.map-node-inner{width:100%;height:100%;display:flex;justify-content:center;align-items:center;border-radius:50%;background:#1e1e2de6;border:3px solid rgba(80,80,100,.5);transition:all .3s ease}.map-node-icon{font-size:3vh;filter:grayscale(30%);transition:all .3s ease}.map-node-locked .map-node-inner{background:#1e1e2899;border-color:#3c3c504d;opacity:.5}.map-node-locked .map-node-icon{filter:grayscale(100%)}.map-node-available .map-node-inner{background:#281e3ccc;border-color:var(--map-accent, rgba(150, 100, 180, .8));box-shadow:0 0 15px var(--map-glow, rgba(150, 100, 180, .4))}.map-node-available .map-node-icon{filter:grayscale(0%)}.map-node-clickable{cursor:pointer}.map-node-clickable:hover .map-node-inner{transform:scale(1.1);border-color:var(--map-accent, #c9a0dc);box-shadow:0 0 25px var(--map-glow, rgba(200, 160, 220, .6))}.map-node-current .map-node-inner{background:linear-gradient(135deg,var(--map-secondary, #3d2066) 0%,var(--map-primary, #5a3494) 100%);border-color:#fff;box-shadow:0 0 20px #fff6;animation:pulse-current 1.5s ease-in-out infinite}.map-node-completed .map-node-inner{background:#283228cc;border-color:#64966499}.map-node-completed .map-node-icon{filter:grayscale(30%) brightness(.8)}.map-node-skipped .map-node-inner{background:#28283280;border-color:#5050644d;opacity:.6}.map-node-skipped .map-node-icon{filter:grayscale(80%)}.map-node-current-indicator{position:absolute;top:-1vh;left:50%;transform:translate(-50%);width:1.5vh;height:1.5vh;background:#fff;border-radius:50%;box-shadow:0 0 10px #fff;animation:bounce-indicator 1s ease-in-out infinite}.map-node-available-pulse{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:100%;border-radius:50%;border:2px solid var(--map-accent, rgba(150, 100, 180, .8));animation:pulse-available 2s ease-out infinite;pointer-events:none}@keyframes pulse-current{0%,to{box-shadow:0 0 15px #fff6}50%{box-shadow:0 0 25px #ffffffb3}}@keyframes pulse-available{0%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes bounce-indicator{0%,to{transform:translate(-50%) translateY(0)}50%{transform:translate(-50%) translateY(-.5vh)}}.map-node-type-boss .map-node-inner{border-width:4px}.map-node-type-boss.map-node-available .map-node-inner{border-color:gold;box-shadow:0 0 20px #ffd70080}.map-node-type-elite.map-node-available .map-node-inner{border-color:#dc143c;box-shadow:0 0 15px #dc143c66}.map-node-type-treasure.map-node-available .map-node-inner{border-color:gold}.map-node-type-rest.map-node-available .map-node-inner{border-color:#32cd32}.map-node-type-event.map-node-available .map-node-inner{border-color:#9370db}.current-node-info{display:flex;justify-content:center;align-items:center;gap:1vw;padding:1vh 0;font-size:1.6vh;color:#aaa}.current-node-label{color:#888}.current-node-type{color:var(--map-accent, #c9a0dc);font-weight:700}.node-map-actions{display:flex;justify-content:center;gap:2vw;padding:1.5vh 0}.retreat-button{padding:1.2vh 3vw;font-size:1.6vh;font-weight:700;color:#e0e0e5;background:#8b454599;border:2px solid rgba(180,100,100,.5);border-radius:8px;cursor:pointer;transition:all .3s ease}.retreat-button:hover{background:#a05050b3;border-color:#c87878b3;transform:scale(1.05)}.node-map-back-button{position:absolute;bottom:2vh;left:2vw;padding:1vh 1.5vw;background:#1e1e28cc;border:2px solid rgba(100,100,120,.3);border-radius:8px;color:#a0a0b0;font-size:1.4vh;cursor:pointer;transition:all .3s ease}.node-map-back-button:hover{background:#32323ccc;border-color:#8c8ca080}@media(max-width:1000px){.node-map-grid{width:80vw;height:60vh}.map-node{width:6vh;height:6vh}.map-node-icon{font-size:2.5vh}}:root{--card-base-width: 18vh;--card-aspect-ratio: 2 / 3}.card-size-sm{width:calc(var(--card-base-width) * .75)!important}.card-size-md{width:var(--card-base-width)!important}.card-size-lg{width:calc(var(--card-base-width) * 1.1)!important}.card.tag-attack{--border-color: #fa6767;--tag-color: #ff4141;--tag-accent: #df4646}.card.tag-guard{--tag-color: #4a8ed9;--tag-accent: #6ba8ff}.card.tag-skill{--tag-color: #14b8a6;--tag-accent: #2dd4bf}.card.tag-stance{--tag-color: #9a4ad9;--tag-accent: #b87aed}.card.mastery-1{box-shadow:0 .5vh 2vh #000c,inset 0 .5vh 1vh #0000004d,inset 0 0 .8vh #ffffff14}.card.mastery-2{box-shadow:0 .5vh 2vh #000c,inset 0 .5vh 1vh #0000004d,inset 0 0 1.2vh #ffd7001f;border-color:#c0c0c080!important}.card.mastery-3{box-shadow:0 .5vh 2vh #000c,inset 0 .5vh 1vh #0000004d,inset 0 0 1.5vh #ffd70033,0 0 1vh #ffd70040;border-color:#ffd70099!important;animation:masteryGlow 2.5s ease-in-out infinite}@keyframes masteryGlow{0%,to{box-shadow:0 .5vh 2vh #000c,inset 0 .5vh 1vh #0000004d,inset 0 0 1.5vh #ffd70033,0 0 1vh #ffd70040}50%{box-shadow:0 .5vh 2vh #000c,inset 0 .5vh 1vh #0000004d,inset 0 0 2vh #ffd70059,0 0 1.5vh #ffd70066}}.card.tag-attack,.card.tag-guard,.card.tag-skill,.card.tag-stance{background:linear-gradient(145deg,color-mix(in srgb,var(--tag-color) 40%,var(--theme-primary, #2a1f3d)),color-mix(in srgb,var(--tag-color) 25%,var(--theme-secondary, #1a1428)),color-mix(in srgb,var(--tag-color) 40%,var(--theme-primary, #2a1f3d)))}.character-select-screen{position:relative;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;background:linear-gradient(135deg,#0f0a1a,#1a0f2e,#0d0815);color:#e8e0f0;padding:3vh 3vw;box-sizing:border-box;overflow:scroll}.character-select-screen:before{content:"";position:absolute;inset:0;background:radial-gradient(ellipse at 20% 20%,rgba(168,85,247,.1) 0%,transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(139,92,246,.08) 0%,transparent 50%);pointer-events:none}.character-select-header{position:relative;z-index:1;text-align:center;margin-bottom:3vh}.character-select-title{font-size:3vh;margin:0;color:#a855f7;text-shadow:0 0 30px rgba(168,85,247,.6);letter-spacing:.5vw}.character-select-subtitle{font-size:1.8vh;color:#9f7aea;margin:1vh 0 0;opacity:.7}.character-select-content{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;flex:1;width:100%;max-width:90vw}.character-grid{padding:2vh 3vh;display:grid;grid-template-columns:repeat(3,1fr);gap:2vw;width:100%;max-width:75vw;margin-bottom:3vh}.character-card{position:relative;background:#1e1432e6;border:2px solid rgba(100,100,100,.3);border-radius:12px;padding:2vh 1.5vw;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;height:auto}.character-card:hover:not(.disabled){transform:translateY(-.5vh);border-color:#a855f780;box-shadow:0 5px 20px #0006}.character-card.selected{border-color:var(--theme-color, #a855f7);box-shadow:0 0 30px #a855f766,inset 0 0 30px #a855f71a;background:#581c874d}.character-card.disabled{cursor:not-allowed;opacity:.6}.character-card.disabled:hover{transform:none}.coming-soon-overlay{position:absolute;inset:0;background:#000000b3;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:10}.coming-soon-text{font-size:2.5vh;color:#9ca3af;font-weight:700;text-transform:uppercase;letter-spacing:.2vw}.coming-soon-subtext{font-size:1.4vh;color:#6b7280;margin-top:1vh}.character-card-header{display:flex;align-items:center;gap:1vw;margin-bottom:1.5vh;padding-bottom:1.5vh;border-bottom:1px solid rgba(168,85,247,.2)}.character-icon{width:6vh;height:6vh;border-radius:50%;background:var(--theme-color, #a855f7);display:flex;justify-content:center;align-items:center;font-size:3vh;box-shadow:0 0 15px var(--theme-color, rgba(168, 85, 247, .5))}.character-name-block{flex:1}.character-class-name{font-size:2.5vh;margin:0;color:#e9d5ff}.character-class-japanese{font-size:1.6vh;color:var(--theme-color, #9f7aea);margin-top:.3vh}.character-stats{display:grid;grid-template-columns:repeat(2,1fr);gap:.8vh 1vw;margin-bottom:1.5vh;padding:1vh;background:#0000004d;border-radius:8px}.stat-row{display:flex;justify-content:space-between;align-items:center;font-size:1.3vh}.stat-label{color:#9f7aea}.stat-value{color:#e9d5ff;font-weight:700}.unique-mechanic{margin-bottom:1.5vh;padding:1vh;background:#a855f71a;border:1px solid rgba(168,85,247,.3);border-radius:8px}.mechanic-title{font-size:1.4vh;color:var(--theme-color, #a855f7);font-weight:700;margin-bottom:.5vh}.mechanic-description{font-size:1.2vh;color:#c4b5fd;line-height:1.4}.character-description{font-size:1.3vh;color:#a78bfa;line-height:1.6;flex:1}.selection-indicator{position:absolute;top:1vh;right:1vw;width:2.5vh;height:2.5vh;border-radius:50%;border:2px solid rgba(168,85,247,.5);display:flex;justify-content:center;align-items:center;transition:all .3s ease}.character-card.selected .selection-indicator{background:var(--theme-color, #a855f7);border-color:var(--theme-color, #a855f7)}.selection-checkmark{color:#fff;font-size:1.5vh;opacity:0;transition:opacity .3s ease}.character-card.selected .selection-checkmark{opacity:1}.starter-deck-preview{width:100%;max-width:65vw;background:#1e1432cc;border:2px solid rgba(168,85,247,.2);border-radius:12px;padding:2vh 2vw;margin-bottom:2vh}.starter-deck-header{display:flex;grid-template-rows:repeat(3,1fr);align-items:center;margin-bottom:1.5vh}.starter-deck-title{font-size:2vh;color:#a855f7;margin:0}.starter-deck-count{font-size:1.4vh;color:#9f7aea}.starter-deck-cards{display:grid;grid-template-columns:repeat(4,1fr);padding:2vh 2.3vw 0 0;gap:3vw;flex-wrap:wrap}.starter-deck-card{width:calc(var(--card-base-width, 13vh) * .85);aspect-ratio:2 / 3;transition:transform .3s ease}.starter-deck-card:hover{transform:scale(1.1)}.no-deck-message{text-align:center;padding:3vh;color:#6b7280;font-size:1.6vh}.confirm-button-container{margin-top:auto}.confirm-button{padding:1.5vh 4vw;background:linear-gradient(135deg,#581c87,#7c3aed);border:2px solid #a855f7;border-radius:8px;color:#fff;font-size:2vh;font-weight:700;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.2vw}.confirm-button:hover:not(:disabled){background:linear-gradient(135deg,#6b21a8,#8b5cf6);box-shadow:0 0 30px #a855f780;transform:scale(1.05)}.confirm-button:disabled{background:#322846cc;border-color:#6464644d;color:#666;cursor:not-allowed}@media(max-width:1200px){.character-grid{grid-template-columns:repeat(3,1fr);max-width:90vw}.starter-deck-preview{max-width:90vw}}@media(max-height:800px){.character-card{min-height:30vh}.character-description{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}}#root{max-width:1280px;margin:0;padding:0;text-align:center}.logo{height:6em;padding:1.5em;will-change:filter;transition:filter .3s}.logo:hover{filter:drop-shadow(0 0 2em #646cffaa)}.logo.react:hover{filter:drop-shadow(0 0 2em #61dafbaa)}.app-container{width:100%;height:100%}.debug-screen-switcher{position:fixed;top:10px;left:10px;z-index:9999;display:flex;gap:10px}.debug-screen-btn{padding:8px 16px;background:#333;color:#fff;border:2px solid #8a629e;border-radius:4px;cursor:pointer;font-weight:700}.debug-screen-btn--active{background:#8a629e}
