(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const f of m)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function o(m){const f={};return m.integrity&&(f.integrity=m.integrity),m.referrerPolicy&&(f.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?f.credentials="include":m.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(m){if(m.ep)return;m.ep=!0;const f=o(m);fetch(m.href,f)}})();function jh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var du={exports:{}},ml={};var Xf;function Eh(){if(Xf)return ml;Xf=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(u,m,f){var h=null;if(f!==void 0&&(h=""+f),m.key!==void 0&&(h=""+m.key),"key"in m){f={};for(var b in m)b!=="key"&&(f[b]=m[b])}else f=m;return m=f.ref,{$$typeof:s,type:u,key:h,ref:m!==void 0?m:null,props:f}}return ml.Fragment=r,ml.jsx=o,ml.jsxs=o,ml}var Vf;function _h(){return Vf||(Vf=1,du.exports=Eh()),du.exports}var l=_h(),mu={exports:{}},pe={};var Jf;function Dh(){if(Jf)return pe;Jf=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),q=Symbol.iterator;function T(E){return E===null||typeof E!="object"?null:(E=q&&E[q]||E["@@iterator"],typeof E=="function"?E:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,C={};function k(E,Y,J){this.props=E,this.context=Y,this.refs=C,this.updater=J||D}k.prototype.isReactComponent={},k.prototype.setState=function(E,Y){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,Y,"setState")},k.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function w(){}w.prototype=k.prototype;function x(E,Y,J){this.props=E,this.context=Y,this.refs=C,this.updater=J||D}var B=x.prototype=new w;B.constructor=x,U(B,k.prototype),B.isPureReactComponent=!0;var z=Array.isArray;function $(){}var K={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function le(E,Y,J){var ee=J.ref;return{$$typeof:s,type:E,key:Y,ref:ee!==void 0?ee:null,props:J}}function be(E,Y){return le(E.type,Y,E.props)}function M(E){return typeof E=="object"&&E!==null&&E.$$typeof===s}function H(E){var Y={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(J){return Y[J]})}var F=/\/+/g;function de(E,Y){return typeof E=="object"&&E!==null&&E.key!=null?H(""+E.key):Y.toString(36)}function ce(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then($,$):(E.status="pending",E.then(function(Y){E.status==="pending"&&(E.status="fulfilled",E.value=Y)},function(Y){E.status==="pending"&&(E.status="rejected",E.reason=Y)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function L(E,Y,J,ee,oe){var me=typeof E;(me==="undefined"||me==="boolean")&&(E=null);var ge=!1;if(E===null)ge=!0;else switch(me){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(E.$$typeof){case s:case r:ge=!0;break;case g:return ge=E._init,L(ge(E._payload),Y,J,ee,oe)}}if(ge)return oe=oe(E),ge=ee===""?"."+de(E,0):ee,z(oe)?(J="",ge!=null&&(J=ge.replace(F,"$&/")+"/"),L(oe,Y,J,"",function(za){return za})):oe!=null&&(M(oe)&&(oe=be(oe,J+(oe.key==null||E&&E.key===oe.key?"":(""+oe.key).replace(F,"$&/")+"/")+ge)),Y.push(oe)),1;ge=0;var Te=ee===""?".":ee+":";if(z(E))for(var Se=0;Se<E.length;Se++)ee=E[Se],me=Te+de(ee,Se),ge+=L(ee,Y,J,me,oe);else if(Se=T(E),typeof Se=="function")for(E=Se.call(E),Se=0;!(ee=E.next()).done;)ee=ee.value,me=Te+de(ee,Se++),ge+=L(ee,Y,J,me,oe);else if(me==="object"){if(typeof E.then=="function")return L(ce(E),Y,J,ee,oe);throw Y=String(E),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ge}function Z(E,Y,J){if(E==null)return E;var ee=[],oe=0;return L(E,ee,"","",function(me){return Y.call(J,me,oe++)}),ee}function V(E){if(E._status===-1){var Y=E._result;Y=Y(),Y.then(function(J){(E._status===0||E._status===-1)&&(E._status=1,E._result=J)},function(J){(E._status===0||E._status===-1)&&(E._status=2,E._result=J)}),E._status===-1&&(E._status=0,E._result=Y)}if(E._status===1)return E._result.default;throw E._result}var W=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},re={map:Z,forEach:function(E,Y,J){Z(E,function(){Y.apply(this,arguments)},J)},count:function(E){var Y=0;return Z(E,function(){Y++}),Y},toArray:function(E){return Z(E,function(Y){return Y})||[]},only:function(E){if(!M(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return pe.Activity=j,pe.Children=re,pe.Component=k,pe.Fragment=o,pe.Profiler=m,pe.PureComponent=x,pe.StrictMode=u,pe.Suspense=p,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,pe.__COMPILER_RUNTIME={__proto__:null,c:function(E){return K.H.useMemoCache(E)}},pe.cache=function(E){return function(){return E.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(E,Y,J){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var ee=U({},E.props),oe=E.key;if(Y!=null)for(me in Y.key!==void 0&&(oe=""+Y.key),Y)!ae.call(Y,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&Y.ref===void 0||(ee[me]=Y[me]);var me=arguments.length-2;if(me===1)ee.children=J;else if(1<me){for(var ge=Array(me),Te=0;Te<me;Te++)ge[Te]=arguments[Te+2];ee.children=ge}return le(E.type,oe,ee)},pe.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:f,_context:E},E},pe.createElement=function(E,Y,J){var ee,oe={},me=null;if(Y!=null)for(ee in Y.key!==void 0&&(me=""+Y.key),Y)ae.call(Y,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(oe[ee]=Y[ee]);var ge=arguments.length-2;if(ge===1)oe.children=J;else if(1<ge){for(var Te=Array(ge),Se=0;Se<ge;Se++)Te[Se]=arguments[Se+2];oe.children=Te}if(E&&E.defaultProps)for(ee in ge=E.defaultProps,ge)oe[ee]===void 0&&(oe[ee]=ge[ee]);return le(E,me,oe)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(E){return{$$typeof:b,render:E}},pe.isValidElement=M,pe.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:V}},pe.memo=function(E,Y){return{$$typeof:v,type:E,compare:Y===void 0?null:Y}},pe.startTransition=function(E){var Y=K.T,J={};K.T=J;try{var ee=E(),oe=K.S;oe!==null&&oe(J,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then($,W)}catch(me){W(me)}finally{Y!==null&&J.types!==null&&(Y.types=J.types),K.T=Y}},pe.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},pe.use=function(E){return K.H.use(E)},pe.useActionState=function(E,Y,J){return K.H.useActionState(E,Y,J)},pe.useCallback=function(E,Y){return K.H.useCallback(E,Y)},pe.useContext=function(E){return K.H.useContext(E)},pe.useDebugValue=function(){},pe.useDeferredValue=function(E,Y){return K.H.useDeferredValue(E,Y)},pe.useEffect=function(E,Y){return K.H.useEffect(E,Y)},pe.useEffectEvent=function(E){return K.H.useEffectEvent(E)},pe.useId=function(){return K.H.useId()},pe.useImperativeHandle=function(E,Y,J){return K.H.useImperativeHandle(E,Y,J)},pe.useInsertionEffect=function(E,Y){return K.H.useInsertionEffect(E,Y)},pe.useLayoutEffect=function(E,Y){return K.H.useLayoutEffect(E,Y)},pe.useMemo=function(E,Y){return K.H.useMemo(E,Y)},pe.useOptimistic=function(E,Y){return K.H.useOptimistic(E,Y)},pe.useReducer=function(E,Y,J){return K.H.useReducer(E,Y,J)},pe.useRef=function(E){return K.H.useRef(E)},pe.useState=function(E){return K.H.useState(E)},pe.useSyncExternalStore=function(E,Y,J){return K.H.useSyncExternalStore(E,Y,J)},pe.useTransition=function(){return K.H.useTransition()},pe.version="19.2.0",pe}var Zf;function Bu(){return Zf||(Zf=1,mu.exports=Dh()),mu.exports}var S=Bu();const wh=jh(S);var fu={exports:{}},fl={},pu={exports:{}},yu={};var Kf;function Mh(){return Kf||(Kf=1,(function(s){function r(L,Z){var V=L.length;L.push(Z);e:for(;0<V;){var W=V-1>>>1,re=L[W];if(0<m(re,Z))L[W]=Z,L[V]=re,V=W;else break e}}function o(L){return L.length===0?null:L[0]}function u(L){if(L.length===0)return null;var Z=L[0],V=L.pop();if(V!==Z){L[0]=V;e:for(var W=0,re=L.length,E=re>>>1;W<E;){var Y=2*(W+1)-1,J=L[Y],ee=Y+1,oe=L[ee];if(0>m(J,V))ee<re&&0>m(oe,J)?(L[W]=oe,L[ee]=V,W=ee):(L[W]=J,L[Y]=V,W=Y);else if(ee<re&&0>m(oe,V))L[W]=oe,L[ee]=V,W=ee;else break e}}return Z}function m(L,Z){var V=L.sortIndex-Z.sortIndex;return V!==0?V:L.id-Z.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var h=Date,b=h.now();s.unstable_now=function(){return h.now()-b}}var p=[],v=[],g=1,j=null,q=3,T=!1,D=!1,U=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var Z=o(v);Z!==null;){if(Z.callback===null)u(v);else if(Z.startTime<=L)u(v),Z.sortIndex=Z.expirationTime,r(p,Z);else break;Z=o(v)}}function z(L){if(U=!1,B(L),!D)if(o(p)!==null)D=!0,$||($=!0,H());else{var Z=o(v);Z!==null&&ce(z,Z.startTime-L)}}var $=!1,K=-1,ae=5,le=-1;function be(){return C?!0:!(s.unstable_now()-le<ae)}function M(){if(C=!1,$){var L=s.unstable_now();le=L;var Z=!0;try{e:{D=!1,U&&(U=!1,w(K),K=-1),T=!0;var V=q;try{a:{for(B(L),j=o(p);j!==null&&!(j.expirationTime>L&&be());){var W=j.callback;if(typeof W=="function"){j.callback=null,q=j.priorityLevel;var re=W(j.expirationTime<=L);if(L=s.unstable_now(),typeof re=="function"){j.callback=re,B(L),Z=!0;break a}j===o(p)&&u(p),B(L)}else u(p);j=o(p)}if(j!==null)Z=!0;else{var E=o(v);E!==null&&ce(z,E.startTime-L),Z=!1}}break e}finally{j=null,q=V,T=!1}Z=void 0}}finally{Z?H():$=!1}}}var H;if(typeof x=="function")H=function(){x(M)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,de=F.port2;F.port1.onmessage=M,H=function(){de.postMessage(null)}}else H=function(){k(M,0)};function ce(L,Z){K=k(function(){L(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(L){L.callback=null},s.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<L?Math.floor(1e3/L):5},s.unstable_getCurrentPriorityLevel=function(){return q},s.unstable_next=function(L){switch(q){case 1:case 2:case 3:var Z=3;break;default:Z=q}var V=q;q=Z;try{return L()}finally{q=V}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(L,Z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=q;q=L;try{return Z()}finally{q=V}},s.unstable_scheduleCallback=function(L,Z,V){var W=s.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=V+re,L={id:g++,callback:Z,priorityLevel:L,startTime:V,expirationTime:re,sortIndex:-1},V>W?(L.sortIndex=V,r(v,L),o(p)===null&&L===o(v)&&(U?(w(K),K=-1):U=!0,ce(z,V-W))):(L.sortIndex=re,r(p,L),D||T||(D=!0,$||($=!0,H()))),L},s.unstable_shouldYield=be,s.unstable_wrapCallback=function(L){var Z=q;return function(){var V=q;q=Z;try{return L.apply(this,arguments)}finally{q=V}}}})(yu)),yu}var Ff;function Th(){return Ff||(Ff=1,pu.exports=Mh()),pu.exports}var gu={exports:{}},ma={};var Wf;function Ah(){if(Wf)return ma;Wf=1;var s=Bu();function r(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)v+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var u={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},m=Symbol.for("react.portal");function f(p,v,g){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:j==null?null:""+j,children:p,containerInfo:v,implementation:g}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return ma.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,ma.createPortal=function(p,v){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(r(299));return f(p,v,null,g)},ma.flushSync=function(p){var v=h.T,g=u.p;try{if(h.T=null,u.p=2,p)return p()}finally{h.T=v,u.p=g,u.d.f()}},ma.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,u.d.C(p,v))},ma.prefetchDNS=function(p){typeof p=="string"&&u.d.D(p)},ma.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var g=v.as,j=b(g,v.crossOrigin),q=typeof v.integrity=="string"?v.integrity:void 0,T=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;g==="style"?u.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:j,integrity:q,fetchPriority:T}):g==="script"&&u.d.X(p,{crossOrigin:j,integrity:q,fetchPriority:T,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},ma.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var g=b(v.as,v.crossOrigin);u.d.M(p,{crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&u.d.M(p)},ma.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var g=v.as,j=b(g,v.crossOrigin);u.d.L(p,g,{crossOrigin:j,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},ma.preloadModule=function(p,v){if(typeof p=="string")if(v){var g=b(v.as,v.crossOrigin);u.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else u.d.m(p)},ma.requestFormReset=function(p){u.d.r(p)},ma.unstable_batchedUpdates=function(p,v){return p(v)},ma.useFormState=function(p,v,g){return h.H.useFormState(p,v,g)},ma.useFormStatus=function(){return h.H.useHostTransitionStatus()},ma.version="19.2.0",ma}var ep;function kh(){if(ep)return gu.exports;ep=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),gu.exports=Ah(),gu.exports}var ap;function qh(){if(ap)return fl;ap=1;var s=Th(),r=Bu(),o=kh();function u(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)a+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var a=e,t=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(t=a.return),e=a.return;while(e)}return a.tag===3?t:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function b(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(u(188))}function v(e){var a=e.alternate;if(!a){if(a=f(e),a===null)throw Error(u(188));return a!==e?null:e}for(var t=e,n=a;;){var i=t.return;if(i===null)break;var c=i.alternate;if(c===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===t)return p(i),e;if(c===n)return p(i),a;c=c.sibling}throw Error(u(188))}if(t.return!==n.return)t=i,n=c;else{for(var d=!1,y=i.child;y;){if(y===t){d=!0,t=i,n=c;break}if(y===n){d=!0,n=i,t=c;break}y=y.sibling}if(!d){for(y=c.child;y;){if(y===t){d=!0,t=c,n=i;break}if(y===n){d=!0,n=c,t=i;break}y=y.sibling}if(!d)throw Error(u(189))}}if(t.alternate!==n)throw Error(u(190))}if(t.tag!==3)throw Error(u(188));return t.stateNode.current===t?e:a}function g(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=g(e),a!==null)return a;e=e.sibling}return null}var j=Object.assign,q=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case z:return"Suspense";case $:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case B:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return a=e.displayName||null,a!==null?a:de(e.type)||"Memo";case ae:a=e._payload,e=e._init;try{return de(e(a))}catch{}}return null}var ce=Array.isArray,L=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},W=[],re=-1;function E(e){return{current:e}}function Y(e){0>re||(e.current=W[re],W[re]=null,re--)}function J(e,a){re++,W[re]=e.current,e.current=a}var ee=E(null),oe=E(null),me=E(null),ge=E(null);function Te(e,a){switch(J(me,a),J(oe,e),J(ee,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?gf(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=gf(a),e=hf(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(ee),J(ee,e)}function Se(){Y(ee),Y(oe),Y(me)}function za(e){e.memoizedState!==null&&J(ge,e);var a=ee.current,t=hf(a,e.type);a!==t&&(J(oe,e),J(ee,t))}function Ua(e){oe.current===e&&(Y(ee),Y(oe)),ge.current===e&&(Y(ge),rl._currentValue=V)}var Za,Tt;function ra(e){if(Za===void 0)try{throw Error()}catch(t){var a=t.stack.trim().match(/\n( *(at )?)/);Za=a&&a[1]||"",Tt=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Za+e+Tt}var Oa=!1;function ut(e,a){if(!e||Oa)return"";Oa=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(I){var O=I}Reflect.construct(e,[],X)}else{try{X.call()}catch(I){O=I}e.call(X.prototype)}}else{try{throw Error()}catch(I){O=I}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(I){if(I&&O&&typeof I.stack=="string")return[I.stack,O.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),d=c[0],y=c[1];if(d&&y){var N=d.split(`
`),G=y.split(`
`);for(i=n=0;n<N.length&&!N[n].includes("DetermineComponentFrameRoot");)n++;for(;i<G.length&&!G[i].includes("DetermineComponentFrameRoot");)i++;if(n===N.length||i===G.length)for(n=N.length-1,i=G.length-1;1<=n&&0<=i&&N[n]!==G[i];)i--;for(;1<=n&&0<=i;n--,i--)if(N[n]!==G[i]){if(n!==1||i!==1)do if(n--,i--,0>i||N[n]!==G[i]){var Q=`
`+N[n].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=n&&0<=i);break}}}finally{Oa=!1,Error.prepareStackTrace=t}return(t=e?e.displayName||e.name:"")?ra(t):""}function ha(e,a){switch(e.tag){case 26:case 27:case 5:return ra(e.type);case 16:return ra("Lazy");case 13:return e.child!==a&&a!==null?ra("Suspense Fallback"):ra("Suspense");case 19:return ra("SuspenseList");case 0:case 15:return ut(e.type,!1);case 11:return ut(e.type.render,!1);case 1:return ut(e.type,!0);case 31:return ra("Activity");default:return""}}function fa(e){try{var a="",t=null;do a+=ha(e,t),t=e,e=e.return;while(e);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var te=Object.prototype.hasOwnProperty,fe=s.unstable_scheduleCallback,Ue=s.unstable_cancelCallback,pa=s.unstable_shouldYield,Ka=s.unstable_requestPaint,ta=s.unstable_now,xe=s.unstable_getCurrentPriorityLevel,Ae=s.unstable_ImmediatePriority,ua=s.unstable_UserBlockingPriority,Ie=s.unstable_NormalPriority,ya=s.unstable_LowPriority,La=s.unstable_IdlePriority,bs=s.log,xs=s.unstable_setDisableYieldValue,Fa=null,oa=null;function st(e){if(typeof bs=="function"&&xs(e),oa&&typeof oa.setStrictMode=="function")try{oa.setStrictMode(Fa,e)}catch{}}var da=Math.clz32?Math.clz32:Nl,Sl=Math.log,_n=Math.LN2;function Nl(e){return e>>>=0,e===0?32:31-(Sl(e)/_n|0)|0}var ot=256,dt=262144,Dn=4194304;function Wa(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wn(e,a,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var y=n&134217727;return y!==0?(n=y&~c,n!==0?i=Wa(n):(d&=y,d!==0?i=Wa(d):t||(t=y&~e,t!==0&&(i=Wa(t))))):(y=n&~c,y!==0?i=Wa(y):d!==0?i=Wa(d):t||(t=n&~e,t!==0&&(i=Wa(t)))),i===0?0:a!==0&&a!==i&&(a&c)===0&&(c=i&-i,t=a&-a,c>=t||c===32&&(t&4194048)!==0)?a:i}function sn(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function ec(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cl(){var e=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),e}function Ss(e){for(var a=[],t=0;31>t;t++)a.push(e);return a}function ln(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oe(e,a,t,n,i,c){var d=e.pendingLanes;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=t,e.entangledLanes&=t,e.errorRecoveryDisabledLanes&=t,e.shellSuspendCounter=0;var y=e.entanglements,N=e.expirationTimes,G=e.hiddenUpdates;for(t=d&~t;0<t;){var Q=31-da(t),X=1<<Q;y[Q]=0,N[Q]=-1;var O=G[Q];if(O!==null)for(G[Q]=null,Q=0;Q<O.length;Q++){var I=O[Q];I!==null&&(I.lane&=-536870913)}t&=~X}n!==0&&Qe(e,n,0),c!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=c&~(d&~a))}function Qe(e,a,t){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-da(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|t&261930}function et(e,a){var t=e.entangledLanes|=a;for(e=e.entanglements;t;){var n=31-da(t),i=1<<n;i&a|e[n]&a&&(e[n]|=a),t&=~i}}function At(e,a){var t=a&-a;return t=(t&42)!==0?1:Ns(t),(t&(e.suspendedLanes|a))!==0?0:t}function Ns(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ac(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wu(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:Bf(e.type))}function eo(e,a){var t=Z.p;try{return Z.p=e,a()}finally{Z.p=t}}var kt=Math.random().toString(36).slice(2),na="__reactFiber$"+kt,va="__reactProps$"+kt,Mn="__reactContainer$"+kt,tc="__reactEvents$"+kt,fy="__reactListeners$"+kt,py="__reactHandles$"+kt,ao="__reactResources$"+kt,Cs="__reactMarker$"+kt;function nc(e){delete e[na],delete e[va],delete e[tc],delete e[fy],delete e[py]}function Tn(e){var a=e[na];if(a)return a;for(var t=e.parentNode;t;){if(a=t[Mn]||t[na]){if(t=a.alternate,a.child!==null||t!==null&&t.child!==null)for(e=jf(e);e!==null;){if(t=e[na])return t;e=jf(e)}return a}e=t,t=e.parentNode}return null}function An(e){if(e=e[na]||e[Mn]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function js(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(u(33))}function kn(e){var a=e[ao];return a||(a=e[ao]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ea(e){e[Cs]=!0}var to=new Set,no={};function cn(e,a){qn(e,a),qn(e+"Capture",a)}function qn(e,a){for(no[e]=a,e=0;e<a.length;e++)to.add(a[e])}var yy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},lo={};function gy(e){return te.call(lo,e)?!0:te.call(so,e)?!1:yy.test(e)?lo[e]=!0:(so[e]=!0,!1)}function jl(e,a,t){if(gy(a))if(t===null)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+t)}}function El(e,a,t){if(t===null)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+t)}}function mt(e,a,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttributeNS(a,t,""+n)}}function Ba(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function io(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function hy(e,a,t){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,c=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return i.call(this)},set:function(d){t=""+d,c.call(this,d)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return t},setValue:function(d){t=""+d},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function sc(e){if(!e._valueTracker){var a=io(e)?"checked":"value";e._valueTracker=hy(e,a,""+e[a])}}function co(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var t=a.getValue(),n="";return e&&(n=io(e)?e.checked?"true":"false":e.value),e=n,e!==t?(a.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vy=/[\n"\\]/g;function Ha(e){return e.replace(vy,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function lc(e,a,t,n,i,c,d,y){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),a!=null?d==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Ba(a)):e.value!==""+Ba(a)&&(e.value=""+Ba(a)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),a!=null?ic(e,d,Ba(a)):t!=null?ic(e,d,Ba(t)):n!=null&&e.removeAttribute("value"),i==null&&c!=null&&(e.defaultChecked=!!c),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Ba(y):e.removeAttribute("name")}function ro(e,a,t,n,i,c,d,y){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),a!=null||t!=null){if(!(c!=="submit"&&c!=="reset"||a!=null)){sc(e);return}t=t!=null?""+Ba(t):"",a=a!=null?""+Ba(a):t,y||a===e.value||(e.value=a),e.defaultValue=a}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=y?e.checked:!!n,e.defaultChecked=!!n,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),sc(e)}function ic(e,a,t){a==="number"&&_l(e.ownerDocument)===e||e.defaultValue===""+t||(e.defaultValue=""+t)}function Rn(e,a,t,n){if(e=e.options,a){a={};for(var i=0;i<t.length;i++)a["$"+t[i]]=!0;for(t=0;t<e.length;t++)i=a.hasOwnProperty("$"+e[t].value),e[t].selected!==i&&(e[t].selected=i),i&&n&&(e[t].defaultSelected=!0)}else{for(t=""+Ba(t),a=null,i=0;i<e.length;i++){if(e[i].value===t){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}a!==null||e[i].disabled||(a=e[i])}a!==null&&(a.selected=!0)}}function uo(e,a,t){if(a!=null&&(a=""+Ba(a),a!==e.value&&(e.value=a),t==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=t!=null?""+Ba(t):""}function oo(e,a,t,n){if(a==null){if(n!=null){if(t!=null)throw Error(u(92));if(ce(n)){if(1<n.length)throw Error(u(93));n=n[0]}t=n}t==null&&(t=""),a=t}t=Ba(a),e.defaultValue=t,n=e.textContent,n===t&&n!==""&&n!==null&&(e.value=n),sc(e)}function Gn(e,a){if(a){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=a;return}}e.textContent=a}var by=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mo(e,a,t){var n=a.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,t):typeof t!="number"||t===0||by.has(a)?a==="float"?e.cssFloat=t:e[a]=(""+t).trim():e[a]=t+"px"}function fo(e,a,t){if(a!=null&&typeof a!="object")throw Error(u(62));if(e=e.style,t!=null){for(var n in t)!t.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in a)n=a[i],a.hasOwnProperty(i)&&t[i]!==n&&mo(e,i,n)}else for(var c in a)a.hasOwnProperty(c)&&mo(e,c,a[c])}function cc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dl(e){return Sy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ft(){}var rc=null;function uc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zn=null,Un=null;function po(e){var a=An(e);if(a&&(e=a.stateNode)){var t=e[va]||null;e:switch(e=a.stateNode,a.type){case"input":if(lc(e,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),a=t.name,t.type==="radio"&&a!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+Ha(""+a)+'"][type="radio"]'),a=0;a<t.length;a++){var n=t[a];if(n!==e&&n.form===e.form){var i=n[va]||null;if(!i)throw Error(u(90));lc(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(a=0;a<t.length;a++)n=t[a],n.form===e.form&&co(n)}break e;case"textarea":uo(e,t.value,t.defaultValue);break e;case"select":a=t.value,a!=null&&Rn(e,!!t.multiple,a,!1)}}}var oc=!1;function yo(e,a,t){if(oc)return e(a,t);oc=!0;try{var n=e(a);return n}finally{if(oc=!1,(zn!==null||Un!==null)&&(pi(),zn&&(a=zn,e=Un,Un=zn=null,po(a),e)))for(a=0;a<e.length;a++)po(e[a])}}function Es(e,a){var t=e.stateNode;if(t===null)return null;var n=t[va]||null;if(n===null)return null;t=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(u(231,a,typeof t));return t}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dc=!1;if(pt)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){dc=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{dc=!1}var qt=null,mc=null,wl=null;function go(){if(wl)return wl;var e,a=mc,t=a.length,n,i="value"in qt?qt.value:qt.textContent,c=i.length;for(e=0;e<t&&a[e]===i[e];e++);var d=t-e;for(n=1;n<=d&&a[t-n]===i[c-n];n++);return wl=i.slice(e,1<n?1-n:void 0)}function Ml(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Tl(){return!0}function ho(){return!1}function ba(e){function a(t,n,i,c,d){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(t=e[y],this[y]=t?t(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Tl:ho,this.isPropagationStopped=ho,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),a}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=ba(rn),Ds=j({},rn,{view:0,detail:0}),Ny=ba(Ds),fc,pc,ws,kl=j({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ws&&(ws&&e.type==="mousemove"?(fc=e.screenX-ws.screenX,pc=e.screenY-ws.screenY):pc=fc=0,ws=e),fc)},movementY:function(e){return"movementY"in e?e.movementY:pc}}),vo=ba(kl),Cy=j({},kl,{dataTransfer:0}),jy=ba(Cy),Ey=j({},Ds,{relatedTarget:0}),yc=ba(Ey),_y=j({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dy=ba(_y),wy=j({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),My=ba(wy),Ty=j({},rn,{data:0}),bo=ba(Ty),Ay={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=qy[e])?!!a[e]:!1}function gc(){return Ry}var Gy=j({},Ds,{key:function(e){if(e.key){var a=Ay[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ky[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zy=ba(Gy),Uy=j({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xo=ba(Uy),Oy=j({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),Ly=ba(Oy),By=j({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hy=ba(By),Yy=j({},kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Iy=ba(Yy),Qy=j({},rn,{newState:0,oldState:0}),Py=ba(Qy),$y=[9,13,27,32],hc=pt&&"CompositionEvent"in window,Ms=null;pt&&"documentMode"in document&&(Ms=document.documentMode);var Xy=pt&&"TextEvent"in window&&!Ms,So=pt&&(!hc||Ms&&8<Ms&&11>=Ms),No=" ",Co=!1;function jo(e,a){switch(e){case"keyup":return $y.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var On=!1;function Vy(e,a){switch(e){case"compositionend":return Eo(a);case"keypress":return a.which!==32?null:(Co=!0,No);case"textInput":return e=a.data,e===No&&Co?null:e;default:return null}}function Jy(e,a){if(On)return e==="compositionend"||!hc&&jo(e,a)?(e=go(),wl=mc=qt=null,On=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return So&&a.locale!=="ko"?null:a.data;default:return null}}var Zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _o(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!Zy[e.type]:a==="textarea"}function Do(e,a,t,n){zn?Un?Un.push(n):Un=[n]:zn=n,a=Si(a,"onChange"),0<a.length&&(t=new Al("onChange","change",null,t,n),e.push({event:t,listeners:a}))}var Ts=null,As=null;function Ky(e){of(e,0)}function ql(e){var a=js(e);if(co(a))return e}function wo(e,a){if(e==="change")return a}var Mo=!1;if(pt){var vc;if(pt){var bc="oninput"in document;if(!bc){var To=document.createElement("div");To.setAttribute("oninput","return;"),bc=typeof To.oninput=="function"}vc=bc}else vc=!1;Mo=vc&&(!document.documentMode||9<document.documentMode)}function Ao(){Ts&&(Ts.detachEvent("onpropertychange",ko),As=Ts=null)}function ko(e){if(e.propertyName==="value"&&ql(As)){var a=[];Do(a,As,e,uc(e)),yo(Ky,a)}}function Fy(e,a,t){e==="focusin"?(Ao(),Ts=a,As=t,Ts.attachEvent("onpropertychange",ko)):e==="focusout"&&Ao()}function Wy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ql(As)}function eg(e,a){if(e==="click")return ql(a)}function ag(e,a){if(e==="input"||e==="change")return ql(a)}function tg(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var wa=typeof Object.is=="function"?Object.is:tg;function ks(e,a){if(wa(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var t=Object.keys(e),n=Object.keys(a);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!te.call(a,i)||!wa(e[i],a[i]))return!1}return!0}function qo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ro(e,a){var t=qo(e);e=0;for(var n;t;){if(t.nodeType===3){if(n=e+t.textContent.length,e<=a&&n>=a)return{node:t,offset:a-e};e=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=qo(t)}}function Go(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Go(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function zo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=_l(e.document);a instanceof e.HTMLIFrameElement;){try{var t=typeof a.contentWindow.location.href=="string"}catch{t=!1}if(t)e=a.contentWindow;else break;a=_l(e.document)}return a}function xc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var ng=pt&&"documentMode"in document&&11>=document.documentMode,Ln=null,Sc=null,qs=null,Nc=!1;function Uo(e,a,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Nc||Ln==null||Ln!==_l(n)||(n=Ln,"selectionStart"in n&&xc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qs&&ks(qs,n)||(qs=n,n=Si(Sc,"onSelect"),0<n.length&&(a=new Al("onSelect","select",null,a,t),e.push({event:a,listeners:n}),a.target=Ln)))}function un(e,a){var t={};return t[e.toLowerCase()]=a.toLowerCase(),t["Webkit"+e]="webkit"+a,t["Moz"+e]="moz"+a,t}var Bn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},Cc={},Oo={};pt&&(Oo=document.createElement("div").style,"AnimationEvent"in window||(delete Bn.animationend.animation,delete Bn.animationiteration.animation,delete Bn.animationstart.animation),"TransitionEvent"in window||delete Bn.transitionend.transition);function on(e){if(Cc[e])return Cc[e];if(!Bn[e])return e;var a=Bn[e],t;for(t in a)if(a.hasOwnProperty(t)&&t in Oo)return Cc[e]=a[t];return e}var Lo=on("animationend"),Bo=on("animationiteration"),Ho=on("animationstart"),sg=on("transitionrun"),lg=on("transitionstart"),ig=on("transitioncancel"),Yo=on("transitionend"),Io=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function at(e,a){Io.set(e,a),cn(a,[e])}var Rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ya=[],Hn=0,Ec=0;function Gl(){for(var e=Hn,a=Ec=Hn=0;a<e;){var t=Ya[a];Ya[a++]=null;var n=Ya[a];Ya[a++]=null;var i=Ya[a];Ya[a++]=null;var c=Ya[a];if(Ya[a++]=null,n!==null&&i!==null){var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}c!==0&&Qo(t,i,c)}}function zl(e,a,t,n){Ya[Hn++]=e,Ya[Hn++]=a,Ya[Hn++]=t,Ya[Hn++]=n,Ec|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function _c(e,a,t,n){return zl(e,a,t,n),Ul(e)}function dn(e,a){return zl(e,null,null,a),Ul(e)}function Qo(e,a,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t);for(var i=!1,c=e.return;c!==null;)c.childLanes|=t,n=c.alternate,n!==null&&(n.childLanes|=t),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(i=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,i&&a!==null&&(i=31-da(t),e=c.hiddenUpdates,n=e[i],n===null?e[i]=[a]:n.push(a),a.lane=t|536870912),c):null}function Ul(e){if(50<al)throw al=0,Gr=null,Error(u(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Yn={};function cg(e,a,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(e,a,t,n){return new cg(e,a,t,n)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yt(e,a){var t=e.alternate;return t===null?(t=Ma(e.tag,a,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=a,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&65011712,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,a=e.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t.refCleanup=e.refCleanup,t}function Po(e,a){e.flags&=65011714;var t=e.alternate;return t===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,e.type=t.type,a=t.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Ol(e,a,t,n,i,c){var d=0;if(n=e,typeof e=="function")Dc(e)&&(d=1);else if(typeof e=="string")d=mh(e,t,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=Ma(31,t,a,i),e.elementType=le,e.lanes=c,e;case U:return mn(t.children,i,c,a);case C:d=8,i|=24;break;case k:return e=Ma(12,t,a,i|2),e.elementType=k,e.lanes=c,e;case z:return e=Ma(13,t,a,i),e.elementType=z,e.lanes=c,e;case $:return e=Ma(19,t,a,i),e.elementType=$,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x:d=10;break e;case w:d=9;break e;case B:d=11;break e;case K:d=14;break e;case ae:d=16,n=null;break e}d=29,t=Error(u(130,e===null?"null":typeof e,"")),n=null}return a=Ma(d,t,a,i),a.elementType=e,a.type=n,a.lanes=c,a}function mn(e,a,t,n){return e=Ma(7,e,n,a),e.lanes=t,e}function wc(e,a,t){return e=Ma(6,e,null,a),e.lanes=t,e}function $o(e){var a=Ma(18,null,null,0);return a.stateNode=e,a}function Mc(e,a,t){return a=Ma(4,e.children!==null?e.children:[],e.key,a),a.lanes=t,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Xo=new WeakMap;function Ia(e,a){if(typeof e=="object"&&e!==null){var t=Xo.get(e);return t!==void 0?t:(a={value:e,source:a,stack:fa(a)},Xo.set(e,a),a)}return{value:e,source:a,stack:fa(a)}}var In=[],Qn=0,Ll=null,Rs=0,Qa=[],Pa=0,Rt=null,lt=1,it="";function gt(e,a){In[Qn++]=Rs,In[Qn++]=Ll,Ll=e,Rs=a}function Vo(e,a,t){Qa[Pa++]=lt,Qa[Pa++]=it,Qa[Pa++]=Rt,Rt=e;var n=lt;e=it;var i=32-da(n)-1;n&=~(1<<i),t+=1;var c=32-da(a)+i;if(30<c){var d=i-i%5;c=(n&(1<<d)-1).toString(32),n>>=d,i-=d,lt=1<<32-da(a)+i|t<<i|n,it=c+e}else lt=1<<c|t<<i|n,it=e}function Tc(e){e.return!==null&&(gt(e,1),Vo(e,1,0))}function Ac(e){for(;e===Ll;)Ll=In[--Qn],In[Qn]=null,Rs=In[--Qn],In[Qn]=null;for(;e===Rt;)Rt=Qa[--Pa],Qa[Pa]=null,it=Qa[--Pa],Qa[Pa]=null,lt=Qa[--Pa],Qa[Pa]=null}function Jo(e,a){Qa[Pa++]=lt,Qa[Pa++]=it,Qa[Pa++]=Rt,lt=a.id,it=a.overflow,Rt=e}var sa=null,Be=null,_e=!1,Gt=null,$a=!1,kc=Error(u(519));function zt(e){var a=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gs(Ia(a,e)),kc}function Zo(e){var a=e.stateNode,t=e.type,n=e.memoizedProps;switch(a[na]=e,a[va]=n,t){case"dialog":Ce("cancel",a),Ce("close",a);break;case"iframe":case"object":case"embed":Ce("load",a);break;case"video":case"audio":for(t=0;t<nl.length;t++)Ce(nl[t],a);break;case"source":Ce("error",a);break;case"img":case"image":case"link":Ce("error",a),Ce("load",a);break;case"details":Ce("toggle",a);break;case"input":Ce("invalid",a),ro(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Ce("invalid",a);break;case"textarea":Ce("invalid",a),oo(a,n.value,n.defaultValue,n.children)}t=n.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||a.textContent===""+t||n.suppressHydrationWarning===!0||pf(a.textContent,t)?(n.popover!=null&&(Ce("beforetoggle",a),Ce("toggle",a)),n.onScroll!=null&&Ce("scroll",a),n.onScrollEnd!=null&&Ce("scrollend",a),n.onClick!=null&&(a.onclick=ft),a=!0):a=!1,a||zt(e,!0)}function Ko(e){for(sa=e.return;sa;)switch(sa.tag){case 5:case 31:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:sa=sa.return}}function Pn(e){if(e!==sa)return!1;if(!_e)return Ko(e),_e=!0,!1;var a=e.tag,t;if((t=a!==3&&a!==27)&&((t=a===5)&&(t=e.type,t=!(t!=="form"&&t!=="button")||Zr(e.type,e.memoizedProps)),t=!t),t&&Be&&zt(e),Ko(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Be=Cf(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Be=Cf(e)}else a===27?(a=Be,Zt(e.type)?(e=au,au=null,Be=e):Be=a):Be=sa?Va(e.stateNode.nextSibling):null;return!0}function fn(){Be=sa=null,_e=!1}function qc(){var e=Gt;return e!==null&&(Ca===null?Ca=e:Ca.push.apply(Ca,e),Gt=null),e}function Gs(e){Gt===null?Gt=[e]:Gt.push(e)}var Rc=E(null),pn=null,ht=null;function Ut(e,a,t){J(Rc,a._currentValue),a._currentValue=t}function vt(e){e._currentValue=Rc.current,Y(Rc)}function Gc(e,a,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===t)break;e=e.return}}function zc(e,a,t,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){var d=i.child;c=c.firstContext;e:for(;c!==null;){var y=c;c=i;for(var N=0;N<a.length;N++)if(y.context===a[N]){c.lanes|=t,y=c.alternate,y!==null&&(y.lanes|=t),Gc(c.return,t,e),n||(d=null);break e}c=y.next}}else if(i.tag===18){if(d=i.return,d===null)throw Error(u(341));d.lanes|=t,c=d.alternate,c!==null&&(c.lanes|=t),Gc(d,t,e),d=null}else d=i.child;if(d!==null)d.return=i;else for(d=i;d!==null;){if(d===e){d=null;break}if(i=d.sibling,i!==null){i.return=d.return,d=i;break}d=d.return}i=d}}function $n(e,a,t,n){e=null;for(var i=a,c=!1;i!==null;){if(!c){if((i.flags&524288)!==0)c=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var d=i.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var y=i.type;wa(i.pendingProps.value,d.value)||(e!==null?e.push(y):e=[y])}}else if(i===ge.current){if(d=i.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(rl):e=[rl])}i=i.return}e!==null&&zc(a,e,t,n),a.flags|=262144}function Bl(e){for(e=e.firstContext;e!==null;){if(!wa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function yn(e){pn=e,ht=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function la(e){return Fo(pn,e)}function Hl(e,a){return pn===null&&yn(e),Fo(e,a)}function Fo(e,a){var t=a._currentValue;if(a={context:a,memoizedValue:t,next:null},ht===null){if(e===null)throw Error(u(308));ht=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else ht=ht.next=a;return t}var rg=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(t){return t()})}},ug=s.unstable_scheduleCallback,og=s.unstable_NormalPriority,Je={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new rg,data:new Map,refCount:0}}function zs(e){e.refCount--,e.refCount===0&&ug(og,function(){e.controller.abort()})}var Us=null,Oc=0,Xn=0,Vn=null;function dg(e,a){if(Us===null){var t=Us=[];Oc=0,Xn=Hr(),Vn={status:"pending",value:void 0,then:function(n){t.push(n)}}}return Oc++,a.then(Wo,Wo),a}function Wo(){if(--Oc===0&&Us!==null){Vn!==null&&(Vn.status="fulfilled");var e=Us;Us=null,Xn=0,Vn=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function mg(e,a){var t=[],n={status:"pending",value:null,reason:null,then:function(i){t.push(i)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var i=0;i<t.length;i++)(0,t[i])(a)},function(i){for(n.status="rejected",n.reason=i,i=0;i<t.length;i++)(0,t[i])(void 0)}),n}var ed=L.S;L.S=function(e,a){Um=ta(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&dg(e,a),ed!==null&&ed(e,a)};var gn=E(null);function Lc(){var e=gn.current;return e!==null?e:Le.pooledCache}function Yl(e,a){a===null?J(gn,gn.current):J(gn,a.pool)}function ad(){var e=Lc();return e===null?null:{parent:Je._currentValue,pool:e}}var Jn=Error(u(460)),Bc=Error(u(474)),Il=Error(u(542)),Ql={then:function(){}};function td(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nd(e,a,t){switch(t=e[t],t===void 0?e.push(a):t!==a&&(a.then(ft,ft),a=t),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,ld(e),e;default:if(typeof a.status=="string")a.then(ft,ft);else{if(e=Le,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var i=a;i.status="fulfilled",i.value=n}},function(n){if(a.status==="pending"){var i=a;i.status="rejected",i.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,ld(e),e}throw vn=a,Jn}}function hn(e){try{var a=e._init;return a(e._payload)}catch(t){throw t!==null&&typeof t=="object"&&typeof t.then=="function"?(vn=t,Jn):t}}var vn=null;function sd(){if(vn===null)throw Error(u(459));var e=vn;return vn=null,e}function ld(e){if(e===Jn||e===Il)throw Error(u(483))}var Zn=null,Os=0;function Pl(e){var a=Os;return Os+=1,Zn===null&&(Zn=[]),nd(Zn,e,a)}function Ls(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function $l(e,a){throw a.$$typeof===q?Error(u(525)):(e=Object.prototype.toString.call(a),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function id(e){function a(A,_){if(e){var R=A.deletions;R===null?(A.deletions=[_],A.flags|=16):R.push(_)}}function t(A,_){if(!e)return null;for(;_!==null;)a(A,_),_=_.sibling;return null}function n(A){for(var _=new Map;A!==null;)A.key!==null?_.set(A.key,A):_.set(A.index,A),A=A.sibling;return _}function i(A,_){return A=yt(A,_),A.index=0,A.sibling=null,A}function c(A,_,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<_?(A.flags|=67108866,_):R):(A.flags|=67108866,_)):(A.flags|=1048576,_)}function d(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function y(A,_,R,P){return _===null||_.tag!==6?(_=wc(R,A.mode,P),_.return=A,_):(_=i(_,R),_.return=A,_)}function N(A,_,R,P){var ie=R.type;return ie===U?Q(A,_,R.props.children,P,R.key):_!==null&&(_.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ae&&hn(ie)===_.type)?(_=i(_,R.props),Ls(_,R),_.return=A,_):(_=Ol(R.type,R.key,R.props,null,A.mode,P),Ls(_,R),_.return=A,_)}function G(A,_,R,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==R.containerInfo||_.stateNode.implementation!==R.implementation?(_=Mc(R,A.mode,P),_.return=A,_):(_=i(_,R.children||[]),_.return=A,_)}function Q(A,_,R,P,ie){return _===null||_.tag!==7?(_=mn(R,A.mode,P,ie),_.return=A,_):(_=i(_,R),_.return=A,_)}function X(A,_,R){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=wc(""+_,A.mode,R),_.return=A,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case T:return R=Ol(_.type,_.key,_.props,null,A.mode,R),Ls(R,_),R.return=A,R;case D:return _=Mc(_,A.mode,R),_.return=A,_;case ae:return _=hn(_),X(A,_,R)}if(ce(_)||H(_))return _=mn(_,A.mode,R,null),_.return=A,_;if(typeof _.then=="function")return X(A,Pl(_),R);if(_.$$typeof===x)return X(A,Hl(A,_),R);$l(A,_)}return null}function O(A,_,R,P){var ie=_!==null?_.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ie!==null?null:y(A,_,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return R.key===ie?N(A,_,R,P):null;case D:return R.key===ie?G(A,_,R,P):null;case ae:return R=hn(R),O(A,_,R,P)}if(ce(R)||H(R))return ie!==null?null:Q(A,_,R,P,null);if(typeof R.then=="function")return O(A,_,Pl(R),P);if(R.$$typeof===x)return O(A,_,Hl(A,R),P);$l(A,R)}return null}function I(A,_,R,P,ie){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return A=A.get(R)||null,y(_,A,""+P,ie);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return A=A.get(P.key===null?R:P.key)||null,N(_,A,P,ie);case D:return A=A.get(P.key===null?R:P.key)||null,G(_,A,P,ie);case ae:return P=hn(P),I(A,_,R,P,ie)}if(ce(P)||H(P))return A=A.get(R)||null,Q(_,A,P,ie,null);if(typeof P.then=="function")return I(A,_,R,Pl(P),ie);if(P.$$typeof===x)return I(A,_,R,Hl(_,P),ie);$l(_,P)}return null}function ne(A,_,R,P){for(var ie=null,De=null,se=_,ve=_=0,Ee=null;se!==null&&ve<R.length;ve++){se.index>ve?(Ee=se,se=null):Ee=se.sibling;var we=O(A,se,R[ve],P);if(we===null){se===null&&(se=Ee);break}e&&se&&we.alternate===null&&a(A,se),_=c(we,_,ve),De===null?ie=we:De.sibling=we,De=we,se=Ee}if(ve===R.length)return t(A,se),_e&&gt(A,ve),ie;if(se===null){for(;ve<R.length;ve++)se=X(A,R[ve],P),se!==null&&(_=c(se,_,ve),De===null?ie=se:De.sibling=se,De=se);return _e&&gt(A,ve),ie}for(se=n(se);ve<R.length;ve++)Ee=I(se,A,ve,R[ve],P),Ee!==null&&(e&&Ee.alternate!==null&&se.delete(Ee.key===null?ve:Ee.key),_=c(Ee,_,ve),De===null?ie=Ee:De.sibling=Ee,De=Ee);return e&&se.forEach(function(an){return a(A,an)}),_e&&gt(A,ve),ie}function ue(A,_,R,P){if(R==null)throw Error(u(151));for(var ie=null,De=null,se=_,ve=_=0,Ee=null,we=R.next();se!==null&&!we.done;ve++,we=R.next()){se.index>ve?(Ee=se,se=null):Ee=se.sibling;var an=O(A,se,we.value,P);if(an===null){se===null&&(se=Ee);break}e&&se&&an.alternate===null&&a(A,se),_=c(an,_,ve),De===null?ie=an:De.sibling=an,De=an,se=Ee}if(we.done)return t(A,se),_e&&gt(A,ve),ie;if(se===null){for(;!we.done;ve++,we=R.next())we=X(A,we.value,P),we!==null&&(_=c(we,_,ve),De===null?ie=we:De.sibling=we,De=we);return _e&&gt(A,ve),ie}for(se=n(se);!we.done;ve++,we=R.next())we=I(se,A,ve,we.value,P),we!==null&&(e&&we.alternate!==null&&se.delete(we.key===null?ve:we.key),_=c(we,_,ve),De===null?ie=we:De.sibling=we,De=we);return e&&se.forEach(function(Ch){return a(A,Ch)}),_e&&gt(A,ve),ie}function ze(A,_,R,P){if(typeof R=="object"&&R!==null&&R.type===U&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case T:e:{for(var ie=R.key;_!==null;){if(_.key===ie){if(ie=R.type,ie===U){if(_.tag===7){t(A,_.sibling),P=i(_,R.props.children),P.return=A,A=P;break e}}else if(_.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ae&&hn(ie)===_.type){t(A,_.sibling),P=i(_,R.props),Ls(P,R),P.return=A,A=P;break e}t(A,_);break}else a(A,_);_=_.sibling}R.type===U?(P=mn(R.props.children,A.mode,P,R.key),P.return=A,A=P):(P=Ol(R.type,R.key,R.props,null,A.mode,P),Ls(P,R),P.return=A,A=P)}return d(A);case D:e:{for(ie=R.key;_!==null;){if(_.key===ie)if(_.tag===4&&_.stateNode.containerInfo===R.containerInfo&&_.stateNode.implementation===R.implementation){t(A,_.sibling),P=i(_,R.children||[]),P.return=A,A=P;break e}else{t(A,_);break}else a(A,_);_=_.sibling}P=Mc(R,A.mode,P),P.return=A,A=P}return d(A);case ae:return R=hn(R),ze(A,_,R,P)}if(ce(R))return ne(A,_,R,P);if(H(R)){if(ie=H(R),typeof ie!="function")throw Error(u(150));return R=ie.call(R),ue(A,_,R,P)}if(typeof R.then=="function")return ze(A,_,Pl(R),P);if(R.$$typeof===x)return ze(A,_,Hl(A,R),P);$l(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,_!==null&&_.tag===6?(t(A,_.sibling),P=i(_,R),P.return=A,A=P):(t(A,_),P=wc(R,A.mode,P),P.return=A,A=P),d(A)):t(A,_)}return function(A,_,R,P){try{Os=0;var ie=ze(A,_,R,P);return Zn=null,ie}catch(se){if(se===Jn||se===Il)throw se;var De=Ma(29,se,null,A.mode);return De.lanes=P,De.return=A,De}finally{}}}var bn=id(!0),cd=id(!1),Ot=!1;function Hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Lt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bt(e,a,t){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Me&2)!==0){var i=n.pending;return i===null?a.next=a:(a.next=i.next,i.next=a),n.pending=a,a=Ul(e),Qo(e,null,t),a}return zl(e,n,a,t),Ul(e)}function Bs(e,a,t){if(a=a.updateQueue,a!==null&&(a=a.shared,(t&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,t|=n,a.lanes=t,et(e,t)}}function Ic(e,a){var t=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,c=null;if(t=t.firstBaseUpdate,t!==null){do{var d={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};c===null?i=c=d:c=c.next=d,t=t.next}while(t!==null);c===null?i=c=a:c=c.next=a}else i=c=a;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=a:e.next=a,t.lastBaseUpdate=a}var Qc=!1;function Hs(){if(Qc){var e=Vn;if(e!==null)throw e}}function Ys(e,a,t,n){Qc=!1;var i=e.updateQueue;Ot=!1;var c=i.firstBaseUpdate,d=i.lastBaseUpdate,y=i.shared.pending;if(y!==null){i.shared.pending=null;var N=y,G=N.next;N.next=null,d===null?c=G:d.next=G,d=N;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,y=Q.lastBaseUpdate,y!==d&&(y===null?Q.firstBaseUpdate=G:y.next=G,Q.lastBaseUpdate=N))}if(c!==null){var X=i.baseState;d=0,Q=G=N=null,y=c;do{var O=y.lane&-536870913,I=O!==y.lane;if(I?(je&O)===O:(n&O)===O){O!==0&&O===Xn&&(Qc=!0),Q!==null&&(Q=Q.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ne=e,ue=y;O=a;var ze=t;switch(ue.tag){case 1:if(ne=ue.payload,typeof ne=="function"){X=ne.call(ze,X,O);break e}X=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ue.payload,O=typeof ne=="function"?ne.call(ze,X,O):ne,O==null)break e;X=j({},X,O);break e;case 2:Ot=!0}}O=y.callback,O!==null&&(e.flags|=64,I&&(e.flags|=8192),I=i.callbacks,I===null?i.callbacks=[O]:I.push(O))}else I={lane:O,tag:y.tag,payload:y.payload,callback:y.callback,next:null},Q===null?(G=Q=I,N=X):Q=Q.next=I,d|=O;if(y=y.next,y===null){if(y=i.shared.pending,y===null)break;I=y,y=I.next,I.next=null,i.lastBaseUpdate=I,i.shared.pending=null}}while(!0);Q===null&&(N=X),i.baseState=N,i.firstBaseUpdate=G,i.lastBaseUpdate=Q,c===null&&(i.shared.lanes=0),Pt|=d,e.lanes=d,e.memoizedState=X}}function rd(e,a){if(typeof e!="function")throw Error(u(191,e));e.call(a)}function ud(e,a){var t=e.callbacks;if(t!==null)for(e.callbacks=null,e=0;e<t.length;e++)rd(t[e],a)}var Kn=E(null),Xl=E(0);function od(e,a){e=Dt,J(Xl,e),J(Kn,a),Dt=e|a.baseLanes}function Pc(){J(Xl,Dt),J(Kn,Kn.current)}function $c(){Dt=Xl.current,Y(Kn),Y(Xl)}var Ta=E(null),Xa=null;function Ht(e){var a=e.alternate;J(Xe,Xe.current&1),J(Ta,e),Xa===null&&(a===null||Kn.current!==null||a.memoizedState!==null)&&(Xa=e)}function Xc(e){J(Xe,Xe.current),J(Ta,e),Xa===null&&(Xa=e)}function dd(e){e.tag===22?(J(Xe,Xe.current),J(Ta,e),Xa===null&&(Xa=e)):Yt()}function Yt(){J(Xe,Xe.current),J(Ta,Ta.current)}function Aa(e){Y(Ta),Xa===e&&(Xa=null),Y(Xe)}var Xe=E(0);function Vl(e){for(var a=e;a!==null;){if(a.tag===13){var t=a.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||Wr(t)||eu(t)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var bt=0,he=null,Re=null,Ze=null,Jl=!1,Fn=!1,xn=!1,Zl=0,Is=0,Wn=null,fg=0;function Pe(){throw Error(u(321))}function Vc(e,a){if(a===null)return!1;for(var t=0;t<a.length&&t<e.length;t++)if(!wa(e[t],a[t]))return!1;return!0}function Jc(e,a,t,n,i,c){return bt=c,he=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=e===null||e.memoizedState===null?Vd:or,xn=!1,c=t(n,i),xn=!1,Fn&&(c=fd(a,t,n,i)),md(e),c}function md(e){L.H=$s;var a=Re!==null&&Re.next!==null;if(bt=0,Ze=Re=he=null,Jl=!1,Is=0,Wn=null,a)throw Error(u(300));e===null||Ke||(e=e.dependencies,e!==null&&Bl(e)&&(Ke=!0))}function fd(e,a,t,n){he=e;var i=0;do{if(Fn&&(Wn=null),Is=0,Fn=!1,25<=i)throw Error(u(301));if(i+=1,Ze=Re=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}L.H=Jd,c=a(t,n)}while(Fn);return c}function pg(){var e=L.H,a=e.useState()[0];return a=typeof a.then=="function"?Qs(a):a,e=e.useState()[0],(Re!==null?Re.memoizedState:null)!==e&&(he.flags|=1024),a}function Zc(){var e=Zl!==0;return Zl=0,e}function Kc(e,a,t){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~t}function Fc(e){if(Jl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Jl=!1}bt=0,Ze=Re=he=null,Fn=!1,Is=Zl=0,Wn=null}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?he.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Ve(){if(Re===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var a=Ze===null?he.memoizedState:Ze.next;if(a!==null)Ze=a,Re=e;else{if(e===null)throw he.alternate===null?Error(u(467)):Error(u(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ze===null?he.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(e){var a=Is;return Is+=1,Wn===null&&(Wn=[]),e=nd(Wn,e,a),a=he,(Ze===null?a.memoizedState:Ze.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?Vd:or),e}function Fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qs(e);if(e.$$typeof===x)return la(e)}throw Error(u(438,String(e)))}function Wc(e){var a=null,t=he.updateQueue;if(t!==null&&(a=t.memoCache),a==null){var n=he.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(i){return i.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),t===null&&(t=Kl(),he.updateQueue=t),t.memoCache=a,t=a.data[a.index],t===void 0)for(t=a.data[a.index]=Array(e),n=0;n<e;n++)t[n]=be;return a.index++,t}function xt(e,a){return typeof a=="function"?a(e):a}function Wl(e){var a=Ve();return er(a,Re,e)}function er(e,a,t){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=t;var i=e.baseQueue,c=n.pending;if(c!==null){if(i!==null){var d=i.next;i.next=c.next,c.next=d}a.baseQueue=i=c,n.pending=null}if(c=e.baseState,i===null)e.memoizedState=c;else{a=i.next;var y=d=null,N=null,G=a,Q=!1;do{var X=G.lane&-536870913;if(X!==G.lane?(je&X)===X:(bt&X)===X){var O=G.revertLane;if(O===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),X===Xn&&(Q=!0);else if((bt&O)===O){G=G.next,O===Xn&&(Q=!0);continue}else X={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(y=N=X,d=c):N=N.next=X,he.lanes|=O,Pt|=O;X=G.action,xn&&t(c,X),c=G.hasEagerState?G.eagerState:t(c,X)}else O={lane:X,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(y=N=O,d=c):N=N.next=O,he.lanes|=X,Pt|=X;G=G.next}while(G!==null&&G!==a);if(N===null?d=c:N.next=y,!wa(c,e.memoizedState)&&(Ke=!0,Q&&(t=Vn,t!==null)))throw t;e.memoizedState=c,e.baseState=d,e.baseQueue=N,n.lastRenderedState=c}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function ar(e){var a=Ve(),t=a.queue;if(t===null)throw Error(u(311));t.lastRenderedReducer=e;var n=t.dispatch,i=t.pending,c=a.memoizedState;if(i!==null){t.pending=null;var d=i=i.next;do c=e(c,d.action),d=d.next;while(d!==i);wa(c,a.memoizedState)||(Ke=!0),a.memoizedState=c,a.baseQueue===null&&(a.baseState=c),t.lastRenderedState=c}return[c,n]}function pd(e,a,t){var n=he,i=Ve(),c=_e;if(c){if(t===void 0)throw Error(u(407));t=t()}else t=a();var d=!wa((Re||i).memoizedState,t);if(d&&(i.memoizedState=t,Ke=!0),i=i.queue,sr(hd.bind(null,n,i,e),[e]),i.getSnapshot!==a||d||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,es(9,{destroy:void 0},gd.bind(null,n,i,t,a),null),Le===null)throw Error(u(349));c||(bt&127)!==0||yd(n,a,t)}return t}function yd(e,a,t){e.flags|=16384,e={getSnapshot:a,value:t},a=he.updateQueue,a===null?(a=Kl(),he.updateQueue=a,a.stores=[e]):(t=a.stores,t===null?a.stores=[e]:t.push(e))}function gd(e,a,t,n){a.value=t,a.getSnapshot=n,vd(a)&&bd(e)}function hd(e,a,t){return t(function(){vd(a)&&bd(e)})}function vd(e){var a=e.getSnapshot;e=e.value;try{var t=a();return!wa(e,t)}catch{return!0}}function bd(e){var a=dn(e,2);a!==null&&ja(a,e,2)}function tr(e){var a=ga();if(typeof e=="function"){var t=e;if(e=t(),xn){st(!0);try{t()}finally{st(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xt,lastRenderedState:e},a}function xd(e,a,t,n){return e.baseState=t,er(e,Re,typeof n=="function"?n:xt)}function yg(e,a,t,n,i){if(ti(e))throw Error(u(485));if(e=a.action,e!==null){var c={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){c.listeners.push(d)}};L.T!==null?t(!0):c.isTransition=!1,n(c),t=a.pending,t===null?(c.next=a.pending=c,Sd(a,c)):(c.next=t.next,a.pending=t.next=c)}}function Sd(e,a){var t=a.action,n=a.payload,i=e.state;if(a.isTransition){var c=L.T,d={};L.T=d;try{var y=t(i,n),N=L.S;N!==null&&N(d,y),Nd(e,a,y)}catch(G){nr(e,a,G)}finally{c!==null&&d.types!==null&&(c.types=d.types),L.T=c}}else try{c=t(i,n),Nd(e,a,c)}catch(G){nr(e,a,G)}}function Nd(e,a,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(n){Cd(e,a,n)},function(n){return nr(e,a,n)}):Cd(e,a,t)}function Cd(e,a,t){a.status="fulfilled",a.value=t,jd(a),e.state=t,a=e.pending,a!==null&&(t=a.next,t===a?e.pending=null:(t=t.next,a.next=t,Sd(e,t)))}function nr(e,a,t){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=t,jd(a),a=a.next;while(a!==n)}e.action=null}function jd(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Ed(e,a){return a}function _d(e,a){if(_e){var t=Le.formState;if(t!==null){e:{var n=he;if(_e){if(Be){a:{for(var i=Be,c=$a;i.nodeType!==8;){if(!c){i=null;break a}if(i=Va(i.nextSibling),i===null){i=null;break a}}c=i.data,i=c==="F!"||c==="F"?i:null}if(i){Be=Va(i.nextSibling),n=i.data==="F!";break e}}zt(n)}n=!1}n&&(a=t[0])}}return t=ga(),t.memoizedState=t.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:a},t.queue=n,t=Pd.bind(null,he,n),n.dispatch=t,n=tr(!1),c=ur.bind(null,he,!1,n.queue),n=ga(),i={state:a,dispatch:null,action:e,pending:null},n.queue=i,t=yg.bind(null,he,i,c,t),i.dispatch=t,n.memoizedState=e,[a,t,!1]}function Dd(e){var a=Ve();return wd(a,Re,e)}function wd(e,a,t){if(a=er(e,a,Ed)[0],e=Wl(xt)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=Qs(a)}catch(d){throw d===Jn?Il:d}else n=a;a=Ve();var i=a.queue,c=i.dispatch;return t!==a.memoizedState&&(he.flags|=2048,es(9,{destroy:void 0},gg.bind(null,i,t),null)),[n,c,e]}function gg(e,a){e.action=a}function Md(e){var a=Ve(),t=Re;if(t!==null)return wd(a,t,e);Ve(),a=a.memoizedState,t=Ve();var n=t.queue.dispatch;return t.memoizedState=e,[a,n,!1]}function es(e,a,t,n){return e={tag:e,create:t,deps:n,inst:a,next:null},a=he.updateQueue,a===null&&(a=Kl(),he.updateQueue=a),t=a.lastEffect,t===null?a.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,a.lastEffect=e),e}function Td(){return Ve().memoizedState}function ei(e,a,t,n){var i=ga();he.flags|=e,i.memoizedState=es(1|a,{destroy:void 0},t,n===void 0?null:n)}function ai(e,a,t,n){var i=Ve();n=n===void 0?null:n;var c=i.memoizedState.inst;Re!==null&&n!==null&&Vc(n,Re.memoizedState.deps)?i.memoizedState=es(a,c,t,n):(he.flags|=e,i.memoizedState=es(1|a,c,t,n))}function Ad(e,a){ei(8390656,8,e,a)}function sr(e,a){ai(2048,8,e,a)}function hg(e){he.flags|=4;var a=he.updateQueue;if(a===null)a=Kl(),he.updateQueue=a,a.events=[e];else{var t=a.events;t===null?a.events=[e]:t.push(e)}}function kd(e){var a=Ve().memoizedState;return hg({ref:a,nextImpl:e}),function(){if((Me&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}function qd(e,a){return ai(4,2,e,a)}function Rd(e,a){return ai(4,4,e,a)}function Gd(e,a){if(typeof a=="function"){e=e();var t=a(e);return function(){typeof t=="function"?t():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function zd(e,a,t){t=t!=null?t.concat([e]):null,ai(4,4,Gd.bind(null,a,e),t)}function lr(){}function Ud(e,a){var t=Ve();a=a===void 0?null:a;var n=t.memoizedState;return a!==null&&Vc(a,n[1])?n[0]:(t.memoizedState=[e,a],e)}function Od(e,a){var t=Ve();a=a===void 0?null:a;var n=t.memoizedState;if(a!==null&&Vc(a,n[1]))return n[0];if(n=e(),xn){st(!0);try{e()}finally{st(!1)}}return t.memoizedState=[n,a],n}function ir(e,a,t){return t===void 0||(bt&1073741824)!==0&&(je&261930)===0?e.memoizedState=a:(e.memoizedState=t,e=Lm(),he.lanes|=e,Pt|=e,t)}function Ld(e,a,t,n){return wa(t,a)?t:Kn.current!==null?(e=ir(e,t,n),wa(e,a)||(Ke=!0),e):(bt&42)===0||(bt&1073741824)!==0&&(je&261930)===0?(Ke=!0,e.memoizedState=t):(e=Lm(),he.lanes|=e,Pt|=e,a)}function Bd(e,a,t,n,i){var c=Z.p;Z.p=c!==0&&8>c?c:8;var d=L.T,y={};L.T=y,ur(e,!1,a,t);try{var N=i(),G=L.S;if(G!==null&&G(y,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=mg(N,n);Ps(e,a,Q,Ra(e))}else Ps(e,a,n,Ra(e))}catch(X){Ps(e,a,{then:function(){},status:"rejected",reason:X},Ra())}finally{Z.p=c,d!==null&&y.types!==null&&(d.types=y.types),L.T=d}}function vg(){}function cr(e,a,t,n){if(e.tag!==5)throw Error(u(476));var i=Hd(e).queue;Bd(e,i,a,V,t===null?vg:function(){return Yd(e),t(n)})}function Hd(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xt,lastRenderedState:V},next:null};var t={};return a.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xt,lastRenderedState:t},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Yd(e){var a=Hd(e);a.next===null&&(a=e.alternate.memoizedState),Ps(e,a.next.queue,{},Ra())}function rr(){return la(rl)}function Id(){return Ve().memoizedState}function Qd(){return Ve().memoizedState}function bg(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var t=Ra();e=Lt(t);var n=Bt(a,e,t);n!==null&&(ja(n,a,t),Bs(n,a,t)),a={cache:Uc()},e.payload=a;return}a=a.return}}function xg(e,a,t){var n=Ra();t={lane:n,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null},ti(e)?$d(a,t):(t=_c(e,a,t,n),t!==null&&(ja(t,e,n),Xd(t,a,n)))}function Pd(e,a,t){var n=Ra();Ps(e,a,t,n)}function Ps(e,a,t,n){var i={lane:n,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null};if(ti(e))$d(a,i);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=a.lastRenderedReducer,c!==null))try{var d=a.lastRenderedState,y=c(d,t);if(i.hasEagerState=!0,i.eagerState=y,wa(y,d))return zl(e,a,i,0),Le===null&&Gl(),!1}catch{}finally{}if(t=_c(e,a,i,n),t!==null)return ja(t,e,n),Xd(t,a,n),!0}return!1}function ur(e,a,t,n){if(n={lane:2,revertLane:Hr(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ti(e)){if(a)throw Error(u(479))}else a=_c(e,t,n,2),a!==null&&ja(a,e,2)}function ti(e){var a=e.alternate;return e===he||a!==null&&a===he}function $d(e,a){Fn=Jl=!0;var t=e.pending;t===null?a.next=a:(a.next=t.next,t.next=a),e.pending=a}function Xd(e,a,t){if((t&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,t|=n,a.lanes=t,et(e,t)}}var $s={readContext:la,use:Fl,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe,useHostTransitionStatus:Pe,useFormState:Pe,useActionState:Pe,useOptimistic:Pe,useMemoCache:Pe,useCacheRefresh:Pe};$s.useEffectEvent=Pe;var Vd={readContext:la,use:Fl,useCallback:function(e,a){return ga().memoizedState=[e,a===void 0?null:a],e},useContext:la,useEffect:Ad,useImperativeHandle:function(e,a,t){t=t!=null?t.concat([e]):null,ei(4194308,4,Gd.bind(null,a,e),t)},useLayoutEffect:function(e,a){return ei(4194308,4,e,a)},useInsertionEffect:function(e,a){ei(4,2,e,a)},useMemo:function(e,a){var t=ga();a=a===void 0?null:a;var n=e();if(xn){st(!0);try{e()}finally{st(!1)}}return t.memoizedState=[n,a],n},useReducer:function(e,a,t){var n=ga();if(t!==void 0){var i=t(a);if(xn){st(!0);try{t(a)}finally{st(!1)}}}else i=a;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=xg.bind(null,he,e),[n.memoizedState,e]},useRef:function(e){var a=ga();return e={current:e},a.memoizedState=e},useState:function(e){e=tr(e);var a=e.queue,t=Pd.bind(null,he,a);return a.dispatch=t,[e.memoizedState,t]},useDebugValue:lr,useDeferredValue:function(e,a){var t=ga();return ir(t,e,a)},useTransition:function(){var e=tr(!1);return e=Bd.bind(null,he,e.queue,!0,!1),ga().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,t){var n=he,i=ga();if(_e){if(t===void 0)throw Error(u(407));t=t()}else{if(t=a(),Le===null)throw Error(u(349));(je&127)!==0||yd(n,a,t)}i.memoizedState=t;var c={value:t,getSnapshot:a};return i.queue=c,Ad(hd.bind(null,n,c,e),[e]),n.flags|=2048,es(9,{destroy:void 0},gd.bind(null,n,c,t,a),null),t},useId:function(){var e=ga(),a=Le.identifierPrefix;if(_e){var t=it,n=lt;t=(n&~(1<<32-da(n)-1)).toString(32)+t,a="_"+a+"R_"+t,t=Zl++,0<t&&(a+="H"+t.toString(32)),a+="_"}else t=fg++,a="_"+a+"r_"+t.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:rr,useFormState:_d,useActionState:_d,useOptimistic:function(e){var a=ga();a.memoizedState=a.baseState=e;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=t,a=ur.bind(null,he,!0,t),t.dispatch=a,[e,a]},useMemoCache:Wc,useCacheRefresh:function(){return ga().memoizedState=bg.bind(null,he)},useEffectEvent:function(e){var a=ga(),t={impl:e};return a.memoizedState=t,function(){if((Me&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}},or={readContext:la,use:Fl,useCallback:Ud,useContext:la,useEffect:sr,useImperativeHandle:zd,useInsertionEffect:qd,useLayoutEffect:Rd,useMemo:Od,useReducer:Wl,useRef:Td,useState:function(){return Wl(xt)},useDebugValue:lr,useDeferredValue:function(e,a){var t=Ve();return Ld(t,Re.memoizedState,e,a)},useTransition:function(){var e=Wl(xt)[0],a=Ve().memoizedState;return[typeof e=="boolean"?e:Qs(e),a]},useSyncExternalStore:pd,useId:Id,useHostTransitionStatus:rr,useFormState:Dd,useActionState:Dd,useOptimistic:function(e,a){var t=Ve();return xd(t,Re,e,a)},useMemoCache:Wc,useCacheRefresh:Qd};or.useEffectEvent=kd;var Jd={readContext:la,use:Fl,useCallback:Ud,useContext:la,useEffect:sr,useImperativeHandle:zd,useInsertionEffect:qd,useLayoutEffect:Rd,useMemo:Od,useReducer:ar,useRef:Td,useState:function(){return ar(xt)},useDebugValue:lr,useDeferredValue:function(e,a){var t=Ve();return Re===null?ir(t,e,a):Ld(t,Re.memoizedState,e,a)},useTransition:function(){var e=ar(xt)[0],a=Ve().memoizedState;return[typeof e=="boolean"?e:Qs(e),a]},useSyncExternalStore:pd,useId:Id,useHostTransitionStatus:rr,useFormState:Md,useActionState:Md,useOptimistic:function(e,a){var t=Ve();return Re!==null?xd(t,Re,e,a):(t.baseState=e,[e,t.queue.dispatch])},useMemoCache:Wc,useCacheRefresh:Qd};Jd.useEffectEvent=kd;function dr(e,a,t,n){a=e.memoizedState,t=t(n,a),t=t==null?a:j({},a,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var mr={enqueueSetState:function(e,a,t){e=e._reactInternals;var n=Ra(),i=Lt(n);i.payload=a,t!=null&&(i.callback=t),a=Bt(e,i,n),a!==null&&(ja(a,e,n),Bs(a,e,n))},enqueueReplaceState:function(e,a,t){e=e._reactInternals;var n=Ra(),i=Lt(n);i.tag=1,i.payload=a,t!=null&&(i.callback=t),a=Bt(e,i,n),a!==null&&(ja(a,e,n),Bs(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var t=Ra(),n=Lt(t);n.tag=2,a!=null&&(n.callback=a),a=Bt(e,n,t),a!==null&&(ja(a,e,t),Bs(a,e,t))}};function Zd(e,a,t,n,i,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,d):a.prototype&&a.prototype.isPureReactComponent?!ks(t,n)||!ks(i,c):!0}function Kd(e,a,t,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(t,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(t,n),a.state!==e&&mr.enqueueReplaceState(a,a.state,null)}function Sn(e,a){var t=a;if("ref"in a){t={};for(var n in a)n!=="ref"&&(t[n]=a[n])}if(e=e.defaultProps){t===a&&(t=j({},t));for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t}function Fd(e){Rl(e)}function Wd(e){console.error(e)}function em(e){Rl(e)}function ni(e,a){try{var t=e.onUncaughtError;t(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function am(e,a,t){try{var n=e.onCaughtError;n(t.value,{componentStack:t.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function fr(e,a,t){return t=Lt(t),t.tag=3,t.payload={element:null},t.callback=function(){ni(e,a)},t}function tm(e){return e=Lt(e),e.tag=3,e}function nm(e,a,t,n){var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var c=n.value;e.payload=function(){return i(c)},e.callback=function(){am(a,t,n)}}var d=t.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){am(a,t,n),typeof i!="function"&&($t===null?$t=new Set([this]):$t.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})})}function Sg(e,a,t,n,i){if(t.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=t.alternate,a!==null&&$n(a,t,i,!0),t=Ta.current,t!==null){switch(t.tag){case 31:case 13:return Xa===null?yi():t.alternate===null&&$e===0&&($e=3),t.flags&=-257,t.flags|=65536,t.lanes=i,n===Ql?t.flags|=16384:(a=t.updateQueue,a===null?t.updateQueue=new Set([n]):a.add(n),Or(e,n,i)),!1;case 22:return t.flags|=65536,n===Ql?t.flags|=16384:(a=t.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},t.updateQueue=a):(t=a.retryQueue,t===null?a.retryQueue=new Set([n]):t.add(n)),Or(e,n,i)),!1}throw Error(u(435,t.tag))}return Or(e,n,i),yi(),!1}if(_e)return a=Ta.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=i,n!==kc&&(e=Error(u(422),{cause:n}),Gs(Ia(e,t)))):(n!==kc&&(a=Error(u(423),{cause:n}),Gs(Ia(a,t))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Ia(n,t),i=fr(e.stateNode,n,i),Ic(e,i),$e!==4&&($e=2)),!1;var c=Error(u(520),{cause:n});if(c=Ia(c,t),el===null?el=[c]:el.push(c),$e!==4&&($e=2),a===null)return!0;n=Ia(n,t),t=a;do{switch(t.tag){case 3:return t.flags|=65536,e=i&-i,t.lanes|=e,e=fr(t.stateNode,n,e),Ic(t,e),!1;case 1:if(a=t.type,c=t.stateNode,(t.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&($t===null||!$t.has(c))))return t.flags|=65536,i&=-i,t.lanes|=i,i=tm(i),nm(i,e,t,n),Ic(t,i),!1}t=t.return}while(t!==null);return!1}var pr=Error(u(461)),Ke=!1;function ia(e,a,t,n){a.child=e===null?cd(a,null,t,n):bn(a,e.child,t,n)}function sm(e,a,t,n,i){t=t.render;var c=a.ref;if("ref"in n){var d={};for(var y in n)y!=="ref"&&(d[y]=n[y])}else d=n;return yn(a),n=Jc(e,a,t,d,c,i),y=Zc(),e!==null&&!Ke?(Kc(e,a,i),St(e,a,i)):(_e&&y&&Tc(a),a.flags|=1,ia(e,a,n,i),a.child)}function lm(e,a,t,n,i){if(e===null){var c=t.type;return typeof c=="function"&&!Dc(c)&&c.defaultProps===void 0&&t.compare===null?(a.tag=15,a.type=c,im(e,a,c,n,i)):(e=Ol(t.type,null,n,a,a.mode,i),e.ref=a.ref,e.return=a,a.child=e)}if(c=e.child,!Nr(e,i)){var d=c.memoizedProps;if(t=t.compare,t=t!==null?t:ks,t(d,n)&&e.ref===a.ref)return St(e,a,i)}return a.flags|=1,e=yt(c,n),e.ref=a.ref,e.return=a,a.child=e}function im(e,a,t,n,i){if(e!==null){var c=e.memoizedProps;if(ks(c,n)&&e.ref===a.ref)if(Ke=!1,a.pendingProps=n=c,Nr(e,i))(e.flags&131072)!==0&&(Ke=!0);else return a.lanes=e.lanes,St(e,a,i)}return yr(e,a,t,n,i)}function cm(e,a,t,n){var i=n.children,c=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(c=c!==null?c.baseLanes|t:t,e!==null){for(n=a.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~c}else n=0,a.child=null;return rm(e,a,c,t,n)}if((t&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yl(a,c!==null?c.cachePool:null),c!==null?od(a,c):Pc(),dd(a);else return n=a.lanes=536870912,rm(e,a,c!==null?c.baseLanes|t:t,t,n)}else c!==null?(Yl(a,c.cachePool),od(a,c),Yt(),a.memoizedState=null):(e!==null&&Yl(a,null),Pc(),Yt());return ia(e,a,i,t),a.child}function Xs(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function rm(e,a,t,n,i){var c=Lc();return c=c===null?null:{parent:Je._currentValue,pool:c},a.memoizedState={baseLanes:t,cachePool:c},e!==null&&Yl(a,null),Pc(),dd(a),e!==null&&$n(e,a,n,!0),a.childLanes=i,null}function si(e,a){return a=ii({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function um(e,a,t){return bn(a,e.child,null,t),e=si(a,a.pendingProps),e.flags|=2,Aa(a),a.memoizedState=null,e}function Ng(e,a,t){var n=a.pendingProps,i=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(_e){if(n.mode==="hidden")return e=si(a,n),a.lanes=536870912,Xs(null,e);if(Xc(a),(e=Be)?(e=Nf(e,$a),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Rt!==null?{id:lt,overflow:it}:null,retryLane:536870912,hydrationErrors:null},t=$o(e),t.return=a,a.child=t,sa=a,Be=null)):e=null,e===null)throw zt(a);return a.lanes=536870912,null}return si(a,n)}var c=e.memoizedState;if(c!==null){var d=c.dehydrated;if(Xc(a),i)if(a.flags&256)a.flags&=-257,a=um(e,a,t);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(u(558));else if(Ke||$n(e,a,t,!1),i=(t&e.childLanes)!==0,Ke||i){if(n=Le,n!==null&&(d=At(n,t),d!==0&&d!==c.retryLane))throw c.retryLane=d,dn(e,d),ja(n,e,d),pr;yi(),a=um(e,a,t)}else e=c.treeContext,Be=Va(d.nextSibling),sa=a,_e=!0,Gt=null,$a=!1,e!==null&&Jo(a,e),a=si(a,n),a.flags|=4096;return a}return e=yt(e.child,{mode:n.mode,children:n.children}),e.ref=a.ref,a.child=e,e.return=a,e}function li(e,a){var t=a.ref;if(t===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(u(284));(e===null||e.ref!==t)&&(a.flags|=4194816)}}function yr(e,a,t,n,i){return yn(a),t=Jc(e,a,t,n,void 0,i),n=Zc(),e!==null&&!Ke?(Kc(e,a,i),St(e,a,i)):(_e&&n&&Tc(a),a.flags|=1,ia(e,a,t,i),a.child)}function om(e,a,t,n,i,c){return yn(a),a.updateQueue=null,t=fd(a,n,t,i),md(e),n=Zc(),e!==null&&!Ke?(Kc(e,a,c),St(e,a,c)):(_e&&n&&Tc(a),a.flags|=1,ia(e,a,t,c),a.child)}function dm(e,a,t,n,i){if(yn(a),a.stateNode===null){var c=Yn,d=t.contextType;typeof d=="object"&&d!==null&&(c=la(d)),c=new t(n,c),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=mr,a.stateNode=c,c._reactInternals=a,c=a.stateNode,c.props=n,c.state=a.memoizedState,c.refs={},Hc(a),d=t.contextType,c.context=typeof d=="object"&&d!==null?la(d):Yn,c.state=a.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(dr(a,t,d,n),c.state=a.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(d=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),d!==c.state&&mr.enqueueReplaceState(c,c.state,null),Ys(a,n,c,i),Hs(),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){c=a.stateNode;var y=a.memoizedProps,N=Sn(t,y);c.props=N;var G=c.context,Q=t.contextType;d=Yn,typeof Q=="object"&&Q!==null&&(d=la(Q));var X=t.getDerivedStateFromProps;Q=typeof X=="function"||typeof c.getSnapshotBeforeUpdate=="function",y=a.pendingProps!==y,Q||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y||G!==d)&&Kd(a,c,n,d),Ot=!1;var O=a.memoizedState;c.state=O,Ys(a,n,c,i),Hs(),G=a.memoizedState,y||O!==G||Ot?(typeof X=="function"&&(dr(a,t,X,n),G=a.memoizedState),(N=Ot||Zd(a,t,N,n,O,G,d))?(Q||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(a.flags|=4194308)):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=G),c.props=n,c.state=G,c.context=d,n=N):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{c=a.stateNode,Yc(e,a),d=a.memoizedProps,Q=Sn(t,d),c.props=Q,X=a.pendingProps,O=c.context,G=t.contextType,N=Yn,typeof G=="object"&&G!==null&&(N=la(G)),y=t.getDerivedStateFromProps,(G=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==X||O!==N)&&Kd(a,c,n,N),Ot=!1,O=a.memoizedState,c.state=O,Ys(a,n,c,i),Hs();var I=a.memoizedState;d!==X||O!==I||Ot||e!==null&&e.dependencies!==null&&Bl(e.dependencies)?(typeof y=="function"&&(dr(a,t,y,n),I=a.memoizedState),(Q=Ot||Zd(a,t,Q,n,O,I,N)||e!==null&&e.dependencies!==null&&Bl(e.dependencies))?(G||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,I,N),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,I,N)),typeof c.componentDidUpdate=="function"&&(a.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&O===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&O===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=I),c.props=n,c.state=I,c.context=N,n=Q):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&O===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&O===e.memoizedState||(a.flags|=1024),n=!1)}return c=n,li(e,a),n=(a.flags&128)!==0,c||n?(c=a.stateNode,t=n&&typeof t.getDerivedStateFromError!="function"?null:c.render(),a.flags|=1,e!==null&&n?(a.child=bn(a,e.child,null,i),a.child=bn(a,null,t,i)):ia(e,a,t,i),a.memoizedState=c.state,e=a.child):e=St(e,a,i),e}function mm(e,a,t,n){return fn(),a.flags|=256,ia(e,a,t,n),a.child}var gr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hr(e){return{baseLanes:e,cachePool:ad()}}function vr(e,a,t){return e=e!==null?e.childLanes&~t:0,a&&(e|=qa),e}function fm(e,a,t){var n=a.pendingProps,i=!1,c=(a.flags&128)!==0,d;if((d=c)||(d=e!==null&&e.memoizedState===null?!1:(Xe.current&2)!==0),d&&(i=!0,a.flags&=-129),d=(a.flags&32)!==0,a.flags&=-33,e===null){if(_e){if(i?Ht(a):Yt(),(e=Be)?(e=Nf(e,$a),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Rt!==null?{id:lt,overflow:it}:null,retryLane:536870912,hydrationErrors:null},t=$o(e),t.return=a,a.child=t,sa=a,Be=null)):e=null,e===null)throw zt(a);return eu(e)?a.lanes=32:a.lanes=536870912,null}var y=n.children;return n=n.fallback,i?(Yt(),i=a.mode,y=ii({mode:"hidden",children:y},i),n=mn(n,i,t,null),y.return=a,n.return=a,y.sibling=n,a.child=y,n=a.child,n.memoizedState=hr(t),n.childLanes=vr(e,d,t),a.memoizedState=gr,Xs(null,n)):(Ht(a),br(a,y))}var N=e.memoizedState;if(N!==null&&(y=N.dehydrated,y!==null)){if(c)a.flags&256?(Ht(a),a.flags&=-257,a=xr(e,a,t)):a.memoizedState!==null?(Yt(),a.child=e.child,a.flags|=128,a=null):(Yt(),y=n.fallback,i=a.mode,n=ii({mode:"visible",children:n.children},i),y=mn(y,i,t,null),y.flags|=2,n.return=a,y.return=a,n.sibling=y,a.child=n,bn(a,e.child,null,t),n=a.child,n.memoizedState=hr(t),n.childLanes=vr(e,d,t),a.memoizedState=gr,a=Xs(null,n));else if(Ht(a),eu(y)){if(d=y.nextSibling&&y.nextSibling.dataset,d)var G=d.dgst;d=G,n=Error(u(419)),n.stack="",n.digest=d,Gs({value:n,source:null,stack:null}),a=xr(e,a,t)}else if(Ke||$n(e,a,t,!1),d=(t&e.childLanes)!==0,Ke||d){if(d=Le,d!==null&&(n=At(d,t),n!==0&&n!==N.retryLane))throw N.retryLane=n,dn(e,n),ja(d,e,n),pr;Wr(y)||yi(),a=xr(e,a,t)}else Wr(y)?(a.flags|=192,a.child=e.child,a=null):(e=N.treeContext,Be=Va(y.nextSibling),sa=a,_e=!0,Gt=null,$a=!1,e!==null&&Jo(a,e),a=br(a,n.children),a.flags|=4096);return a}return i?(Yt(),y=n.fallback,i=a.mode,N=e.child,G=N.sibling,n=yt(N,{mode:"hidden",children:n.children}),n.subtreeFlags=N.subtreeFlags&65011712,G!==null?y=yt(G,y):(y=mn(y,i,t,null),y.flags|=2),y.return=a,n.return=a,n.sibling=y,a.child=n,Xs(null,n),n=a.child,y=e.child.memoizedState,y===null?y=hr(t):(i=y.cachePool,i!==null?(N=Je._currentValue,i=i.parent!==N?{parent:N,pool:N}:i):i=ad(),y={baseLanes:y.baseLanes|t,cachePool:i}),n.memoizedState=y,n.childLanes=vr(e,d,t),a.memoizedState=gr,Xs(e.child,n)):(Ht(a),t=e.child,e=t.sibling,t=yt(t,{mode:"visible",children:n.children}),t.return=a,t.sibling=null,e!==null&&(d=a.deletions,d===null?(a.deletions=[e],a.flags|=16):d.push(e)),a.child=t,a.memoizedState=null,t)}function br(e,a){return a=ii({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function ii(e,a){return e=Ma(22,e,null,a),e.lanes=0,e}function xr(e,a,t){return bn(a,e.child,null,t),e=br(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function pm(e,a,t){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),Gc(e.return,a,t)}function Sr(e,a,t,n,i,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i,treeForkCount:c}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=t,d.tailMode=i,d.treeForkCount=c)}function ym(e,a,t){var n=a.pendingProps,i=n.revealOrder,c=n.tail;n=n.children;var d=Xe.current,y=(d&2)!==0;if(y?(d=d&1|2,a.flags|=128):d&=1,J(Xe,d),ia(e,a,n,t),n=_e?Rs:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pm(e,t,a);else if(e.tag===19)pm(e,t,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(t=a.child,i=null;t!==null;)e=t.alternate,e!==null&&Vl(e)===null&&(i=t),t=t.sibling;t=i,t===null?(i=a.child,a.child=null):(i=t.sibling,t.sibling=null),Sr(a,!1,i,t,c,n);break;case"backwards":case"unstable_legacy-backwards":for(t=null,i=a.child,a.child=null;i!==null;){if(e=i.alternate,e!==null&&Vl(e)===null){a.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}Sr(a,!0,t,null,c,n);break;case"together":Sr(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function St(e,a,t){if(e!==null&&(a.dependencies=e.dependencies),Pt|=a.lanes,(t&a.childLanes)===0)if(e!==null){if($n(e,a,t,!1),(t&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(u(153));if(a.child!==null){for(e=a.child,t=yt(e,e.pendingProps),a.child=t,t.return=a;e.sibling!==null;)e=e.sibling,t=t.sibling=yt(e,e.pendingProps),t.return=a;t.sibling=null}return a.child}function Nr(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Bl(e)))}function Cg(e,a,t){switch(a.tag){case 3:Te(a,a.stateNode.containerInfo),Ut(a,Je,e.memoizedState.cache),fn();break;case 27:case 5:za(a);break;case 4:Te(a,a.stateNode.containerInfo);break;case 10:Ut(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Xc(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(Ht(a),a.flags|=128,null):(t&a.child.childLanes)!==0?fm(e,a,t):(Ht(a),e=St(e,a,t),e!==null?e.sibling:null);Ht(a);break;case 19:var i=(e.flags&128)!==0;if(n=(t&a.childLanes)!==0,n||($n(e,a,t,!1),n=(t&a.childLanes)!==0),i){if(n)return ym(e,a,t);a.flags|=128}if(i=a.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(Xe,Xe.current),n)break;return null;case 22:return a.lanes=0,cm(e,a,t,a.pendingProps);case 24:Ut(a,Je,e.memoizedState.cache)}return St(e,a,t)}function gm(e,a,t){if(e!==null)if(e.memoizedProps!==a.pendingProps)Ke=!0;else{if(!Nr(e,t)&&(a.flags&128)===0)return Ke=!1,Cg(e,a,t);Ke=(e.flags&131072)!==0}else Ke=!1,_e&&(a.flags&1048576)!==0&&Vo(a,Rs,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=hn(a.elementType),a.type=e,typeof e=="function")Dc(e)?(n=Sn(e,n),a.tag=1,a=dm(null,a,e,n,t)):(a.tag=0,a=yr(null,a,e,n,t));else{if(e!=null){var i=e.$$typeof;if(i===B){a.tag=11,a=sm(null,a,e,n,t);break e}else if(i===K){a.tag=14,a=lm(null,a,e,n,t);break e}}throw a=de(e)||e,Error(u(306,a,""))}}return a;case 0:return yr(e,a,a.type,a.pendingProps,t);case 1:return n=a.type,i=Sn(n,a.pendingProps),dm(e,a,n,i,t);case 3:e:{if(Te(a,a.stateNode.containerInfo),e===null)throw Error(u(387));n=a.pendingProps;var c=a.memoizedState;i=c.element,Yc(e,a),Ys(a,n,null,t);var d=a.memoizedState;if(n=d.cache,Ut(a,Je,n),n!==c.cache&&zc(a,[Je],t,!0),Hs(),n=d.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:d.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=mm(e,a,n,t);break e}else if(n!==i){i=Ia(Error(u(424)),a),Gs(i),a=mm(e,a,n,t);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Be=Va(e.firstChild),sa=a,_e=!0,Gt=null,$a=!0,t=cd(a,null,n,t),a.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(fn(),n===i){a=St(e,a,t);break e}ia(e,a,n,t)}a=a.child}return a;case 26:return li(e,a),e===null?(t=wf(a.type,null,a.pendingProps,null))?a.memoizedState=t:_e||(t=a.type,e=a.pendingProps,n=Ni(me.current).createElement(t),n[na]=a,n[va]=e,ca(n,t,e),ea(n),a.stateNode=n):a.memoizedState=wf(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return za(a),e===null&&_e&&(n=a.stateNode=Ef(a.type,a.pendingProps,me.current),sa=a,$a=!0,i=Be,Zt(a.type)?(au=i,Be=Va(n.firstChild)):Be=i),ia(e,a,a.pendingProps.children,t),li(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&_e&&((i=n=Be)&&(n=Wg(n,a.type,a.pendingProps,$a),n!==null?(a.stateNode=n,sa=a,Be=Va(n.firstChild),$a=!1,i=!0):i=!1),i||zt(a)),za(a),i=a.type,c=a.pendingProps,d=e!==null?e.memoizedProps:null,n=c.children,Zr(i,c)?n=null:d!==null&&Zr(i,d)&&(a.flags|=32),a.memoizedState!==null&&(i=Jc(e,a,pg,null,null,t),rl._currentValue=i),li(e,a),ia(e,a,n,t),a.child;case 6:return e===null&&_e&&((e=t=Be)&&(t=eh(t,a.pendingProps,$a),t!==null?(a.stateNode=t,sa=a,Be=null,e=!0):e=!1),e||zt(a)),null;case 13:return fm(e,a,t);case 4:return Te(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=bn(a,null,n,t):ia(e,a,n,t),a.child;case 11:return sm(e,a,a.type,a.pendingProps,t);case 7:return ia(e,a,a.pendingProps,t),a.child;case 8:return ia(e,a,a.pendingProps.children,t),a.child;case 12:return ia(e,a,a.pendingProps.children,t),a.child;case 10:return n=a.pendingProps,Ut(a,a.type,n.value),ia(e,a,n.children,t),a.child;case 9:return i=a.type._context,n=a.pendingProps.children,yn(a),i=la(i),n=n(i),a.flags|=1,ia(e,a,n,t),a.child;case 14:return lm(e,a,a.type,a.pendingProps,t);case 15:return im(e,a,a.type,a.pendingProps,t);case 19:return ym(e,a,t);case 31:return Ng(e,a,t);case 22:return cm(e,a,t,a.pendingProps);case 24:return yn(a),n=la(Je),e===null?(i=Lc(),i===null&&(i=Le,c=Uc(),i.pooledCache=c,c.refCount++,c!==null&&(i.pooledCacheLanes|=t),i=c),a.memoizedState={parent:n,cache:i},Hc(a),Ut(a,Je,i)):((e.lanes&t)!==0&&(Yc(e,a),Ys(a,null,null,t),Hs()),i=e.memoizedState,c=a.memoizedState,i.parent!==n?(i={parent:n,cache:n},a.memoizedState=i,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=i),Ut(a,Je,n)):(n=c.cache,Ut(a,Je,n),n!==i.cache&&zc(a,[Je],t,!0))),ia(e,a,a.pendingProps.children,t),a.child;case 29:throw a.pendingProps}throw Error(u(156,a.tag))}function Nt(e){e.flags|=4}function Cr(e,a,t,n,i){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Im())e.flags|=8192;else throw vn=Ql,Bc}else e.flags&=-16777217}function hm(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qf(a))if(Im())e.flags|=8192;else throw vn=Ql,Bc}function ci(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Cl():536870912,e.lanes|=a,ss|=a)}function Vs(e,a){if(!_e)switch(e.tailMode){case"hidden":a=e.tail;for(var t=null;a!==null;)a.alternate!==null&&(t=a),a=a.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function He(e){var a=e.alternate!==null&&e.alternate.child===e.child,t=0,n=0;if(a)for(var i=e.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=t,a}function jg(e,a,t){var n=a.pendingProps;switch(Ac(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(a),null;case 1:return He(a),null;case 3:return t=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),vt(Je),Se(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(e===null||e.child===null)&&(Pn(a)?Nt(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qc())),He(a),null;case 26:var i=a.type,c=a.memoizedState;return e===null?(Nt(a),c!==null?(He(a),hm(a,c)):(He(a),Cr(a,i,null,n,t))):c?c!==e.memoizedState?(Nt(a),He(a),hm(a,c)):(He(a),a.flags&=-16777217):(e=e.memoizedProps,e!==n&&Nt(a),He(a),Cr(a,i,e,n,t)),null;case 27:if(Ua(a),t=me.current,i=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Nt(a);else{if(!n){if(a.stateNode===null)throw Error(u(166));return He(a),null}e=ee.current,Pn(a)?Zo(a):(e=Ef(i,n,t),a.stateNode=e,Nt(a))}return He(a),null;case 5:if(Ua(a),i=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Nt(a);else{if(!n){if(a.stateNode===null)throw Error(u(166));return He(a),null}if(c=ee.current,Pn(a))Zo(a);else{var d=Ni(me.current);switch(c){case 1:c=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:c=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":c=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":c=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":c=d.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?d.createElement("select",{is:n.is}):d.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?d.createElement(i,{is:n.is}):d.createElement(i)}}c[na]=a,c[va]=n;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)c.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=c;e:switch(ca(c,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Nt(a)}}return He(a),Cr(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,t),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&Nt(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(u(166));if(e=me.current,Pn(a)){if(e=a.stateNode,t=a.memoizedProps,n=null,i=sa,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[na]=a,e=!!(e.nodeValue===t||n!==null&&n.suppressHydrationWarning===!0||pf(e.nodeValue,t)),e||zt(a,!0)}else e=Ni(e).createTextNode(n),e[na]=a,a.stateNode=e}return He(a),null;case 31:if(t=a.memoizedState,e===null||e.memoizedState!==null){if(n=Pn(a),t!==null){if(e===null){if(!n)throw Error(u(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[na]=a}else fn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;He(a),e=!1}else t=qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=t),e=!0;if(!e)return a.flags&256?(Aa(a),a):(Aa(a),null);if((a.flags&128)!==0)throw Error(u(558))}return He(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Pn(a),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[na]=a}else fn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;He(a),i=!1}else i=qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return a.flags&256?(Aa(a),a):(Aa(a),null)}return Aa(a),(a.flags&128)!==0?(a.lanes=t,a):(t=n!==null,e=e!==null&&e.memoizedState!==null,t&&(n=a.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048)),t!==e&&t&&(a.child.flags|=8192),ci(a,a.updateQueue),He(a),null);case 4:return Se(),e===null&&Pr(a.stateNode.containerInfo),He(a),null;case 10:return vt(a.type),He(a),null;case 19:if(Y(Xe),n=a.memoizedState,n===null)return He(a),null;if(i=(a.flags&128)!==0,c=n.rendering,c===null)if(i)Vs(n,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(c=Vl(e),c!==null){for(a.flags|=128,Vs(n,!1),e=c.updateQueue,a.updateQueue=e,ci(a,e),a.subtreeFlags=0,e=t,t=a.child;t!==null;)Po(t,e),t=t.sibling;return J(Xe,Xe.current&1|2),_e&&gt(a,n.treeForkCount),a.child}e=e.sibling}n.tail!==null&&ta()>mi&&(a.flags|=128,i=!0,Vs(n,!1),a.lanes=4194304)}else{if(!i)if(e=Vl(c),e!==null){if(a.flags|=128,i=!0,e=e.updateQueue,a.updateQueue=e,ci(a,e),Vs(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!_e)return He(a),null}else 2*ta()-n.renderingStartTime>mi&&t!==536870912&&(a.flags|=128,i=!0,Vs(n,!1),a.lanes=4194304);n.isBackwards?(c.sibling=a.child,a.child=c):(e=n.last,e!==null?e.sibling=c:a.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=ta(),e.sibling=null,t=Xe.current,J(Xe,i?t&1|2:t&1),_e&&gt(a,n.treeForkCount),e):(He(a),null);case 22:case 23:return Aa(a),$c(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(t&536870912)!==0&&(a.flags&128)===0&&(He(a),a.subtreeFlags&6&&(a.flags|=8192)):He(a),t=a.updateQueue,t!==null&&ci(a,t.retryQueue),t=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==t&&(a.flags|=2048),e!==null&&Y(gn),null;case 24:return t=null,e!==null&&(t=e.memoizedState.cache),a.memoizedState.cache!==t&&(a.flags|=2048),vt(Je),He(a),null;case 25:return null;case 30:return null}throw Error(u(156,a.tag))}function Eg(e,a){switch(Ac(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return vt(Je),Se(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Ua(a),null;case 31:if(a.memoizedState!==null){if(Aa(a),a.alternate===null)throw Error(u(340));fn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Aa(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(u(340));fn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Y(Xe),null;case 4:return Se(),null;case 10:return vt(a.type),null;case 22:case 23:return Aa(a),$c(),e!==null&&Y(gn),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return vt(Je),null;case 25:return null;default:return null}}function vm(e,a){switch(Ac(a),a.tag){case 3:vt(Je),Se();break;case 26:case 27:case 5:Ua(a);break;case 4:Se();break;case 31:a.memoizedState!==null&&Aa(a);break;case 13:Aa(a);break;case 19:Y(Xe);break;case 10:vt(a.type);break;case 22:case 23:Aa(a),$c(),e!==null&&Y(gn);break;case 24:vt(Je)}}function Js(e,a){try{var t=a.updateQueue,n=t!==null?t.lastEffect:null;if(n!==null){var i=n.next;t=i;do{if((t.tag&e)===e){n=void 0;var c=t.create,d=t.inst;n=c(),d.destroy=n}t=t.next}while(t!==i)}}catch(y){qe(a,a.return,y)}}function It(e,a,t){try{var n=a.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var c=i.next;n=c;do{if((n.tag&e)===e){var d=n.inst,y=d.destroy;if(y!==void 0){d.destroy=void 0,i=a;var N=t,G=y;try{G()}catch(Q){qe(i,N,Q)}}}n=n.next}while(n!==c)}}catch(Q){qe(a,a.return,Q)}}function bm(e){var a=e.updateQueue;if(a!==null){var t=e.stateNode;try{ud(a,t)}catch(n){qe(e,e.return,n)}}}function xm(e,a,t){t.props=Sn(e.type,e.memoizedProps),t.state=e.memoizedState;try{t.componentWillUnmount()}catch(n){qe(e,a,n)}}function Zs(e,a){try{var t=e.ref;if(t!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof t=="function"?e.refCleanup=t(n):t.current=n}}catch(i){qe(e,a,i)}}function ct(e,a){var t=e.ref,n=e.refCleanup;if(t!==null)if(typeof n=="function")try{n()}catch(i){qe(e,a,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(i){qe(e,a,i)}else t.current=null}function Sm(e){var a=e.type,t=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":t.autoFocus&&n.focus();break e;case"img":t.src?n.src=t.src:t.srcSet&&(n.srcset=t.srcSet)}}catch(i){qe(e,e.return,i)}}function jr(e,a,t){try{var n=e.stateNode;Xg(n,e.type,t,a),n[va]=a}catch(i){qe(e,e.return,i)}}function Nm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zt(e.type)||e.tag===4}function Er(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zt(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _r(e,a,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(e,a):(a=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.appendChild(e),t=t._reactRootContainer,t!=null||a.onclick!==null||(a.onclick=ft));else if(n!==4&&(n===27&&Zt(e.type)&&(t=e.stateNode,a=null),e=e.child,e!==null))for(_r(e,a,t),e=e.sibling;e!==null;)_r(e,a,t),e=e.sibling}function ri(e,a,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?t.insertBefore(e,a):t.appendChild(e);else if(n!==4&&(n===27&&Zt(e.type)&&(t=e.stateNode),e=e.child,e!==null))for(ri(e,a,t),e=e.sibling;e!==null;)ri(e,a,t),e=e.sibling}function Cm(e){var a=e.stateNode,t=e.memoizedProps;try{for(var n=e.type,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);ca(a,n,t),a[na]=e,a[va]=t}catch(c){qe(e,e.return,c)}}var Ct=!1,Fe=!1,Dr=!1,jm=typeof WeakSet=="function"?WeakSet:Set,aa=null;function _g(e,a){if(e=e.containerInfo,Vr=Mi,e=zo(e),xc(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{t.nodeType,c.nodeType}catch{t=null;break e}var d=0,y=-1,N=-1,G=0,Q=0,X=e,O=null;a:for(;;){for(var I;X!==t||i!==0&&X.nodeType!==3||(y=d+i),X!==c||n!==0&&X.nodeType!==3||(N=d+n),X.nodeType===3&&(d+=X.nodeValue.length),(I=X.firstChild)!==null;)O=X,X=I;for(;;){if(X===e)break a;if(O===t&&++G===i&&(y=d),O===c&&++Q===n&&(N=d),(I=X.nextSibling)!==null)break;X=O,O=X.parentNode}X=I}t=y===-1||N===-1?null:{start:y,end:N}}else t=null}t=t||{start:0,end:0}}else t=null;for(Jr={focusedElem:e,selectionRange:t},Mi=!1,aa=a;aa!==null;)if(a=aa,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,aa=e;else for(;aa!==null;){switch(a=aa,c=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(t=0;t<e.length;t++)i=e[t],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,t=a,i=c.memoizedProps,c=c.memoizedState,n=t.stateNode;try{var ne=Sn(t.type,i);e=n.getSnapshotBeforeUpdate(ne,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(ue){qe(t,t.return,ue)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,t=e.nodeType,t===9)Fr(e);else if(t===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Fr(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=a.sibling,e!==null){e.return=a.return,aa=e;break}aa=a.return}}function Em(e,a,t){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Et(e,t),n&4&&Js(5,t);break;case 1:if(Et(e,t),n&4)if(e=t.stateNode,a===null)try{e.componentDidMount()}catch(d){qe(t,t.return,d)}else{var i=Sn(t.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(i,a,e.__reactInternalSnapshotBeforeUpdate)}catch(d){qe(t,t.return,d)}}n&64&&bm(t),n&512&&Zs(t,t.return);break;case 3:if(Et(e,t),n&64&&(e=t.updateQueue,e!==null)){if(a=null,t.child!==null)switch(t.child.tag){case 27:case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}try{ud(e,a)}catch(d){qe(t,t.return,d)}}break;case 27:a===null&&n&4&&Cm(t);case 26:case 5:Et(e,t),a===null&&n&4&&Sm(t),n&512&&Zs(t,t.return);break;case 12:Et(e,t);break;case 31:Et(e,t),n&4&&wm(e,t);break;case 13:Et(e,t),n&4&&Mm(e,t),n&64&&(e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(t=Gg.bind(null,t),ah(e,t))));break;case 22:if(n=t.memoizedState!==null||Ct,!n){a=a!==null&&a.memoizedState!==null||Fe,i=Ct;var c=Fe;Ct=n,(Fe=a)&&!c?_t(e,t,(t.subtreeFlags&8772)!==0):Et(e,t),Ct=i,Fe=c}break;case 30:break;default:Et(e,t)}}function _m(e){var a=e.alternate;a!==null&&(e.alternate=null,_m(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&nc(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,xa=!1;function jt(e,a,t){for(t=t.child;t!==null;)Dm(e,a,t),t=t.sibling}function Dm(e,a,t){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Fa,t)}catch{}switch(t.tag){case 26:Fe||ct(t,a),jt(e,a,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:Fe||ct(t,a);var n=Ye,i=xa;Zt(t.type)&&(Ye=t.stateNode,xa=!1),jt(e,a,t),ll(t.stateNode),Ye=n,xa=i;break;case 5:Fe||ct(t,a);case 6:if(n=Ye,i=xa,Ye=null,jt(e,a,t),Ye=n,xa=i,Ye!==null)if(xa)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(t.stateNode)}catch(c){qe(t,a,c)}else try{Ye.removeChild(t.stateNode)}catch(c){qe(t,a,c)}break;case 18:Ye!==null&&(xa?(e=Ye,xf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.stateNode),ms(e)):xf(Ye,t.stateNode));break;case 4:n=Ye,i=xa,Ye=t.stateNode.containerInfo,xa=!0,jt(e,a,t),Ye=n,xa=i;break;case 0:case 11:case 14:case 15:It(2,t,a),Fe||It(4,t,a),jt(e,a,t);break;case 1:Fe||(ct(t,a),n=t.stateNode,typeof n.componentWillUnmount=="function"&&xm(t,a,n)),jt(e,a,t);break;case 21:jt(e,a,t);break;case 22:Fe=(n=Fe)||t.memoizedState!==null,jt(e,a,t),Fe=n;break;default:jt(e,a,t)}}function wm(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ms(e)}catch(t){qe(a,a.return,t)}}}function Mm(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ms(e)}catch(t){qe(a,a.return,t)}}function Dg(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new jm),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new jm),a;default:throw Error(u(435,e.tag))}}function ui(e,a){var t=Dg(e);a.forEach(function(n){if(!t.has(n)){t.add(n);var i=zg.bind(null,e,n);n.then(i,i)}})}function Sa(e,a){var t=a.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n],c=e,d=a,y=d;e:for(;y!==null;){switch(y.tag){case 27:if(Zt(y.type)){Ye=y.stateNode,xa=!1;break e}break;case 5:Ye=y.stateNode,xa=!1;break e;case 3:case 4:Ye=y.stateNode.containerInfo,xa=!0;break e}y=y.return}if(Ye===null)throw Error(u(160));Dm(c,d,i),Ye=null,xa=!1,c=i.alternate,c!==null&&(c.return=null),i.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Tm(a,e),a=a.sibling}var tt=null;function Tm(e,a){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Sa(a,e),Na(e),n&4&&(It(3,e,e.return),Js(3,e),It(5,e,e.return));break;case 1:Sa(a,e),Na(e),n&512&&(Fe||t===null||ct(t,t.return)),n&64&&Ct&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(t=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=t===null?n:t.concat(n))));break;case 26:var i=tt;if(Sa(a,e),Na(e),n&512&&(Fe||t===null||ct(t,t.return)),n&4){var c=t!==null?t.memoizedState:null;if(n=e.memoizedState,t===null)if(n===null)if(e.stateNode===null){e:{n=e.type,t=e.memoizedProps,i=i.ownerDocument||i;a:switch(n){case"title":c=i.getElementsByTagName("title")[0],(!c||c[Cs]||c[na]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=i.createElement(n),i.head.insertBefore(c,i.querySelector("head > title"))),ca(c,n,t),c[na]=e,ea(c),n=c;break e;case"link":var d=Af("link","href",i).get(n+(t.href||""));if(d){for(var y=0;y<d.length;y++)if(c=d[y],c.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&c.getAttribute("rel")===(t.rel==null?null:t.rel)&&c.getAttribute("title")===(t.title==null?null:t.title)&&c.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){d.splice(y,1);break a}}c=i.createElement(n),ca(c,n,t),i.head.appendChild(c);break;case"meta":if(d=Af("meta","content",i).get(n+(t.content||""))){for(y=0;y<d.length;y++)if(c=d[y],c.getAttribute("content")===(t.content==null?null:""+t.content)&&c.getAttribute("name")===(t.name==null?null:t.name)&&c.getAttribute("property")===(t.property==null?null:t.property)&&c.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&c.getAttribute("charset")===(t.charSet==null?null:t.charSet)){d.splice(y,1);break a}}c=i.createElement(n),ca(c,n,t),i.head.appendChild(c);break;default:throw Error(u(468,n))}c[na]=e,ea(c),n=c}e.stateNode=n}else kf(i,e.type,e.stateNode);else e.stateNode=Tf(i,n,e.memoizedProps);else c!==n?(c===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):c.count--,n===null?kf(i,e.type,e.stateNode):Tf(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&jr(e,e.memoizedProps,t.memoizedProps)}break;case 27:Sa(a,e),Na(e),n&512&&(Fe||t===null||ct(t,t.return)),t!==null&&n&4&&jr(e,e.memoizedProps,t.memoizedProps);break;case 5:if(Sa(a,e),Na(e),n&512&&(Fe||t===null||ct(t,t.return)),e.flags&32){i=e.stateNode;try{Gn(i,"")}catch(ne){qe(e,e.return,ne)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,jr(e,i,t!==null?t.memoizedProps:i)),n&1024&&(Dr=!0);break;case 6:if(Sa(a,e),Na(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,t=e.stateNode;try{t.nodeValue=n}catch(ne){qe(e,e.return,ne)}}break;case 3:if(Ei=null,i=tt,tt=Ci(a.containerInfo),Sa(a,e),tt=i,Na(e),n&4&&t!==null&&t.memoizedState.isDehydrated)try{ms(a.containerInfo)}catch(ne){qe(e,e.return,ne)}Dr&&(Dr=!1,Am(e));break;case 4:n=tt,tt=Ci(e.stateNode.containerInfo),Sa(a,e),Na(e),tt=n;break;case 12:Sa(a,e),Na(e);break;case 31:Sa(a,e),Na(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ui(e,n)));break;case 13:Sa(a,e),Na(e),e.child.flags&8192&&e.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(di=ta()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ui(e,n)));break;case 22:i=e.memoizedState!==null;var N=t!==null&&t.memoizedState!==null,G=Ct,Q=Fe;if(Ct=G||i,Fe=Q||N,Sa(a,e),Fe=Q,Ct=G,Na(e),n&8192)e:for(a=e.stateNode,a._visibility=i?a._visibility&-2:a._visibility|1,i&&(t===null||N||Ct||Fe||Nn(e)),t=null,a=e;;){if(a.tag===5||a.tag===26){if(t===null){N=t=a;try{if(c=N.stateNode,i)d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{y=N.stateNode;var X=N.memoizedProps.style,O=X!=null&&X.hasOwnProperty("display")?X.display:null;y.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(ne){qe(N,N.return,ne)}}}else if(a.tag===6){if(t===null){N=a;try{N.stateNode.nodeValue=i?"":N.memoizedProps}catch(ne){qe(N,N.return,ne)}}}else if(a.tag===18){if(t===null){N=a;try{var I=N.stateNode;i?Sf(I,!0):Sf(N.stateNode,!1)}catch(ne){qe(N,N.return,ne)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;t===a&&(t=null),a=a.return}t===a&&(t=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(t=n.retryQueue,t!==null&&(n.retryQueue=null,ui(e,t))));break;case 19:Sa(a,e),Na(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ui(e,n)));break;case 30:break;case 21:break;default:Sa(a,e),Na(e)}}function Na(e){var a=e.flags;if(a&2){try{for(var t,n=e.return;n!==null;){if(Nm(n)){t=n;break}n=n.return}if(t==null)throw Error(u(160));switch(t.tag){case 27:var i=t.stateNode,c=Er(e);ri(e,c,i);break;case 5:var d=t.stateNode;t.flags&32&&(Gn(d,""),t.flags&=-33);var y=Er(e);ri(e,y,d);break;case 3:case 4:var N=t.stateNode.containerInfo,G=Er(e);_r(e,G,N);break;default:throw Error(u(161))}}catch(Q){qe(e,e.return,Q)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Am(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Am(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function Et(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Em(e,a.alternate,a),a=a.sibling}function Nn(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:It(4,a,a.return),Nn(a);break;case 1:ct(a,a.return);var t=a.stateNode;typeof t.componentWillUnmount=="function"&&xm(a,a.return,t),Nn(a);break;case 27:ll(a.stateNode);case 26:case 5:ct(a,a.return),Nn(a);break;case 22:a.memoizedState===null&&Nn(a);break;case 30:Nn(a);break;default:Nn(a)}e=e.sibling}}function _t(e,a,t){for(t=t&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,i=e,c=a,d=c.flags;switch(c.tag){case 0:case 11:case 15:_t(i,c,t),Js(4,c);break;case 1:if(_t(i,c,t),n=c,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(G){qe(n,n.return,G)}if(n=c,i=n.updateQueue,i!==null){var y=n.stateNode;try{var N=i.shared.hiddenCallbacks;if(N!==null)for(i.shared.hiddenCallbacks=null,i=0;i<N.length;i++)rd(N[i],y)}catch(G){qe(n,n.return,G)}}t&&d&64&&bm(c),Zs(c,c.return);break;case 27:Cm(c);case 26:case 5:_t(i,c,t),t&&n===null&&d&4&&Sm(c),Zs(c,c.return);break;case 12:_t(i,c,t);break;case 31:_t(i,c,t),t&&d&4&&wm(i,c);break;case 13:_t(i,c,t),t&&d&4&&Mm(i,c);break;case 22:c.memoizedState===null&&_t(i,c,t),Zs(c,c.return);break;case 30:break;default:_t(i,c,t)}a=a.sibling}}function wr(e,a){var t=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==t&&(e!=null&&e.refCount++,t!=null&&zs(t))}function Mr(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&zs(e))}function nt(e,a,t,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)km(e,a,t,n),a=a.sibling}function km(e,a,t,n){var i=a.flags;switch(a.tag){case 0:case 11:case 15:nt(e,a,t,n),i&2048&&Js(9,a);break;case 1:nt(e,a,t,n);break;case 3:nt(e,a,t,n),i&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&zs(e)));break;case 12:if(i&2048){nt(e,a,t,n),e=a.stateNode;try{var c=a.memoizedProps,d=c.id,y=c.onPostCommit;typeof y=="function"&&y(d,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){qe(a,a.return,N)}}else nt(e,a,t,n);break;case 31:nt(e,a,t,n);break;case 13:nt(e,a,t,n);break;case 23:break;case 22:c=a.stateNode,d=a.alternate,a.memoizedState!==null?c._visibility&2?nt(e,a,t,n):Ks(e,a):c._visibility&2?nt(e,a,t,n):(c._visibility|=2,as(e,a,t,n,(a.subtreeFlags&10256)!==0||!1)),i&2048&&wr(d,a);break;case 24:nt(e,a,t,n),i&2048&&Mr(a.alternate,a);break;default:nt(e,a,t,n)}}function as(e,a,t,n,i){for(i=i&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var c=e,d=a,y=t,N=n,G=d.flags;switch(d.tag){case 0:case 11:case 15:as(c,d,y,N,i),Js(8,d);break;case 23:break;case 22:var Q=d.stateNode;d.memoizedState!==null?Q._visibility&2?as(c,d,y,N,i):Ks(c,d):(Q._visibility|=2,as(c,d,y,N,i)),i&&G&2048&&wr(d.alternate,d);break;case 24:as(c,d,y,N,i),i&&G&2048&&Mr(d.alternate,d);break;default:as(c,d,y,N,i)}a=a.sibling}}function Ks(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var t=e,n=a,i=n.flags;switch(n.tag){case 22:Ks(t,n),i&2048&&wr(n.alternate,n);break;case 24:Ks(t,n),i&2048&&Mr(n.alternate,n);break;default:Ks(t,n)}a=a.sibling}}var Fs=8192;function ts(e,a,t){if(e.subtreeFlags&Fs)for(e=e.child;e!==null;)qm(e,a,t),e=e.sibling}function qm(e,a,t){switch(e.tag){case 26:ts(e,a,t),e.flags&Fs&&e.memoizedState!==null&&fh(t,tt,e.memoizedState,e.memoizedProps);break;case 5:ts(e,a,t);break;case 3:case 4:var n=tt;tt=Ci(e.stateNode.containerInfo),ts(e,a,t),tt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Fs,Fs=16777216,ts(e,a,t),Fs=n):ts(e,a,t));break;default:ts(e,a,t)}}function Rm(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Ws(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];aa=n,zm(n,e)}Rm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gm(e),e=e.sibling}function Gm(e){switch(e.tag){case 0:case 11:case 15:Ws(e),e.flags&2048&&It(9,e,e.return);break;case 3:Ws(e);break;case 12:Ws(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,oi(e)):Ws(e);break;default:Ws(e)}}function oi(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];aa=n,zm(n,e)}Rm(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:It(8,a,a.return),oi(a);break;case 22:t=a.stateNode,t._visibility&2&&(t._visibility&=-3,oi(a));break;default:oi(a)}e=e.sibling}}function zm(e,a){for(;aa!==null;){var t=aa;switch(t.tag){case 0:case 11:case 15:It(8,t,a);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var n=t.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:zs(t.memoizedState.cache)}if(n=t.child,n!==null)n.return=t,aa=n;else e:for(t=e;aa!==null;){n=aa;var i=n.sibling,c=n.return;if(_m(n),n===t){aa=null;break e}if(i!==null){i.return=c,aa=i;break e}aa=c}}}var wg={getCacheForType:function(e){var a=la(Je),t=a.data.get(e);return t===void 0&&(t=e(),a.data.set(e,t)),t},cacheSignal:function(){return la(Je).controller.signal}},Mg=typeof WeakMap=="function"?WeakMap:Map,Me=0,Le=null,Ne=null,je=0,ke=0,ka=null,Qt=!1,ns=!1,Tr=!1,Dt=0,$e=0,Pt=0,Cn=0,Ar=0,qa=0,ss=0,el=null,Ca=null,kr=!1,di=0,Um=0,mi=1/0,fi=null,$t=null,We=0,Xt=null,ls=null,wt=0,qr=0,Rr=null,Om=null,al=0,Gr=null;function Ra(){return(Me&2)!==0&&je!==0?je&-je:L.T!==null?Hr():Wu()}function Lm(){if(qa===0)if((je&536870912)===0||_e){var e=dt;dt<<=1,(dt&3932160)===0&&(dt=262144),qa=e}else qa=536870912;return e=Ta.current,e!==null&&(e.flags|=32),qa}function ja(e,a,t){(e===Le&&(ke===2||ke===9)||e.cancelPendingCommit!==null)&&(is(e,0),Vt(e,je,qa,!1)),ln(e,t),((Me&2)===0||e!==Le)&&(e===Le&&((Me&2)===0&&(Cn|=t),$e===4&&Vt(e,je,qa,!1)),rt(e))}function Bm(e,a,t){if((Me&6)!==0)throw Error(u(327));var n=!t&&(a&127)===0&&(a&e.expiredLanes)===0||sn(e,a),i=n?kg(e,a):Ur(e,a,!0),c=n;do{if(i===0){ns&&!n&&Vt(e,a,0,!1);break}else{if(t=e.current.alternate,c&&!Tg(t)){i=Ur(e,a,!1),c=!1;continue}if(i===2){if(c=a,e.errorRecoveryDisabledLanes&c)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){a=d;e:{var y=e;i=el;var N=y.current.memoizedState.isDehydrated;if(N&&(is(y,d).flags|=256),d=Ur(y,d,!1),d!==2){if(Tr&&!N){y.errorRecoveryDisabledLanes|=c,Cn|=c,i=4;break e}c=Ca,Ca=i,c!==null&&(Ca===null?Ca=c:Ca.push.apply(Ca,c))}i=d}if(c=!1,i!==2)continue}}if(i===1){is(e,0),Vt(e,a,0,!0);break}e:{switch(n=e,c=i,c){case 0:case 1:throw Error(u(345));case 4:if((a&4194048)!==a)break;case 6:Vt(n,a,qa,!Qt);break e;case 2:Ca=null;break;case 3:case 5:break;default:throw Error(u(329))}if((a&62914560)===a&&(i=di+300-ta(),10<i)){if(Vt(n,a,qa,!Qt),wn(n,0,!0)!==0)break e;wt=a,n.timeoutHandle=vf(Hm.bind(null,n,t,Ca,fi,kr,a,qa,Cn,ss,Qt,c,"Throttled",-0,0),i);break e}Hm(n,t,Ca,fi,kr,a,qa,Cn,ss,Qt,c,null,-0,0)}}break}while(!0);rt(e)}function Hm(e,a,t,n,i,c,d,y,N,G,Q,X,O,I){if(e.timeoutHandle=-1,X=a.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ft},qm(a,c,X);var ne=(c&62914560)===c?di-ta():(c&4194048)===c?Um-ta():0;if(ne=ph(X,ne),ne!==null){wt=c,e.cancelPendingCommit=ne(Jm.bind(null,e,a,c,t,n,i,d,y,N,Q,X,null,O,I)),Vt(e,c,d,!G);return}}Jm(e,a,c,t,n,i,d,y,N)}function Tg(e){for(var a=e;;){var t=a.tag;if((t===0||t===11||t===15)&&a.flags&16384&&(t=a.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var n=0;n<t.length;n++){var i=t[n],c=i.getSnapshot;i=i.value;try{if(!wa(c(),i))return!1}catch{return!1}}if(t=a.child,a.subtreeFlags&16384&&t!==null)t.return=a,a=t;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Vt(e,a,t,n){a&=~Ar,a&=~Cn,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var i=a;0<i;){var c=31-da(i),d=1<<c;n[c]=-1,i&=~d}t!==0&&Qe(e,t,a)}function pi(){return(Me&6)===0?(tl(0),!1):!0}function zr(){if(Ne!==null){if(ke===0)var e=Ne.return;else e=Ne,ht=pn=null,Fc(e),Zn=null,Os=0,e=Ne;for(;e!==null;)vm(e.alternate,e),e=e.return;Ne=null}}function is(e,a){var t=e.timeoutHandle;t!==-1&&(e.timeoutHandle=-1,Zg(t)),t=e.cancelPendingCommit,t!==null&&(e.cancelPendingCommit=null,t()),wt=0,zr(),Le=e,Ne=t=yt(e.current,null),je=a,ke=0,ka=null,Qt=!1,ns=sn(e,a),Tr=!1,ss=qa=Ar=Cn=Pt=$e=0,Ca=el=null,kr=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var i=31-da(n),c=1<<i;a|=e[i],n&=~c}return Dt=a,Gl(),t}function Ym(e,a){he=null,L.H=$s,a===Jn||a===Il?(a=sd(),ke=3):a===Bc?(a=sd(),ke=4):ke=a===pr?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ka=a,Ne===null&&($e=1,ni(e,Ia(a,e.current)))}function Im(){var e=Ta.current;return e===null?!0:(je&4194048)===je?Xa===null:(je&62914560)===je||(je&536870912)!==0?e===Xa:!1}function Qm(){var e=L.H;return L.H=$s,e===null?$s:e}function Pm(){var e=L.A;return L.A=wg,e}function yi(){$e=4,Qt||(je&4194048)!==je&&Ta.current!==null||(ns=!0),(Pt&134217727)===0&&(Cn&134217727)===0||Le===null||Vt(Le,je,qa,!1)}function Ur(e,a,t){var n=Me;Me|=2;var i=Qm(),c=Pm();(Le!==e||je!==a)&&(fi=null,is(e,a)),a=!1;var d=$e;e:do try{if(ke!==0&&Ne!==null){var y=Ne,N=ka;switch(ke){case 8:zr(),d=6;break e;case 3:case 2:case 9:case 6:Ta.current===null&&(a=!0);var G=ke;if(ke=0,ka=null,cs(e,y,N,G),t&&ns){d=0;break e}break;default:G=ke,ke=0,ka=null,cs(e,y,N,G)}}Ag(),d=$e;break}catch(Q){Ym(e,Q)}while(!0);return a&&e.shellSuspendCounter++,ht=pn=null,Me=n,L.H=i,L.A=c,Ne===null&&(Le=null,je=0,Gl()),d}function Ag(){for(;Ne!==null;)$m(Ne)}function kg(e,a){var t=Me;Me|=2;var n=Qm(),i=Pm();Le!==e||je!==a?(fi=null,mi=ta()+500,is(e,a)):ns=sn(e,a);e:do try{if(ke!==0&&Ne!==null){a=Ne;var c=ka;a:switch(ke){case 1:ke=0,ka=null,cs(e,a,c,1);break;case 2:case 9:if(td(c)){ke=0,ka=null,Xm(a);break}a=function(){ke!==2&&ke!==9||Le!==e||(ke=7),rt(e)},c.then(a,a);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:td(c)?(ke=0,ka=null,Xm(a)):(ke=0,ka=null,cs(e,a,c,7));break;case 5:var d=null;switch(Ne.tag){case 26:d=Ne.memoizedState;case 5:case 27:var y=Ne;if(d?qf(d):y.stateNode.complete){ke=0,ka=null;var N=y.sibling;if(N!==null)Ne=N;else{var G=y.return;G!==null?(Ne=G,gi(G)):Ne=null}break a}}ke=0,ka=null,cs(e,a,c,5);break;case 6:ke=0,ka=null,cs(e,a,c,6);break;case 8:zr(),$e=6;break e;default:throw Error(u(462))}}qg();break}catch(Q){Ym(e,Q)}while(!0);return ht=pn=null,L.H=n,L.A=i,Me=t,Ne!==null?0:(Le=null,je=0,Gl(),$e)}function qg(){for(;Ne!==null&&!pa();)$m(Ne)}function $m(e){var a=gm(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,a===null?gi(e):Ne=a}function Xm(e){var a=e,t=a.alternate;switch(a.tag){case 15:case 0:a=om(t,a,a.pendingProps,a.type,void 0,je);break;case 11:a=om(t,a,a.pendingProps,a.type.render,a.ref,je);break;case 5:Fc(a);default:vm(t,a),a=Ne=Po(a,Dt),a=gm(t,a,Dt)}e.memoizedProps=e.pendingProps,a===null?gi(e):Ne=a}function cs(e,a,t,n){ht=pn=null,Fc(a),Zn=null,Os=0;var i=a.return;try{if(Sg(e,i,a,t,je)){$e=1,ni(e,Ia(t,e.current)),Ne=null;return}}catch(c){if(i!==null)throw Ne=i,c;$e=1,ni(e,Ia(t,e.current)),Ne=null;return}a.flags&32768?(_e||n===1?e=!0:ns||(je&536870912)!==0?e=!1:(Qt=e=!0,(n===2||n===9||n===3||n===6)&&(n=Ta.current,n!==null&&n.tag===13&&(n.flags|=16384))),Vm(a,e)):gi(a)}function gi(e){var a=e;do{if((a.flags&32768)!==0){Vm(a,Qt);return}e=a.return;var t=jg(a.alternate,a,Dt);if(t!==null){Ne=t;return}if(a=a.sibling,a!==null){Ne=a;return}Ne=a=e}while(a!==null);$e===0&&($e=5)}function Vm(e,a){do{var t=Eg(e.alternate,e);if(t!==null){t.flags&=32767,Ne=t;return}if(t=e.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!a&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=t}while(e!==null);$e=6,Ne=null}function Jm(e,a,t,n,i,c,d,y,N){e.cancelPendingCommit=null;do hi();while(We!==0);if((Me&6)!==0)throw Error(u(327));if(a!==null){if(a===e.current)throw Error(u(177));if(c=a.lanes|a.childLanes,c|=Ec,Oe(e,t,c,d,y,N),e===Le&&(Ne=Le=null,je=0),ls=a,Xt=e,wt=t,qr=c,Rr=i,Om=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ug(Ie,function(){return ef(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=L.T,L.T=null,i=Z.p,Z.p=2,d=Me,Me|=4;try{_g(e,a,t)}finally{Me=d,Z.p=i,L.T=n}}We=1,Zm(),Km(),Fm()}}function Zm(){if(We===1){We=0;var e=Xt,a=ls,t=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||t){t=L.T,L.T=null;var n=Z.p;Z.p=2;var i=Me;Me|=4;try{Tm(a,e);var c=Jr,d=zo(e.containerInfo),y=c.focusedElem,N=c.selectionRange;if(d!==y&&y&&y.ownerDocument&&Go(y.ownerDocument.documentElement,y)){if(N!==null&&xc(y)){var G=N.start,Q=N.end;if(Q===void 0&&(Q=G),"selectionStart"in y)y.selectionStart=G,y.selectionEnd=Math.min(Q,y.value.length);else{var X=y.ownerDocument||document,O=X&&X.defaultView||window;if(O.getSelection){var I=O.getSelection(),ne=y.textContent.length,ue=Math.min(N.start,ne),ze=N.end===void 0?ue:Math.min(N.end,ne);!I.extend&&ue>ze&&(d=ze,ze=ue,ue=d);var A=Ro(y,ue),_=Ro(y,ze);if(A&&_&&(I.rangeCount!==1||I.anchorNode!==A.node||I.anchorOffset!==A.offset||I.focusNode!==_.node||I.focusOffset!==_.offset)){var R=X.createRange();R.setStart(A.node,A.offset),I.removeAllRanges(),ue>ze?(I.addRange(R),I.extend(_.node,_.offset)):(R.setEnd(_.node,_.offset),I.addRange(R))}}}}for(X=[],I=y;I=I.parentNode;)I.nodeType===1&&X.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<X.length;y++){var P=X[y];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}Mi=!!Vr,Jr=Vr=null}finally{Me=i,Z.p=n,L.T=t}}e.current=a,We=2}}function Km(){if(We===2){We=0;var e=Xt,a=ls,t=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||t){t=L.T,L.T=null;var n=Z.p;Z.p=2;var i=Me;Me|=4;try{Em(e,a.alternate,a)}finally{Me=i,Z.p=n,L.T=t}}We=3}}function Fm(){if(We===4||We===3){We=0,Ka();var e=Xt,a=ls,t=wt,n=Om;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?We=5:(We=0,ls=Xt=null,Wm(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&($t=null),ac(t),a=a.stateNode,oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Fa,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=L.T,i=Z.p,Z.p=2,L.T=null;try{for(var c=e.onRecoverableError,d=0;d<n.length;d++){var y=n[d];c(y.value,{componentStack:y.stack})}}finally{L.T=a,Z.p=i}}(wt&3)!==0&&hi(),rt(e),i=e.pendingLanes,(t&261930)!==0&&(i&42)!==0?e===Gr?al++:(al=0,Gr=e):al=0,tl(0)}}function Wm(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,zs(a)))}function hi(){return Zm(),Km(),Fm(),ef()}function ef(){if(We!==5)return!1;var e=Xt,a=qr;qr=0;var t=ac(wt),n=L.T,i=Z.p;try{Z.p=32>t?32:t,L.T=null,t=Rr,Rr=null;var c=Xt,d=wt;if(We=0,ls=Xt=null,wt=0,(Me&6)!==0)throw Error(u(331));var y=Me;if(Me|=4,Gm(c.current),km(c,c.current,d,t),Me=y,tl(0,!1),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Fa,c)}catch{}return!0}finally{Z.p=i,L.T=n,Wm(e,a)}}function af(e,a,t){a=Ia(t,a),a=fr(e.stateNode,a,2),e=Bt(e,a,2),e!==null&&(ln(e,2),rt(e))}function qe(e,a,t){if(e.tag===3)af(e,e,t);else for(;a!==null;){if(a.tag===3){af(a,e,t);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($t===null||!$t.has(n))){e=Ia(t,e),t=tm(2),n=Bt(a,t,2),n!==null&&(nm(t,n,a,e),ln(n,2),rt(n));break}}a=a.return}}function Or(e,a,t){var n=e.pingCache;if(n===null){n=e.pingCache=new Mg;var i=new Set;n.set(a,i)}else i=n.get(a),i===void 0&&(i=new Set,n.set(a,i));i.has(t)||(Tr=!0,i.add(t),e=Rg.bind(null,e,a,t),a.then(e,e))}function Rg(e,a,t){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&t,e.warmLanes&=~t,Le===e&&(je&t)===t&&($e===4||$e===3&&(je&62914560)===je&&300>ta()-di?(Me&2)===0&&is(e,0):Ar|=t,ss===je&&(ss=0)),rt(e)}function tf(e,a){a===0&&(a=Cl()),e=dn(e,a),e!==null&&(ln(e,a),rt(e))}function Gg(e){var a=e.memoizedState,t=0;a!==null&&(t=a.retryLane),tf(e,t)}function zg(e,a){var t=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(a),tf(e,t)}function Ug(e,a){return fe(e,a)}var vi=null,rs=null,Lr=!1,bi=!1,Br=!1,Jt=0;function rt(e){e!==rs&&e.next===null&&(rs===null?vi=rs=e:rs=rs.next=e),bi=!0,Lr||(Lr=!0,Lg())}function tl(e,a){if(!Br&&bi){Br=!0;do for(var t=!1,n=vi;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var c=0;else{var d=n.suspendedLanes,y=n.pingedLanes;c=(1<<31-da(42|e)+1)-1,c&=i&~(d&~y),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(t=!0,cf(n,c))}else c=je,c=wn(n,n===Le?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||sn(n,c)||(t=!0,cf(n,c));n=n.next}while(t);Br=!1}}function Og(){nf()}function nf(){bi=Lr=!1;var e=0;Jt!==0&&Jg()&&(e=Jt);for(var a=ta(),t=null,n=vi;n!==null;){var i=n.next,c=sf(n,a);c===0?(n.next=null,t===null?vi=i:t.next=i,i===null&&(rs=t)):(t=n,(e!==0||(c&3)!==0)&&(bi=!0)),n=i}We!==0&&We!==5||tl(e),Jt!==0&&(Jt=0)}function sf(e,a){for(var t=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var d=31-da(c),y=1<<d,N=i[d];N===-1?((y&t)===0||(y&n)!==0)&&(i[d]=ec(y,a)):N<=a&&(e.expiredLanes|=y),c&=~y}if(a=Le,t=je,t=wn(e,e===a?t:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,t===0||e===a&&(ke===2||ke===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Ue(n),e.callbackNode=null,e.callbackPriority=0;if((t&3)===0||sn(e,t)){if(a=t&-t,a===e.callbackPriority)return a;switch(n!==null&&Ue(n),ac(t)){case 2:case 8:t=ua;break;case 32:t=Ie;break;case 268435456:t=La;break;default:t=Ie}return n=lf.bind(null,e),t=fe(t,n),e.callbackPriority=a,e.callbackNode=t,a}return n!==null&&n!==null&&Ue(n),e.callbackPriority=2,e.callbackNode=null,2}function lf(e,a){if(We!==0&&We!==5)return e.callbackNode=null,e.callbackPriority=0,null;var t=e.callbackNode;if(hi()&&e.callbackNode!==t)return null;var n=je;return n=wn(e,e===Le?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Bm(e,n,a),sf(e,ta()),e.callbackNode!=null&&e.callbackNode===t?lf.bind(null,e):null)}function cf(e,a){if(hi())return null;Bm(e,a,!0)}function Lg(){Kg(function(){(Me&6)!==0?fe(Ae,Og):nf()})}function Hr(){if(Jt===0){var e=Xn;e===0&&(e=ot,ot<<=1,(ot&261888)===0&&(ot=256)),Jt=e}return Jt}function rf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Dl(""+e)}function uf(e,a){var t=a.ownerDocument.createElement("input");return t.name=a.name,t.value=a.value,e.id&&t.setAttribute("form",e.id),a.parentNode.insertBefore(t,a),e=new FormData(e),t.parentNode.removeChild(t),e}function Bg(e,a,t,n,i){if(a==="submit"&&t&&t.stateNode===i){var c=rf((i[va]||null).action),d=n.submitter;d&&(a=(a=d[va]||null)?rf(a.formAction):d.getAttribute("formAction"),a!==null&&(c=a,d=null));var y=new Al("action","action",null,n,i);e.push({event:y,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Jt!==0){var N=d?uf(i,d):new FormData(i);cr(t,{pending:!0,data:N,method:i.method,action:c},null,N)}}else typeof c=="function"&&(y.preventDefault(),N=d?uf(i,d):new FormData(i),cr(t,{pending:!0,data:N,method:i.method,action:c},c,N))},currentTarget:i}]})}}for(var Yr=0;Yr<jc.length;Yr++){var Ir=jc[Yr],Hg=Ir.toLowerCase(),Yg=Ir[0].toUpperCase()+Ir.slice(1);at(Hg,"on"+Yg)}at(Lo,"onAnimationEnd"),at(Bo,"onAnimationIteration"),at(Ho,"onAnimationStart"),at("dblclick","onDoubleClick"),at("focusin","onFocus"),at("focusout","onBlur"),at(sg,"onTransitionRun"),at(lg,"onTransitionStart"),at(ig,"onTransitionCancel"),at(Yo,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ig=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nl));function of(e,a){a=(a&4)!==0;for(var t=0;t<e.length;t++){var n=e[t],i=n.event;n=n.listeners;e:{var c=void 0;if(a)for(var d=n.length-1;0<=d;d--){var y=n[d],N=y.instance,G=y.currentTarget;if(y=y.listener,N!==c&&i.isPropagationStopped())break e;c=y,i.currentTarget=G;try{c(i)}catch(Q){Rl(Q)}i.currentTarget=null,c=N}else for(d=0;d<n.length;d++){if(y=n[d],N=y.instance,G=y.currentTarget,y=y.listener,N!==c&&i.isPropagationStopped())break e;c=y,i.currentTarget=G;try{c(i)}catch(Q){Rl(Q)}i.currentTarget=null,c=N}}}}function Ce(e,a){var t=a[tc];t===void 0&&(t=a[tc]=new Set);var n=e+"__bubble";t.has(n)||(df(a,e,2,!1),t.add(n))}function Qr(e,a,t){var n=0;a&&(n|=4),df(t,e,n,a)}var xi="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){if(!e[xi]){e[xi]=!0,to.forEach(function(t){t!=="selectionchange"&&(Ig.has(t)||Qr(t,!1,e),Qr(t,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[xi]||(a[xi]=!0,Qr("selectionchange",!1,a))}}function df(e,a,t,n){switch(Bf(a)){case 2:var i=hh;break;case 8:i=vh;break;default:i=iu}t=i.bind(null,a,t,e),i=void 0,!dc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(a,t,{capture:!0,passive:i}):e.addEventListener(a,t,!0):i!==void 0?e.addEventListener(a,t,{passive:i}):e.addEventListener(a,t,!1)}function $r(e,a,t,n,i){var c=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var y=n.stateNode.containerInfo;if(y===i)break;if(d===4)for(d=n.return;d!==null;){var N=d.tag;if((N===3||N===4)&&d.stateNode.containerInfo===i)return;d=d.return}for(;y!==null;){if(d=Tn(y),d===null)return;if(N=d.tag,N===5||N===6||N===26||N===27){n=c=d;continue e}y=y.parentNode}}n=n.return}yo(function(){var G=c,Q=uc(t),X=[];e:{var O=Io.get(e);if(O!==void 0){var I=Al,ne=e;switch(e){case"keypress":if(Ml(t)===0)break e;case"keydown":case"keyup":I=zy;break;case"focusin":ne="focus",I=yc;break;case"focusout":ne="blur",I=yc;break;case"beforeblur":case"afterblur":I=yc;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Ly;break;case Lo:case Bo:case Ho:I=Dy;break;case Yo:I=Hy;break;case"scroll":case"scrollend":I=Ny;break;case"wheel":I=Iy;break;case"copy":case"cut":case"paste":I=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=xo;break;case"toggle":case"beforetoggle":I=Py}var ue=(a&4)!==0,ze=!ue&&(e==="scroll"||e==="scrollend"),A=ue?O!==null?O+"Capture":null:O;ue=[];for(var _=G,R;_!==null;){var P=_;if(R=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||R===null||A===null||(P=Es(_,A),P!=null&&ue.push(sl(_,P,R))),ze)break;_=_.return}0<ue.length&&(O=new I(O,ne,null,t,Q),X.push({event:O,listeners:ue}))}}if((a&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",O&&t!==rc&&(ne=t.relatedTarget||t.fromElement)&&(Tn(ne)||ne[Mn]))break e;if((I||O)&&(O=Q.window===Q?Q:(O=Q.ownerDocument)?O.defaultView||O.parentWindow:window,I?(ne=t.relatedTarget||t.toElement,I=G,ne=ne?Tn(ne):null,ne!==null&&(ze=f(ne),ue=ne.tag,ne!==ze||ue!==5&&ue!==27&&ue!==6)&&(ne=null)):(I=null,ne=G),I!==ne)){if(ue=vo,P="onMouseLeave",A="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(ue=xo,P="onPointerLeave",A="onPointerEnter",_="pointer"),ze=I==null?O:js(I),R=ne==null?O:js(ne),O=new ue(P,_+"leave",I,t,Q),O.target=ze,O.relatedTarget=R,P=null,Tn(Q)===G&&(ue=new ue(A,_+"enter",ne,t,Q),ue.target=R,ue.relatedTarget=ze,P=ue),ze=P,I&&ne)a:{for(ue=Qg,A=I,_=ne,R=0,P=A;P;P=ue(P))R++;P=0;for(var ie=_;ie;ie=ue(ie))P++;for(;0<R-P;)A=ue(A),R--;for(;0<P-R;)_=ue(_),P--;for(;R--;){if(A===_||_!==null&&A===_.alternate){ue=A;break a}A=ue(A),_=ue(_)}ue=null}else ue=null;I!==null&&mf(X,O,I,ue,!1),ne!==null&&ze!==null&&mf(X,ze,ne,ue,!0)}}e:{if(O=G?js(G):window,I=O.nodeName&&O.nodeName.toLowerCase(),I==="select"||I==="input"&&O.type==="file")var De=wo;else if(_o(O))if(Mo)De=ag;else{De=Wy;var se=Fy}else I=O.nodeName,!I||I.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?G&&cc(G.elementType)&&(De=wo):De=eg;if(De&&(De=De(e,G))){Do(X,De,t,Q);break e}se&&se(e,O,G),e==="focusout"&&G&&O.type==="number"&&G.memoizedProps.value!=null&&ic(O,"number",O.value)}switch(se=G?js(G):window,e){case"focusin":(_o(se)||se.contentEditable==="true")&&(Ln=se,Sc=G,qs=null);break;case"focusout":qs=Sc=Ln=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,Uo(X,t,Q);break;case"selectionchange":if(ng)break;case"keydown":case"keyup":Uo(X,t,Q)}var ve;if(hc)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else On?jo(e,t)&&(Ee="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(Ee="onCompositionStart");Ee&&(So&&t.locale!=="ko"&&(On||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&On&&(ve=go()):(qt=Q,mc="value"in qt?qt.value:qt.textContent,On=!0)),se=Si(G,Ee),0<se.length&&(Ee=new bo(Ee,e,null,t,Q),X.push({event:Ee,listeners:se}),ve?Ee.data=ve:(ve=Eo(t),ve!==null&&(Ee.data=ve)))),(ve=Xy?Vy(e,t):Jy(e,t))&&(Ee=Si(G,"onBeforeInput"),0<Ee.length&&(se=new bo("onBeforeInput","beforeinput",null,t,Q),X.push({event:se,listeners:Ee}),se.data=ve)),Bg(X,e,G,t,Q)}of(X,a)})}function sl(e,a,t){return{instance:e,listener:a,currentTarget:t}}function Si(e,a){for(var t=a+"Capture",n=[];e!==null;){var i=e,c=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||c===null||(i=Es(e,t),i!=null&&n.unshift(sl(e,i,c)),i=Es(e,a),i!=null&&n.push(sl(e,i,c))),e.tag===3)return n;e=e.return}return[]}function Qg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mf(e,a,t,n,i){for(var c=a._reactName,d=[];t!==null&&t!==n;){var y=t,N=y.alternate,G=y.stateNode;if(y=y.tag,N!==null&&N===n)break;y!==5&&y!==26&&y!==27||G===null||(N=G,i?(G=Es(t,c),G!=null&&d.unshift(sl(t,G,N))):i||(G=Es(t,c),G!=null&&d.push(sl(t,G,N)))),t=t.return}d.length!==0&&e.push({event:a,listeners:d})}var Pg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function ff(e){return(typeof e=="string"?e:""+e).replace(Pg,`
`).replace($g,"")}function pf(e,a){return a=ff(a),ff(e)===a}function Ge(e,a,t,n,i,c){switch(t){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||Gn(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&Gn(e,""+n);break;case"className":El(e,"class",n);break;case"tabIndex":El(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":El(e,t,n);break;case"style":fo(e,n,c);break;case"data":if(a!=="object"){El(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||t!=="href")){e.removeAttribute(t);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(t);break}n=Dl(""+n),e.setAttribute(t,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(t==="formAction"?(a!=="input"&&Ge(e,a,"name",i.name,i,null),Ge(e,a,"formEncType",i.formEncType,i,null),Ge(e,a,"formMethod",i.formMethod,i,null),Ge(e,a,"formTarget",i.formTarget,i,null)):(Ge(e,a,"encType",i.encType,i,null),Ge(e,a,"method",i.method,i,null),Ge(e,a,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(t);break}n=Dl(""+n),e.setAttribute(t,n);break;case"onClick":n!=null&&(e.onclick=ft);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(t=n.__html,t!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=t}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}t=Dl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,""+n):e.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,""):e.removeAttribute(t);break;case"capture":case"download":n===!0?e.setAttribute(t,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,n):e.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(t,n):e.removeAttribute(t);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(t):e.setAttribute(t,n);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),jl(e,"popover",n);break;case"xlinkActuate":mt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":mt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":mt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":mt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":mt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":mt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":mt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":mt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":mt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":jl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=xy.get(t)||t,jl(e,t,n))}}function Xr(e,a,t,n,i,c){switch(t){case"style":fo(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(t=n.__html,t!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=t}}break;case"children":typeof n=="string"?Gn(e,n):(typeof n=="number"||typeof n=="bigint")&&Gn(e,""+n);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!no.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(i=t.endsWith("Capture"),a=t.slice(2,i?t.length-7:void 0),c=e[va]||null,c=c!=null?c[t]:null,typeof c=="function"&&e.removeEventListener(a,c,i),typeof n=="function")){typeof c!="function"&&c!==null&&(t in e?e[t]=null:e.hasAttribute(t)&&e.removeAttribute(t)),e.addEventListener(a,n,i);break e}t in e?e[t]=n:n===!0?e.setAttribute(t,""):jl(e,t,n)}}}function ca(e,a,t){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var n=!1,i=!1,c;for(c in t)if(t.hasOwnProperty(c)){var d=t[c];if(d!=null)switch(c){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Ge(e,a,c,d,t,null)}}i&&Ge(e,a,"srcSet",t.srcSet,t,null),n&&Ge(e,a,"src",t.src,t,null);return;case"input":Ce("invalid",e);var y=c=d=i=null,N=null,G=null;for(n in t)if(t.hasOwnProperty(n)){var Q=t[n];if(Q!=null)switch(n){case"name":i=Q;break;case"type":d=Q;break;case"checked":N=Q;break;case"defaultChecked":G=Q;break;case"value":c=Q;break;case"defaultValue":y=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(u(137,a));break;default:Ge(e,a,n,Q,t,null)}}ro(e,c,y,N,G,d,i,!1);return;case"select":Ce("invalid",e),n=d=c=null;for(i in t)if(t.hasOwnProperty(i)&&(y=t[i],y!=null))switch(i){case"value":c=y;break;case"defaultValue":d=y;break;case"multiple":n=y;default:Ge(e,a,i,y,t,null)}a=c,t=d,e.multiple=!!n,a!=null?Rn(e,!!n,a,!1):t!=null&&Rn(e,!!n,t,!0);return;case"textarea":Ce("invalid",e),c=i=n=null;for(d in t)if(t.hasOwnProperty(d)&&(y=t[d],y!=null))switch(d){case"value":n=y;break;case"defaultValue":i=y;break;case"children":c=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(u(91));break;default:Ge(e,a,d,y,t,null)}oo(e,n,i,c);return;case"option":for(N in t)if(t.hasOwnProperty(N)&&(n=t[N],n!=null))switch(N){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Ge(e,a,N,n,t,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(n=0;n<nl.length;n++)Ce(nl[n],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in t)if(t.hasOwnProperty(G)&&(n=t[G],n!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Ge(e,a,G,n,t,null)}return;default:if(cc(a)){for(Q in t)t.hasOwnProperty(Q)&&(n=t[Q],n!==void 0&&Xr(e,a,Q,n,t,void 0));return}}for(y in t)t.hasOwnProperty(y)&&(n=t[y],n!=null&&Ge(e,a,y,n,t,null))}function Xg(e,a,t,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,c=null,d=null,y=null,N=null,G=null,Q=null;for(I in t){var X=t[I];if(t.hasOwnProperty(I)&&X!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":N=X;default:n.hasOwnProperty(I)||Ge(e,a,I,null,n,X)}}for(var O in n){var I=n[O];if(X=t[O],n.hasOwnProperty(O)&&(I!=null||X!=null))switch(O){case"type":c=I;break;case"name":i=I;break;case"checked":G=I;break;case"defaultChecked":Q=I;break;case"value":d=I;break;case"defaultValue":y=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(u(137,a));break;default:I!==X&&Ge(e,a,O,I,n,X)}}lc(e,d,y,N,G,Q,c,i);return;case"select":I=d=y=O=null;for(c in t)if(N=t[c],t.hasOwnProperty(c)&&N!=null)switch(c){case"value":break;case"multiple":I=N;default:n.hasOwnProperty(c)||Ge(e,a,c,null,n,N)}for(i in n)if(c=n[i],N=t[i],n.hasOwnProperty(i)&&(c!=null||N!=null))switch(i){case"value":O=c;break;case"defaultValue":y=c;break;case"multiple":d=c;default:c!==N&&Ge(e,a,i,c,n,N)}a=y,t=d,n=I,O!=null?Rn(e,!!t,O,!1):!!n!=!!t&&(a!=null?Rn(e,!!t,a,!0):Rn(e,!!t,t?[]:"",!1));return;case"textarea":I=O=null;for(y in t)if(i=t[y],t.hasOwnProperty(y)&&i!=null&&!n.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ge(e,a,y,null,n,i)}for(d in n)if(i=n[d],c=t[d],n.hasOwnProperty(d)&&(i!=null||c!=null))switch(d){case"value":O=i;break;case"defaultValue":I=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==c&&Ge(e,a,d,i,n,c)}uo(e,O,I);return;case"option":for(var ne in t)if(O=t[ne],t.hasOwnProperty(ne)&&O!=null&&!n.hasOwnProperty(ne))switch(ne){case"selected":e.selected=!1;break;default:Ge(e,a,ne,null,n,O)}for(N in n)if(O=n[N],I=t[N],n.hasOwnProperty(N)&&O!==I&&(O!=null||I!=null))switch(N){case"selected":e.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Ge(e,a,N,O,n,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in t)O=t[ue],t.hasOwnProperty(ue)&&O!=null&&!n.hasOwnProperty(ue)&&Ge(e,a,ue,null,n,O);for(G in n)if(O=n[G],I=t[G],n.hasOwnProperty(G)&&O!==I&&(O!=null||I!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(u(137,a));break;default:Ge(e,a,G,O,n,I)}return;default:if(cc(a)){for(var ze in t)O=t[ze],t.hasOwnProperty(ze)&&O!==void 0&&!n.hasOwnProperty(ze)&&Xr(e,a,ze,void 0,n,O);for(Q in n)O=n[Q],I=t[Q],!n.hasOwnProperty(Q)||O===I||O===void 0&&I===void 0||Xr(e,a,Q,O,n,I);return}}for(var A in t)O=t[A],t.hasOwnProperty(A)&&O!=null&&!n.hasOwnProperty(A)&&Ge(e,a,A,null,n,O);for(X in n)O=n[X],I=t[X],!n.hasOwnProperty(X)||O===I||O==null&&I==null||Ge(e,a,X,O,n,I)}function yf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,t=performance.getEntriesByType("resource"),n=0;n<t.length;n++){var i=t[n],c=i.transferSize,d=i.initiatorType,y=i.duration;if(c&&y&&yf(d)){for(d=0,y=i.responseEnd,n+=1;n<t.length;n++){var N=t[n],G=N.startTime;if(G>y)break;var Q=N.transferSize,X=N.initiatorType;Q&&yf(X)&&(N=N.responseEnd,d+=Q*(N<y?1:(y-G)/(N-G)))}if(--n,a+=8*(c+d)/(i.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Vr=null,Jr=null;function Ni(e){return e.nodeType===9?e:e.ownerDocument}function gf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hf(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Zr(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kr=null;function Jg(){var e=window.event;return e&&e.type==="popstate"?e===Kr?!1:(Kr=e,!0):(Kr=null,!1)}var vf=typeof setTimeout=="function"?setTimeout:void 0,Zg=typeof clearTimeout=="function"?clearTimeout:void 0,bf=typeof Promise=="function"?Promise:void 0,Kg=typeof queueMicrotask=="function"?queueMicrotask:typeof bf<"u"?function(e){return bf.resolve(null).then(e).catch(Fg)}:vf;function Fg(e){setTimeout(function(){throw e})}function Zt(e){return e==="head"}function xf(e,a){var t=a,n=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"||t==="/&"){if(n===0){e.removeChild(i),ms(a);return}n--}else if(t==="$"||t==="$?"||t==="$~"||t==="$!"||t==="&")n++;else if(t==="html")ll(e.ownerDocument.documentElement);else if(t==="head"){t=e.ownerDocument.head,ll(t);for(var c=t.firstChild;c;){var d=c.nextSibling,y=c.nodeName;c[Cs]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&c.rel.toLowerCase()==="stylesheet"||t.removeChild(c),c=d}}else t==="body"&&ll(e.ownerDocument.body);t=i}while(t);ms(a)}function Sf(e,a){var t=e;e=0;do{var n=t.nextSibling;if(t.nodeType===1?a?(t._stashedDisplay=t.style.display,t.style.display="none"):(t.style.display=t._stashedDisplay||"",t.getAttribute("style")===""&&t.removeAttribute("style")):t.nodeType===3&&(a?(t._stashedText=t.nodeValue,t.nodeValue=""):t.nodeValue=t._stashedText||""),n&&n.nodeType===8)if(t=n.data,t==="/$"){if(e===0)break;e--}else t!=="$"&&t!=="$?"&&t!=="$~"&&t!=="$!"||e++;t=n}while(t)}function Fr(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var t=a;switch(a=a.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":Fr(t),nc(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}e.removeChild(t)}}function Wg(e,a,t,n){for(;e.nodeType===1;){var i=t;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Cs])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var c=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Va(e.nextSibling),e===null)break}return null}function eh(e,a,t){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Va(e.nextSibling),e===null))return null;return e}function Nf(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Va(e.nextSibling),e===null))return null;return e}function Wr(e){return e.data==="$?"||e.data==="$~"}function eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ah(e,a){var t=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||t.readyState!=="loading")a();else{var n=function(){a(),t.removeEventListener("DOMContentLoaded",n)};t.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Va(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var au=null;function Cf(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"||t==="/&"){if(a===0)return Va(e.nextSibling);a--}else t!=="$"&&t!=="$!"&&t!=="$?"&&t!=="$~"&&t!=="&"||a++}e=e.nextSibling}return null}function jf(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"){if(a===0)return e;a--}else t!=="/$"&&t!=="/&"||a++}e=e.previousSibling}return null}function Ef(e,a,t){switch(a=Ni(t),e){case"html":if(e=a.documentElement,!e)throw Error(u(452));return e;case"head":if(e=a.head,!e)throw Error(u(453));return e;case"body":if(e=a.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function ll(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);nc(e)}var Ja=new Map,_f=new Set;function Ci(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Mt=Z.d;Z.d={f:th,r:nh,D:sh,C:lh,L:ih,m:ch,X:uh,S:rh,M:oh};function th(){var e=Mt.f(),a=pi();return e||a}function nh(e){var a=An(e);a!==null&&a.tag===5&&a.type==="form"?Yd(a):Mt.r(e)}var us=typeof document>"u"?null:document;function Df(e,a,t){var n=us;if(n&&typeof a=="string"&&a){var i=Ha(a);i='link[rel="'+e+'"][href="'+i+'"]',typeof t=="string"&&(i+='[crossorigin="'+t+'"]'),_f.has(i)||(_f.add(i),e={rel:e,crossOrigin:t,href:a},n.querySelector(i)===null&&(a=n.createElement("link"),ca(a,"link",e),ea(a),n.head.appendChild(a)))}}function sh(e){Mt.D(e),Df("dns-prefetch",e,null)}function lh(e,a){Mt.C(e,a),Df("preconnect",e,a)}function ih(e,a,t){Mt.L(e,a,t);var n=us;if(n&&e&&a){var i='link[rel="preload"][as="'+Ha(a)+'"]';a==="image"&&t&&t.imageSrcSet?(i+='[imagesrcset="'+Ha(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(i+='[imagesizes="'+Ha(t.imageSizes)+'"]')):i+='[href="'+Ha(e)+'"]';var c=i;switch(a){case"style":c=os(e);break;case"script":c=ds(e)}Ja.has(c)||(e=j({rel:"preload",href:a==="image"&&t&&t.imageSrcSet?void 0:e,as:a},t),Ja.set(c,e),n.querySelector(i)!==null||a==="style"&&n.querySelector(il(c))||a==="script"&&n.querySelector(cl(c))||(a=n.createElement("link"),ca(a,"link",e),ea(a),n.head.appendChild(a)))}}function ch(e,a){Mt.m(e,a);var t=us;if(t&&e){var n=a&&typeof a.as=="string"?a.as:"script",i='link[rel="modulepreload"][as="'+Ha(n)+'"][href="'+Ha(e)+'"]',c=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=ds(e)}if(!Ja.has(c)&&(e=j({rel:"modulepreload",href:e},a),Ja.set(c,e),t.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(cl(c)))return}n=t.createElement("link"),ca(n,"link",e),ea(n),t.head.appendChild(n)}}}function rh(e,a,t){Mt.S(e,a,t);var n=us;if(n&&e){var i=kn(n).hoistableStyles,c=os(e);a=a||"default";var d=i.get(c);if(!d){var y={loading:0,preload:null};if(d=n.querySelector(il(c)))y.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":a},t),(t=Ja.get(c))&&tu(e,t);var N=d=n.createElement("link");ea(N),ca(N,"link",e),N._p=new Promise(function(G,Q){N.onload=G,N.onerror=Q}),N.addEventListener("load",function(){y.loading|=1}),N.addEventListener("error",function(){y.loading|=2}),y.loading|=4,ji(d,a,n)}d={type:"stylesheet",instance:d,count:1,state:y},i.set(c,d)}}}function uh(e,a){Mt.X(e,a);var t=us;if(t&&e){var n=kn(t).hoistableScripts,i=ds(e),c=n.get(i);c||(c=t.querySelector(cl(i)),c||(e=j({src:e,async:!0},a),(a=Ja.get(i))&&nu(e,a),c=t.createElement("script"),ea(c),ca(c,"link",e),t.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(i,c))}}function oh(e,a){Mt.M(e,a);var t=us;if(t&&e){var n=kn(t).hoistableScripts,i=ds(e),c=n.get(i);c||(c=t.querySelector(cl(i)),c||(e=j({src:e,async:!0,type:"module"},a),(a=Ja.get(i))&&nu(e,a),c=t.createElement("script"),ea(c),ca(c,"link",e),t.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(i,c))}}function wf(e,a,t,n){var i=(i=me.current)?Ci(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(a=os(t.href),t=kn(i).hoistableStyles,n=t.get(a),n||(n={type:"style",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){e=os(t.href);var c=kn(i).hoistableStyles,d=c.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=i.querySelector(il(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Ja.has(e)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},Ja.set(e,t),c||dh(i,e,t,d.state))),a&&n===null)throw Error(u(528,""));return d}if(a&&n!==null)throw Error(u(529,""));return null;case"script":return a=t.async,t=t.src,typeof t=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ds(t),t=kn(i).hoistableScripts,n=t.get(a),n||(n={type:"script",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function os(e){return'href="'+Ha(e)+'"'}function il(e){return'link[rel="stylesheet"]['+e+"]"}function Mf(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function dh(e,a,t,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),ca(a,"link",t),ea(a),e.head.appendChild(a))}function ds(e){return'[src="'+Ha(e)+'"]'}function cl(e){return"script[async]"+e}function Tf(e,a,t){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+Ha(t.href)+'"]');if(n)return a.instance=n,ea(n),n;var i=j({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ea(n),ca(n,"style",i),ji(n,t.precedence,e),a.instance=n;case"stylesheet":i=os(t.href);var c=e.querySelector(il(i));if(c)return a.state.loading|=4,a.instance=c,ea(c),c;n=Mf(t),(i=Ja.get(i))&&tu(n,i),c=(e.ownerDocument||e).createElement("link"),ea(c);var d=c;return d._p=new Promise(function(y,N){d.onload=y,d.onerror=N}),ca(c,"link",n),a.state.loading|=4,ji(c,t.precedence,e),a.instance=c;case"script":return c=ds(t.src),(i=e.querySelector(cl(c)))?(a.instance=i,ea(i),i):(n=t,(i=Ja.get(c))&&(n=j({},t),nu(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),ea(i),ca(i,"link",n),e.head.appendChild(i),a.instance=i);case"void":return null;default:throw Error(u(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,ji(n,t.precedence,e));return a.instance}function ji(e,a,t){for(var n=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,c=i,d=0;d<n.length;d++){var y=n[d];if(y.dataset.precedence===a)c=y;else if(c!==i)break}c?c.parentNode.insertBefore(e,c.nextSibling):(a=t.nodeType===9?t.head:t,a.insertBefore(e,a.firstChild))}function tu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function nu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Ei=null;function Af(e,a,t){if(Ei===null){var n=new Map,i=Ei=new Map;i.set(t,n)}else i=Ei,n=i.get(t),n||(n=new Map,i.set(t,n));if(n.has(e))return n;for(n.set(e,null),t=t.getElementsByTagName(e),i=0;i<t.length;i++){var c=t[i];if(!(c[Cs]||c[na]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var d=c.getAttribute(a)||"";d=e+d;var y=n.get(d);y?y.push(c):n.set(d,[c])}}return n}function kf(e,a,t){e=e.ownerDocument||e,e.head.insertBefore(t,a==="title"?e.querySelector("head > title"):null)}function mh(e,a,t){if(t===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function qf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fh(e,a,t,n){if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var i=os(n.href),c=a.querySelector(il(i));if(c){a=c._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=_i.bind(e),a.then(e,e)),t.state.loading|=4,t.instance=c,ea(c);return}c=a.ownerDocument||a,n=Mf(n),(i=Ja.get(i))&&tu(n,i),c=c.createElement("link"),ea(c);var d=c;d._p=new Promise(function(y,N){d.onload=y,d.onerror=N}),ca(c,"link",n),t.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(t,a),(a=t.state.preload)&&(t.state.loading&3)===0&&(e.count++,t=_i.bind(e),a.addEventListener("load",t),a.addEventListener("error",t))}}var su=0;function ph(e,a){return e.stylesheets&&e.count===0&&wi(e,e.stylesheets),0<e.count||0<e.imgCount?function(t){var n=setTimeout(function(){if(e.stylesheets&&wi(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+a);0<e.imgBytes&&su===0&&(su=62500*Vg());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wi(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>su?50:800)+a);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function _i(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Di=null;function wi(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Di=new Map,a.forEach(yh,e),Di=null,_i.call(e))}function yh(e,a){if(!(a.state.loading&4)){var t=Di.get(e);if(t)var n=t.get(null);else{t=new Map,Di.set(e,t);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<i.length;c++){var d=i[c];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(t.set(d.dataset.precedence,d),n=d)}n&&t.set(null,n)}i=a.instance,d=i.getAttribute("data-precedence"),c=t.get(d)||n,c===n&&t.set(null,i),t.set(d,i),this.count++,n=_i.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),c?c.parentNode.insertBefore(i,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),a.state.loading|=4}}var rl={$$typeof:x,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function gh(e,a,t,n,i,c,d,y,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.hiddenUpdates=Ss(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=c,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Rf(e,a,t,n,i,c,d,y,N,G,Q,X){return e=new gh(e,a,t,d,N,G,Q,X,y),a=1,c===!0&&(a|=24),c=Ma(3,null,null,a),e.current=c,c.stateNode=e,a=Uc(),a.refCount++,e.pooledCache=a,a.refCount++,c.memoizedState={element:n,isDehydrated:t,cache:a},Hc(c),e}function Gf(e){return e?(e=Yn,e):Yn}function zf(e,a,t,n,i,c){i=Gf(i),n.context===null?n.context=i:n.pendingContext=i,n=Lt(a),n.payload={element:t},c=c===void 0?null:c,c!==null&&(n.callback=c),t=Bt(e,n,a),t!==null&&(ja(t,e,a),Bs(t,e,a))}function Uf(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<a?t:a}}function lu(e,a){Uf(e,a),(e=e.alternate)&&Uf(e,a)}function Of(e){if(e.tag===13||e.tag===31){var a=dn(e,67108864);a!==null&&ja(a,e,67108864),lu(e,67108864)}}function Lf(e){if(e.tag===13||e.tag===31){var a=Ra();a=Ns(a);var t=dn(e,a);t!==null&&ja(t,e,a),lu(e,a)}}var Mi=!0;function hh(e,a,t,n){var i=L.T;L.T=null;var c=Z.p;try{Z.p=2,iu(e,a,t,n)}finally{Z.p=c,L.T=i}}function vh(e,a,t,n){var i=L.T;L.T=null;var c=Z.p;try{Z.p=8,iu(e,a,t,n)}finally{Z.p=c,L.T=i}}function iu(e,a,t,n){if(Mi){var i=cu(n);if(i===null)$r(e,a,n,Ti,t),Hf(e,n);else if(xh(i,e,a,t,n))n.stopPropagation();else if(Hf(e,n),a&4&&-1<bh.indexOf(e)){for(;i!==null;){var c=An(i);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=Wa(c.pendingLanes);if(d!==0){var y=c;for(y.pendingLanes|=2,y.entangledLanes|=2;d;){var N=1<<31-da(d);y.entanglements[1]|=N,d&=~N}rt(c),(Me&6)===0&&(mi=ta()+500,tl(0))}}break;case 31:case 13:y=dn(c,2),y!==null&&ja(y,c,2),pi(),lu(c,2)}if(c=cu(n),c===null&&$r(e,a,n,Ti,t),c===i)break;i=c}i!==null&&n.stopPropagation()}else $r(e,a,n,null,t)}}function cu(e){return e=uc(e),ru(e)}var Ti=null;function ru(e){if(Ti=null,e=Tn(e),e!==null){var a=f(e);if(a===null)e=null;else{var t=a.tag;if(t===13){if(e=h(a),e!==null)return e;e=null}else if(t===31){if(e=b(a),e!==null)return e;e=null}else if(t===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Ti=e,null}function Bf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Ae:return 2;case ua:return 8;case Ie:case ya:return 32;case La:return 268435456;default:return 32}default:return 32}}var uu=!1,Kt=null,Ft=null,Wt=null,ul=new Map,ol=new Map,en=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hf(e,a){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":ul.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(a.pointerId)}}function dl(e,a,t,n,i,c){return e===null||e.nativeEvent!==c?(e={blockedOn:a,domEventName:t,eventSystemFlags:n,nativeEvent:c,targetContainers:[i]},a!==null&&(a=An(a),a!==null&&Of(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,i!==null&&a.indexOf(i)===-1&&a.push(i),e)}function xh(e,a,t,n,i){switch(a){case"focusin":return Kt=dl(Kt,e,a,t,n,i),!0;case"dragenter":return Ft=dl(Ft,e,a,t,n,i),!0;case"mouseover":return Wt=dl(Wt,e,a,t,n,i),!0;case"pointerover":var c=i.pointerId;return ul.set(c,dl(ul.get(c)||null,e,a,t,n,i)),!0;case"gotpointercapture":return c=i.pointerId,ol.set(c,dl(ol.get(c)||null,e,a,t,n,i)),!0}return!1}function Yf(e){var a=Tn(e.target);if(a!==null){var t=f(a);if(t!==null){if(a=t.tag,a===13){if(a=h(t),a!==null){e.blockedOn=a,eo(e.priority,function(){Lf(t)});return}}else if(a===31){if(a=b(t),a!==null){e.blockedOn=a,eo(e.priority,function(){Lf(t)});return}}else if(a===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ai(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var t=cu(e.nativeEvent);if(t===null){t=e.nativeEvent;var n=new t.constructor(t.type,t);rc=n,t.target.dispatchEvent(n),rc=null}else return a=An(t),a!==null&&Of(a),e.blockedOn=t,!1;a.shift()}return!0}function If(e,a,t){Ai(e)&&t.delete(a)}function Sh(){uu=!1,Kt!==null&&Ai(Kt)&&(Kt=null),Ft!==null&&Ai(Ft)&&(Ft=null),Wt!==null&&Ai(Wt)&&(Wt=null),ul.forEach(If),ol.forEach(If)}function ki(e,a){e.blockedOn===a&&(e.blockedOn=null,uu||(uu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Sh)))}var qi=null;function Qf(e){qi!==e&&(qi=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){qi===e&&(qi=null);for(var a=0;a<e.length;a+=3){var t=e[a],n=e[a+1],i=e[a+2];if(typeof n!="function"){if(ru(n||t)===null)continue;break}var c=An(t);c!==null&&(e.splice(a,3),a-=3,cr(c,{pending:!0,data:i,method:t.method,action:n},n,i))}}))}function ms(e){function a(N){return ki(N,e)}Kt!==null&&ki(Kt,e),Ft!==null&&ki(Ft,e),Wt!==null&&ki(Wt,e),ul.forEach(a),ol.forEach(a);for(var t=0;t<en.length;t++){var n=en[t];n.blockedOn===e&&(n.blockedOn=null)}for(;0<en.length&&(t=en[0],t.blockedOn===null);)Yf(t),t.blockedOn===null&&en.shift();if(t=(e.ownerDocument||e).$$reactFormReplay,t!=null)for(n=0;n<t.length;n+=3){var i=t[n],c=t[n+1],d=i[va]||null;if(typeof c=="function")d||Qf(t);else if(d){var y=null;if(c&&c.hasAttribute("formAction")){if(i=c,d=c[va]||null)y=d.formAction;else if(ru(i)!==null)continue}else y=d.action;typeof y=="function"?t[n+1]=y:(t.splice(n,3),n-=3),Qf(t)}}}function Pf(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(d){return i=d})},focusReset:"manual",scroll:"manual"})}function a(){i!==null&&(i(),i=null),n||setTimeout(t,20)}function t(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(t,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),i!==null&&(i(),i=null)}}}function ou(e){this._internalRoot=e}Ri.prototype.render=ou.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(u(409));var t=a.current,n=Ra();zf(t,n,e,a,null,null)},Ri.prototype.unmount=ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;zf(e.current,2,null,e,null,null),pi(),a[Mn]=null}};function Ri(e){this._internalRoot=e}Ri.prototype.unstable_scheduleHydration=function(e){if(e){var a=Wu();e={blockedOn:null,target:e,priority:a};for(var t=0;t<en.length&&a!==0&&a<en[t].priority;t++);en.splice(t,0,e),t===0&&Yf(e)}};var $f=r.version;if($f!=="19.2.0")throw Error(u(527,$f,"19.2.0"));Z.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=v(a),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Nh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gi.isDisabled&&Gi.supportsFiber)try{Fa=Gi.inject(Nh),oa=Gi}catch{}}return fl.createRoot=function(e,a){if(!m(e))throw Error(u(299));var t=!1,n="",i=Fd,c=Wd,d=em;return a!=null&&(a.unstable_strictMode===!0&&(t=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(d=a.onRecoverableError)),a=Rf(e,1,!1,null,null,t,n,null,i,c,d,Pf),e[Mn]=a.current,Pr(e),new ou(a)},fl.hydrateRoot=function(e,a,t){if(!m(e))throw Error(u(299));var n=!1,i="",c=Fd,d=Wd,y=em,N=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.formState!==void 0&&(N=t.formState)),a=Rf(e,1,!0,a,t??null,n,i,N,c,d,y,Pf),a.context=Gf(null),t=a.current,n=Ra(),n=Ns(n),i=Lt(n),i.callback=null,Bt(t,i,n),t=n,a.current.lanes=t,ln(a,t),rt(a),e[Mn]=a.current,Pr(e),new Ri(a)},fl.version="19.2.0",fl}var tp;function Rh(){if(tp)return fu.exports;tp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),fu.exports=qh(),fu.exports}var Gh=Rh();const Qi=10;function Pi(){return{type:"swordEnergy",current:0,max:Qi}}let np=0;const zh=s=>(np++,`${s}_instance_${np}`),Hu=s=>{const r=[...s];for(let o=r.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[r[o],r[u]]=[r[u],r[o]]}return r},Uh=(s,r)=>{const o=Hu(r);return{newDrawPile:[...s,...o],newDiscardPile:[]}},Np=(s,r,o)=>{let u=[...r],m=[...o];const f=[];for(let h=0;h<s;h++){if(u.length===0){if(m.length===0)break;const p=Uh(u,m);u=p.newDrawPile,m=p.newDiscardPile}const b=u.pop();b&&f.push(b)}return{drawnCards:f,newDrawPile:u,newDiscardPile:m}},sp=(s,r)=>[...r,...s],Oh=(s,r)=>{const o=[];return Object.entries(s).forEach(([u,m])=>{const f=r.find(h=>h.id===u||h.cardTypeId===u);if(f)for(let h=0;h<m;h++)o.push({...f,id:zh(f.cardTypeId||f.id),cardTypeId:f.cardTypeId||f.id})}),Hu(o)},Lh=(s,r)=>{switch(r.type){case"END_TURN":{const o=sp(r.cardsToDiscard,s.discardPile);return{...s,discardPile:o,hand:[]}}case"CARD_PLAY":{const o=s.hand.filter(m=>m.id!==r.card.id),u=sp([r.card],s.discardPile);return{...s,hand:o,discardPile:u}}case"SET_PILES":return{...s,drawPile:r.newDrawPile,discardPile:r.newDiscardPile};case"ADD_TO_HAND":return{...s,hand:[...s.hand,...r.cards]};case"RESET_DECK":return{hand:r.hand,drawPile:r.drawPile,discardPile:r.discardPile};default:return s}},tn={sw_001:{id:"sw_001",cardTypeId:"sw_001",name:"",description:"+1",cost:0,category:"atk",baseDamage:5,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_002:{id:"sw_002",cardTypeId:"sw_002",name:"",description:"+1-1",cost:1,category:"atk",baseDamage:3,swordEnergyGain:1,nextCardCostReduction:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_003:{id:"sw_003",cardTypeId:"sw_003",name:"",description:"3+1",cost:1,category:"atk",baseDamage:6,hitCount:3,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_004:{id:"sw_004",cardTypeId:"sw_004",name:"",description:"3+120%",cost:1,category:"atk",baseDamage:8,hitCount:3,swordEnergyGain:1,penetration:.2,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_005:{id:"sw_005",cardTypeId:"sw_005",name:"",description:"+1",cost:2,category:"atk",baseDamage:12,swordEnergyGain:1,isPreemptive:!0,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_006:{id:"sw_006",cardTypeId:"sw_006",name:"",description:"6+1",cost:2,category:"atk",baseDamage:4,hitCount:6,swordEnergyGain:1,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_007:{id:"sw_007",cardTypeId:"sw_007",name:"",description:"+1",cost:1,category:"atk",baseDamage:10,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_008:{id:"sw_008",cardTypeId:"sw_008",name:"",description:"+11",cost:1,category:"atk",baseDamage:11,swordEnergyGain:1,applyEnemyDebuff:[{name:"bleed",stacks:1,duration:3}],tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_009:{id:"sw_009",cardTypeId:"sw_009",name:"",description:"+1",cost:1,category:"atk",baseDamage:9,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_010:{id:"sw_010",cardTypeId:"sw_010",name:"",description:"+130%",cost:2,category:"atk",baseDamage:13,swordEnergyGain:1,penetration:.3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_011:{id:"sw_011",cardTypeId:"sw_011",name:"",description:"[+]+1",cost:2,category:"atk",baseDamage:8,swordEnergyGain:1,applyPlayerBuff:[{name:"atkUpMinor",stacks:1,duration:1}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_012:{id:"sw_012",cardTypeId:"sw_012",name:"",description:"[],[]+3",cost:2,category:"atk",baseDamage:10,swordEnergyGain:1,applyPlayerBuff:[{name:"immunity",stacks:1,duration:1}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_013:{id:"sw_013",cardTypeId:"sw_013",name:"",description:"+4+1",cost:1,category:"swordEnergy",swordEnergyGain:4,drawCards:1,tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_014:{id:"sw_014",cardTypeId:"sw_014",name:"",description:"+3HP+10",cost:1,category:"swordEnergy",swordEnergyGain:3,healAmount:10,tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_015:{id:"sw_015",cardTypeId:"sw_015",name:"",description:"+7+30%",cost:2,category:"swordEnergy",swordEnergyGain:7,applyPlayerBuff:[{name:"atkUpMajor",stacks:1,duration:2}],tags:["skill"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_016:{id:"sw_016",cardTypeId:"sw_016",name:"",description:"+2+1",cost:0,category:"swordEnergy",swordEnergyGain:2,energyGain:1,tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_017:{id:"sw_017",cardTypeId:"sw_017",name:"",description:"30%+2",cost:2,category:"atk",baseDamage:25,swordEnergyGain:2,penetration:.3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_018:{id:"sw_018",cardTypeId:"sw_018",name:"",description:"+2Guard+15",cost:2,category:"atk",baseDamage:22,swordEnergyGain:2,guardAmount:15,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_019:{id:"sw_019",cardTypeId:"sw_019",name:"",description:"+2",cost:2,category:"atk",baseDamage:20,swordEnergyGain:2,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_020:{id:"sw_020",cardTypeId:"sw_020",name:"",description:"+3",cost:2,category:"atk",baseDamage:24,swordEnergyGain:3,isPreemptive:!0,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_021:{id:"sw_021",cardTypeId:"sw_021",name:"",description:"Guard-25%+2",cost:2,category:"atk",baseDamage:28,swordEnergyGain:2,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_022:{id:"sw_022",cardTypeId:"sw_022",name:"",description:"+2",cost:2,category:"atk",baseDamage:23,swordEnergyGain:2,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_023:{id:"sw_023",cardTypeId:"sw_023",name:"",description:"2+3",cost:2,category:"atk",baseDamage:26,swordEnergyGain:3,applyEnemyDebuff:[{name:"bleed",stacks:2,duration:3}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_024:{id:"sw_024",cardTypeId:"sw_024",name:"",description:"1+2",cost:2,category:"atk",baseDamage:27,swordEnergyGain:2,applyEnemyDebuff:[{name:"burn",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_025:{id:"sw_025",cardTypeId:"sw_025",name:"",description:"2+2",cost:3,category:"atk",baseDamage:30,swordEnergyGain:2,applyEnemyDebuff:[{name:"stun",stacks:1,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_026:{id:"sw_026",cardTypeId:"sw_026",name:"",description:"2+3",cost:3,category:"atk",baseDamage:15,hitCount:2,swordEnergyGain:3,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_027:{id:"sw_027",cardTypeId:"sw_027",name:"",description:"3 = 3",cost:1,category:"atk",baseDamage:0,swordEnergyConsume:3,swordEnergyMultiplier:3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_028:{id:"sw_028",cardTypeId:"sw_028",name:"",description:"340%12+(8)",cost:1,category:"atk",baseDamage:12,swordEnergyConsume:3,swordEnergyMultiplier:8,penetration:.4,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_029:{id:"sw_029",cardTypeId:"sw_029",name:"",description:"5310+(6)3",cost:2,category:"atk",baseDamage:10,hitCount:3,swordEnergyConsume:5,swordEnergyMultiplier:6,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_030:{id:"sw_030",cardTypeId:"sw_030",name:"",description:"520+(12)",cost:2,category:"atk",baseDamage:20,swordEnergyConsume:5,swordEnergyMultiplier:12,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_031:{id:"sw_031",cardTypeId:"sw_031",name:"",description:"350%18+(9)",cost:1,category:"atk",baseDamage:18,swordEnergyConsume:3,swordEnergyMultiplier:9,penetration:.5,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_032:{id:"sw_032",cardTypeId:"sw_032",name:"",description:"32",cost:2,category:"atk",baseDamage:16,swordEnergyConsume:3,swordEnergyMultiplier:10,applyEnemyDebuff:[{name:"stun",stacks:1,duration:2,isPermanent:!1}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_033:{id:"sw_033",cardTypeId:"sw_033",name:"",description:"+10[], [], [], []3",cost:3,category:"buff",baseDamage:0,swordEnergyGain:10,applyPlayerBuff:[{name:"immunity",stacks:1,duration:3},{name:"cleanse",stacks:1,duration:3},{name:"atkUpMajor",stacks:1,duration:3},{name:"haste",stacks:1,duration:3}],tags:["skill"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_034:{id:"sw_034",cardTypeId:"sw_034",name:"",description:"40+5",cost:4,category:"atk",baseDamage:40,swordEnergyConsume:0,swordEnergyMultiplier:25,penetration:.6,tags:["attack"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_035:{id:"sw_035",cardTypeId:"sw_035",name:"",description:"[][]3",cost:2,category:"buff",baseDamage:0,swordEnergyConsume:0,swordEnergyMultiplier:22,applyPlayerBuff:[{name:"atkUpMajor",stacks:1,duration:3},{name:"reflect",stacks:1,duration:3}],tags:["skill"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_036:{id:"sw_036",cardTypeId:"sw_036",name:"",description:"253",cost:3,category:"atk",baseDamage:25,hitCount:3,swordEnergyConsume:0,swordEnergyMultiplier:18,applyEnemyDebuff:[{name:"bleed",stacks:3,duration:3}],tags:["attack"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_037:{id:"sw_037",cardTypeId:"sw_037",name:"",description:"Guard = 8",cost:1,category:"def",tags:["guard"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_039:{id:"sw_039",cardTypeId:"sw_039",name:"",description:"HP+20Guard = 2",cost:2,category:"def",healAmount:20,tags:["guard"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_040:{id:"sw_040",cardTypeId:"sw_040",name:"",description:"HP50%Guard = 3+3",cost:2,category:"def",baseDamage:18,swordEnergyGain:3,applyPlayerBuff:[{name:"lifesteal",stacks:1,duration:1}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_041:{id:"sw_041",cardTypeId:"sw_041",name:"",description:"2Guard = 10 + (8)",cost:1,category:"def",guardAmount:10,swordEnergyConsume:2,swordEnergyMultiplier:8,tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_042:{id:"sw_042",cardTypeId:"sw_042",name:"",description:"Guard+20+1",cost:1,category:"def",guardAmount:20,swordEnergyGain:1,tags:["guard"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_043:{id:"sw_043",cardTypeId:"sw_043",name:"",description:"230%8 + (5)",cost:1,category:"atk",baseDamage:8,swordEnergyConsume:2,swordEnergyMultiplier:5,penetration:.3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"}},hu=Object.values(tn),Cp={mg_001:{id:"mg_001",cardTypeId:"mg_001",name:"",description:"",cost:1,category:"atk",baseDamage:12,element:"fire",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_002:{id:"mg_002",cardTypeId:"mg_002",name:"",description:"3",cost:2,category:"atk",baseDamage:8,hitCount:3,element:"fire",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_003:{id:"mg_003",cardTypeId:"mg_003",name:"",description:"1",cost:2,category:"atk",baseDamage:18,element:"fire",applyEnemyDebuff:[{name:"burn",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_004:{id:"mg_004",cardTypeId:"mg_004",name:"",description:"20%",cost:2,category:"atk",baseDamage:16,penetration:.2,element:"fire",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_005:{id:"mg_005",cardTypeId:"mg_005",name:"",description:"2",cost:3,category:"atk",baseDamage:24,element:"fire",applyEnemyDebuff:[{name:"burn",stacks:2,duration:3}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_006:{id:"mg_006",cardTypeId:"mg_006",name:"",description:"+15%",cost:2,category:"atk",baseDamage:15,element:"fire",applyPlayerBuff:[{name:"atkUpMinor",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_007:{id:"mg_007",cardTypeId:"mg_007",name:"",description:"Guard+15",cost:2,category:"def",guardAmount:15,element:"fire",applyPlayerBuff:[{name:"reflect",stacks:1,duration:1}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_008:{id:"mg_008",cardTypeId:"mg_008",name:"",description:"0",cost:0,category:"atk",baseDamage:6,element:"fire",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_009:{id:"mg_009",cardTypeId:"mg_009",name:"",description:"",cost:1,category:"atk",baseDamage:11,element:"ice",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_010:{id:"mg_010",cardTypeId:"mg_010",name:"",description:"",cost:2,category:"atk",baseDamage:14,element:"ice",applyEnemyDebuff:[{name:"slow",stacks:1,duration:2}],tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_011:{id:"mg_011",cardTypeId:"mg_011",name:"",description:"2",cost:3,category:"atk",baseDamage:20,element:"ice",applyEnemyDebuff:[{name:"freeze",stacks:1,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_012:{id:"mg_012",cardTypeId:"mg_012",name:"",description:"25%",cost:2,category:"atk",baseDamage:17,penetration:.25,element:"ice",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_013:{id:"mg_013",cardTypeId:"mg_013",name:"",description:"Guard+20+15%",cost:2,category:"def",guardAmount:20,element:"ice",applyPlayerBuff:[{name:"defUpMinor",stacks:1,duration:2}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_014:{id:"mg_014",cardTypeId:"mg_014",name:"",description:"-15%",cost:1,category:"debuff",baseDamage:8,element:"ice",applyEnemyDebuff:[{name:"atkDownMinor",stacks:1,duration:2}],tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_015:{id:"mg_015",cardTypeId:"mg_015",name:"",description:"3",cost:3,category:"atk",baseDamage:10,hitCount:3,element:"ice",applyEnemyDebuff:[{name:"slow",stacks:2,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_016:{id:"mg_016",cardTypeId:"mg_016",name:"",description:"0",cost:0,category:"atk",baseDamage:5,element:"ice",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_017:{id:"mg_017",cardTypeId:"mg_017",name:"",description:"",cost:1,category:"atk",baseDamage:13,element:"lightning",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_018:{id:"mg_018",cardTypeId:"mg_018",name:"",description:"4",cost:2,category:"atk",baseDamage:6,hitCount:4,element:"lightning",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_019:{id:"mg_019",cardTypeId:"mg_019",name:"",description:"2",cost:3,category:"atk",baseDamage:22,element:"lightning",applyEnemyDebuff:[{name:"stun",stacks:1,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_020:{id:"mg_020",cardTypeId:"mg_020",name:"",description:"30%",cost:2,category:"atk",baseDamage:15,penetration:.3,element:"lightning",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_021:{id:"mg_021",cardTypeId:"mg_021",name:"",description:"",cost:2,category:"buff",baseDamage:10,element:"lightning",applyPlayerBuff:[{name:"haste",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_022:{id:"mg_022",cardTypeId:"mg_022",name:"",description:"",cost:2,category:"atk",baseDamage:14,isPreemptive:!0,element:"lightning",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_023:{id:"mg_023",cardTypeId:"mg_023",name:"",description:"Guard+15",cost:2,category:"def",guardAmount:15,element:"lightning",applyPlayerBuff:[{name:"reflect",stacks:1,duration:1}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_024:{id:"mg_024",cardTypeId:"mg_024",name:"",description:"0",cost:0,category:"atk",baseDamage:7,element:"lightning",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_025:{id:"mg_025",cardTypeId:"mg_025",name:"",description:"",cost:1,category:"atk",baseDamage:10,element:"dark",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_026:{id:"mg_026",cardTypeId:"mg_026",name:"",description:"3",cost:2,category:"atk",baseDamage:7,hitCount:3,element:"dark",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_027:{id:"mg_027",cardTypeId:"mg_027",name:"",description:"2",cost:2,category:"atk",baseDamage:16,element:"dark",applyEnemyDebuff:[{name:"curse",stacks:2,duration:3}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_028:{id:"mg_028",cardTypeId:"mg_028",name:"",description:"",cost:2,category:"atk",baseDamage:14,element:"dark",applyEnemyDebuff:[{name:"slow",stacks:2,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_029:{id:"mg_029",cardTypeId:"mg_029",name:"",description:"25%",cost:2,category:"atk",baseDamage:18,penetration:.25,element:"dark",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_030:{id:"mg_030",cardTypeId:"mg_030",name:"",description:"30%",cost:2,category:"atk",baseDamage:15,element:"dark",applyPlayerBuff:[{name:"lifesteal",stacks:1,duration:1}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_031:{id:"mg_031",cardTypeId:"mg_031",name:"",description:"Guard+18",cost:2,category:"def",guardAmount:18,element:"dark",applyPlayerBuff:[{name:"lifesteal",stacks:1,duration:1}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_032:{id:"mg_032",cardTypeId:"mg_032",name:"",description:"",cost:3,category:"atk",baseDamage:22,element:"dark",applyEnemyDebuff:[{name:"weakness",stacks:1,duration:3}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_033:{id:"mg_033",cardTypeId:"mg_033",name:"",description:"",cost:1,category:"atk",baseDamage:11,element:"light",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_034:{id:"mg_034",cardTypeId:"mg_034",name:"",description:"3",cost:2,category:"atk",baseDamage:6,hitCount:3,element:"light",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_035:{id:"mg_035",cardTypeId:"mg_035",name:"",description:"35%",cost:3,category:"atk",baseDamage:25,penetration:.35,element:"light",tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_036:{id:"mg_036",cardTypeId:"mg_036",name:"",description:"0",cost:0,category:"atk",baseDamage:5,element:"light",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_037:{id:"mg_037",cardTypeId:"mg_037",name:"",description:"HP+15",cost:1,category:"heal",healAmount:15,element:"light",tags:["skill"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_038:{id:"mg_038",cardTypeId:"mg_038",name:"",description:"Guard+20",cost:2,category:"def",guardAmount:20,element:"light",applyPlayerBuff:[{name:"regeneration",stacks:1,duration:2}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_039:{id:"mg_039",cardTypeId:"mg_039",name:"",description:"1HP+10",cost:2,category:"heal",healAmount:10,element:"light",applyPlayerBuff:[{name:"cleanse",stacks:1,duration:1}],tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_040:{id:"mg_040",cardTypeId:"mg_040",name:"",description:"2",cost:3,category:"buff",element:"light",applyPlayerBuff:[{name:"immunity",stacks:1,duration:2}],tags:["skill"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"}},Bh=Object.values(Cp),$i={swordsman:{sw_001:3,sw_003:2,sw_007:2,sw_013:2,sw_037:2,sw_039:2,sw_014:2},mage:{mg_001:3,mg_008:2,mg_009:2,mg_017:2,mg_033:2,mg_007:2,mg_037:2},summoner:{}};function jp(s){return $i[s]??$i.swordsman}const hs={1:8,2:16,3:24};function Hh(s){return s>=hs[3]?3:s>=hs[2]?2:s>=hs[1]?1:0}function Yh(s,r){const o=r.get(s.cardTypeId)??s.useCount,u=Hh(o);return{...s,useCount:o,masteryLevel:u}}function Ih(s,r){return s.map(o=>Yh(o,r))}const gs={easeInQuad:s=>s*s,easeOutQuad:s=>s*(2-s),easeInCubic:s=>s*s*s,easeOutCubic:s=>--s*s*s+1,easeOutBack:s=>1+2.70158*Math.pow(s-1,3)+1.70158*Math.pow(s-1,2)},Qh=({element:s,duration:r,easing:o=gs.easeOutCubic,from:u={},to:m,onProgress:f,onComplete:h})=>{const b=performance.now();let p,v=!1;const g=j=>{if(v)return;const q=j-b,T=Math.min(q/r,1),D=o(T);Object.entries(m).forEach(([U,C])=>{const k=U,w=u[k],x=Ph(w||"0",C,D);s.style.setProperty(String(k),x)}),f?.(D),T<1?p=requestAnimationFrame(g):h?.()};return p=requestAnimationFrame(g),()=>{v=!0,cancelAnimationFrame(p)}},Ph=(s,r,o)=>{const u=s.match(/^(-?\d+\.?\d*)(.*)$/),m=r.match(/^(-?\d+\.?\d*)(.*)$/);if(u&&m){const f=parseFloat(u[1]),h=parseFloat(m[1]),b=m[2];return`${f+(h-f)*o}${b}`}return r},pl=s=>new Promise(r=>{Qh({...s,onComplete:()=>{s.onComplete?.(),r()}})}),vu=({container:s,x:r,y:o,count:u=20,color:m="#fff",size:f=4,duration:h=1e3,spread:b=100,gravity:p=.5})=>{for(let v=0;v<u;v++){const g=document.createElement("div");g.style.position="absolute",g.style.left=`${r}px`,g.style.top=`${o}px`,g.style.width=`${f}px`,g.style.height=`${f}px`,g.style.backgroundColor=m,g.style.borderRadius="50%",g.style.pointerEvents="none",g.style.zIndex="9999",g.style.boxShadow=`0 0 ${f*2}px ${m}`,s.appendChild(g);const j=Math.PI*2*v/u,q=Math.random()*b+b/2,T=Math.cos(j)*q;let U=Math.sin(j)*q-b/2;const C=performance.now(),k=w=>{const x=w-C,B=x/h;if(B>=1){g.remove();return}U+=p;const z=r+T*x*.05,$=o+U*x*.05,K=1-B;g.style.left=`${z}px`,g.style.top=`${$}px`,g.style.opacity=`${K}`,requestAnimationFrame(k)};requestAnimationFrame(k)}},bu=({container:s,x:r,y:o,value:u,color:m="#ff4444",fontSize:f=32,duration:h=1500,isCritical:b=!1})=>{const p=document.createElement("div");p.textContent=b?`${u}!!!`:`${u}`,p.style.position="absolute",p.style.left=`${r}px`,p.style.top=`${o}px`,p.style.fontSize=`${f}px`,p.style.fontWeight="bold",p.style.color=m,p.style.pointerEvents="none",p.style.zIndex="9999",p.style.textShadow=`0 0 10px ${m}, 0 0 20px ${m}`,p.style.fontFamily="monospace",p.style.userSelect="none",p.style.transform="translate(-50%, -50%)",b&&(p.style.fontSize=`${f*1.5}px`,p.style.animation="shake 0.3s"),s.appendChild(p);const v=performance.now(),g=o,j=q=>{const D=(q-v)/h;if(D>=1){p.remove();return}const U=g-100*D,C=1-D,k=1+D*.5;p.style.top=`${U}px`,p.style.opacity=`${C}`,p.style.transform=`translate(-50%, -50%) scale(${k})`,requestAnimationFrame(j)};requestAnimationFrame(j)},lp=(s,r=10,o=300)=>{const u=s.style.transform||"",m=performance.now(),f=h=>{const p=(h-m)/o;if(p>=1){s.style.transform=u;return}const v=(Math.random()-.5)*r*(1-p),g=(Math.random()-.5)*r*(1-p);s.style.transform=`${u} translate(${v}px, ${g}px)`,requestAnimationFrame(f)};requestAnimationFrame(f)},$h=()=>{const[s,r]=S.useState([]),[o,u]=S.useState(new Set);return{drawCardsWithAnimation:async(D,U,C=150)=>{const k=new Set(D.map(B=>B.id));u(B=>new Set([...B,...k])),U(D);const x=800+(D.length-1)*C;await new Promise(B=>setTimeout(B,x)),u(B=>{const z=new Set(B);return D.forEach($=>z.delete($.id)),z})},discardCardsWithAnimation:async(D,U=100,C)=>{if(D.length===0){C&&C();return}const k=[...D].reverse();for(let w=0;w<k.length;w++){const x=k[w];r(B=>[...B,x]),w<k.length-1&&await new Promise(B=>setTimeout(B,U))}await new Promise(w=>setTimeout(w,500)),r([]),C&&C()},applyDrawAnimation:async D=>{const U=D.closest(".battle-screen");if(!U)return;const C=U.getBoundingClientRect(),k=D.getBoundingClientRect(),w=C.width-100,x=C.height-150,B=k.left-C.left,z=k.top-C.top;D.style.position="absolute",D.style.left=`${w}px`,D.style.top=`${x}px`,D.style.opacity="0",D.style.transform="scale(0.1) rotate(20deg)",D.style.zIndex="100",await pl({element:D,duration:600,easing:gs.easeOutBack,to:{left:`${B}px`,top:`${z}px`,opacity:"1",transform:"scale(1) rotate(0deg)"}}),D.style.position="",D.style.left="",D.style.top="",D.style.zIndex=""},applyDiscardAnimation:async D=>{const U=D.closest(".battle-screen");if(!U)return;const C=U.getBoundingClientRect(),k=D.getBoundingClientRect(),w=k.left-C.left,x=k.top-C.top,B=100,z=C.height-150;D.style.position="absolute",D.style.left=`${w}px`,D.style.top=`${x}px`,D.style.zIndex="100",vu({container:U,x:w+80,y:x+100,count:10,color:"rgba(100, 100, 255, 0.6)",size:3,spread:50}),await pl({element:D,duration:500,easing:gs.easeInCubic,to:{left:`${B}px`,top:`${z}px`,opacity:"0",transform:"scale(0.1) rotate(-25deg)"}})},playCardWithAnimation:async(D,U,C)=>{const k=D.closest(".battle-screen");if(!k){C();return}const w=k.getBoundingClientRect(),x=D.getBoundingClientRect(),B=U.getBoundingClientRect(),z=x.left-w.left,$=x.top-w.top,K=B.left-w.left+B.width/2,ae=B.top-w.top+B.height/2,le=D.cloneNode(!0);le.style.position="absolute",le.style.left=`${z}px`,le.style.top=`${$}px`,le.style.zIndex="200",le.style.pointerEvents="none",k.appendChild(le),D.style.opacity="0";const M=setInterval(()=>{const H=le.cloneNode(!0);H.style.opacity="0.3",H.style.filter="blur(2px)",H.style.zIndex="199",k.appendChild(H),setTimeout(()=>{H.remove()},200)},50);await pl({element:le,duration:400,easing:gs.easeInQuad,to:{left:`${K}px`,top:`${ae}px`,transform:"scale(0.5) rotate(360deg)",opacity:"0.8"}}),clearInterval(M),vu({container:k,x:K,y:ae,count:30,color:"rgba(255, 200, 100, 0.8)",size:5,spread:150,gravity:1}),lp(U,15,300),le.remove(),D.style.opacity="",C()},showDamageEffect:(D,U,C=!1)=>{const k=D.closest(".battle-screen");if(!k)return;const w=k.getBoundingClientRect(),x=D.getBoundingClientRect(),B=x.left-w.left+x.width/2,z=x.top-w.top+x.height/2;bu({container:k,x:B,y:z,value:U,color:C?"#ff6600":"#ff4444",isCritical:C}),lp(D,C?20:10,300),vu({container:k,x:B,y:z,count:C?40:20,color:C?"#ff6600":"#ff4444",size:C?6:4,spread:C?200:100})},showHealEffect:(D,U)=>{const C=D.closest(".battle-screen");if(!C)return;const k=C.getBoundingClientRect(),w=D.getBoundingClientRect(),x=w.left-k.left+w.width/2,B=w.top-k.top+w.height/2;bu({container:C,x,y:B,value:U,color:"#44ff44"});for(let z=0;z<20;z++)setTimeout(()=>{const $=document.createElement("div");$.style.position="absolute",$.style.left=`${x+(Math.random()-.5)*100}px`,$.style.top=`${B+50}px`,$.style.width="8px",$.style.height="8px",$.style.backgroundColor="#44ff44",$.style.borderRadius="50%",$.style.pointerEvents="none",$.style.zIndex="9999",$.style.boxShadow="0 0 10px #44ff44",C.appendChild($),pl({element:$,duration:1e3,easing:gs.easeOutQuad,to:{top:`${B-100}px`,opacity:"0"}}).then(()=>{$.remove()})},z*30)},showShieldEffect:(D,U)=>{const C=D.closest(".battle-screen");if(!C)return;const k=C.getBoundingClientRect(),w=D.getBoundingClientRect(),x=w.left-k.left+w.width/2,B=w.top-k.top+w.height/2;bu({container:C,x,y:B,value:U,color:"#4488ff",fontSize:28});const z=document.createElement("div");z.style.position="absolute",z.style.left=`${x}px`,z.style.top=`${B}px`,z.style.width="20px",z.style.height="20px",z.style.border="3px solid #4488ff",z.style.borderRadius="50%",z.style.pointerEvents="none",z.style.zIndex="9999",z.style.transform="translate(-50%, -50%)",z.style.boxShadow="0 0 20px #4488ff",C.appendChild(z),pl({element:z,duration:800,easing:gs.easeOutQuad,to:{width:"200px",height:"200px",opacity:"0"}}).then(()=>{z.remove()})},isNewCard:D=>o.has(D),getDiscardingCards:()=>s}},Xh=()=>{const[s,r]=S.useState(""),[o,u]=S.useState(!1);return{turnMessage:s,showTurnMessage:o,showMessage:(h,b=5e3,p)=>{r(h),u(!0),setTimeout(()=>{u(!1),p&&p()},b)},hideMessage:()=>{u(!1),r("")}}},xu=5,Vh=.3,wu=15,Jh=10;function ip(s,r){const o=r.varianceHistory.length>0?r.varianceHistory.reduce((v,g)=>v+g,0)/r.varianceHistory.length:0,u=(Math.random()-.5)*2*xu,m=-o*Vh,f=u+m,h=Math.max(-xu,Math.min(xu,f)),b=Math.round(s*(1+h/100)),p=[...r.varianceHistory,h].slice(-5);return{speed:Math.max(0,b),newRandomState:{varianceHistory:p}}}function Zh(s){return s<wu?1:2+Math.floor((s-wu)/Jh)}const Kh=8;function Fh(s,r,o,u){const m=[];if(u<wu)m.push(s,r);else{for(let f=0;f<o;f++)m.push(s);m.push(r)}return m}function Wh(s,r){const o=Math.abs(s-r),u=s>=r?"player":"enemy",m=u==="player"?"enemy":"player",f=Zh(o),h=Fh(u,m,f,o),b=[];for(;b.length<Kh;)b.push(...h);return{queue:{phases:b,currentIndex:0},playerSpeed:s,enemySpeed:r,speedDifference:o,consecutivePhases:f,fasterActor:u}}function zi(){return{varianceHistory:[]}}function e0(s){let r=50;if(s.has("haste")){const o=s.get("haste");r+=o.value}if(s.has("superFast")){const o=s.get("superFast");r+=o.value}if(s.has("slow")){const o=s.get("slow");r-=o.value}if(s.has("stall")){const o=s.get("stall");r-=o.value}return Math.max(0,r)}function a0(s,r){let o=s.baseSpeed;if(r.has("haste")){const u=r.get("haste");o+=u.value}else if(r.has("superFast")){const u=r.get("superFast");o+=u.value}else if(r.has("slow")){const u=r.get("slow");o-=u.value}else if(r.has("stall")){const u=r.get("stall");o-=u.value}return Math.max(0,o)}function t0(s){const[r,o]=S.useState(null),[u,m]=S.useState(0),[f,h]=S.useState(1),[b,p]=S.useState(!1),[v,g]=S.useState(!1),[j,q]=S.useState(s),[T,D]=S.useState(0),[U,C]=S.useState(zi()),[k,w]=S.useState(zi()),x=S.useCallback((F,de,ce)=>{const L=e0(F),Z=de?a0(de,ce):0,V=ip(L,U),W=ip(Z,k);C(V.newRandomState),w(W.newRandomState),q(V.speed),D(W.speed);const re=Wh(V.speed,W.speed);return o(re.queue),m(0),re.queue},[U,k]),B=S.useCallback(()=>{m(F=>F+1)},[]),z=S.useCallback(F=>{m(F)},[]),$=S.useCallback(()=>{p(!0),g(!1)},[]),K=S.useCallback(()=>{p(!1),g(!0)},[]),ae=S.useCallback(()=>{p(!1),g(!1)},[]),le=S.useCallback(()=>{h(F=>F+1)},[]),be=S.useCallback(()=>{o(null),m(0),h(1),p(!1),g(!1),C(zi()),w(zi())},[]),M=S.useCallback(()=>r?u>=r.phases.length:!0,[r,u]),H=S.useCallback(()=>!r||u>=r.phases.length?null:r.phases[u],[r,u]);return{phaseQueue:r,currentPhaseIndex:u,phaseCount:f,isPlayerPhase:b,isEnemyPhase:v,playerSpeed:j,enemySpeed:T,generatePhaseQueueFromSpeeds:x,advancePhaseIndex:B,setPhaseIndex:z,setPlayerPhaseActive:$,setEnemyPhaseActive:K,clearActivePhase:ae,incrementPhaseCount:le,resetPhaseState:be,isRoundComplete:M,getCurrentActor:H}}const ye={bleed:{name:"Bleed",nameJa:"",value:3,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`${ye.bleed.value}% maxHP damage per card use`},poison:{name:"Poison",nameJa:"",value:5,isDebuff:!0,isPercentage:!1,stackable:!0,description:()=>`${ye.poison.value} damage at turn end`},burn:{name:"Burn",nameJa:"",value:3,isDebuff:!0,isPercentage:!1,stackable:!0,description:()=>`${ye.burn.value} damage at turn end`},curse:{name:"Curse",nameJa:"",value:20,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`Healing -${ye.curse.value}%`},overCurse:{name:"Heavy Curse",nameJa:"",value:50,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`Healing -${ye.overCurse.value}%`},stagger:{name:"stagger",nameJa:"",value:100,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>"Cannot act"},stun:{name:"Stun",nameJa:"",value:100,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>"Skip next turn"},freeze:{name:"Freeze",nameJa:"",value:100,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>"Cannot act (ice)"},atkDownMinor:{name:"Minor Atk Down",nameJa:"",value:15,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Attack -${ye.atkDownMinor.value}%`},atkDownMajor:{name:"Major Atk Down",nameJa:"",value:30,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Attack -${ye.atkDownMajor.value}%`},defDownMinor:{name:"Minor Def Down",nameJa:"",value:15,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Defense -${ye.defDownMinor.value}%`},defDownMajor:{name:"Major Def Down",nameJa:"",value:30,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Defense -${ye.defDownMajor.value}%`},weakness:{name:"Weakness",nameJa:"",value:20,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`All stats -${ye.weakness.value}%`},prostoration:{name:"Prostoration",nameJa:"",value:50,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`All stats -${ye.prostoration.value}%`},slow:{name:"Slow",nameJa:"",value:10,isDebuff:!0,isPercentage:!1,stackable:!0,description:()=>`Speed -${ye.slow.value}`},stall:{name:"Stall",nameJa:"",value:15,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`Speed -${ye.stall.value}`},atkUpMinor:{name:"Minor Atk Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Attack +${ye.atkUpMinor.value}%`},atkUpMajor:{name:"Major Atk Up",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Attack +${ye.atkUpMajor.value}%`},defUpMinor:{name:"Minor Def Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Defense +${ye.defUpMinor.value}%`},defUpMajor:{name:"Major Def Up",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Defense +${ye.defUpMajor.value}%`},penetrationUp:{name:"Penetration Up",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Penetration +${ye.penetrationUp.value}%`},hitRateUp:{name:"Hit Rate Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Hit rate +${ye.hitRateUp.value}%`},criticalUp:{name:"Critical Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Critical damage +${ye.criticalUp.value}%`},haste:{name:"Haste",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Speed +${ye.haste.value}`},superFast:{name:"Super Fast",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Speed +${ye.superFast.value}`},regeneration:{name:"Regeneration",nameJa:"",value:5,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>`Heal ${ye.regeneration.value} HP per turn`},shieldRegen:{name:"Iron Stance",nameJa:"",value:5,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>`Guard +${ye.shieldRegen.value} per turn`},reflect:{name:"Reflect",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Reflect ${ye.reflect.value}% damage`},immunity:{name:"Immunity",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Immune to damage"},energyRegen:{name:"Energy Regen",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>`Energy +${ye.energyRegen.value}`},drawPower:{name:"Draw Power",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Draw +1 card"},costReduction:{name:"Cost Reduction",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Cost -1"},lifesteal:{name:"Lifesteal",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Heal ${ye.lifesteal.value}% of damage dealt`},doubleStrike:{name:"Double Strike",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>"Next ATK card triggers twice"},swordEnergyGain:{name:"Sword Energy Amp",nameJa:"",value:3,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Sword energy gain +${ye.swordEnergyGain.value}%`},elementalMastery:{name:"Elemental Mastery",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Elemental damage +${ye.elementalMastery.value}%`},fireField:{name:"Fire Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Fire card effects +${ye.fireField.value}%`},electroField:{name:"Electric Field",nameJa:"",value:10,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`+${ye.electroField.value} damage per lightning card`},iceField:{name:"Ice Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Ice damage +${ye.iceField.value}%`},darkField:{name:"Dark Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Dark damage +${ye.darkField.value}%`},lightField:{name:"Light Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Light damage +${ye.lightField.value}%`},summonPower:{name:"Summon Power",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Summon power +${ye.summonPower.value}%`},sacrificeBonus:{name:"Sacrifice Bonus",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Sacrifice effect +${ye.sacrificeBonus.value}%`},focus:{name:"Focus",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Next card effect +${ye.focus.value}%`},momentum:{name:"Momentum",nameJa:"",value:5,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Attack +${ye.momentum.value}% per card used`},cleanse:{name:"Cleanse",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Remove 1 debuff at turn end"},tenacity:{name:"Tenacity",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`All stats +${ye.tenacity.value}% when HP < 30%`},lastStand:{name:"Last Stand",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Survive lethal damage once"}},n0={burn:"",bleed:"",poison:"",curse:"",overCurse:"",stagger:"",stun:"",freeze:"",atkDownMinor:"",atkDownMajor:"",defDownMinor:"",defDownMajor:"",weakness:"",prostoration:"",slow:"",stall:"",atkUpMinor:"",atkUpMajor:"",defUpMinor:"",defUpMajor:"",penetrationUp:"",hitRateUp:"",criticalUp:"",haste:"",superFast:"",regeneration:"",shieldRegen:"",reflect:"",immunity:"",energyRegen:"",drawPower:"",costReduction:"",lifesteal:"",doubleStrike:"",swordEnergyGain:"",elementalMastery:"",fireField:"",electroField:"",iceField:"",darkField:"",lightField:"",summonPower:"",sacrificeBonus:"",focus:"",momentum:"",cleanse:"",tenacity:"",lastStand:""};function s0(s){let r=1;if(s.has("atkUpMinor")){const o=s.get("atkUpMinor");r+=o.value/100}if(s.has("atkUpMajor")){const o=s.get("atkUpMajor");r+=o.value/100}if(s.has("momentum")){const o=s.get("momentum");r+=o.value/100*o.stacks}if(s.has("atkDownMinor")){const o=s.get("atkDownMinor");r*=1-o.value/100}if(s.has("atkDownMajor")){const o=s.get("atkDownMajor");r*=1-o.value/100}return r}function l0(s){let r=1,o=1;if(s.has("defUpMinor")){const u=s.get("defUpMinor");o*=1-u.value/100}if(s.has("defUpMajor")){const u=s.get("defUpMajor");o*=1-u.value/100}if(s.has("defDownMinor")){const u=s.get("defDownMinor");r*=1+u.value/100}if(s.has("defDownMajor")){const u=s.get("defDownMajor");r*=1+u.value/100}if(s.has("tenacity")){const u=s.get("tenacity");r>1&&(r=1+(r-1)*(1-u.value/100))}return{vulnerabilityMod:r,damageReductionMod:o}}function i0(s){let r=.1;if(s.has("criticalUp")){const o=s.get("criticalUp");r+=o.value/100}return Math.min(.8,r)}function c0(s,r){let o=0;if(s.has("reflect")){const u=s.get("reflect");o=Math.floor(r*(u.value/100))}return o}const Ep=s=>{let r=0,o=0;return s.forEach(u=>{switch(u.name){case"regeneration":r+=u.value*u.stacks;break;case"shieldRegen":o+=u.value*u.stacks;break}}),s.has("curse")&&(r=Math.floor(r*.2)),s.has("overCurse")&&(r=Math.floor(r*.5)),{hp:r,shield:o}};function r0(s,r){let o=0;if(s.has("lifesteal")){const u=s.get("lifesteal");o=Math.floor(r*(u.value/100))}return o}const _p=s=>{let r=0;return s.forEach(o=>{switch(o.name){case"burn":r+=o.value,s.has("fireField")&&(r+=o.value*.5);break;case"poison":r+=o.value;break}}),r},u0=s=>!s.has("stun"),o0=s=>{let r=0;return s.forEach(o=>{o.name==="drawPower"&&(r+=o.value*o.stacks)}),r};function cp(s,r,o="environment"){const u=ye[s.name];return{name:s.name,stacks:u.stackable?s.stacks:1,duration:s.duration,value:u.value,isPermanent:s.isPermanent??!1,source:r,appliedBy:o}}const Mu=(s,r,o,u,m,f=!1,h,b="environment")=>{const p=new Map(s),v=p.get(r);return v?p.set(r,{...v,stacks:v.stacks+m,duration:Math.max(v.duration,o),value:Math.max(v.value,u)}):p.set(r,{name:r,stacks:m,duration:o,value:u,isPermanent:f,source:h,appliedBy:b}),p},d0=s=>{const r=new Map;return s.forEach((o,u)=>{ye[u].isDebuff||r.set(u,o)}),r},Dp=(s,r)=>{const o=new Map;return s.forEach((u,m)=>{if(u.isPermanent){o.set(m,u);return}(u.appliedBy??"environment")===r?u.duration>1&&o.set(m,{...u,duration:u.duration-1}):o.set(m,u)}),o};function m0(s){const{playerBuffs:r,drawPile:o,discardPile:u,baseDrawCount:m=5}=s;let f=Dp(r,"player");const{hp:h,shield:b}=Ep(r),p=r.has("cleanse");p&&(f=d0(f));const v=o0(r),g=m+v,{drawnCards:j,newDrawPile:q,newDiscardPile:T}=Np(g,o,u),D=T.length===0&&u.length>0;return{newBuffs:f,shouldCleanse:p,healAmount:h,shieldAmount:b,drawCount:g,drawnCards:j,newDrawPile:q,newDiscardPile:T,needsShuffle:D}}function f0(s){const{playerBuffs:r}=s,o=_p(r);let u=new Map(r);if(u.has("momentum")){const m=u.get("momentum");u.set("momentum",{...m,stacks:m.stacks+1})}return{dotDamage:o,newBuffs:u}}function p0(s,r,o){return Math.min(o,r+s)}const rp=new Map;function Tu(s,r,o){const u=o.baseDamage||0,m=s.buffDebuffs??rp,f=r.buffDebuffs??rp,h=s0(m);let b=1,p=!1;if(m.has("criticalUp")){const U=i0(m);if(p=Math.random()<U,p){b=1.5;const C=m.get("criticalUp");b+=C.value/100}}const v=Math.floor(u*h*b),{vulnerabilityMod:g,damageReductionMod:j}=l0(f),q=Math.floor(v*g*j),T=c0(f,q),D=r0(m,q);return{finalDamage:q,isCritical:p,reflectDamage:T,lifestealAmount:D}}function wp(s,r,o=!1){let u=r,m=0,f=0,h=0;if(s.guard>0){if(s.guard>=u&&s.ap<=0)return m=u,h=Math.floor(u*.75),u=0,{guardDamage:m,apDamage:f,hpDamage:h};if(s.guard>=u)return m=u,u=0,{guardDamage:m,apDamage:0,hpDamage:0};m=s.guard,u-=s.guard}if(s.ap>0){if(s.ap>=u)return f=u,u=0,{guardDamage:m,apDamage:f,hpDamage:0};f=s.ap,u-=s.ap}return u>0&&(h=u),{guardDamage:m,apDamage:f,hpDamage:h}}function Yu(s,r){return r.has("bleed")?Math.floor(s*.05):0}const Mp={id:"depth1_hound",name:"Corrupted Hound",nameJa:"",description:"",baseMaxHp:40,baseMaxAp:0,baseSpeed:40,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:7,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"debuff",baseDamage:7,applyDebuffs:[{name:"poison",stacks:1,duration:2,value:3,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:7,displayIcon:"",priority:0,energyCost:1},probability:.5},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:7,applyDebuffs:[{name:"poison",stacks:1,duration:2,value:3,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.5}]},Tp={id:"depth1_crow",name:"Mutated Carrion Crow",nameJa:"",description:"",baseMaxHp:35,baseMaxAp:0,baseSpeed:55,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:0,action:{name:"",type:"attack",baseDamage:5,hitCount:2,displayIcon:"",priority:0,energyCost:1},probability:.8},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:3,applyDebuffs:[{name:"defDownMajor",stacks:1,duration:3,value:30,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.2}]},Ap={id:"depth1_skeleton",name:"Bone Wanderer",nameJa:"",description:"",baseMaxHp:38,baseMaxAp:0,baseSpeed:35,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:6,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"attack",baseDamage:6,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:3,action:{name:"",type:"debuff",baseDamage:10,applyDebuffs:[{name:"slow",stacks:1,duration:1,value:10,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:6,displayIcon:"",priority:0,energyCost:1}}]},kp={id:"depth1_shadow",name:"Shadow Crawler",nameJa:"",description:"",baseMaxHp:25,baseMaxAp:0,baseSpeed:60,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"debuff",baseDamage:6,applyDebuffs:[{name:"atkDownMinor",stacks:1,duration:3,value:15,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1},probability:.5},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:6,applyDebuffs:[{name:"atkDownMinor",stacks:1,duration:3,value:15,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.5}]},qp={id:"depth1_flesh_eater",name:"Flesh Eater",nameJa:"",description:"",baseMaxHp:18,baseMaxAp:0,baseSpeed:45,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:0,condition:(s,r)=>s>r*.5,action:{name:"",type:"attack",baseDamage:5,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s<=r*.5,action:{name:"",type:"attack",baseDamage:7,displayIcon:"",priority:1,energyCost:1}}]},Rp={id:"depth1_rusty_swordsman",name:"Rusty Swordsman",nameJa:"",description:"",baseMaxHp:30,baseMaxAp:0,baseSpeed:50,startingGuard:!0,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:3,action:{name:"",type:"attack",baseDamage:6,hitCount:2,displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}}]},Gp={id:"depth1_poison_spider",name:"Poison Spider",nameJa:"",description:"",baseMaxHp:28,baseMaxAp:0,baseSpeed:48,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:4,applyDebuffs:[{name:"poison",stacks:1,duration:1,value:3,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.8},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:2,applyDebuffs:[{name:"stun",stacks:1,duration:1,value:0,isPermanent:!1}],displayIcon:"",priority:2,energyCost:1},probability:.2}]},zp={id:"depth1_boss",name:"Fallen Guardian",nameJa:"",description:"",baseMaxHp:120,baseMaxAp:0,baseSpeed:55,startingGuard:!0,actEnergy:1,aiPatterns:[{phaseNumber:1,condition:(s,r)=>s>r*.66,action:{name:"",type:"attack",baseDamage:12,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,condition:(s,r)=>s>r*.66,action:{name:"",type:"buff",baseDamage:0,guardGain:20,displayIcon:"",priority:1,energyCost:1}},{phaseNumber:3,condition:(s,r)=>s>r*.66,action:{name:"",type:"attack",baseDamage:15,displayIcon:"",priority:2,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s>r*.66,action:{name:"",type:"attack",baseDamage:12,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s>r*.34&&s<=r*.65,action:{name:"",type:"debuff",baseDamage:12,applyDebuffs:[{name:"bleed",stacks:1,duration:2,value:5,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s<=r*.33,action:{name:"",type:"attack",baseDamage:18,displayIcon:"",priority:2,energyCost:1},probability:.5}]},fs={normal:[Mp,Tp,Ap,kp],groups:[{enemy:qp,count:3},{enemy:Rp,count:2},{enemy:Gp,count:4}],boss:zp},y0=[Mp,Tp,Ap,kp,qp,Rp,Gp,zp];function Ki(s,r,o,u,m){const f=s.aiPatterns?.filter(g=>{const j=g.phaseNumber===0||g.phaseNumber===u,q=!g.condition||g.condition(r,o);return j&&q});if(f.length===0)return{name:"",type:"attack",baseDamage:5};let h=0;const b=f.map(g=>{const j=g.probability??1;return h+=j,{pattern:g,probability:j}}),p=Math.random()*h;let v=0;for(const{pattern:g,probability:j}of b)if(v+=j,p<=v)return g.action;return f[0].action}function g0(s){const r=s.baseDamage&&s.baseDamage>0?["attack"]:["skill"];return{id:`enemy_action_${s.name}`,cardTypeId:`enemy_action_${s.name}`,name:s.name,description:"",characterClass:"common",cost:0,category:"atk",baseDamage:s.baseDamage,tags:r,rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,applyEnemyDebuff:s.applyDebuffs?.map(o=>({name:o.name,stacks:o.stacks,duration:o.duration,value:o.value,isPermanent:o.isPermanent}))}}function Up(s,r="normal"){if(s!==1)throw new Error(`Depth ${s} enemies are not implemented yet`);switch(r){case"normal":return{enemies:[fs.normal[Math.floor(Math.random()*fs.normal.length)]],isBoss:!1};case"group":{const o=fs.groups[Math.floor(Math.random()*fs.groups.length)];return{enemies:Array(o.count).fill(o.enemy),isBoss:!1}}case"boss":return{enemies:[fs.boss],isBoss:!0};default:return{enemies:[fs.normal[0]],isBoss:!1}}}function h0(s){const{enemy:r,enemyBuffs:o}=s,u=Dp(o,"enemy"),{hp:m,shield:f}=Ep(o),h=r.startingGuard?Math.floor(r.baseMaxAp*.5):0,b=r.actEnergy,p=u0(o);return{newBuffs:u,healAmount:m,shieldAmount:f,guardReset:h,energyReset:b,canPerformAction:p}}function v0(s){const{enemyBuffs:r}=s;return{dotDamage:_p(r)}}function Op(s,r,o){if(o.guardGain&&o.guardGain>0&&!o.baseDamage)return{totalDamage:0,guardDamage:0,apDamage:0,hpDamage:0,isCritical:!1,reflectDamage:0};const u=g0(o),m=Tu(s,r,u),f=wp(r,m.finalDamage);return{totalDamage:m.finalDamage,guardDamage:f.guardDamage,apDamage:f.apDamage,hpDamage:f.hpDamage,isCritical:m.isCritical,reflectDamage:m.reflectDamage}}function Lp(s,r){if(r.length===0)return s;let o=s;return r.forEach(u=>{o=Mu(o,u.name,u.duration,u.value,u.stacks,u.isPermanent,u.source,"enemy")}),o}const Hi=(s,r,o)=>Math.min(o,r+s);async function Bp(s,r,o,u,m,f,h){let b=m;const p=[];for(;b>0;){const v=Ki(s,r,o,u),g=v.energyCost??1;if(g>b){const j=Hp(b);j&&p.push(j);break}p.push(v),b-=g}for(let v=0;v<p.length&&!(h()||(await f(p[v]),v<p.length-1&&await b0(800),h()));v++);}function Hp(s){return s>=1?{name:"",type:"attack",baseDamage:5,displayIcon:"",priority:0,energyCost:1}:null}function b0(s){return new Promise(r=>setTimeout(r,s))}function Au(s,r,o,u){const m=s.actEnergy,f=[];let h=m;for(;h>0;){const b=Ki(s,r,o,u),p=b.energyCost??1;if(p>h){const v=Hp(h);v&&f.push(v);break}f.push(b),h-=p}return f}function x0(){const s=S.useCallback(async o=>{await new Promise(m=>o.showMessage("Player Phase",2500,m)),o.phaseState.setPlayerPhaseActive(),o.phaseState.incrementPhaseCount();const u=m0({playerBuffs:o.playerBuffs,drawPile:o.deckStateRef.current.drawPile,discardPile:o.deckStateRef.current.discardPile});o.setPlayerGuard(0),o.setPlayerEnergy(o.maxEnergy),o.setPlayerBuffs(u.newBuffs),u.healAmount>0&&(o.setPlayerHp(m=>p0(u.healAmount,m,o.playerMaxHp)),o.playerRef.current&&o.showHealEffect(o.playerRef.current,u.healAmount),await new Promise(m=>setTimeout(m,500))),u.shieldAmount>0&&(o.setPlayerGuard(m=>m+u.shieldAmount),o.playerRef.current&&o.showShieldEffect(o.playerRef.current,u.shieldAmount),await new Promise(m=>setTimeout(m,500))),o.drawnCardsRef.current=u.drawnCards,o.dispatch({type:"SET_PILES",newDrawPile:u.newDrawPile,newDiscardPile:u.newDiscardPile}),u.needsShuffle?o.setIsShuffling(!0):u.drawnCards.length>0&&o.setIsDrawingAnimation(!0)},[]),r=S.useCallback(async o=>{await new Promise(p=>o.showMessage("Enemy Phase",2500,p)),o.phaseState.setEnemyPhaseActive(),o.phaseState.incrementPhaseCount();const u=h0({enemy:o.currentEnemy,enemyBuffs:o.enemyBuffs});if(o.setEnemyGuard(u.guardReset),o.setEnemyEnergy(u.energyReset),o.setEnemyBuffs(u.newBuffs),u.healAmount>0&&(o.setEnemyHp(p=>Hi(u.healAmount,p,o.enemyMaxHp)),await new Promise(p=>setTimeout(p,500))),u.shieldAmount>0&&(o.setEnemyGuard(p=>p+u.shieldAmount),await new Promise(p=>setTimeout(p,500))),!u.canPerformAction){await new Promise(p=>setTimeout(p,1500)),o.phaseState.clearActivePhase();return}await new Promise(p=>setTimeout(p,800));const m=()=>o.playerHp<=0||o.enemyHp<=0,f=async p=>{if(p.guardGain&&p.guardGain>0&&!p.baseDamage){o.setEnemyGuard(j=>j+p.guardGain);return}const v=p.hitCount||1;for(let j=0;j<v;j++){const q=Op(o.enemyStats,o.playerStats,p);if(o.setPlayerGuard(T=>Math.max(0,T-q.guardDamage)),o.setPlayerAp(T=>Math.max(0,T-q.apDamage)),o.setPlayerHp(T=>Math.max(0,T-q.hpDamage)),o.playerRef.current&&o.showDamageEffect(o.playerRef.current,q.totalDamage,!1),q.reflectDamage>0){o.setEnemyHp(D=>Math.max(0,D-q.reflectDamage));const T=o.getTargetEnemyRef();T&&o.showDamageEffect(T,q.reflectDamage,!1)}o.setBattleStats(T=>({...T,damageTaken:T.damageTaken+q.totalDamage})),j<v-1&&await new Promise(T=>setTimeout(T,500))}if(p.applyDebuffs&&p.applyDebuffs.length>0){const j=Lp(o.playerBuffs,p.applyDebuffs);o.setPlayerBuffs(j)}const g=Yu(o.enemyMaxHp,o.enemyBuffs);if(g>0){o.setEnemyHp(q=>Math.max(0,q-g));const j=o.getTargetEnemyRef();j&&o.showDamageEffect(j,g,!1),await new Promise(q=>setTimeout(q,300))}},h=o.enemies[0]?.turnCount??1;await Bp(o.currentEnemy,o.enemyHp,o.enemyMaxHp,h,o.enemyEnergy,f,m),await new Promise(p=>setTimeout(p,800));const b=v0({enemyBuffs:o.enemyBuffs});if(b.dotDamage>0){o.setEnemyHp(v=>Math.max(0,v-b.dotDamage));const p=o.getTargetEnemyRef();p&&o.showDamageEffect(p,b.dotDamage,!1),await new Promise(v=>setTimeout(v,500))}o.phaseState.clearActivePhase()},[]);return{executePlayerPhase:s,executeEnemyPhase:r}}function S0(s){return""}function N0(s){return""}function C0(s){return""}const j0=()=>[{...tn.sw_001,id:"deck_sw_001_1"},{...tn.sw_001,id:"deck_sw_001_2"},{...tn.sw_002,id:"deck_sw_002_1"},{...tn.sw_002,id:"deck_sw_002_2"},{...tn.sw_003,id:"deck_sw_003_1"}],Ea={playerClass:"swordsman",classGrade:S0(),level:1,hp:100,maxHp:110,ap:30,maxAp:30,guard:0,speed:50,cardActEnergy:3,gold:0,deck:j0(),equipment:[],buffDebuffs:new Map,equipmentAtkPercent:0,equipmentDefPercent:0},E0={playerClass:"mage",classGrade:N0(),level:1,hp:60,maxHp:60,ap:30,maxAp:30,guard:0,speed:50,cardActEnergy:3,gold:0,deck:[],equipment:[],buffDebuffs:new Map,equipmentAtkPercent:0,equipmentDefPercent:0},_0={playerClass:"summoner",classGrade:C0(),level:1,hp:100,maxHp:100,ap:30,maxAp:30,guard:0,speed:50,cardActEnergy:3,gold:0,deck:[],equipment:[],equipmentAtkPercent:0,equipmentDefPercent:0,buffDebuffs:new Map};function D0(s){return`${s}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function w0(){return new Map}function Yi(s,r){const o=w0();return{instanceId:D0(s.id),definitionId:s.id,definition:s,hp:s.baseMaxHp,maxHp:s.baseMaxHp,ap:s.baseMaxAp,maxAp:s.baseMaxAp,guard:s.startingGuard?Math.floor(s.baseMaxAp*.5):0,speed:s.baseSpeed,buffDebuffs:o,energy:s.actEnergy,phaseCount:0,turnCount:0,ref:r??S.createRef()}}function M0(s,r,o=Ea.speed,u){const[m]=S.useState(u?.name??""),[f]=S.useState(u?.playerClass??Ea.playerClass),[h]=S.useState(u?.classGrade??Ea.classGrade),[b,p]=S.useState(u?.currentHp??Ea.hp),[v]=S.useState(u?.maxHp??Ea.maxHp),[g,j]=S.useState(u?.currentAp??Ea.ap),[q]=S.useState(u?.maxAp??Ea.maxAp),[T,D]=S.useState(Ea.guard),[U,C]=S.useState(u?.cardActEnergy??Ea.cardActEnergy),[k]=S.useState(u?.cardActEnergy??Ea.cardActEnergy),[w,x]=S.useState(new Map),[B,z]=S.useState(()=>{if(r&&r.length>0)return r.map(fe=>Yi(fe));const{enemies:te}=Up(s,"normal");return te.map(fe=>Yi(fe))}),[$,K]=S.useState(B[0]?.energy??1),ae=B[0]?.definition,le=B[0]?.hp??0,be=B[0]?.maxHp??0,M=B[0]?.ap??0,H=B[0]?.maxAp??0,F=B[0]?.guard??0,de=S.useMemo(()=>B[0]?.buffDebuffs??new Map,[B]),ce=S.useMemo(()=>B.filter(te=>te.hp>0),[B]),L=b>0,Z=S.useMemo(()=>B.every(te=>te.hp<=0),[B]),V=S.useMemo(()=>({hp:b,maxHp:v,ap:g,maxAp:q,guard:T,energy:U,maxEnergy:k,buffs:w,name:m??"",playerClass:f,classGrade:h}),[b,v,g,q,T,U,k,w,m,f,h]),W=S.useCallback(te=>{p(fe=>Math.max(0,Math.min(fe+te,v)))},[v]),re=S.useCallback(te=>{p(fe=>{const Ue=typeof te=="function"?te(fe):te;return Math.max(0,Math.min(Ue,v))})},[v]),E=S.useCallback(te=>{j(fe=>Math.max(0,Math.min(fe+te,q)))},[q]),Y=S.useCallback(te=>{j(fe=>{const Ue=typeof te=="function"?te(fe):te;return Math.max(0,Ue)})},[]),J=S.useCallback(te=>{D(fe=>{const Ue=typeof te=="function"?te(fe):te;return Math.max(0,Ue)})},[]),ee=S.useCallback(te=>{C(fe=>{const Ue=typeof te=="function"?te(fe):te;return Math.max(0,Math.min(Ue,k))})},[k]),oe=S.useCallback(te=>{x(fe=>typeof te=="function"?te(fe):te)},[]),me=S.useCallback(()=>{D(0)},[]),ge=S.useCallback(()=>{C(k)},[k]),Te=S.useCallback((te,fe)=>{z(Ue=>Ue.map((pa,Ka)=>Ka===te?{...pa,...fe}:pa))},[]),Se=S.useCallback((te,fe)=>{z(Ue=>Ue.map((pa,Ka)=>Ka===te?{...pa,...fe(pa)}:pa))},[]),za=S.useCallback(te=>{z(fe=>fe.map(Ue=>({...Ue,...te(Ue)})))},[]),Ua=S.useCallback(te=>{z(fe=>fe.filter((Ue,pa)=>pa!==te))},[]),Za=S.useCallback(te=>{Se(0,fe=>({hp:typeof te=="function"?te(fe.hp):te}))},[Se]),Tt=S.useCallback(te=>{Se(0,fe=>({ap:typeof te=="function"?te(fe.ap):te}))},[Se]),ra=S.useCallback(te=>{Se(0,fe=>({guard:typeof te=="function"?te(fe.guard):te}))},[Se]),Oa=S.useCallback(te=>{Se(0,fe=>({buffDebuffs:typeof te=="function"?te(fe.buffDebuffs):te}))},[Se]),ut=S.useMemo(()=>({hp:b,maxHp:v,ap:g,maxAp:q,guard:T,speed:o,buffDebuffs:w}),[b,v,g,q,T,o,w]),ha=S.useMemo(()=>({hp:le,maxHp:be,ap:M,maxAp:H,guard:F,speed:ae?.baseSpeed??0,buffDebuffs:de}),[le,be,M,H,F,de,ae?.baseSpeed]),fa=S.useCallback(te=>{const fe=Array.isArray(te)?te:[te];z(fe.map(Ue=>Yi(Ue))),K(fe[0]?.actEnergy??1),D(0),x(new Map),C(k)},[k]);return{playerState:V,updatePlayerHp:W,setPlayerHp:re,updatePlayerAp:E,setPlayerAp:Y,setPlayerGuard:J,setPlayerEnergy:ee,setPlayerBuffs:oe,resetPlayerGuard:me,resetPlayerEnergy:ge,enemies:B,currentEnemy:ae,updateEnemyState:Te,updateEnemyByUpdater:Se,updateAllEnemies:za,setEnemies:z,removeEnemy:Ua,setEnemyHp:Za,setEnemyAp:Tt,setEnemyGuard:ra,setEnemyBuffs:Oa,aliveEnemies:ce,isPlayerAlive:L,areAllEnemiesDead:Z,enemyHp:le,enemyMaxHp:be,enemyAp:M,enemyMaxAp:H,enemyGuard:F,enemyBuffs:de,enemyEnergy:$,setEnemyEnergy:K,playerBattleStats:ut,enemyBattleStats:ha,resetForNextEnemy:fa}}function T0(){return{success:!1,damageDealt:0,guardGained:0,healingDone:0,energyConsumed:0,swordEnergyChange:0,swordEnergyConsumed:0,buffsApplied:[],debuffsApplied:[],cardsDrawn:0,isCritical:!1,lifestealAmount:0,reflectDamage:0,bleedDamage:0}}function Yp(s){if(!s.baseDamage)return 0;let r=s.baseDamage;const o=1+s.masteryLevel*.1;return r*=o+s.gemLevel*.5,Math.round(r)}function A0(s){return s>=hs[3]?3:s>=hs[2]?2:s>=hs[1]?1:0}function k0(s){const r=s.useCount+1,o=A0(r);return{...s,useCount:r,masteryLevel:o}}function q0(s,r,o){return o&&s.cost<=r}function up(s){const r=Yp(s),o={};switch(s.category){case"atk":o.damageToEnemy=r;break;case"def":o.shieldGain=r;break;case"heal":o.hpGain=r;break}return s.applyEnemyDebuff&&s.applyEnemyDebuff.length>0&&(o.enemyDebuffs=s.applyEnemyDebuff.map(u=>cp(u,s.id))),s.applyPlayerBuff&&s.applyPlayerBuff.length>0&&(o.playerBuffs=s.applyPlayerBuff.map(u=>cp(u,s.id))),o}const ps={initialize(){return Pi()},onCardPlay(s,r){if(r.characterClass!=="swordsman"&&r.characterClass!=="common")return s;if(r.swordEnergyConsume!==void 0&&r.swordEnergyConsume>0){const u=Math.min(s.current,r.swordEnergyConsume);return{...s,current:s.current-u}}if(r.swordEnergyConsume===0&&r.swordEnergyMultiplier!==void 0)return{...s,current:0};const o=r.swordEnergyGain??R0(r.cost,r.category==="swordEnergy");return o>0?Ip(s,o):s},onTurnStart(s){return s},onTurnEnd(s){return s},getDamageModifier(s,r){const o=L0(s.current);return{flatBonus:s.current*2,percentMultiplier:1,critBonus:o.critBonus,penetration:o.penetration}},canPerformAction(s,r){switch(r){case"consume_3":return s.current>=3;case"consume_5":return s.current>=5;case"consume_all":return s.current>0;case"max_energy_attack":return s.current>=Qi;default:return!0}},getStateDescription(s){return s.current>=Qi?` MAX (${s.current}/${s.max}) - !`:s.current>=8?` ${s.current}/${s.max} - +30%`:s.current>=5?` ${s.current}/${s.max} - +20%`:` ${s.current}/${s.max}`}};function R0(s,r=!1,o){return r?4:s===0||s===1?1:s===2?2:3}function Ip(s,r){return{...s,current:Math.min(s.max,s.current+r)}}function G0(s,r){const o=Math.min(s.current,r);return{newState:{...s,current:s.current-o},consumed:o}}function z0(s){const r=s.current;return{newState:{...s,current:0},consumed:r}}function U0(s){return s>=10?1:s>=5?.2:0}function O0(s){return s>=10?.5:s>=8?.3:0}function L0(s){return{critBonus:U0(s),penetration:O0(s),isMaxEnergy:s>=Qi}}function op(s,r,o=10){return s+r*o}function B0(s,r,o,u,m,f,h,b,p,v,g,j,q,T,D,U){const C=S.useCallback(x=>q0(x,o,v),[o,v]),k=S.useCallback(x=>{const B=up(x);let z=!0,$;v?o<x.cost&&(z=!1,$="Not enough energy"):(z=!1,$="Not player phase");let K=0;if(x.swordEnergyConsume!==void 0&&x.swordEnergyMultiplier){const le=x.swordEnergyConsume===0?p.current:Math.min(p.current,x.swordEnergyConsume);K=op(0,le,x.swordEnergyMultiplier)}let ae=0;if(B.damageToEnemy){const le={...x,baseDamage:(x.baseDamage||0)+K};ae=Tu(s,r,le).finalDamage}return{estimatedDamage:ae,guardGain:B.shieldGain||x.guardAmount||0,healAmount:B.hpGain||x.healAmount||0,energyCost:x.cost,canPlay:z,cannotPlayReason:$,swordEnergyGain:x.swordEnergyGain||0,swordEnergyConsume:x.swordEnergyConsume!==void 0?x.swordEnergyConsume===0?p.current:x.swordEnergyConsume:0,cardDraw:x.drawCards||0,playerBuffs:B.playerBuffs?.map(le=>le.name)||[],enemyDebuffs:B.enemyDebuffs?.map(le=>le.name)||[]}},[o,v,p,s,r]);return{executeCard:S.useCallback(async(x,B)=>{const z=T0();if(!C(x))return z;z.success=!0,z.energyConsumed=x.cost,T.setPlayerEnergy(M=>M-x.cost);const $=up(x);if(B){const H=$.shieldGain||$.hpGain||$.playerBuffs?.length?g.current:j();H&&await D.playCardWithAnimation(B,H,()=>{})}let K=0,ae=0;if(x.swordEnergyConsume!==void 0?(x.swordEnergyConsume===0?T.setSwordEnergy(M=>{const H=z0(M);return ae=H.consumed,z.swordEnergyConsumed=ae,z.swordEnergyChange=-ae,H.newState}):T.setSwordEnergy(M=>{const H=G0(M,x.swordEnergyConsume);return ae=H.consumed,z.swordEnergyConsumed=ae,z.swordEnergyChange=-ae,H.newState}),x.swordEnergyMultiplier&&(K=op(0,ae,x.swordEnergyMultiplier))):x.swordEnergyGain&&T.setSwordEnergy(M=>{const H=Ip(M,x.swordEnergyGain);return z.swordEnergyChange=x.swordEnergyGain,H}),$.damageToEnemy){const M={...x,baseDamage:(x.baseDamage||0)+K},H=Tu(s,r,M),F=wp(r,H.finalDamage);z.damageDealt=H.finalDamage,z.isCritical=H.isCritical,T.setEnemyGuard(ce=>Math.max(0,ce-F.guardDamage)),T.setEnemyAp(ce=>Math.max(0,ce-F.apDamage)),T.setEnemyHp(ce=>Math.max(0,ce-F.hpDamage));const de=j();if(de&&D.showDamageEffect(de,H.finalDamage,H.isCritical),H.lifestealAmount>0){const ce=Hi(H.lifestealAmount,m,f);T.setPlayerHp(ce),z.lifestealAmount=H.lifestealAmount,g.current&&D.showHealEffect(g.current,H.lifestealAmount)}H.reflectDamage>0&&(T.setPlayerHp(ce=>Math.max(0,ce-H.reflectDamage)),z.reflectDamage=H.reflectDamage,g.current&&D.showDamageEffect(g.current,H.reflectDamage,!1)),T.setBattleStats(ce=>({...ce,damageDealt:ce.damageDealt+H.finalDamage}))}if($.shieldGain&&(T.setPlayerGuard(M=>M+$.shieldGain),z.guardGained+=$.shieldGain,g.current&&D.showShieldEffect(g.current,$.shieldGain)),x.guardAmount&&x.guardAmount>0&&(T.setPlayerGuard(M=>M+x.guardAmount),z.guardGained+=x.guardAmount,g.current&&D.showShieldEffect(g.current,x.guardAmount)),x.cardTypeId==="sw_037"){const M=p.current*8;T.setPlayerGuard(H=>H+M),z.guardGained+=M,g.current&&D.showShieldEffect(g.current,M)}if(x.cardTypeId==="sw_039"||x.cardTypeId==="sw_040"){const M=p.current*2;T.setPlayerGuard(H=>H+M),z.guardGained+=M,g.current&&D.showShieldEffect(g.current,M)}if(x.healAmount&&x.healAmount>0){const M=Hi(x.healAmount,m,f);T.setPlayerHp(M),z.healingDone+=x.healAmount,g.current&&D.showHealEffect(g.current,x.healAmount)}if($.hpGain){const M=Hi($.hpGain,m,f);T.setPlayerHp(M),z.healingDone+=$.hpGain,g.current&&D.showHealEffect(g.current,$.hpGain)}if(x.energyGain&&x.energyGain>0&&T.setPlayerEnergy(M=>Math.min(u,M+x.energyGain)),x.drawCards&&x.drawCards>0){const M=q.current,{drawnCards:H,newDrawPile:F,newDiscardPile:de}=Np(x.drawCards,M.drawPile,M.discardPile);H.length>0&&(U({type:"SET_PILES",newDrawPile:F,newDiscardPile:de}),z.cardsDrawn=H.length,D.drawCardsWithAnimation(H,ce=>{U({type:"ADD_TO_HAND",cards:ce})},150))}if($.enemyDebuffs?.length){let M=b;$.enemyDebuffs.forEach(H=>{M=Mu(M,H.name,H.duration,H.value,H.stacks,!1,void 0,"player"),z.debuffsApplied.push(H)}),T.setEnemyBuffs(M)}if($.playerBuffs?.length){let M=h;$.playerBuffs.forEach(H=>{M=Mu(M,H.name,H.duration,H.value,H.stacks,!1,void 0,"player"),z.buffsApplied.push(H)}),T.setPlayerBuffs(M)}const le=k0(x);U({type:"CARD_PLAY",card:le});const be=Yu(f,h);return be>0&&(T.setPlayerHp(M=>Math.max(0,M-be)),z.bleedDamage=be,g.current&&D.showDamageEffect(g.current,be,!1),await new Promise(M=>setTimeout(M,300))),z},[C,s,r,m,f,h,b,p,u,g,j,q,T,D,U]),canPlayCard:C,getCardEffectPreview:k}}function H0(){const s=S.useCallback((m,f,h,b,p)=>Ki(m,f,h,b),[]),r=S.useCallback(async(m,f,h,b,p,v)=>{const{enemy:g,enemyHp:j,enemyMaxHp:q,enemyEnergy:T,enemyBuffs:D,enemyTurnCount:U,playerStats:C,enemyStats:k}=m;await Bp(g,j,q,U,T,async x=>{if(x.guardGain&&x.guardGain>0&&!x.baseDamage){f.setEnemyGuard($=>$+x.guardGain);return}const B=x.hitCount||1;for(let $=0;$<B;$++){const K=Op(k,C,x);if(f.setPlayerGuard(ae=>Math.max(0,ae-K.guardDamage)),f.setPlayerAp(ae=>Math.max(0,ae-K.apDamage)),f.setPlayerHp(ae=>Math.max(0,ae-K.hpDamage)),b&&h.showDamageEffect(b,K.totalDamage,!1),K.reflectDamage>0){f.setEnemyHp(le=>Math.max(0,le-K.reflectDamage));const ae=p();ae&&h.showDamageEffect(ae,K.reflectDamage,!1)}f.setBattleStats(ae=>({...ae,damageTaken:ae.damageTaken+K.totalDamage})),$<B-1&&await new Promise(ae=>setTimeout(ae,500))}if(x.applyDebuffs&&x.applyDebuffs.length>0){const $=Lp(m.playerBuffs,x.applyDebuffs);f.setPlayerBuffs($)}const z=Yu(q,D);if(z>0){f.setEnemyHp(K=>Math.max(0,K-z));const $=p();$&&h.showDamageEffect($,z,!1),await new Promise(K=>setTimeout(K,300))}},v)},[]),o=S.useCallback((m,f,h,b)=>Au(m,f,h,b),[]),u=S.useCallback(m=>m.hp<=0?null:Au(m.definition,m.hp,m.maxHp,(m.turnCount??0)+1)[0]||null,[]);return{determineAction:s,executeAllActions:r,getNextActionsPreview:o,getActionPreview:u}}function Y0(s,r){return s>=r?"MAX":s>=8?"HIGH":s>=5?"MID":s>=3?"LOW":"NONE"}function I0(){return""}function Q0(){const[s,r]=S.useState(Pi()),o=S.useCallback(v=>{r(g=>ps.onCardPlay(g,v))},[]),u=S.useCallback(()=>{r(v=>ps.onTurnStart(v))},[]),m=S.useCallback(()=>{r(v=>ps.onTurnEnd(v))},[]),f=S.useCallback(v=>ps.getDamageModifier(s,v),[s]),h=S.useCallback(v=>ps.canPerformAction(s,v),[s]),b=S.useCallback(()=>({label:I0(),current:s.current,max:s.max,level:Y0(s.current,s.max),description:ps.getStateDescription(s)}),[s]),p=S.useCallback(()=>{r(Pi())},[]);return{abilityState:s,setAbilityState:r,onCardPlayed:o,onTurnStart:u,onTurnEnd:m,getDamageModifier:f,canPerformAction:h,getAbilityUI:b,resetAbility:p}}function P0(s){switch(s){case"swordsman":return hu;case"mage":return Bh;case"summoner":return hu;default:return hu}}const Qp=(s,r,o)=>{const{drawCardsWithAnimation:u,discardCardsWithAnimation:m,playCardWithAnimation:f,showDamageEffect:h,showHealEffect:b,showShieldEffect:p,isNewCard:v,getDiscardingCards:g}=$h(),{turnMessage:j,showTurnMessage:q,showMessage:T}=Xh(),D=o?.speed??50,U=t0(D),{executePlayerPhase:C,executeEnemyPhase:k}=x0(),w=S.useRef(null),x=S.useRef([]),B=M0(s,r,U.playerSpeed,o),{playerState:z,setPlayerHp:$,setPlayerAp:K,setPlayerGuard:ae,setPlayerEnergy:le,setPlayerBuffs:be,enemies:M,currentEnemy:H,setEnemies:F,setEnemyHp:de,setEnemyAp:ce,setEnemyGuard:L,setEnemyBuffs:Z,updateEnemyByUpdater:V,updateAllEnemies:W,aliveEnemies:re,isPlayerAlive:E,areAllEnemiesDead:Y,enemyHp:J,enemyMaxHp:ee,enemyAp:oe,enemyMaxAp:me,enemyGuard:ge,enemyBuffs:Te,enemyEnergy:Se,setEnemyEnergy:za,playerBattleStats:Ua,enemyBattleStats:Za}=B,Tt=Q0(),{abilityState:ra,setAbilityState:Oa}=Tt,ut=S.useMemo(()=>{const Oe=o?.deckConfig??jp(o?.playerClass??"swordsman"),Qe=P0(o?.playerClass??"swordsman");let et=Oh(Oe,Qe);return o?.cardMasteryStore&&o.cardMasteryStore.size>0&&(et=Ih(et,o.cardMasteryStore)),{hand:[],drawPile:et,discardPile:[]}},[o]),[ha,fa]=S.useReducer(Lh,ut),te=S.useRef(ha);S.useEffect(()=>{te.current=ha},[ha]);const[fe,Ue]=S.useState(!1),[pa,Ka]=S.useState(!1),[ta,xe]=S.useState(null),[Ae,ua]=S.useState("ongoing"),[Ie,ya]=S.useState({damageDealt:0,damageTaken:0}),La=S.useCallback(()=>M.find(Qe=>Qe.hp>0)?.ref.current??null,[M]),bs=S.useCallback((Oe,Qe)=>{V(Oe,Qe)},[V]),xs=S.useMemo(()=>({playCardWithAnimation:f,showDamageEffect:h,showHealEffect:b,showShieldEffect:p,drawCardsWithAnimation:u}),[f,h,b,p,u]),Fa=S.useMemo(()=>({setPlayerEnergy:le,setPlayerGuard:ae,setPlayerHp:$,setPlayerBuffs:be,setEnemyHp:de,setEnemyAp:ce,setEnemyGuard:L,setEnemyBuffs:Z,setSwordEnergy:Oa,setBattleStats:ya}),[le,ae,$,be,de,ce,L,Z,Oa]),oa=B0(Ua,Za,z.energy,z.maxEnergy,z.hp,z.maxHp,z.buffs,Te,ra,U.isPlayerPhase,w,La,te,Fa,xs,fa);H0();const st=S.useCallback(async(Oe,Qe)=>{await oa.executeCard(Oe,Qe)},[oa]),da=S.useCallback(async()=>{await C({playerBuffs:z.buffs,playerMaxHp:z.maxHp,maxEnergy:z.maxEnergy,deckStateRef:te,drawnCardsRef:x,playerRef:w,setPlayerGuard:ae,setPlayerEnergy:le,setPlayerBuffs:be,setPlayerHp:$,setIsShuffling:Ue,setIsDrawingAnimation:Ka,showMessage:T,showHealEffect:b,showShieldEffect:p,phaseState:{setPlayerPhaseActive:U.setPlayerPhaseActive,setEnemyPhaseActive:U.setEnemyPhaseActive,incrementPhaseCount:U.incrementPhaseCount,clearActivePhase:U.clearActivePhase},dispatch:fa})},[C,z.buffs,z.maxHp,z.maxEnergy,ae,le,be,$,T,b,p,U]),Sl=S.useCallback(async()=>{await k({currentEnemy:H,enemyBuffs:Te,enemyHp:J,enemyMaxHp:ee,enemyEnergy:Se,playerHp:z.hp,playerBuffs:z.buffs,enemies:M,enemyStats:Za,playerStats:Ua,playerRef:w,setEnemyGuard:L,setEnemyEnergy:za,setEnemyBuffs:Z,setEnemyHp:de,setPlayerGuard:ae,setPlayerAp:K,setPlayerHp:$,setPlayerBuffs:be,setBattleStats:ya,showMessage:T,showDamageEffect:h,getTargetEnemyRef:La,phaseState:{setPlayerPhaseActive:U.setPlayerPhaseActive,setEnemyPhaseActive:U.setEnemyPhaseActive,incrementPhaseCount:U.incrementPhaseCount,clearActivePhase:U.clearActivePhase}})},[k,H,Te,J,ee,Se,z.hp,z.buffs,M,Za,Ua,L,za,Z,de,ae,K,$,be,T,h,La,U]),_n=S.useRef(async()=>{}),Nl=S.useCallback(async(Oe,Qe)=>{if(Y||!E)return;if(Qe>=Oe.phases.length){const At=U.generatePhaseQueueFromSpeeds(z.buffs,H??null,Te);await _n.current(At,0);return}U.setPhaseIndex(Qe),Oe.phases[Qe]==="player"?await da():(await Sl(),await _n.current(Oe,Qe+1))},[Y,E,da,Sl,U,z.buffs,H,Te]);S.useEffect(()=>{_n.current=Nl},[Nl]);const ot=S.useCallback(async(Oe,Qe)=>{await _n.current(Oe,Qe)},[]),dt=S.useCallback(async()=>{const Oe=U.generatePhaseQueueFromSpeeds(z.buffs,H??null,Te);await ot(Oe,0)},[z.buffs,H,Te,U,ot]),Dn=S.useCallback(()=>{if(!U.isPlayerPhase)return;U.clearActivePhase();const Oe=f0({playerBuffs:z.buffs});Oe.dotDamage>0&&($(At=>Math.max(0,At-Oe.dotDamage)),w.current&&h(w.current,Oe.dotDamage,!1)),be(Oe.newBuffs);const Qe=[...ha.hand],et=U.currentPhaseIndex+1;m(Qe,250,()=>{fa({type:"END_TURN",cardsToDiscard:Qe}),U.phaseQueue&&ot(U.phaseQueue,et)})},[U,z.buffs,h,$,be,ha.hand,m,ot]),Wa=S.useRef(!1);S.useEffect(()=>{!Wa.current&&H&&(Wa.current=!0,dt())},[H,dt]),S.useEffect(()=>{fe&&T("...",1500,()=>{setTimeout(()=>{Ue(!1),Ka(!0)},1e3)})},[fe,T]),S.useEffect(()=>{pa&&x.current.length>0&&u(x.current,Oe=>{fa({type:"ADD_TO_HAND",cards:Oe}),x.current=[],Ka(!1)},250)},[pa,u]);const wn=S.useCallback(()=>xe("draw"),[]),sn=S.useCallback(()=>xe("discard"),[]),ec=S.useCallback(()=>xe(null),[]),Cl=S.useCallback(Oe=>{const Qe=Array.isArray(Oe)?Oe:[Oe];F(Qe.map(Ns=>Yi(Ns))),ae(0),be(new Map),le(z.maxEnergy),Oa(Pi());const et=[...te.current.hand,...te.current.drawPile,...te.current.discardPile],At=Hu(et);fa({type:"RESET_DECK",hand:[],drawPile:At,discardPile:[]}),U.resetPhaseState(),ya({damageDealt:0,damageTaken:0}),ua("ongoing"),Wa.current=!1},[F,ae,be,le,Oa,z.maxEnergy,U]),Ss=S.useMemo(()=>Ae!=="ongoing"?Ae:Y?"victory":E?"ongoing":"defeat",[Ae,Y,E]),ln=S.useMemo(()=>!H||J<=0?[]:Au(H,J,ee,U.phaseCount+1),[H,J,U.phaseCount]);return{playerRef:w,getTargetEnemyRef:La,currentEnemy:H,enemies:M,aliveEnemies:re,updateEnemy:bs,updateAllEnemies:W,playerName:z.name,playerClass:z.playerClass,playerHp:z.hp,playerMaxHp:z.maxHp,playerAp:z.ap,playerMaxAp:z.maxAp,playerGuard:z.guard,playerBuffs:z.buffs,enemyHp:J,enemyMaxHp:ee,enemyAp:oe,enemyMaxAp:me,enemyGuard:ge,enemyBuffs:Te,playerEnergy:z.energy,cardEnergy:z.energy,maxEnergy:z.maxEnergy,phaseCount:U.phaseCount,isPlayerPhase:U.isPlayerPhase,turnMessage:j,showTurnMessage:q,playerNowSpeed:U.playerSpeed,enemyNowSpeed:U.enemySpeed,phaseQueue:U.phaseQueue,currentPhaseIndex:U.currentPhaseIndex,enemyEnergy:Se,nextEnemyActions:ln,swordEnergy:ra,hand:ha.hand,drawPile:ha.drawPile,discardPile:ha.discardPile,isNewCard:v,getDiscardingCards:g,handleCardPlay:st,handleEndPhase:Dn,resetForNextEnemy:Cl,initializeBattle:dt,startBattleRound:dt,onDepthChange:()=>{},openedPileType:ta,openDrawPile:wn,openDiscardPile:sn,closePileModal:ec,battleResult:Ss,battleStats:Ie}},bl=({card:s,isPlayable:r=!1})=>{const o=s.tags,u=s.baseDamage?Yp(s):null,m=["card",r?"playable":"unplayable",`tag-${o}`,`mastery-${s.masteryLevel}`].join(" ");return l.jsxs("div",{className:m,children:[l.jsx("div",{className:`card-cost ${o}-badge`,children:s.cost}),l.jsx("div",{className:`card-badge ${o}-badge`,children:o}),l.jsx("div",{className:`card-name mastery-${s.masteryLevel}`,children:s.name}),l.jsxs("div",{className:"card-desc-box",children:[l.jsx("div",{className:"card-desc-text",children:s.description}),u&&l.jsxs("div",{className:"card-power",children:["Damage: ",u]})]}),l.jsxs("div",{className:"mastery-info",children:[l.jsxs("div",{className:"mastery-labels",children:[l.jsxs("span",{children:[": Lv.",s.masteryLevel]}),l.jsx("span",{children:s.useCount})]}),l.jsx("div",{className:"mastery-bar-bg",children:l.jsx("div",{className:"mastery-bar-fill",style:{width:`${s.useCount/8*100}%`}})})]})]})},Pp=({isOpen:s,onClose:r,title:o,cards:u,depth:m})=>s?l.jsx("div",{className:"battle-modal-overlay",onClick:r,children:l.jsxs("div",{className:"battle-modal-content",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"battle-modal-header",children:[l.jsxs("h2",{children:[o," (",u.length,")"]}),l.jsx("button",{className:"battle-modal-close-btn",onClick:r,children:""})]}),l.jsx("div",{className:"battle-modal-body",children:u.length===0?l.jsx("div",{className:"battle-empty-message",children:""}):l.jsx("div",{className:"card-grid",children:u.map((f,h)=>l.jsx("div",{className:"modal-card-wrapper",children:l.jsx(bl,{card:f,depth:m,isPlayable:!1})},`${f.id}-${h}`))})})]})}):null,$0=({isActive:s})=>l.jsx("div",{className:`phase-icon-diamond player ${s?"active":""}`,children:l.jsx("span",{className:"icon-letter",children:"P"})}),X0=({isActive:s})=>l.jsx("div",{className:`phase-icon-diamond enemy ${s?"active":""}`,children:l.jsx("span",{className:"icon-letter",children:"E"})}),$p=({phaseQueue:s,currentPhaseIndex:r})=>{if(!s||s.phases.length===0)return null;const o=Math.min(4,s.phases.length),u=[];for(let m=0;m<o;m++){const f=(r+m)%s.phases.length;u.push({actor:s.phases[f],index:f})}return l.jsx("div",{className:"turn-order-indicator",children:u.map((m,f)=>l.jsxs(wh.Fragment,{children:[m.actor==="player"?l.jsx($0,{isActive:f===0}):l.jsx(X0,{isActive:f===0}),f<u.length-1&&l.jsx("span",{className:"phase-arrow",children:""})]},`${m.index}-${f}`))})},Iu=({buffsDebuffs:s,theme:r})=>{const[o,u]=S.useState(null);return s.size===0?null:l.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginTop:"12px"},children:Array.from(s.entries()).map(([m,f])=>{const h=ye[m],b=n0[m];return l.jsxs("div",{style:{position:"relative",width:"48px",height:"48px",background:h.isDebuff?"linear-gradient(135deg, #5f1e1e, #9d2e2e)":`linear-gradient(135deg, ${r.primary}, ${r.secondary})`,border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:h.isDebuff?"0 4px 12px rgba(217, 74, 74, 0.5)":`0 4px 12px ${r.glow}`},onMouseEnter:()=>u(m),onMouseLeave:()=>u(null),children:[b,f.stacks>1&&l.jsx("div",{style:{position:"absolute",top:"-6px",right:"-6px",width:"20px",height:"20px",background:"#000",border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"50%",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.8)"},children:f.stacks}),!f.isPermanent&&l.jsx("div",{style:{position:"absolute",bottom:"-6px",right:"-6px",width:"24px",height:"24px",background:"#000",border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"50%",fontSize:"12px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.8)"},children:f.duration}),o===m&&l.jsxs("div",{style:{position:"absolute",bottom:"60px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.95)",border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"8px",padding:"10px 14px",whiteSpace:"nowrap",fontSize:"14px",zIndex:100,boxShadow:`0 4px 16px rgba(0, 0, 0, 0.8), 0 0 20px ${h.isDebuff?"rgba(217, 74, 74, 0.5)":r.glow}`,pointerEvents:"none"},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:"6px",color:h.isDebuff?"#ff8080":r.accent,fontSize:"15px"},children:[h.name,f.value>0&&` (${f.value})`,f.stacks>1&&` x${f.stacks}`]}),l.jsx("div",{style:{fontSize:"12px",color:"#ccc"},children:h.description()}),l.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.6)",marginTop:"4px",fontStyle:"italic"},children:f.isPermanent?"Permanent":`${f.duration} turn${f.duration!==1?"s":""} remaining`}),l.jsx("div",{style:{position:"absolute",bottom:"-8px",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:`8px solid ${h.isDebuff?"#d94a4a":r.accent}`}})]})]},m)})})},V0=s=>s.baseDamage>0?"attack":s.guardGain&&s.guardGain>0?"guard":s.applyDebuffs&&s.applyDebuffs.length>0?"debuff":"special",J0=({type:s})=>{const r={attack:"",guard:"",debuff:"",special:""};return l.jsx("span",{className:`action-icon action-icon-${s}`,children:r[s]})},Su=({state:s,enemyRef:r,theme:o,size:u="normal"})=>{const[m,f]=S.useState(!1),[h,b]=S.useState(!1),[p,v]=S.useState(s.actEnergy);s.actEnergy!==p&&(v(s.actEnergy),s.actEnergy<p&&b(!0)),S.useEffect(()=>{if(h){const T=setTimeout(()=>b(!1),600);return()=>clearTimeout(T)}},[h]);const g=Ki(s.definition,s.hp,s.maxHp,s.turnCount+1,s.definition.actEnergy),j=u==="small"?"enemy-card-small":"",q=V0(g);return l.jsxs("div",{className:`enemy-card ${j}`,children:[l.jsxs("div",{className:"enemy-name-row",children:[l.jsx("span",{className:"enemy-name",children:s.definition.nameJa}),l.jsxs("div",{className:"action-icon-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[l.jsx(J0,{type:q}),m&&l.jsxs("div",{className:"next-action-tooltip",children:[l.jsx("div",{className:"tooltip-header",children:""}),l.jsx("div",{className:"tooltip-action-name",children:g.name}),l.jsxs("span",{className:"tooltip-energy",children:[s.actEnergy,""]}),g.baseDamage>0&&l.jsxs("div",{className:"tooltip-damage",children:[l.jsx("span",{className:"damage-icon",children:""}),l.jsx("span",{className:"damage-value",children:g.baseDamage}),g.hitCount&&g.hitCount>1&&l.jsxs("span",{className:"hit-count",children:["",g.hitCount]})]}),g.guardGain&&g.guardGain>0&&l.jsxs("div",{className:"tooltip-guard",children:[l.jsx("span",{className:"guard-icon",children:""}),l.jsxs("span",{className:"guard-value",children:["+",g.guardGain]})]}),g.applyDebuffs&&g.applyDebuffs.length>0&&l.jsx("div",{className:"tooltip-debuffs",children:g.applyDebuffs.map((T,D)=>l.jsx("span",{className:"debuff-tag",children:T.name},D))})]})]})]}),l.jsx("div",{className:"enemy-visual",ref:r,children:s.definition.imagePath?l.jsx("img",{className:"enemy-img",src:s.definition.imagePath,alt:s.definition.nameJa}):l.jsx("img",{className:"enemy-img",alt:"enemy-img",src:"../../../public/assets/images/depth_1_schelton.png"})}),l.jsxs("div",{className:"status-container enemy-status-container",children:[s.guard>0&&l.jsxs("div",{className:"status-bar-row guard-row",children:[l.jsx("div",{className:"value-badge guard-badge",children:s.guard}),l.jsx("div",{className:"unified-bar-container guard-bar",children:l.jsx("div",{className:"bar-fill guard-fill",style:{width:`${Math.min(100,s.guard/30*100)}%`}})})]}),l.jsxs("div",{className:"status-bar-row hp-row",children:[l.jsxs("div",{...s.ap===0?{className:"break-badge"}:{className:"value-badge ap-badge"},children:[s.ap>0&&`${s.ap}/${s.maxAp}`,s.ap===0&&"break!"]}),l.jsxs("div",{...s.ap>0?{className:"Armor-border"}:{className:"unified-bar-container hp-bar"},children:[s.ap>0&&l.jsx("div",{className:"bar-fill ap-overlay",style:{width:`${s.ap/s.maxAp*100}%`}}),l.jsx("div",{className:"bar-fill hp-fill",style:{width:`${s.hp/s.maxHp*100}%`}}),l.jsxs("span",{className:"hp-value",children:[s.hp,"/",s.maxHp]})]})]}),l.jsxs("div",{className:"status-bar-row energy-row",children:[l.jsxs("div",{className:"value-badge energy-badge",children:[s.actEnergy,"/",s.definition.actEnergy]}),l.jsx("div",{className:`unified-bar-container energy-bar ${h?"energy-consuming":""}`,children:l.jsx("div",{className:"bar-fill energy-fill",style:{width:`${s.actEnergy/s.definition.actEnergy*100}%`}})})]}),l.jsx(Iu,{buffsDebuffs:s.buffDebuffs,theme:o})]})]})},Xp=({enemies:s,enemyRefs:r,theme:o})=>{const u=s.length,m=()=>{switch(u){case 1:return"enemy-layout-single";case 2:return"enemy-layout-double";case 3:return"enemy-layout-triple";default:return"enemy-layout-single"}};return l.jsxs("div",{className:`enemy-section ${m()}`,children:[u===1&&l.jsx(Su,{state:s[0],enemyRef:r[0],theme:o,size:"normal"}),u===2&&l.jsx("div",{className:"enemy-row",children:s.map((f,h)=>l.jsx(Su,{state:f,enemyRef:r[h],theme:o,size:"small"},h))}),u===3&&l.jsx("div",{className:"enemy-row front-row",children:s.map((f,h)=>l.jsx(Su,{state:f,enemyRef:r[h],theme:o,size:"small"},h))})]})},Z0={initialHpBonus:0,goldMultiplier:1,soulMultiplier:1,explorationLimitBonus:0,inventoryBonus:0,hpRecoveryPercent:0,hasAppraisal:!1,hasTrueAppraisal:!1,hasIndomitableWill:!1,classEnergy:{swordsman:0,mage:0,summoner:0}},vs={SOUL_VALUES:{normal:5,elite:15,boss:50,returnRouteMultiplier:1.2},UNLOCK_HOLD_DURATION:1500},Qu=[{id:"blessing_life_1",name:"Blessing of Life I",description:"The light of the sanctuary strengthens your vitality. Gain +10 max HP at the start of each run.",icon:"",cost:20,category:"hp",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"initial_hp",value:10,description:"+10 Max HP"}],position:{angle:0,radius:1}},{id:"blessing_wealth_1",name:"Blessing of Wealth I",description:"Fortune favors the blessed. Gain +10% gold from all sources during exploration.",icon:"",cost:25,category:"gold",tier:1,prerequisites:[],effects:[{type:"gold_multiplier",target:"gold_acquisition",value:.1,description:"+10% Gold"}],position:{angle:90,radius:1}},{id:"swordsman_insight",name:"Swordsman's Insight",description:"Ancient warriors guide your blade. Start each battle with +1 Sword Energy.",icon:"",cost:30,category:"class",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"sword_energy",value:1,description:"+1 Sword Energy"}],classRestriction:"swordsman",position:{angle:240,radius:1}},{id:"mage_insight",name:"Mage's Insight",description:"Arcane echoes resonate within. Start each battle with +1 Resonance.",icon:"",cost:30,category:"class",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"resonance",value:1,description:"+1 Resonance"}],classRestriction:"mage",position:{angle:270,radius:1}},{id:"summoner_insight",name:"Summoner's Insight",description:"Spirits heed your call more readily. Start each battle with +1 Summon Slot.",icon:"",cost:30,category:"class",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"summon_slot",value:1,description:"+1 Summon Slot"}],classRestriction:"summoner",position:{angle:300,radius:1}},{id:"keen_eye",name:"Keen Eye",description:"Your perception sharpens. Identify basic item properties without appraisal.",icon:"",cost:25,category:"utility",tier:1,prerequisites:[],effects:[{type:"special_ability",target:"basic_appraisal",value:1,description:"Basic Appraisal"}],position:{angle:180,radius:1}},{id:"blessing_life_2",name:"Blessing of Life II",description:"The sanctuary's protection deepens. Gain +20 max HP at the start of each run.",icon:"",cost:50,category:"hp",tier:2,prerequisites:["blessing_life_1"],effects:[{type:"stat_boost",target:"initial_hp",value:20,description:"+20 Max HP"}],position:{angle:0,radius:2}},{id:"boon_recovery",name:"Boon of Recovery",description:"Healing energies linger upon you. Recover 5% HP when resting at camp.",icon:"",cost:40,category:"hp",tier:2,prerequisites:["blessing_life_1"],effects:[{type:"stat_boost",target:"hp_recovery",value:.05,description:"+5% HP Recovery"}],position:{angle:30,radius:2}},{id:"blessing_wealth_2",name:"Blessing of Wealth II",description:"Riches flow to you naturally. Gain +20% gold from all sources (cumulative).",icon:"",cost:60,category:"gold",tier:2,prerequisites:["blessing_wealth_1"],effects:[{type:"gold_multiplier",target:"gold_acquisition",value:.2,description:"+20% Gold"}],position:{angle:90,radius:2}},{id:"eye_appraisal",name:"Eye of Appraisal",description:"See beyond the surface. View detailed equipment stats and effects.",icon:"",cost:45,category:"utility",tier:2,prerequisites:["keen_eye"],effects:[{type:"special_ability",target:"appraisal",value:1,description:"Equipment Appraisal"}],position:{angle:180,radius:2}},{id:"expanded_bag",name:"Expanded Bag",description:"Your bag seems to hold more than before. +5 inventory capacity.",icon:"",cost:50,category:"utility",tier:2,prerequisites:["keen_eye"],effects:[{type:"resource_increase",target:"inventory_capacity",value:5,description:"+5 Inventory"}],position:{angle:150,radius:2}},{id:"extended_exploration_1",name:"Extended Exploration I",description:"Your endurance grows. +1 maximum exploration per day.",icon:"",cost:80,category:"exploration",tier:2,prerequisites:[],effects:[{type:"exploration_limit",target:"exploration_limit",value:1,description:"+1 Exploration"}],position:{angle:45,radius:2}},{id:"blessing_life_3",name:"Blessing of Life III",description:"You are one with the sanctuary's power. Gain +30 max HP at the start of each run.",icon:"",cost:100,category:"hp",tier:3,prerequisites:["blessing_life_2"],effects:[{type:"stat_boost",target:"initial_hp",value:30,description:"+30 Max HP"}],position:{angle:0,radius:3}},{id:"indomitable_will",name:"Indomitable Will",description:"Death cannot claim you so easily. Once per run, survive a killing blow with 1 HP.",icon:"",cost:120,category:"hp",tier:3,prerequisites:["blessing_life_2","boon_recovery"],effects:[{type:"special_ability",target:"death_defiance",value:1,description:"Survive with 1 HP (once)"}],position:{angle:15,radius:3}},{id:"blessing_wealth_3",name:"Blessing of Wealth III",description:"Fortune itself bends to your will. Gain +30% gold from all sources (cumulative).",icon:"",cost:100,category:"gold",tier:3,prerequisites:["blessing_wealth_2"],effects:[{type:"gold_multiplier",target:"gold_acquisition",value:.3,description:"+30% Gold"}],position:{angle:90,radius:3}},{id:"soul_resonance",name:"Soul Resonance",description:"Souls are drawn to you like moths to flame. +20% soul acquisition from all sources.",icon:"",cost:110,category:"gold",tier:3,prerequisites:["blessing_wealth_2"],effects:[{type:"soul_multiplier",target:"soul_acquisition",value:.2,description:"+20% Souls"}],position:{angle:75,radius:3}},{id:"true_appraisal",name:"True Appraisal",description:"Nothing is hidden from your sight. Reveal hidden effects and true values of items.",icon:"",cost:100,category:"utility",tier:3,prerequisites:["eye_appraisal"],effects:[{type:"special_ability",target:"true_appraisal",value:1,description:"True Appraisal"}],position:{angle:180,radius:3}},{id:"extended_exploration_2",name:"Extended Exploration II",description:"Your stamina seems limitless. +2 maximum exploration per day.",icon:"",cost:150,category:"exploration",tier:3,prerequisites:["extended_exploration_1"],effects:[{type:"exploration_limit",target:"exploration_limit",value:2,description:"+2 Exploration"}],position:{angle:45,radius:3}}];function xl(s){return Qu.find(r=>r.id===s)}const K0={hp:{name:"Life",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.2)"},gold:{name:"Wealth",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.2)"},combat:{name:"Combat",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.2)"},utility:{name:"Utility",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.2)"},class:{name:"Class",color:"#a855f7",bgColor:"rgba(168, 85, 247, 0.2)"},exploration:{name:"Exploration",color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.2)"}};function gl(s,r,o){return r.unlockedNodes.includes(s.id)?"unlocked":s.classRestriction&&s.classRestriction!==o?"locked":s.prerequisites.every(m=>r.unlockedNodes.includes(m))?"available":"locked"}function F0(s,r,o){return r.unlockedNodes.includes(s.id)?{canUnlock:!1,reason:"Already unlocked"}:s.classRestriction&&s.classRestriction!==o?{canUnlock:!1,reason:`Requires ${s.classRestriction} class`}:s.prerequisites.every(m=>r.unlockedNodes.includes(m))?r.totalSouls<s.cost?{canUnlock:!1,reason:`Insufficient souls (need ${s.cost}, have ${r.totalSouls})`}:{canUnlock:!0}:{canUnlock:!1,reason:`Requires: ${s.prerequisites.filter(h=>!r.unlockedNodes.includes(h)).map(h=>xl(h)?.name||h).join(", ")}`}}function W0(s,r,o){const{canUnlock:u,reason:m}=F0(s,r,o);if(!u)return{success:!1,message:m||"Cannot unlock this node"};const f={...r,totalSouls:r.totalSouls-s.cost,unlockedNodes:[...r.unlockedNodes,s.id]};return{success:!0,message:`Unlocked ${s.name}!`,remainingSouls:f.totalSouls,newProgress:f}}function Vp(s){const r={...Z0};for(const o of s.unlockedNodes){const u=xl(o);if(u)for(const m of u.effects)switch(m.type){case"stat_boost":switch(m.target){case"initial_hp":r.initialHpBonus+=m.value;break;case"hp_recovery":r.hpRecoveryPercent+=m.value;break;case"sword_energy":r.classEnergy.swordsman+=m.value;break;case"resonance":r.classEnergy.mage+=m.value;break;case"summon_slot":r.classEnergy.summoner+=m.value;break}break;case"gold_multiplier":r.goldMultiplier+=m.value;break;case"soul_multiplier":r.soulMultiplier+=m.value;break;case"exploration_limit":r.explorationLimitBonus+=m.value;break;case"resource_increase":m.target==="inventory_capacity"&&(r.inventoryBonus+=m.value);break;case"special_ability":switch(m.target){case"appraisal":case"basic_appraisal":r.hasAppraisal=!0;break;case"true_appraisal":r.hasTrueAppraisal=!0,r.hasAppraisal=!0;break;case"death_defiance":r.hasIndomitableWill=!0;break}break}}return r}function ev(s){return Qu.filter(r=>!r.classRestriction||r.classRestriction===s)}function av(s){return s.unlockedNodes.reduce((r,o)=>{const u=xl(o);return r+(u?.cost||0)},0)}function tv(s,r){const o=ev(r),u=o.length;let m=0,f=0,h=0;for(const v of o)switch(gl(v,s,r)){case"unlocked":m++;break;case"available":f++;break;case"locked":h++;break}const b=av(s),p=u>0?Math.round(m/u*100):0;return{totalNodes:u,unlockedCount:m,availableCount:f,lockedCount:h,soulsSpent:b,completionPercent:p}}function nv(s,r){const o=Vp(r);return Math.floor(s*o.soulMultiplier)}function Jp(s){switch(s){case"normal":return vs.SOUL_VALUES.normal;case"elite":return vs.SOUL_VALUES.elite;case"boss":return vs.SOUL_VALUES.boss;default:return 0}}function sv(s,r,o=!1){let u=Jp(r);o&&(u=Math.floor(u*vs.SOUL_VALUES.returnRouteMultiplier));const m=nv(u,s),f={...s,currentRunSouls:s.currentRunSouls+m};return{baseSouls:u,multiplierApplied:o?vs.SOUL_VALUES.returnRouteMultiplier:1,finalSouls:m,newProgress:f}}function lv(s){return Jp(s)}function iv(s){switch(s){case"boss":return{small:0,medium:1,large:1,huge:0};case"elite":return{small:2,medium:1,large:0,huge:0};default:return{small:1,medium:0,large:0,huge:0}}}function cv(s){const r=[];return s.small>0&&r.push(`${s.small}`),s.medium>0&&r.push(`${s.medium}`),s.large>0&&r.push(`${s.large}`),s.huge>0&&r.push(`${s.huge}`),r.length>0?r.join(", "):""}const rv=({onContinue:s,rewards:r,battleStats:o,enemyType:u})=>{const[m,f]=S.useState(!1);return S.useEffect(()=>{const h=setTimeout(()=>{f(!0)},1e3);return()=>clearTimeout(h)},[]),l.jsxs("div",{className:"victory-screen",children:[l.jsxs("div",{className:"victory-bg",children:[l.jsx("div",{className:"victory-particles"}),l.jsx("div",{className:"victory-glow"})]}),l.jsxs("div",{className:"victory-content",children:[l.jsxs("div",{className:"victory-title",children:[l.jsx("h1",{className:"victory-text",children:"VICTORY!"}),l.jsx("div",{className:"victory-subtitle",children:"You have conquered the depths"})]}),l.jsxs("div",{className:`battle-stats ${m?"show":""}`,children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsx("div",{className:"stat-value",children:o.phaseCount}),l.jsx("div",{className:"stat-label",children:"Phases"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsx("div",{className:"stat-value",children:o.damageDealt}),l.jsx("div",{className:"stat-label",children:"Damage Dealt"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsx("div",{className:"stat-value",children:o.damageTaken}),l.jsx("div",{className:"stat-label",children:"Damage Taken"})]})]}),l.jsxs("div",{className:`rewards-section ${m?"show":""}`,children:[l.jsx("h2",{className:"rewards-title",children:"Rewards"}),l.jsxs("div",{className:"rewards-grid",children:[l.jsxs("div",{className:"reward-item souls",children:[l.jsx("div",{className:"reward-icon",children:""}),l.jsxs("div",{className:"reward-amount",children:["+",r.soulRemnants," "]}),l.jsxs("div",{className:"reward-detail",children:[u==="boss"?"":u==="elite"?"":"",""]})]}),l.jsxs("div",{className:"reward-item magic-stones",children:[l.jsx("div",{className:"reward-icon",children:""}),l.jsx("div",{className:"reward-amount",children:""}),l.jsx("div",{className:"reward-detail",children:cv(r.magicStones)})]})]}),r.cards.length>0&&l.jsxs("div",{className:"card-rewards",children:[l.jsx("h3",{className:"card-rewards-title",children:"Card Rewards"}),l.jsx("div",{className:"card-rewards-list",children:r.cards.map((h,b)=>l.jsxs("div",{className:"reward-card",style:{animationDelay:`${b*.1}s`},children:[l.jsx("div",{className:"reward-card-name",children:h.name}),l.jsx("div",{className:"reward-card-rarity",children:h.rarity})]},b))})]})]}),l.jsx("button",{className:`continue-button ${m?"show":""}`,onClick:s,children:"Continue"})]})]})},uv=({onRetry:s,onReturnToCamp:r,battleStats:o,remainingLives:u=3,maxLives:m=3,soulsTransferred:f=0,isGameOver:h=!1})=>{const[b,p]=S.useState(!1);S.useEffect(()=>{const g=setTimeout(()=>{p(!0)},1500);return()=>clearTimeout(g)},[]);const v=()=>{const g=[];for(let j=0;j<m;j++){const q=j<u;g.push(l.jsx("span",{className:`life-heart ${q?"filled":"empty"}`,children:q?"":""},j))}return g};return l.jsxs("div",{className:"defeat-screen",children:[l.jsxs("div",{className:"defeat-bg",children:[l.jsx("div",{className:"defeat-particles"}),l.jsx("div",{className:"defeat-glow"})]}),l.jsxs("div",{className:"defeat-content",children:[l.jsxs("div",{className:"defeat-title",children:[l.jsx("h1",{className:"defeat-text",children:h?"GAME OVER":"DEFEAT"}),l.jsx("div",{className:"defeat-subtitle",children:h?"Your journey ends here...":"The darkness has claimed you..."})]}),l.jsxs("div",{className:`defeat-lives ${b?"show":""}`,children:[l.jsx("div",{className:"lives-label",children:" / Lives"}),l.jsx("div",{className:"lives-hearts",children:v()}),!h&&l.jsxs("div",{className:"lives-remaining",children:[" ",u," "]})]}),f>0&&l.jsxs("div",{className:`defeat-souls ${b?"show":""}`,children:[l.jsx("div",{className:"souls-icon",children:""}),l.jsxs("div",{className:"souls-text",children:[l.jsx("span",{className:"souls-label",children:""}),l.jsxs("span",{className:"souls-value",children:["+",f]})]}),l.jsx("div",{className:"souls-description",children:"100% of souls preserved"})]}),l.jsxs("div",{className:`defeat-stats ${b?"show":""}`,children:[l.jsxs("div",{className:"defeat-stat-card",children:[l.jsx("div",{className:"defeat-stat-icon",children:""}),l.jsx("div",{className:"defeat-stat-value",children:o.turnCount}),l.jsx("div",{className:"defeat-stat-label",children:"Turns Survived"})]}),l.jsxs("div",{className:"defeat-stat-card",children:[l.jsx("div",{className:"defeat-stat-icon",children:""}),l.jsx("div",{className:"defeat-stat-value",children:o.damageDealt}),l.jsx("div",{className:"defeat-stat-label",children:"Damage Dealt"})]}),l.jsxs("div",{className:"defeat-stat-card",children:[l.jsx("div",{className:"defeat-stat-icon",children:""}),l.jsx("div",{className:"defeat-stat-value",children:o.damageTaken}),l.jsx("div",{className:"defeat-stat-label",children:"Damage Taken"})]})]}),l.jsxs("div",{className:`defeat-options ${b?"show":""}`,children:[!h&&l.jsxs("button",{className:"defeat-button retry",onClick:s,children:[l.jsx("span",{className:"button-icon",children:""}),l.jsx("span",{className:"button-text",children:"Retry Battle"})]}),l.jsxs("button",{className:"defeat-button camp",onClick:r,children:[l.jsx("span",{className:"button-icon",children:""}),l.jsx("span",{className:"button-text",children:h?"New Game":"Return to Camp"})]})]}),l.jsx("div",{className:`defeat-message ${b?"show":""}`,children:l.jsx("p",{children:h?"Start anew with the wisdom you have gained...":"Learn from your mistakes and grow stronger..."})})]})]})},ov=({isOpen:s,onClose:r,items:o,onUseItem:u,itemUsedThisPhase:m=!1})=>{if(!s)return null;const f=o.filter(p=>p.itemType==="consumable"&&(p.usableContext==="battle"||p.usableContext==="anywhere"||!p.usableContext)),h=p=>{m||(u(p),r())},b=p=>{p.target===p.currentTarget&&r()};return l.jsx("div",{className:"use-item-modal-backdrop",onClick:b,children:l.jsxs("div",{className:"use-item-modal-content",children:[l.jsxs("div",{className:"use-item-modal-header",children:[l.jsx("h2",{className:"use-item-modal-title",children:""}),l.jsx("button",{className:"use-item-close-btn",onClick:r,children:""})]}),m&&l.jsx("div",{className:"item-used-warning",children:""}),l.jsx("div",{className:"use-item-grid",children:f.length>0?f.map(p=>l.jsxs("div",{className:`use-item-card ${m?"disabled":""}`,onClick:()=>h(p),children:[l.jsx("div",{className:`item-icon-container rarity-${p.rarity}`,children:l.jsx("span",{className:"item-icon",children:p.type})}),l.jsx("div",{className:"item-name",children:p.name}),p.stackCount&&p.stackCount>1&&l.jsxs("div",{className:"item-quantity",children:["x",p.stackCount]})]},p.id)):l.jsx("div",{className:"no-items-message",children:""})})]})})},Pu={primary:"#1a1a24",secondary:"#2a2a3d",accent:"#8b7aa8",bg:"linear-gradient(135deg, #0a0a0f 0%, #151520 100%)",glow:"rgba(139, 122, 168, 0.25)",hover:"#a090b0"},dv={easy:3,normal:3,hard:2};function Zp(s){const r=dv[s];return{maxLives:r,currentLives:r}}function mv(s){return{...s,currentLives:Math.max(0,s.currentLives-1)}}function fv(s){return s.currentLives<=0}function Kp(s,r){const o=[];let u=1;for(const[m,f]of Object.entries(s)){const h=r[m];if(h)for(let b=0;b<f;b++)o.push({...h,id:`starter_${m}_${u++}`})}return o}function pv(){return Kp($i.swordsman,tn)}function yv(){return Kp($i.mage,Cp)}const Fp={swordsman:{class:"swordsman",name:"Swordsman",japaneseName:"",description:"",uniqueMechanic:"Sword Energy",mechanicDescription:"",stats:{hp:100,ap:30,speed:50,cardActEnergy:3},starterDeck:pv(),isAvailable:!0,themeColor:"#ef4444",icon:"sword"},mage:{class:"mage",name:"Mage",japaneseName:"",description:"HP",uniqueMechanic:"Elemental Resonance",mechanicDescription:"Lv2+30%",stats:{hp:60,ap:20,speed:60,cardActEnergy:3},starterDeck:yv(),isAvailable:!0,themeColor:"#3b82f6",icon:"staff"},summoner:{class:"summoner",name:"Summoner",japaneseName:"",description:"",uniqueMechanic:"Summon System",mechanicDescription:"HP",stats:{hp:80,ap:25,speed:40,cardActEnergy:3},starterDeck:[],isAvailable:!1,themeColor:"#22c55e",icon:"summon"}};function gv(s){return Fp[s]}function hv(){return Object.values(Fp)}function yl(s){return s.small*30+s.medium*100+s.large*350+s.huge*1e3}function _a(s,r){return{...r,id:`${s}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const dp=[_a("steel_sword",{typeId:"steel_sword",name:"Steel Sword",description:"A sturdy sword made of steel. Reliable for basic combat.",itemType:"equipment",type:"SWORD",equipmentSlot:"weapon",durability:45,maxDurability:50,level:1,quality:"normal",effects:[{type:"stat",target:"attack",value:15,description:"ATK +15"}],rarity:"common",sellPrice:50,canSell:!0,canDiscard:!0}),_a("iron_armor",{typeId:"iron_armor",name:"Iron Armor",description:"Basic iron plating. Provides decent protection.",itemType:"equipment",type:"ARMOR",equipmentSlot:"armor",durability:60,maxDurability:60,level:0,quality:"normal",effects:[{type:"stat",target:"defense",value:10,description:"DEF +10"}],rarity:"common",sellPrice:40,canSell:!0,canDiscard:!0}),_a("healing_potion",{typeId:"healing_potion",name:"Healing Potion",description:"Restores HP when consumed.",itemType:"consumable",type:"POTION",stackable:!0,stackCount:3,maxStack:10,usableContext:"battle",rarity:"common",sellPrice:20,canSell:!0,canDiscard:!0}),_a("magic_scroll",{typeId:"magic_scroll",name:"Magic Scroll",description:"A scroll containing ancient magic. Single use.",itemType:"consumable",type:"SCROLL",stackable:!1,usableContext:"battle",rarity:"rare",sellPrice:100,canSell:!0,canDiscard:!0}),_a("dragon_shield",{typeId:"dragon_shield",name:"Dragon Shield",description:"A legendary shield crafted from dragon scales.",itemType:"equipment",type:"SHIELD",equipmentSlot:"armor",durability:95,maxDurability:100,level:2,quality:"good",effects:[{type:"stat",target:"defense",value:35,description:"DEF +35"},{type:"passive",target:"fire_resistance",value:20,description:"Fire Resistance +20%"}],rarity:"epic",sellPrice:500,canSell:!0,canDiscard:!1})],mp=[_a("bronze_sword",{typeId:"bronze_sword",name:"Bronze Sword",description:"An old bronze sword. Better than nothing.",itemType:"equipment",type:"SWORD",equipmentSlot:"weapon",durability:25,maxDurability:30,level:0,quality:"poor",effects:[{type:"stat",target:"attack",value:8,description:"ATK +8"}],rarity:"common",sellPrice:15,canSell:!0,canDiscard:!0}),_a("lesser_potion",{typeId:"lesser_potion",name:"Lesser Potion",description:"A weak healing potion. Restores minimal HP.",itemType:"consumable",type:"POTION",stackable:!0,stackCount:2,maxStack:10,usableContext:"anywhere",rarity:"common",sellPrice:10,canSell:!0,canDiscard:!0}),_a("teleport_stone",{typeId:"teleport_stone",name:"Teleport Stone",description:"Instantly return to base camp. Single use.",itemType:"consumable",type:"STONE",stackable:!1,usableContext:"map",rarity:"rare",sellPrice:150,canSell:!0,canDiscard:!1})],vv={weapon:_a("beginner_sword",{typeId:"beginner_sword",name:"Beginner Sword",description:"A sword given to all new adventurers.",itemType:"equipment",type:"SWORD",equipmentSlot:"weapon",durability:40,maxDurability:40,level:0,quality:"normal",effects:[{type:"stat",target:"attack",value:10,description:"ATK +10"}],rarity:"common",sellPrice:25,canSell:!0,canDiscard:!0}),armor:_a("leather_armor",{typeId:"leather_armor",name:"Leather Armor",description:"Basic leather protection for beginners.",itemType:"equipment",type:"ARMOR",equipmentSlot:"armor",durability:30,maxDurability:30,level:0,quality:"normal",effects:[{type:"stat",target:"defense",value:5,description:"DEF +5"}],rarity:"common",sellPrice:20,canSell:!0,canDiscard:!0}),helmet:null,boots:null,accessory1:_a("power_ring",{typeId:"power_ring",name:"Power Ring",description:"A ring that slightly enhances physical strength.",itemType:"equipment",type:"RING",equipmentSlot:"accessory1",durability:999,maxDurability:999,level:1,quality:"normal",effects:[{type:"stat",target:"attack",value:5,description:"ATK +5"},{type:"stat",target:"hp",value:10,description:"HP +10"}],rarity:"uncommon",sellPrice:80,canSell:!0,canDiscard:!0}),accessory2:null},Wp=S.createContext(void 0);function bv(){return{gold:{baseCamp:1250,exploration:0},magicStones:{baseCamp:{small:5,medium:3,large:1,huge:0},exploration:{small:0,medium:0,large:0,huge:0}},explorationLimit:{current:0,max:10}}}const xv=({children:s})=>{const[r,o]=S.useState(bv()),u=S.useCallback((C,k=!1)=>{o(w=>({...w,gold:{...w.gold,baseCamp:k?w.gold.baseCamp+C:w.gold.baseCamp,exploration:k?w.gold.exploration:w.gold.exploration+C}}))},[]),m=S.useCallback(C=>r.gold.baseCamp+r.gold.exploration<C?!1:(o(w=>{let x=w.gold.baseCamp,B=w.gold.exploration;if(x>=C)x-=C;else{const z=C-x;x=0,B-=z}return{...w,gold:{baseCamp:Math.max(0,x),exploration:Math.max(0,B)}}}),!0),[r.gold.baseCamp,r.gold.exploration]),f=S.useCallback(()=>r.gold.baseCamp+r.gold.exploration,[r.gold.baseCamp,r.gold.exploration]),h=S.useCallback((C,k=!1)=>{o(w=>{const x=k?"baseCamp":"exploration";return{...w,magicStones:{...w.magicStones,[x]:{small:w.magicStones[x].small+(C.small||0),medium:w.magicStones[x].medium+(C.medium||0),large:w.magicStones[x].large+(C.large||0),huge:w.magicStones[x].huge+(C.huge||0)}}}})},[]),b=S.useCallback(C=>{const k=yl(r.magicStones.baseCamp),w=yl(r.magicStones.exploration);return!(k+w<C)},[r.magicStones.baseCamp,r.magicStones.exploration]),p=S.useCallback(()=>{const C=yl(r.magicStones.baseCamp),k=yl(r.magicStones.exploration);return C+k},[r.magicStones.baseCamp,r.magicStones.exploration]),v=S.useCallback(()=>r.magicStones.baseCamp,[r.magicStones.baseCamp]),g=S.useCallback(()=>r.magicStones.exploration,[r.magicStones.exploration]),j=S.useCallback(()=>r.explorationLimit.current>=r.explorationLimit.max?!1:(o(C=>({...C,explorationLimit:{...C.explorationLimit,current:C.explorationLimit.current+1}})),!0),[r.explorationLimit.current,r.explorationLimit.max]),q=S.useCallback(()=>{o(C=>({...C,explorationLimit:{...C.explorationLimit,current:0}}))},[]),T=S.useCallback(()=>r.explorationLimit,[r.explorationLimit]),D=S.useCallback(C=>{o(k=>{const w=Math.floor(k.gold.exploration*C);return{...k,gold:{baseCamp:k.gold.baseCamp+w,exploration:0},magicStones:{baseCamp:{small:k.magicStones.baseCamp.small+Math.floor(k.magicStones.exploration.small*C),medium:k.magicStones.baseCamp.medium+Math.floor(k.magicStones.exploration.medium*C),large:k.magicStones.baseCamp.large+Math.floor(k.magicStones.exploration.large*C),huge:k.magicStones.baseCamp.huge+Math.floor(k.magicStones.exploration.huge*C)},exploration:{small:0,medium:0,large:0,huge:0}}}})},[]),U=S.useCallback(()=>{o(C=>({...C,gold:{...C.gold,exploration:0},magicStones:{...C.magicStones,exploration:{small:0,medium:0,large:0,huge:0}}}))},[]);return l.jsx(Wp.Provider,{value:{resources:r,addGold:u,useGold:m,getTotalGold:f,addMagicStones:h,useMagicStones:b,getTotalMagicStonesValue:p,getBaseCampMagicStones:v,getExplorationMagicStones:g,useExplorationPoint:j,resetExplorationLimit:q,getExplorationLimit:T,transferExplorationToBaseCamp:D,resetExplorationResources:U},children:s})},$u=()=>{const s=S.useContext(Wp);if(!s)throw new Error("useResources must be used within ResourceProvider");return s},ey=S.createContext(void 0);function Sv(s){switch(s){case"swordsman":return Ea;case"mage":return E0;case"summoner":return _0;default:return Ea}}function fp(s){return{...s,gold:0,storage:{items:dp,maxCapacity:100,currentCapacity:dp.length},inventory:{items:mp,maxCapacity:20,currentCapacity:mp.length},equipmentInventory:{items:[],maxCapacity:3,currentCapacity:0},equipmentSlots:vv,explorationGold:0,baseCampGold:0,explorationMagicStones:{small:0,medium:0,large:0,huge:0},baseCampMagicStones:{small:0,medium:0,large:0,huge:0},explorationLimit:{current:0,max:10},sanctuaryProgress:{currentRunSouls:25,totalSouls:150,unlockedNodes:[],explorationLimitBonus:0}}}function pp(s,r="normal"){return{currentHp:s.hp,currentAp:s.ap,cardMasteryStore:new Map,lives:Zp(r),difficulty:r}}const Nv=({children:s})=>{const r=$u(),[o,u]=S.useState(()=>({...fp(Ea),gold:r.getTotalGold(),baseCampGold:r.resources.gold.baseCamp,explorationGold:r.resources.gold.exploration,baseCampMagicStones:r.resources.magicStones.baseCamp,explorationMagicStones:r.resources.magicStones.exploration,explorationLimit:r.resources.explorationLimit})),[m,f]=S.useState(()=>pp(Ea)),h=M=>{u(H=>({...H,classGrade:M}))},b=M=>{u(H=>({...H,hp:Math.max(0,Math.min(M,H.maxHp))}))},p=M=>{u(H=>({...H,ap:Math.max(0,Math.min(M,H.maxAp))}))},v=M=>{u(H=>({...H,sanctuaryProgress:{...H.sanctuaryProgress,currentRunSouls:H.sanctuaryProgress.currentRunSouls+M}}))},g=M=>{u(H=>{const F=Math.floor(H.sanctuaryProgress.currentRunSouls*M);return{...H,sanctuaryProgress:{...H.sanctuaryProgress,totalSouls:H.sanctuaryProgress.totalSouls+F,currentRunSouls:0}}})},j=()=>{u(M=>({...M,sanctuaryProgress:{...M.sanctuaryProgress,currentRunSouls:0}}))},q=M=>{const H=Sv(M),F=gv(M),de={...H,deck:F.starterDeck},ce=fp(de);u({...ce,gold:r.getTotalGold(),baseCampGold:r.resources.gold.baseCamp,explorationGold:r.resources.gold.exploration,baseCampMagicStones:r.resources.magicStones.baseCamp,explorationMagicStones:r.resources.magicStones.exploration,explorationLimit:r.resources.explorationLimit,sanctuaryProgress:{currentRunSouls:0,totalSouls:0,unlockedNodes:[],explorationLimitBonus:0}})},T=(M,H=!1)=>{r.addGold(M,H),u(F=>({...F,gold:r.getTotalGold()+M,baseCampGold:H?F.baseCampGold+M:F.baseCampGold,explorationGold:H?F.explorationGold:F.explorationGold+M}))},D=M=>{const H=r.useGold(M);return H&&u(F=>{let de=F.baseCampGold,ce=F.explorationGold;if(de>=M)de-=M;else{const L=M-de;de=0,ce-=L}return{...F,gold:F.gold-M,baseCampGold:Math.max(0,de),explorationGold:Math.max(0,ce)}}),H},U=(M,H=!1)=>{r.addMagicStones(M,H),u(F=>H?{...F,baseCampMagicStones:{small:F.baseCampMagicStones.small+(M.small||0),medium:F.baseCampMagicStones.medium+(M.medium||0),large:F.baseCampMagicStones.large+(M.large||0),huge:F.baseCampMagicStones.huge+(M.huge||0)}}:{...F,explorationMagicStones:{small:F.explorationMagicStones.small+(M.small||0),medium:F.explorationMagicStones.medium+(M.medium||0),large:F.explorationMagicStones.large+(M.large||0),huge:F.explorationMagicStones.huge+(M.huge||0)}})},C=M=>r.useMagicStones(M),k=M=>{r.transferExplorationToBaseCamp(M),g(M),u(H=>({...H,baseCampGold:H.baseCampGold+Math.floor(H.explorationGold*M),explorationGold:0,baseCampMagicStones:{small:H.baseCampMagicStones.small+Math.floor(H.explorationMagicStones.small*M),medium:H.baseCampMagicStones.medium+Math.floor(H.explorationMagicStones.medium*M),large:H.baseCampMagicStones.large+Math.floor(H.explorationMagicStones.large*M),huge:H.baseCampMagicStones.huge+Math.floor(H.explorationMagicStones.huge*M)},explorationMagicStones:{small:0,medium:0,large:0,huge:0},gold:H.baseCampGold+Math.floor(H.explorationGold*M)}))},w=()=>{r.resetExplorationResources(),j(),u(M=>({...M,explorationGold:0,gold:M.baseCampGold,explorationMagicStones:{small:0,medium:0,large:0,huge:0}}))},x=M=>{f(H=>({...H,...M}))},B=(M,H)=>{f(F=>{const de=new Map(F.cardMasteryStore),ce=de.get(M)||0;return de.set(M,ce+H),{...F,cardMasteryStore:de}})},z=()=>{f(M=>({...pp(o,M.difficulty),lives:M.lives,difficulty:M.difficulty}))},$=()=>{f(M=>({...M,lives:mv(M.lives)}))},K=()=>fv(m.lives),ae=M=>{f(H=>({...H,difficulty:M,lives:Zp(M)}))},le=S.useMemo(()=>({persistent:{id:`player_${Date.now()}`,name:o.name??"Adventurer",playerClass:o.playerClass,classGrade:o.classGrade,level:o.level,baseMaxHp:o.maxHp,baseMaxAp:o.maxAp,baseSpeed:o.speed,cardActEnergy:o.cardActEnergy,deckCardIds:o.deck.map(M=>M.id),titles:o.tittle??[]},resources:{baseCampGold:o.baseCampGold,explorationGold:o.explorationGold,baseCampMagicStones:o.baseCampMagicStones,explorationMagicStones:o.explorationMagicStones,explorationLimit:o.explorationLimit},inventory:{storage:o.storage,inventory:o.inventory,equipmentInventory:o.equipmentInventory,equipmentSlots:o.equipmentSlots},progression:{sanctuaryProgress:o.sanctuaryProgress,unlockedDepths:[1],completedAchievements:[]}}),[o]),be=M=>{u(H=>{let F={...H};return M.persistent&&(M.persistent.classGrade!==void 0&&(F.classGrade=M.persistent.classGrade),M.persistent.level!==void 0&&(F.level=M.persistent.level),M.persistent.name!==void 0&&(F.name=M.persistent.name),M.persistent.titles!==void 0&&(F.tittle=M.persistent.titles)),M.resources&&(M.resources.baseCampGold!==void 0&&(F.baseCampGold=M.resources.baseCampGold,F.gold=M.resources.baseCampGold+(M.resources.explorationGold??H.explorationGold)),M.resources.explorationGold!==void 0&&(F.explorationGold=M.resources.explorationGold,F.gold=(M.resources.baseCampGold??H.baseCampGold)+M.resources.explorationGold),M.resources.baseCampMagicStones!==void 0&&(F.baseCampMagicStones=M.resources.baseCampMagicStones),M.resources.explorationMagicStones!==void 0&&(F.explorationMagicStones=M.resources.explorationMagicStones),M.resources.explorationLimit!==void 0&&(F.explorationLimit=M.resources.explorationLimit)),M.inventory&&(M.inventory.storage!==void 0&&(F.storage=M.inventory.storage),M.inventory.inventory!==void 0&&(F.inventory=M.inventory.inventory),M.inventory.equipmentInventory!==void 0&&(F.equipmentInventory=M.inventory.equipmentInventory),M.inventory.equipmentSlots!==void 0&&(F.equipmentSlots=M.inventory.equipmentSlots)),M.progression&&M.progression.sanctuaryProgress!==void 0&&(F.sanctuaryProgress=M.progression.sanctuaryProgress),F})};return l.jsx(ey.Provider,{value:{playerData:le,updatePlayerData:be,runtimeState:m,updateRuntimeState:x,updateCardMastery:B,resetRuntimeState:z,decreaseLives:$,isGameOver:K,setDifficulty:ae,updateClassGrade:h,updateHp:b,updateAp:p,addSouls:v,transferSouls:g,resetCurrentRunSouls:j,initializeWithClass:q,addGold:T,useGold:D,addMagicStones:U,useMagicStones:C,transferExplorationResources:k,resetExplorationResources:w},children:s})},Da=()=>{const s=S.useContext(ey);if(!s)throw new Error("usePlayer must be used within PlayerProvider");return s},Ui="1.0.0",jn="roguelike_card_save",Xu={save(s){try{const r={...s,version:Ui,timestamp:Date.now()},o=JSON.stringify(r);return localStorage.setItem(jn,o),{success:!0,message:"Game saved successfully",timestamp:r.timestamp}}catch(r){return console.error("Save failed:",r),{success:!1,message:`Save failed: ${r instanceof Error?r.message:"Unknown error"}`}}},load(){try{const s=localStorage.getItem(jn);if(!s)return{success:!1,message:"No save data found"};const r=JSON.parse(s);return r.version!==Ui?{success:!0,message:`Save data version mismatch (${r.version} vs ${Ui}). Migration may be needed.`,data:r,needsMigration:!0}:{success:!0,message:"Game loaded successfully",data:r}}catch(s){return console.error("Load failed:",s),{success:!1,message:`Load failed: ${s instanceof Error?s.message:"Unknown error"}`}}},deleteSave(){localStorage.removeItem(jn)},hasSave(){return localStorage.getItem(jn)!==null},getMetadata(){try{const s=localStorage.getItem(jn);if(!s)return{exists:!1};const r=JSON.parse(s);return{exists:!0,version:r.version,timestamp:r.timestamp,playerName:r.player?.name,playerClass:r.player?.playerClass,classGrade:r.player?.classGrade}}catch{return{exists:!1}}},exportSave(){return localStorage.getItem(jn)||""},importSave(s){try{const r=JSON.parse(s);return!r.version||!r.player||!r.resources?(console.error("Invalid save data structure"),!1):(localStorage.setItem(jn,s),!0)}catch(r){return console.error("Import failed:",r),!1}},migrate(s){return{...s,version:Ui}}},ay=S.createContext(void 0);function Cv(){return Xu.hasSave()?"camp":"character_select"}const jv={currentScreen:Cv(),battleMode:null,depth:1},Ev=({children:s})=>{const[r,o]=S.useState(jv),u=b=>{o(p=>({...p,currentScreen:b,...b!=="battle"&&{battleConfig:void 0,battleMode:null}}))},m=(b,p="normal")=>{o(v=>({...v,currentScreen:"battle",battleMode:p,battleConfig:b}))},f=()=>{o(b=>({...b,currentScreen:"camp",battleMode:null,battleConfig:void 0}))},h=b=>{o(p=>({...p,depth:b}))};return l.jsx(ay.Provider,{value:{gameState:r,setGameState:o,navigateTo:u,startBattle:m,returnToCamp:f,setDepth:h},children:s})},Ga=()=>{const s=S.useContext(ay);if(!s)throw new Error("useGameState must be used within GameStateProvider");return s};function _v(s){const r=s.progression.sanctuaryProgress.currentRunSouls;return{updates:{inventory:{...s.inventory,storage:s.inventory.storage,inventory:{...s.inventory.inventory,items:[],currentCapacity:0},equipmentInventory:{...s.inventory.equipmentInventory,items:[],currentCapacity:0},equipmentSlots:{weapon:null,armor:null,helmet:null,boots:null,accessory1:null,accessory2:null}},resources:{...s.resources,explorationGold:0,explorationMagicStones:{small:0,medium:0,large:0,huge:0},explorationLimit:s.resources.explorationLimit},progression:{...s.progression,sanctuaryProgress:{...s.progression.sanctuaryProgress,totalSouls:s.progression.sanctuaryProgress.totalSouls+r,currentRunSouls:0}}},soulsTransferred:r}}const ty={healing_potion:{typeId:"healing_potion",name:"Healing Potion",nameJa:"",description:"Restores 30 HP when consumed.",descriptionJa:"HP30",effects:[{type:"heal",value:30}],usableContext:"battle",icon:"",rarity:"common",sellPrice:20,maxStack:10},greater_healing_potion:{typeId:"greater_healing_potion",name:"Greater Healing Potion",nameJa:"",description:"Restores 60 HP when consumed.",descriptionJa:"HP60",effects:[{type:"heal",value:60}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:50,maxStack:5},full_elixir:{typeId:"full_elixir",name:"Full Elixir",nameJa:"",description:"Fully restores HP to maximum.",descriptionJa:"HP",effects:[{type:"fullHeal"}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:200,maxStack:3},energy_potion:{typeId:"energy_potion",name:"Energy Potion",nameJa:"",description:"Restores 2 card energy.",descriptionJa:"2",effects:[{type:"energy",value:2}],usableContext:"battle",icon:"",rarity:"common",sellPrice:25,maxStack:10},shield_potion:{typeId:"shield_potion",name:"Shield Potion",nameJa:"",description:"Grants 15 guard points.",descriptionJa:"15",effects:[{type:"shield",value:15}],usableContext:"battle",icon:"",rarity:"common",sellPrice:30,maxStack:10},antidote:{typeId:"antidote",name:"Antidote",nameJa:"",description:"Removes all debuffs.",descriptionJa:"",effects:[{type:"debuffClear"}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:40,maxStack:5},strength_elixir:{typeId:"strength_elixir",name:"Strength Elixir",nameJa:"",description:"Grants Attack Up (Major) for 3 turns.",descriptionJa:"3",effects:[{type:"buff",buffType:"atkUpMajor",duration:3}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:100,maxStack:3},iron_skin_elixir:{typeId:"iron_skin_elixir",name:"Iron Skin Elixir",nameJa:"",description:"Grants Defense Up (Major) for 3 turns.",descriptionJa:"3",effects:[{type:"buff",buffType:"defUpMajor",duration:3}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:100,maxStack:3},haste_potion:{typeId:"haste_potion",name:"Haste Potion",nameJa:"",description:"Grants Haste for 2 turns.",descriptionJa:"2",effects:[{type:"buff",buffType:"haste",duration:2}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:60,maxStack:5},magic_burst_crystal:{typeId:"magic_burst_crystal",name:"Magic Burst Crystal",nameJa:"",description:"Deals 40 damage to all enemies.",descriptionJa:"40",effects:[{type:"damage",value:40,targetAll:!0}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:150,maxStack:3},time_stop_hourglass:{typeId:"time_stop_hourglass",name:"Time Stop Hourglass",nameJa:"",description:"Skips the next enemy turn.",descriptionJa:"",effects:[{type:"skipEnemyTurn"}],usableContext:"battle",icon:"",rarity:"epic",sellPrice:300,maxStack:1},draw_scroll:{typeId:"draw_scroll",name:"Draw Scroll",nameJa:"",description:"Draw 2 additional cards.",descriptionJa:"2",effects:[{type:"draw",value:2}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:45,maxStack:5},combo_elixir:{typeId:"combo_elixir",name:"Combo Elixir",nameJa:"",description:"Restores 30 HP, 2 energy, and grants 10 guard.",descriptionJa:"HP30210",effects:[{type:"heal",value:30},{type:"energy",value:2},{type:"shield",value:10}],usableContext:"battle",icon:"",rarity:"epic",sellPrice:250,maxStack:2},teleport_stone:{typeId:"teleport_stone",name:"Teleport Stone",nameJa:"",description:"Instantly return to base camp.",descriptionJa:"",effects:[],usableContext:"map",icon:"",rarity:"rare",sellPrice:150,maxStack:3},treasure_map:{typeId:"treasure_map",name:"Treasure Map",nameJa:"",description:"Reveals hidden treasure on the current floor.",descriptionJa:"",effects:[],usableContext:"map",icon:"",rarity:"uncommon",sellPrice:80,maxStack:3},repair_kit:{typeId:"repair_kit",name:"Repair Kit",nameJa:"",description:"Restores 20 durability to equipped weapon.",descriptionJa:"20",effects:[],usableContext:"map",icon:"",rarity:"common",sellPrice:30,maxStack:5},lucky_charm:{typeId:"lucky_charm",name:"Lucky Charm",nameJa:"",description:"Increases rare drop rate for next battle.",descriptionJa:"",effects:[],usableContext:"map",icon:"",rarity:"uncommon",sellPrice:60,maxStack:5},merchant_ticket:{typeId:"merchant_ticket",name:"Merchant Ticket",nameJa:"",description:"Refreshes the shop inventory.",descriptionJa:"",effects:[],usableContext:"camp",icon:"",rarity:"rare",sellPrice:200,maxStack:3},lesser_potion:{typeId:"lesser_potion",name:"Lesser Potion",nameJa:"",description:"Restores 15 HP when consumed.",descriptionJa:"HP15",effects:[{type:"heal",value:15}],usableContext:"anywhere",icon:"",rarity:"common",sellPrice:10,maxStack:10}};function Dv(s){return ty[s]}function wv(s){const r=ty[s];return r?r.usableContext==="battle"||r.usableContext==="anywhere":!1}function Mv(s,r,o,u,m,f){if(s.itemType!=="consumable")return{success:!1,message:`${s.name}`};if(!wv(s.typeId))return{success:!1,message:`${s.name}`};const h=Dv(s.typeId);if(!h)return Av(s,r,o);const b={success:!0,message:"",buffsApplied:[]},p=[];for(const v of h.effects){const g=Tv(v,r,o,u,m,f);g.hpChange&&(b.hpChange=(b.hpChange??0)+g.hpChange),g.guardChange&&(b.guardChange=(b.guardChange??0)+g.guardChange),g.energyChange&&(b.energyChange=(b.energyChange??0)+g.energyChange),g.cardsDrawn&&(b.cardsDrawn=(b.cardsDrawn??0)+g.cardsDrawn),g.buffsApplied&&b.buffsApplied.push(...g.buffsApplied),g.debuffsCleared&&(b.debuffsCleared=!0),g.damageDealt&&(b.damageDealt=(b.damageDealt??0)+g.damageDealt),g.skipEnemyTurn&&(b.skipEnemyTurn=!0),g.message&&p.push(g.message)}return b.message=`${h.nameJa} ${p.join(" ")}`,b}function Tv(s,r,o,u,m,f){switch(s.type){case"heal":{const h=Math.min(s.value??0,o-r);return{hpChange:h,message:`HP${h}`}}case"fullHeal":return{hpChange:o-r,message:"HP"};case"shield":return{guardChange:s.value??0,message:`${s.value}`};case"energy":{const h=Math.min(s.value??0,f-m);return{energyChange:h,message:`${h}`}}case"buff":{if(!s.buffType)return{message:""};const h=ye[s.buffType];return{buffsApplied:[{type:s.buffType,duration:s.duration??3}],message:`${h?.nameJa??s.buffType}`}}case"debuffClear":return{debuffsCleared:!0,message:""};case"damage":return{damageDealt:s.value??0,message:s.targetAll?`${s.value}`:`${s.value}`};case"draw":return{cardsDrawn:s.value??1,message:`${s.value}`};case"skipEnemyTurn":return{skipEnemyTurn:!0,message:""};default:return{message:""}}}function Av(s,r,o){const u=s.name.toLowerCase(),m=s.typeId.toLowerCase();if(u.includes("potion")||u.includes("heal")||m.includes("potion")||m.includes("heal")){let f=30;u.includes("lesser")||m.includes("lesser")?f=15:(u.includes("greater")||m.includes("greater"))&&(f=60);const h=Math.min(f,o-r);return{success:!0,hpChange:h,message:`${s.name} HP${h}`}}return{success:!0,message:`${s.name}`}}function kv(s,r){const o=new Map(r);return s.forEach(u=>{const m=u.cardTypeId,f=o.get(m)??0;u.useCount>f&&o.set(m,u.useCount)}),o}const qv=({depth:s,onReturnToCamp:r,onWin:o,onLose:u})=>{const m=Pu,{playerData:f,updatePlayerData:h,runtimeState:b,updateRuntimeState:p,decreaseLives:v,isGameOver:g,setDifficulty:j}=Da(),{addMagicStones:q}=$u(),{navigateTo:T,gameState:D}=Ga(),U=D.battleConfig?.enemyType||"normal",[C,k]=S.useState(0),w=S.useRef(!1),[x,B]=S.useState(0),[z,$]=S.useState(!1),[K,ae]=S.useState(!1),le=S.useMemo(()=>({currentHp:b.currentHp,currentAp:b.currentAp,maxHp:f.persistent.baseMaxHp,maxAp:f.persistent.baseMaxAp,name:f.persistent.name,playerClass:f.persistent.playerClass,classGrade:f.persistent.classGrade,speed:f.persistent.baseSpeed,cardActEnergy:f.persistent.cardActEnergy,cardMasteryStore:b.cardMasteryStore,deckConfig:jp(f.persistent.playerClass)}),[b.currentHp,b.currentAp,b.cardMasteryStore,f.persistent]),{playerRef:be,aliveEnemies:M,playerName:H,playerClass:F,playerHp:de,playerMaxHp:ce,playerAp:L,playerMaxAp:Z,playerGuard:V,playerBuffs:W,cardEnergy:re,maxEnergy:E,swordEnergy:Y,phaseCount:J,turnMessage:ee,showTurnMessage:oe,hand:me,drawPile:ge,discardPile:Te,isNewCard:Se,getDiscardingCards:za,handleCardPlay:Ua,handleEndPhase:Za,resetForNextEnemy:Tt,openedPileType:ra,openDrawPile:Oa,openDiscardPile:ut,closePileModal:ha,battleResult:fa,battleStats:te,phaseQueue:fe,currentPhaseIndex:Ue}=Qp(s,void 0,le);S.useEffect(()=>{if(fa==="defeat"&&!w.current){const xe=_v(f);h(xe.updates),B(xe.soulsTransferred),v(),w.current=!0}},[fa,f,h,v]),S.useEffect(()=>{ae(!1)},[Ue]);const pa=()=>{const xe=C+1;k(xe);let Ae="normal";xe===7?Ae="boss":xe%3===0&&(Ae="group");const{enemies:ua}=Up(s,Ae);Tt(ua)},Ka=S.useCallback(xe=>{if(K){console.log("Item already used this phase");return}const Ae=Mv(xe,de,ce,W,re,E);if(!Ae.success){console.log(`Item use failed: ${Ae.message}`);return}if(Ae.hpChange&&Ae.hpChange>0){const Ie=Math.min(de+Ae.hpChange,ce);p({currentHp:Ie})}Ae.buffsApplied&&Ae.buffsApplied.length>0&&console.log("Buffs applied:",Ae.buffsApplied),Ae.debuffsCleared&&console.log("Debuffs cleared");const ua=f.inventory.inventory.items.findIndex(Ie=>Ie.id===xe.id);if(ua!==-1){const Ie=[...f.inventory.inventory.items],ya=Ie[ua];ya.stackable&&ya.stackCount&&ya.stackCount>1?Ie[ua]={...ya,stackCount:ya.stackCount-1}:Ie.splice(ua,1),h({inventory:{...f.inventory,inventory:{...f.inventory.inventory,items:Ie,currentCapacity:Ie.length}}})}ae(!0),console.log(`Used item: ${xe.name} - ${Ae.message}`)},[K,de,ce,W,re,E,f.inventory,p,h]),ta=f.inventory.inventory.items;if(fa==="victory"){const xe=lv(U),Ae=iv(U),ua=()=>{const Ie=[...me,...ge,...Te],ya=kv(Ie,b.cardMasteryStore),La=sv(f.progression.sanctuaryProgress,U,!1);h({progression:{...f.progression,sanctuaryProgress:La.newProgress}}),q(Ae,!1),p({currentHp:de,currentAp:L,cardMasteryStore:ya}),o?o():pa()};return l.jsx(rv,{onContinue:ua,rewards:{soulRemnants:xe,magicStones:Ae,cards:[]},battleStats:{phaseCount:J,damageDealt:te.damageDealt,damageTaken:te.damageTaken},enemyType:U})}if(fa==="defeat"){const xe=g(),Ae=()=>{xe?(Xu.deleteSave(),j("normal"),T("character_select")):u?u():r&&r()};return l.jsx(uv,{onRetry:()=>window.location.reload(),onReturnToCamp:Ae,battleStats:{turnCount:J,damageDealt:te.damageDealt,damageTaken:te.damageTaken},remainingLives:b.lives.currentLives,maxLives:b.lives.maxLives,soulsTransferred:x,isGameOver:xe})}return l.jsxs("div",{className:"battle-screen",children:[oe&&l.jsx("div",{className:"turn-message-slide",children:l.jsx("div",{className:"turn-message-text",children:ee})}),l.jsxs("div",{className:"battle-header",children:[l.jsxs("div",{className:"depth-info",children:[s,"-",C===6?"BOSS":C+1," | Phase"," ",J]}),l.jsx($p,{phaseQueue:fe,currentPhaseIndex:Ue})]}),l.jsxs("div",{className:"battle-field",children:[l.jsx(Xp,{enemies:M.map(xe=>({definition:xe.definition,hp:xe.hp,maxHp:xe.maxHp,ap:xe.ap,maxAp:xe.maxAp,guard:xe.guard,actEnergy:xe.energy,buffDebuffs:xe.buffDebuffs,turnCount:J})),enemyRefs:M.map(xe=>xe.ref),theme:m}),l.jsxs("div",{className:"player-section",children:[l.jsxs("div",{className:"player-field",children:[l.jsxs("div",{className:"character-name",children:[H," [",F,"]"]}),l.jsx("div",{className:"character-visual player",ref:be,children:""}),l.jsxs("div",{className:"status-container player-status-container",children:[V>0&&l.jsxs("div",{className:"status-bar-row guard-row",children:[l.jsx("div",{className:"value-badge guard-badge",children:V}),l.jsx("div",{className:"unified-bar-container guard-bar",children:l.jsx("div",{className:"bar-fill guard-fill",style:{width:`${Math.min(100,V/30*100)}%`}})})]}),l.jsxs("div",{className:"status-bar-row hp-row",children:[l.jsxs("div",{...L===0?{className:"break-badge"}:{className:"value-badge ap-badge"},children:[" ",L>0&&`${L}/${Z}`,L===0&&"break!"]}),l.jsxs("div",{...L>0?{className:"Armor-border"}:{className:"unified-bar-container hp-bar"},children:[L>0&&l.jsx("div",{className:"bar-fill ap-overlay",style:{width:`${L/Z*100}%`}}),l.jsx("div",{className:"bar-fill hp-fill",style:{width:`${de/ce*100}%`}}),l.jsxs("span",{className:"hp-value",children:[de,"/",ce]})]})]}),l.jsxs("div",{className:"status-bar-row energy-row",children:[l.jsxs("div",{className:"value-badge energy-badge",children:[re,"/",E]}),l.jsx("div",{className:"unified-bar-container energy-bar",children:l.jsx("div",{className:"bar-fill energy-fill",style:{width:`${re/E*100}%`}})})]}),l.jsx(Iu,{buffsDebuffs:W,theme:m})]})]}),l.jsx("div",{className:"energy-and-ability",children:l.jsxs("div",{className:"sword-energy-display",children:[l.jsx("div",{className:"sword-energy-label",children:":"}),l.jsx("div",{className:"sword-energy-bar-container",children:l.jsxs("div",{className:"sword-energy-bar",children:[l.jsx("div",{className:`sword-energy-fill ${Y.current>=10?"level-max":Y.current>=8?"level-high":Y.current>=5?"level-mid":""}`,style:{width:`${Y.current/Y.max*100}%`}}),l.jsxs("span",{className:"sword-energy-text",children:[Y.current,"/",Y.max]})]})}),l.jsxs("div",{className:"sword-energy-effects",children:[l.jsxs("span",{className:`effect-badge crit ${Y.current>=5?"active":"inactive"}`,children:[Y.current>=5?"":""," Crit+20%"]}),l.jsxs("span",{className:`effect-badge pierce ${Y.current>=8?"active":"inactive"}`,children:[Y.current>=8?"":""," +30%"]}),l.jsxs("span",{className:`effect-badge max ${Y.current>=10?"active":"inactive"}`,children:[Y.current>=10?"":""," MAX"]})]})]})})]})]}),l.jsxs("div",{className:"hand-container",children:[l.jsxs("div",{className:"pile-section",children:[l.jsxs("div",{className:"pile-icon draw",title:"Draw Pile",onClick:Oa,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",ge.length]})]}),l.jsxs("div",{className:"pile-icon discard",title:"Discard Pile",onClick:ut,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",Te.length]})]})]}),l.jsx("div",{className:"card-container",children:me.map((xe,Ae)=>{const ua=Se(xe.id),Ie=za().some(Fa=>Fa.id===xe.id),ya=me.length,La=Ae-(ya-1)/2,bs=Math.abs(La)*1.5-1.8,xs=La*4.2;return l.jsx("div",{className:`card-wrapper ${ua?"drawing":""} ${Ie?"discarding":""}`,style:{"--rot":`${xs}deg`,"--y":`${bs*.5}vh`,animationDelay:ua?`${Ae*.1}s`:Ie?`${Ae*.05}s`:"0s"},onClick:Fa=>Ua(xe,Fa.currentTarget),children:l.jsx(bl,{card:xe,depth:s,isPlayable:xe.cost<=re&&!Ie})},xe.id)})}),l.jsxs("div",{className:"button-frame",children:[l.jsx("button",{className:"action-btn end-phase-btn",onClick:Za,children:"End Phase"}),l.jsx("button",{className:"action-btn use-item-btn",onClick:()=>$(!0),children:"Use Item"}),l.jsx("button",{className:"action-btn flee-btn",onClick:()=>console.log("Fleeing Combat: "),children:"Fleeing Combat"})]})]}),l.jsx(Pp,{isOpen:ra!==null,onClose:ha,title:ra==="draw"?"":"",cards:ra==="draw"?ge:Te,depth:s}),l.jsx(ov,{isOpen:z,onClose:()=>$(!1),items:ta,onUseItem:Ka,itemUsedThisPhase:K})]})},Rv=({examEnemy:s,onWin:r,onLose:o})=>{const u={primary:"#8B4513",secondary:"#CD853F",accent:"#DAA520",bg:"#2C1810",glow:"#FFD700",hover:"#FFEC8B"},{playerRef:m,aliveEnemies:f,playerName:h,playerClass:b,playerHp:p,playerMaxHp:v,playerAp:g,playerMaxAp:j,playerGuard:q,playerBuffs:T,cardEnergy:D,maxEnergy:U,swordEnergy:C,phaseCount:k,turnMessage:w,showTurnMessage:x,hand:B,drawPile:z,discardPile:$,isNewCard:K,getDiscardingCards:ae,handleCardPlay:le,handleEndPhase:be,openedPileType:M,openDrawPile:H,openDiscardPile:F,closePileModal:de,battleResult:ce,phaseQueue:L,currentPhaseIndex:Z}=Qp(1,[s]);if(S.useEffect(()=>{ce==="victory"?r():ce==="defeat"&&o()},[ce,r,o]),ce==="victory"||ce==="defeat")return null;const V={"--theme-primary":u.primary,"--theme-secondary":u.secondary,"--theme-accent":u.accent,"--theme-bg":u.bg,"--theme-glow":u.glow,"--theme-hover":u.accent};return l.jsxs("div",{className:"battle-screen",style:V,children:[x&&l.jsx("div",{className:"turn-message-slide",children:l.jsx("div",{className:"turn-message-text",children:w})}),l.jsxs("div",{className:"battle-header",children:[l.jsxs("div",{className:"depth-info",children:["Promotion Exam | Phase ",k]}),l.jsxs("div",{className:"exam-enemy-name",children:["vs ",s.nameJa||s.name]})]}),l.jsx($p,{phaseQueue:L,currentPhaseIndex:Z}),l.jsxs("div",{className:"battle-field",children:[l.jsx(Xp,{enemies:f.map(W=>({definition:W.definition,hp:W.hp,maxHp:W.maxHp,ap:W.ap,maxAp:W.maxAp,guard:W.guard,actEnergy:W.energy,buffDebuffs:W.buffDebuffs,turnCount:k})),enemyRefs:f.map(W=>W.ref),theme:u}),l.jsxs("div",{className:"player-section",children:[l.jsxs("div",{className:"player-field",children:[l.jsxs("div",{className:"character-name",children:[h," [",b,"]"]}),l.jsx("div",{className:"character-visual player",ref:m,children:""}),l.jsxs("div",{className:"status-container player-status-container",children:[q>0&&l.jsxs("div",{className:"status-bar-row guard-row",children:[l.jsx("div",{className:"value-badge guard-badge",children:q}),l.jsx("div",{className:"unified-bar-container guard-bar",children:l.jsx("div",{className:"bar-fill guard-fill",style:{width:`${Math.min(100,q/30*100)}%`}})})]}),l.jsxs("div",{className:"status-bar-row hp-row",children:[l.jsxs("div",{...g===0?{className:"break-badge"}:{className:"value-badge ap-badge"},children:[g>0&&`${g}/${j}`,g===0&&"break!"]}),l.jsxs("div",{...g>0?{className:"Armor-border"}:{className:"unified-bar-container hp-bar"},children:[g>0&&l.jsx("div",{className:"bar-fill ap-overlay",style:{width:`${g/j*100}%`}}),l.jsx("div",{className:"bar-fill hp-fill",style:{width:`${p/v*100}%`}}),l.jsxs("span",{className:"hp-value",children:[p,"/",v]})]})]}),l.jsxs("div",{className:"status-bar-row energy-row",children:[l.jsxs("div",{className:"value-badge energy-badge",children:[D,"/",U]}),l.jsx("div",{className:"unified-bar-container energy-bar",children:l.jsx("div",{className:"bar-fill energy-fill",style:{width:`${D/U*100}%`}})})]}),l.jsx(Iu,{buffsDebuffs:T,theme:u})]})]}),l.jsx("div",{className:"energy-and-ability",children:l.jsxs("div",{className:"sword-energy-display",children:[l.jsx("div",{className:"sword-energy-label",children:":"}),l.jsx("div",{className:"sword-energy-bar-container",children:l.jsxs("div",{className:"sword-energy-bar",children:[l.jsx("div",{className:`sword-energy-fill ${C.current>=10?"level-max":C.current>=8?"level-high":C.current>=5?"level-mid":""}`,style:{width:`${C.current/C.max*100}%`}}),l.jsxs("span",{className:"sword-energy-text",children:[C.current,"/",C.max]})]})}),l.jsxs("div",{className:"sword-energy-effects",children:[l.jsxs("span",{className:`effect-badge crit ${C.current>=5?"active":"inactive"}`,children:[C.current>=5?"":""," Crit+20%"]}),l.jsxs("span",{className:`effect-badge pierce ${C.current>=8?"active":"inactive"}`,children:[C.current>=8?"":""," +30%"]}),l.jsxs("span",{className:`effect-badge max ${C.current>=10?"active":"inactive"}`,children:[C.current>=10?"":""," MAX"]})]})]})})]})]}),l.jsxs("div",{className:"pile-icon draw",title:"Draw Pile",onClick:H,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",z.length]})]}),l.jsxs("div",{className:"pile-icon discard",title:"Discard Pile",onClick:F,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",$.length]})]}),l.jsx("button",{className:"end-turn-btn",onClick:be,children:"End Phase"}),l.jsx("div",{className:"hand-container",children:B.map((W,re)=>{const E=K(W.id),Y=ae().some(ge=>ge.id===W.id),J=B.length,ee=re-(J-1)/2,oe=Math.abs(ee)*1.5-1.8,me=ee*4.2;return l.jsx("div",{className:`card-wrapper ${E?"drawing":""} ${Y?"discarding":""}`,style:{"--rot":`${me}deg`,"--y":`${oe*.5}vh`,animationDelay:E?`${re*.1}s`:Y?`${re*.05}s`:"0s"},onClick:ge=>le(W,ge.currentTarget),children:l.jsx(bl,{card:W,depth:1,isPlayable:W.cost<=D&&!Y})},W.id)})}),l.jsx(Pp,{isOpen:M!==null,onClose:de,title:M==="draw"?"":"",cards:M==="draw"?z:$,depth:1})]})},ys={heart:"/assets/pencil/images/generated-1769314219918.png",gold:"/assets/pencil/images/gold-icon.png",stoneSmall:"/assets/pencil/images/magic-stone-small.png",stoneMedium:"/assets/pencil/images/magic-stone-medium.png",stoneLarge:"/assets/pencil/images/magic-stone-large.png",stoneHuge:"/assets/pencil/images/magic-stone-huge.png"},nn=({title:s,variant:r="default"})=>{const{runtimeState:o}=Da(),{getTotalGold:u,resources:m}=$u(),f={small:m.magicStones.baseCamp.small+m.magicStones.exploration.small,medium:m.magicStones.baseCamp.medium+m.magicStones.exploration.medium,large:m.magicStones.baseCamp.large+m.magicStones.exploration.large,huge:m.magicStones.baseCamp.huge+m.magicStones.exploration.huge},h=o.lives.currentLives;return l.jsxs("header",{className:"facility-header basecamp-variant",children:[l.jsx("div",{className:"page-title",children:l.jsx("span",{className:"basecamp-title-text",children:s})}),l.jsxs("div",{className:"resource-frame",children:[r==="basecamp"&&l.jsx("div",{className:"remaining-life",children:Array.from({length:h}).map((b,p)=>l.jsx("img",{src:ys.heart,alt:"life",className:"heart-icon"},p))}),l.jsxs("div",{className:"gold-frame",children:[l.jsx("img",{src:ys.gold,alt:"gold",className:"gold-icon"}),l.jsxs("span",{className:"gold-amount",children:[u()," G"]})]}),l.jsxs("div",{className:"magic-stone-frame",children:[l.jsxs("div",{className:"stone-item",title:" (30G)",children:[l.jsx("img",{src:ys.stoneSmall,alt:"small stone",className:"stone-icon small"}),l.jsx("span",{className:"stone-count-value",children:f.small})]}),l.jsxs("div",{className:"stone-item",title:" (100G)",children:[l.jsx("img",{src:ys.stoneMedium,alt:"medium stone",className:"stone-icon medium"}),l.jsx("span",{className:"stone-count-value",children:f.medium})]}),l.jsxs("div",{className:"stone-item",title:" (350G)",children:[l.jsx("img",{src:ys.stoneLarge,alt:"large stone",className:"stone-icon large"}),l.jsx("span",{className:"stone-count-value",children:f.large})]}),l.jsxs("div",{className:"stone-item",title:" (1000G)",children:[l.jsx("img",{src:ys.stoneHuge,alt:"huge stone",className:"stone-icon huge"}),l.jsx("span",{className:"stone-count-value",children:f.huge})]})]})]})]})},Gv=({type:s,name:r,description:o,icon:u,isUnlocked:m,onEnter:f})=>{const[h,b]=S.useState(!1);return l.jsxs("div",{className:`facility-card ${s} ${m?"unlocked":"locked"} ${h?"hovered":""}`,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:m?f:void 0,children:[l.jsx("div",{className:"facility-bg-pattern"}),l.jsx("div",{className:"facility-glow"}),l.jsx("div",{className:"facility-icon",children:u}),l.jsx("div",{className:"facility-name",children:r}),l.jsx("div",{className:"facility-description",children:o}),!m&&l.jsxs("div",{className:"facility-lock",children:[l.jsx("div",{className:"lock-icon",children:""}),l.jsx("div",{className:"lock-text",children:"Locked"})]}),h&&m&&l.jsx("div",{className:"facility-hover-effect",children:l.jsx("div",{className:"hover-text enter",children:"Enter "})})]})},zv=()=>{const{navigateTo:s}=Ga(),r=[{type:"dungeon",name:"",description:"Descend into the depths and face your destiny",icon:"",isUnlocked:!0,onEnter:()=>s("dungeon")},{type:"shop",name:"",description:"Buy and sell cards, items, and relics",icon:"",isUnlocked:!0,onEnter:()=>s("shop")},{type:"blacksmith",name:"",description:"Forge and upgrade your equipment",icon:"",isUnlocked:!0,onEnter:()=>s("blacksmith")},{type:"sanctuary",name:"",description:"Strengthen your soul with permanent upgrades",icon:"",isUnlocked:!0,onEnter:()=>s("sanctuary")},{type:"library",name:"",description:"Build your deck and browse the encyclopedia",icon:"",isUnlocked:!0,onEnter:()=>s("library")},{type:"guild",name:"",description:"Rest, recruit companions, and hear rumors",icon:"",isUnlocked:!0,onEnter:()=>s("guild")},{type:"storage",name:"",description:"Store and manage your items safely",icon:"",isUnlocked:!0,onEnter:()=>s("storage")}];return l.jsxs("div",{className:"base-camp",children:[l.jsx(nn,{title:"basecamp",variant:"basecamp"}),l.jsxs("div",{className:"camp-background",children:[l.jsx("div",{className:"bg-stars"}),l.jsx("div",{className:"bg-ground"})]}),l.jsx("div",{className:"facilities-grid",children:r.map(o=>l.jsx(Gv,{...o},o.type))})]})},Uv=[{currentGrade:"",nextGrade:"",requiredCardCount:5,enemyId:"exam_training_dummy",description:"Defeat the Training Dummy to prove your basic swordsmanship skills.",recommendations:{hp:60,ap:40},rewards:{statBonus:"maxHP+10, Quest Slot+1"}},{currentGrade:"",nextGrade:"",requiredCardCount:15,requiredGold:100,enemyId:"exam_guild_instructor",description:"Demonstrate your martial prowess in a mock battle with the Guild Instructor.",recommendations:{hp:80,ap:60},rewards:{statBonus:"ATK+5%, Reward Bonus"}},{currentGrade:"",nextGrade:"",requiredCardCount:30,requiredGold:500,enemyId:"exam_veteran_warrior",description:"Defeat the Veteran Warrior to master the ultimate path of the sword.",recommendations:{hp:120,ap:80},rewards:{statBonus:"All Stats+5%, Critical Rate+10%"}},{currentGrade:"",nextGrade:"",requiredCardCount:50,requiredGold:1e3,enemyId:"exam_sword_saint_phantom",description:"Win the death match against the Phantom of the Sword Saint to reach the realm of gods.",recommendations:{hp:150,ap:100},rewards:{statBonus:"Unlock Unique Legend Skill, All Stats+10%"}}],Ov=[{currentGrade:"Apprentice Mage",nextGrade:"Mage",requiredCardCount:5,enemyId:"exam_magic_golem",description:"Control the Magic Golem to prove your mastery of mana manipulation.",recommendations:{hp:50,ap:35},rewards:{statBonus:"maxHP+8, maxAP+5"}},{currentGrade:"Mage",nextGrade:"Archmage",requiredCardCount:15,requiredGold:100,enemyId:"exam_guild_instructor",description:"Demonstrate your magical prowess to the Guild Instructor.",recommendations:{hp:70,ap:55},rewards:{statBonus:"Magic Power+10%, Spell Cost-5%"}},{currentGrade:"Archmage",nextGrade:"Sage",requiredCardCount:30,requiredGold:500,enemyId:"exam_veteran_warrior",description:"Overcome the Veteran Warrior with your magical might.",recommendations:{hp:100,ap:75},rewards:{statBonus:"All Stats+5%, Mana Regeneration+1"}},{currentGrade:"Sage",nextGrade:"Grand Magus",requiredCardCount:50,requiredGold:1e3,enemyId:"exam_sword_saint_phantom",description:"Face the ultimate test to become a legendary master of arcane arts.",recommendations:{hp:130,ap:95},rewards:{statBonus:"Unlock Unique Legend Spell, All Stats+10%"}}],Lv=[{currentGrade:"Apprentice Summoner",nextGrade:"Summoner",requiredCardCount:5,enemyId:"exam_wild_spirit",description:"Tame the Wild Spirit to prove your ability to command creatures.",recommendations:{hp:55,ap:38},rewards:{statBonus:"maxHP+9, Summon Slot+1"}},{currentGrade:"Summoner",nextGrade:"Beast Master",requiredCardCount:15,requiredGold:100,enemyId:"exam_guild_instructor",description:"Show the Guild Instructor your mastery over summoned creatures.",recommendations:{hp:75,ap:58},rewards:{statBonus:"Summon Power+8%, Beast Bond+1"}},{currentGrade:"Beast Master",nextGrade:"Spirit Caller",requiredCardCount:30,requiredGold:500,enemyId:"exam_veteran_warrior",description:"Defeat the Veteran Warrior with your loyal summons by your side.",recommendations:{hp:110,ap:78},rewards:{statBonus:"All Stats+5%, Summon Duration+2"}},{currentGrade:"Spirit Caller",nextGrade:"Mythic Summoner",requiredCardCount:50,requiredGold:1e3,enemyId:"exam_sword_saint_phantom",description:"Prove you can command even the mightiest of legendary creatures.",recommendations:{hp:140,ap:98},rewards:{statBonus:"Unlock Unique Legend Summon, All Stats+10%"}}];function Bv(s){switch(s){case"swordsman":return Uv;case"mage":return Ov;case"summoner":return Lv;default:return[]}}function Hv(s,r){return Bv(s).find(u=>u.currentGrade===r)||null}function Yv(s,r,o){const u=r>=s.requiredCardCount,m=s.requiredGold?o>=s.requiredGold:!0;return u&&m}const Iv=()=>{const{playerData:s,updateClassGrade:r}=Da(),{startBattle:o,navigateTo:u}=Ga(),m=s.resources.baseCampGold+s.resources.explorationGold,f=Hv(s.persistent.playerClass,s.persistent.classGrade);if(!f)return l.jsxs("div",{className:"promotion-unavailable",children:[l.jsx("h2",{children:" Congratulations!"}),l.jsx("p",{children:"You have achieved the highest rank."}),l.jsxs("div",{className:"current-grade-display",children:[l.jsx("span",{className:"grade-label",children:"Current Rank:"}),l.jsx("span",{className:"grade-value",children:s.persistent.classGrade})]}),l.jsx("p",{className:"flavor-text",children:"You stand at the pinnacle of your class. There are no more exams to take."})]});const h=s.persistent.deckCardIds.length,b=Yv(f,h,m),p=h>=f.requiredCardCount,v=f.requiredGold?m>=f.requiredGold:!0,g=()=>{b&&o({enemyIds:[f.enemyId],backgroundType:"arena",onWin:j,onLose:q},"exam")},j=()=>{r(f.nextGrade),u("guild"),setTimeout(()=>{alert(` Promotion Exam Passed!

Congratulations! You have been promoted to:
${f.nextGrade}

Rewards:
${f.rewards.statBonus}

Your achievements will be recorded in the guild records.`)},100)},q=()=>{u("guild"),setTimeout(()=>{alert(` Promotion Exam Failed

You have been defeated in the exam and returned to the guild.

Don't give up! Train harder and try again.
The exam can be retaken at any time when you meet the requirements.

Tip: Make sure your HP and AP meet the recommended values before challenging.`)},100)};return l.jsxs("div",{className:"promotion-tab",children:[l.jsxs("div",{className:"promotion-tab-left",children:[l.jsxs("div",{className:"grade-progression",children:[l.jsxs("div",{className:"grade-box current",children:[l.jsx("span",{className:"grade-label",children:"Current Rank"}),l.jsx("span",{className:"grade-name",children:f.currentGrade})]}),l.jsx("div",{className:"arrow",children:""}),l.jsxs("div",{className:"grade-box next",children:[l.jsx("span",{className:"grade-label",children:"Next Rank"}),l.jsx("span",{className:"grade-name",children:f.nextGrade})]})]}),l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Requirements"}),l.jsxs("div",{className:"requirements-list",children:[l.jsxs("div",{className:`requirement ${p?"met":"unmet"}`,children:[l.jsx("span",{className:"requirement-icon",children:p?"":""}),l.jsxs("span",{className:"requirement-text",children:["Cards Owned: ",h," / ",f.requiredCardCount]})]}),f.requiredGold&&l.jsxs("div",{className:`requirement ${v?"met":"unmet"}`,children:[l.jsx("span",{className:"requirement-icon",children:v?"":""}),l.jsxs("span",{className:"requirement-text",children:["Gold: ",m," / ",f.requiredGold,"G"]})]})]})]}),l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Exam Details"}),l.jsx("p",{className:"exam-description",children:f.description})]})]}),l.jsxs("div",{className:"promotion-tab-right",children:[l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Recommendations"}),l.jsxs("div",{className:"recommendations",children:[l.jsxs("div",{className:"recommendation-item",children:[l.jsx("span",{className:"stat-label",children:"HP:"}),l.jsxs("span",{className:"stat-value",children:[f.recommendations.hp,"+"]})]}),l.jsxs("div",{className:"recommendation-item",children:[l.jsx("span",{className:"stat-label",children:"AP:"}),l.jsxs("span",{className:"stat-value",children:[f.recommendations.ap,"+"]})]})]}),l.jsx("p",{className:"recommendation-note",children:"These are suggested minimum stats. Higher stats increase your chances."})]}),l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Rewards"}),l.jsxs("ul",{className:"rewards-list",children:[l.jsxs("li",{children:["Promotion to ",f.nextGrade]}),l.jsx("li",{children:f.rewards.statBonus})]})]}),l.jsxs("div",{className:"exam-warnings",children:[l.jsxs("div",{className:"warning-item",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"Starting the exam will begin a battle immediately."})]}),l.jsxs("div",{className:"warning-item",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"Promotion exams do not consume exploration count."})]}),l.jsxs("div",{className:"warning-item",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"You will return to camp with 1 HP if defeated."})]}),l.jsx("button",{className:`start-exam-button ${b?"enabled":"disabled"}`,onClick:g,disabled:!b,children:b?"Start Promotion Exam":"Requirements Not Met"})]})]})]})},Qv=()=>l.jsx("div",{className:"rumors-tab placeholder-tab",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("h2",{className:"placeholder-title",children:" Rumors"}),l.jsx("p",{className:"placeholder-description",children:"Hear whispers from other adventurers and gain temporary buffs for your explorations."}),l.jsx("div",{className:"coming-soon-badge",children:"Coming Soon in Phase 3"}),l.jsxs("div",{className:"feature-preview",children:[l.jsx("h3",{children:"Planned Features:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Purchase temporary exploration buffs with magic stones"}),l.jsx("li",{children:"Increased elite spawn rate"}),l.jsx("li",{children:"Shop discounts"}),l.jsx("li",{children:"Treasure find rate bonuses"}),l.jsx("li",{children:"Starting bonuses for runs"})]})]})]})}),Pv=()=>l.jsx("div",{className:"quests-tab placeholder-tab",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("h2",{className:"placeholder-title",children:" Quests"}),l.jsx("p",{className:"placeholder-description",children:"Accept daily and weekly quests to earn extra rewards and soul remnants."}),l.jsx("div",{className:"coming-soon-badge",children:"Coming Soon in Phase 3"}),l.jsxs("div",{className:"feature-preview",children:[l.jsx("h3",{children:"Planned Features:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Daily quests (refresh every 24 hours)"}),l.jsx("li",{children:"Weekly quests (refresh every 7 days)"}),l.jsx("li",{children:"Story quests (unlock new content)"}),l.jsx("li",{children:"Rewards: Gold, Magic Stones, Soul Remnants, Items"}),l.jsx("li",{children:"Progress tracking for objectives"})]})]})]})}),$v=()=>{const[s,r]=S.useState("promotion"),{returnToCamp:o}=Ga();return l.jsxs(l.Fragment,{children:[l.jsx("img",{className:"guild-background",alt:"Guild Background",src:"../../../../public/assets/images/Guild-background.png"}),l.jsxs("div",{className:"guild-screen",children:[l.jsx(nn,{title:""}),l.jsxs("nav",{className:"guild-tabs",children:[l.jsxs("button",{className:`guild-tab ${s==="promotion"?"active":""}`,onClick:()=>r("promotion"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Exams"})]}),l.jsxs("button",{className:`guild-tab ${s==="rumors"?"active":""}`,onClick:()=>r("rumors"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Rumors"})]}),l.jsxs("button",{className:`guild-tab ${s==="quests"?"active":""}`,onClick:()=>r("quests"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Quests"})]})]}),l.jsxs("div",{className:"guild-content",children:[s==="promotion"&&l.jsx(Iv,{}),s==="rumors"&&l.jsx(Qv,{}),s==="quests"&&l.jsx(Pv,{})]}),l.jsx("button",{className:"guild-back-button",onClick:o,children:" Back to Camp"})]})]})},ny=S.createContext(void 0),Xv=({children:s})=>{const{playerData:r,updatePlayerData:o}=Da(),u=C=>r.inventory.inventory.currentCapacity>=r.inventory.inventory.maxCapacity?!1:(o({inventory:{...r.inventory,inventory:{...r.inventory.inventory,items:[...r.inventory.inventory.items,C],currentCapacity:r.inventory.inventory.currentCapacity+1}}}),!0),m=C=>r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?!1:(o({inventory:{...r.inventory,storage:{...r.inventory.storage,items:[...r.inventory.storage.items,C],currentCapacity:r.inventory.storage.currentCapacity+1}}}),!0),f=C=>{const k=r.inventory.inventory.items.findIndex(x=>x.id===C);if(k===-1)return!1;const w=[...r.inventory.inventory.items];return w.splice(k,1),o({inventory:{...r.inventory,inventory:{...r.inventory.inventory,items:w,currentCapacity:r.inventory.inventory.currentCapacity-1}}}),!0},h=C=>{const k=r.inventory.storage.items.findIndex(x=>x.id===C);if(k===-1)return!1;const w=[...r.inventory.storage.items];return w.splice(k,1),o({inventory:{...r.inventory,storage:{...r.inventory.storage,items:w,currentCapacity:r.inventory.storage.currentCapacity-1}}}),!0},b=C=>C.itemType!=="equipment"||r.inventory.equipmentInventory.currentCapacity>=r.inventory.equipmentInventory.maxCapacity?!1:(o({inventory:{...r.inventory,equipmentInventory:{...r.inventory.equipmentInventory,items:[...r.inventory.equipmentInventory.items,C],currentCapacity:r.inventory.equipmentInventory.currentCapacity+1}}}),!0),p=C=>{const k=r.inventory.equipmentInventory.items.findIndex(x=>x.id===C);if(k===-1)return!1;const w=[...r.inventory.equipmentInventory.items];return w.splice(k,1),o({inventory:{...r.inventory,equipmentInventory:{...r.inventory.equipmentInventory,items:w,currentCapacity:r.inventory.equipmentInventory.currentCapacity-1}}}),!0},v=(C,k)=>{const w=r.inventory.storage.items.find($=>$.id===C)||r.inventory.equipmentInventory.items.find($=>$.id===C);if(!w)return{success:!1,message:"Item not found in Equipment's Inventory or storage"};if(w.equipmentSlot!==k)return{success:!1,message:`Cannot equip ${w.name} in ${k} slot`};const x=r.inventory.equipmentSlots[k],B=r.inventory.storage.items.filter($=>$.id!==C),z=x?[...B,x]:B;return o({inventory:{...r.inventory,equipmentSlots:{...r.inventory.equipmentSlots,[k]:w},storage:{...r.inventory.storage,items:z,currentCapacity:z.length}}}),{success:!0,message:`Equipped ${w.name}, replaced ${x?.name||"nothing"}`,movedItem:w,replacedItem:x||void 0}},g=C=>{const k=r.inventory.equipmentSlots[C];if(!k)return{success:!1,message:`No item equipped in ${C} slot`};if(r.inventory.inventory.currentCapacity>=r.inventory.inventory.maxCapacity)return{success:!1,message:"Inventory is full"};const w={...r.inventory.equipmentSlots,[C]:null};return o({inventory:{...r.inventory,equipmentSlots:w}}),m(k),{success:!0,message:`Unequipped ${k.name}`,movedItem:k}},j=(C,k)=>{switch(k){case"storage_to_inventory":{const w=r.inventory.storage.items.find(x=>x.id===C);return w?r.inventory.inventory.currentCapacity>=r.inventory.inventory.maxCapacity?{success:!1,message:"Inventory is full"}:(h(C),u(w),{success:!0,message:`Moved ${w.name} to inventory`,movedItem:w}):{success:!1,message:"Item not found in storage"}}case"inventory_to_storage":{const w=r.inventory.inventory.items.find(x=>x.id===C);return w?r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?{success:!1,message:"Storage is full"}:(f(C),m(w),{success:!0,message:`Moved ${w.name} to storage`,movedItem:w}):{success:!1,message:"Item not found in inventory"}}case"storage_to_equipment":{const w=k==="storage_to_equipment"?r.inventory.storage.items.find(x=>x.id===C):r.inventory.inventory.items.find(x=>x.id===C);return!w||!w.equipmentSlot?{success:!1,message:"Item not found or is not equipment"}:v(C,w.equipmentSlot)}case"equipment_to_storage":{const w=Object.entries(r.inventory.equipmentSlots).find(([,z])=>z?.id===C)?.[0];if(!w)return{success:!1,message:"Item not found in equipment"};const x=r.inventory.equipmentSlots[w];if(!x)return{success:!1,message:"Item not found"};const B={...r.inventory.equipmentSlots,[w]:null};return o({inventory:{...r.inventory,equipmentSlots:B}}),k==="equipment_to_storage"?m(x)?{success:!0,message:`Moved ${x.name} to storage`,movedItem:x}:{success:!1,message:"Storage is full"}:u(x)?{success:!0,message:`Moved ${x.name} to inventory`,movedItem:x}:{success:!1,message:"Inventory is full"}}case"equipSlotItem_to_storage":{const w=Object.entries(r.inventory.equipmentSlots).find(([,B])=>B?.id===C)?.[0],x=r.inventory.equipmentSlots[w];return x?r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?{success:!1,message:"Storage is full"}:(g(x.equipmentSlot),m(x),{success:!0,message:`Moved ${x.name} to storage`,movedItem:x}):{success:!1,message:"Unequip error"}}case"storage_to_equipment_inventory":{const w=r.inventory.storage.items.find(x=>x.id===C);return w?w.itemType!=="equipment"?{success:!1,message:"Only equipment items can be added to equipment inventory"}:r.inventory.equipmentInventory.currentCapacity>=r.inventory.equipmentInventory.maxCapacity?{success:!1,message:"Equipment inventory is full"}:(h(C),b(w),{success:!0,message:`Moved ${w.name} to equipment inventory`,movedItem:w}):{success:!1,message:"Item not found in storage"}}case"equipment_inventory_to_storage":{const w=r.inventory.equipmentInventory.items.find(x=>x.id===C);return w?r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?{success:!1,message:"Storage is full"}:(p(C),m(w),{success:!0,message:`Moved ${w.name} to storage`,movedItem:w}):{success:!1,message:"Item not found in equipment inventory"}}case"equipment_inventory_to_equipment":{const w=r.inventory.equipmentInventory.items.find($=>$.id===C);if(!w||!w.equipmentSlot)return{success:!1,message:"Item not found or is not equipment"};const x=w.equipmentSlot,B=r.inventory.equipmentSlots[x],z=r.inventory.equipmentInventory.items.filter($=>$.id!==C);return o({inventory:{...r.inventory,equipmentSlots:{...r.inventory.equipmentSlots,[x]:w},equipmentInventory:{...r.inventory.equipmentInventory,items:B?[...z,B]:z,currentCapacity:B?r.inventory.equipmentInventory.currentCapacity:r.inventory.equipmentInventory.currentCapacity-1}}}),{success:!0,message:`Equipped ${w.name}`,movedItem:w,replacedItem:B||void 0}}case"equipment_to_equipment_inventory":{const w=Object.entries(r.inventory.equipmentSlots).find(([,z])=>z?.id===C)?.[0];if(!w)return{success:!1,message:"Item not found in equipment"};const x=r.inventory.equipmentSlots[w];if(!x)return{success:!1,message:"Item not found"};if(r.inventory.equipmentInventory.currentCapacity>=r.inventory.equipmentInventory.maxCapacity)return{success:!1,message:"Equipment inventory is full"};const B={...r.inventory.equipmentSlots,[w]:null};return o({inventory:{...r.inventory,equipmentSlots:B}}),b(x),{success:!0,message:`Moved ${x.name} to equipment inventory`,movedItem:x}}default:return{success:!1,message:"Unknown move direction"}}},q=C=>r.inventory.inventory.items.find(k=>k.id===C),T=C=>r.inventory.storage.items.find(k=>k.id===C),D=C=>r.inventory.equipmentSlots[C],U=C=>r.inventory.equipmentInventory.items.find(k=>k.id===C);return l.jsx(ny.Provider,{value:{addItemToInventory:u,addItemToStorage:m,addItemToEquipmentInventory:b,removeItemFromInventory:f,removeItemFromStorage:h,removeItemFromEquipmentInventory:p,equipItem:v,unequipItem:g,moveItem:j,getInventoryItem:q,getStorageItem:T,getEquippedItem:D,getEquipmentInventoryItem:U},children:s})},Fi=()=>{const s=S.useContext(ny);if(!s)throw new Error("useInventory must be used within InventoryProvider");return s},sy=[{id:"potion_small",name:"Small Healing Potion",description:"Recovers 30 HP. A basic remedy for minor wounds.",icon:"",category:"consumable",price:50,healAmount:30},{id:"potion_medium",name:"Medium Healing Potion",description:"Recovers 70 HP. A reliable restorative draught.",icon:"",category:"consumable",price:120,healAmount:70},{id:"potion_large",name:"Large Healing Potion",description:"Recovers 150 HP. A potent elixir brewed by master alchemists.",icon:"",category:"consumable",price:240,healAmount:150}],ly=[{id:"teleport_emergency",name:"Emergency Teleport Stone",description:"60% chance to return safely. Unreliable but cheap.",icon:"",category:"teleport",price:100,returnChance:.6},{id:"teleport_normal",name:"Teleport Stone",description:"70% chance to return safely. Standard issue for adventurers.",icon:"",category:"teleport",price:150,returnChance:.7},{id:"teleport_blessed",name:"Blessed Teleport Stone",description:"80% chance to return safely. Imbued with divine protection.",icon:"",category:"teleport",price:300,returnChance:.8}],Vv={common:1,uncommon:0,rare:0,epic:0,legendary:0},Jv={common:.6,uncommon:0,rare:.35,epic:.05,legendary:0},Zv={common:.3,uncommon:0,rare:.45,epic:.2,legendary:.05},iy=[{id:"pack_common",name:"Common Equipment Pack",description:"Contains 6 common equipment pieces. One for each slot.",icon:"",price:300,packType:"common",guaranteedRarity:"common",itemCount:6,rarityProbabilities:Vv},{id:"pack_rare",name:"Rare Equipment Pack",description:"Contains 6 equipment pieces. Guaranteed Rare or better quality.",icon:"",price:500,packType:"rare",guaranteedRarity:"rare",itemCount:6,rarityProbabilities:Jv},{id:"pack_epic",name:"Epic Equipment Pack",description:"Contains 6 equipment pieces. Guaranteed Epic or better quality. May contain Legendary items!",icon:"",price:1e3,packType:"epic",guaranteedRarity:"epic",itemCount:6,rarityProbabilities:Zv}];function Kv(s){return[...sy,...ly].find(r=>r.id===s)}function Fv(s){return iy.find(r=>r.id===s)}const Wv={weapon:{common:{name:"Iron Sword",icon:""},uncommon:{name:"Steel Blade",icon:""},rare:{name:"Enchanted Sword",icon:""},epic:{name:"Demon Slayer",icon:""},legendary:{name:"Excalibur",icon:""}},armor:{common:{name:"Leather Armor",icon:""},uncommon:{name:"Chain Mail",icon:""},rare:{name:"Plate Armor",icon:""},epic:{name:"Dragon Scale Armor",icon:""},legendary:{name:"Celestial Plate",icon:""}},helmet:{common:{name:"Leather Cap",icon:""},uncommon:{name:"Iron Helm",icon:""},rare:{name:"Enchanted Helm",icon:""},epic:{name:"Crown of Thorns",icon:""},legendary:{name:"Crown of the Ancients",icon:""}},boots:{common:{name:"Leather Boots",icon:""},uncommon:{name:"Iron Greaves",icon:""},rare:{name:"Swift Boots",icon:""},epic:{name:"Shadow Steps",icon:""},legendary:{name:"Wings of Mercury",icon:""}},accessory1:{common:{name:"Copper Ring",icon:""},uncommon:{name:"Silver Ring",icon:""},rare:{name:"Enchanted Ring",icon:""},epic:{name:"Ring of Power",icon:""},legendary:{name:"Ring of the Void",icon:""}},accessory2:{common:{name:"Bone Amulet",icon:""},uncommon:{name:"Silver Amulet",icon:""},rare:{name:"Enchanted Amulet",icon:""},epic:{name:"Dragon Heart Amulet",icon:""},legendary:{name:"Amulet of Eternity",icon:""}}},eb=["weapon","armor","helmet","boots","accessory1","accessory2"],ab={common:50,uncommon:100,rare:150,epic:400,legendary:1e3};function Oi(s,r){return s>=r}function Li(s,r,o=1){return s+o<=r}function tb(s){const r=s.healAmount?`${s.description} (Heals ${s.healAmount} HP)`:s.description;return _a(s.id,{typeId:s.id,name:s.name,description:r,itemType:"consumable",type:s.icon,rarity:"common",sellPrice:Math.floor(s.price*.5),canSell:!0,canDiscard:!0,stackable:!0,stackCount:1,maxStack:99})}function nb(s){return _a(s.id,{typeId:s.id,name:s.name,description:s.description,itemType:"key",type:s.icon,rarity:"uncommon",sellPrice:Math.floor(s.price*.5),canSell:!0,canDiscard:!0,stackable:!0,stackCount:1,maxStack:10})}function sb(s){const r=Math.random(),o=s.rarityProbabilities;let u=0;return(u+=o.common)>r?"common":(u+=o.uncommon)>r?"uncommon":(u+=o.rare)>r?"rare":(u+=o.epic)>r?"epic":"legendary"}function lb(s,r){const o=Wv[s][r];return _a(`${s}_${r}`,{typeId:`${s}_${r}`,name:o.name,description:`A ${r} ${s} piece of equipment.`,itemType:"equipment",type:o.icon,equipmentSlot:s,rarity:r,quality:"normal",level:0,durability:100,maxDurability:100,sellPrice:ab[r],canSell:!0,canDiscard:!0,effects:[]})}function ib(s){const r=Fv(s);if(!r)return[];const o=[];for(const u of eb){const m=sb(r),f=lb(u,m);o.push(f)}return o}function Nu(s){return s.sellPrice}function Ii(s){return s.small*30+s.medium*100+s.large*350}function yp(s,r){if(Ii(s)<r)return null;let u=r;const m={...s};for(;u>0&&m.small>0;)m.small--,u-=30;for(;u>0&&m.medium>0;)m.medium--,u-=100;for(;u>0&&m.large>0;)m.large--,u-=350;const f=Ii(s)-Ii(m);return{newStones:m,actualValue:f}}function cb(s){const r=Kv(s);return r?r.category==="consumable"?tb(r):r.category==="teleport"?nb(r):null:null}const rb=()=>{const{playerData:s,useGold:r}=Da(),{addItemToInventory:o}=Fi(),u=s.inventory.inventory,[m,f]=S.useState(null),[h,b]=S.useState(null),p=T=>{f(T),setTimeout(()=>f(null),2e3)},v=T=>{const D=s.resources.baseCampGold+s.resources.explorationGold;if(!Oi(D,T.price)){p("Not enough gold!");return}if(!Li(u.currentCapacity,u.maxCapacity)){p("Inventory full!");return}const U=cb(T.id);if(!U){p("Purchase failed!");return}r(T.price)&&(o(U),p(`Purchased ${T.name}!`))},g=T=>{const D=s.resources.baseCampGold+s.resources.explorationGold;if(!Oi(D,T.price)){p("Not enough gold!");return}if(!Li(u.currentCapacity,u.maxCapacity,6)){p("Need 6 inventory slots!");return}if(r(T.price)){const U=ib(T.id);U.forEach(C=>o(C)),b(U.map(C=>`${C.type} ${C.name} (${C.rarity})`)),setTimeout(()=>b(null),4e3)}},j=T=>{const D=s.resources.baseCampGold+s.resources.explorationGold,U=Oi(D,T.price),C=Li(u.currentCapacity,u.maxCapacity);return l.jsxs("div",{className:`shop-item ${U?"":"unaffordable"}`,children:[l.jsx("div",{className:"item-icon",children:T.icon}),l.jsxs("div",{className:"item-info",children:[l.jsx("div",{className:"item-name",children:T.name}),l.jsx("div",{className:"item-description",children:T.description})]}),l.jsxs("div",{className:"item-price",children:[T.price," G"]}),l.jsx("button",{className:"buy-button",onClick:()=>v(T),disabled:!U||!C,children:"Buy"})]},T.id)},q=T=>{const D=s.resources.baseCampGold+s.resources.explorationGold,U=Oi(D,T.price),C=Li(u.currentCapacity,u.maxCapacity,6);return l.jsxs("div",{className:`shop-item pack ${U?"":"unaffordable"}`,children:[l.jsx("div",{className:"item-icon",children:T.icon}),l.jsxs("div",{className:"item-info",children:[l.jsx("div",{className:"item-name",children:T.name}),l.jsx("div",{className:"item-description",children:T.description}),l.jsx("div",{className:"pack-badge",children:"6 Items"})]}),l.jsxs("div",{className:"item-price",children:[T.price," G"]}),l.jsx("button",{className:"buy-button pack-buy",onClick:()=>g(T),disabled:!U||!C,children:"Open"})]},T.id)};return l.jsxs("div",{className:"buy-tab",children:[m&&l.jsx("div",{className:"shop-notification",children:m}),h&&l.jsxs("div",{className:"pack-result",children:[l.jsx("h3",{children:"Pack Opened!"}),l.jsx("div",{className:"pack-items",children:h.map((T,D)=>l.jsx("div",{className:"pack-item-result",children:T},D))})]}),l.jsxs("section",{className:"shop-section",children:[l.jsx("h2",{className:"section-title",children:"Consumables"}),l.jsx("div",{className:"shop-items-grid",children:sy.map(j)})]}),l.jsxs("section",{className:"shop-section",children:[l.jsx("h2",{className:"section-title",children:"Teleport Stones"}),l.jsx("div",{className:"shop-items-grid",children:ly.map(j)})]}),l.jsxs("section",{className:"shop-section",children:[l.jsx("h2",{className:"section-title",children:"Equipment Packs"}),l.jsx("div",{className:"shop-items-grid",children:iy.map(q)})]})]})},ub=()=>{const{playerData:s,addGold:r}=Da(),{removeItemFromInventory:o,getEquippedItem:u}=Fi(),m=s.inventory.inventory,[f,h]=S.useState(null),[b,p]=S.useState(null),v=T=>{p(T),setTimeout(()=>p(null),2e3)},g=m.items.filter(T=>{if(!T.canSell)return!1;if(T.itemType==="equipment"&&T.equipmentSlot){const D=u(T.equipmentSlot);if(D&&D.id===T.id)return!1}return!0}),j=T=>{const D=Nu(T);o(T.id)?(r(D,!0),v(`Sold ${T.name} for ${D} G!`),h(null)):v("Failed to sell item!")},q=T=>`rarity-${T}`;return l.jsxs("div",{className:"sell-tab",children:[b&&l.jsx("div",{className:"shop-notification",children:b}),l.jsxs("div",{className:"sell-layout",children:[l.jsxs("div",{className:"sell-items-section",children:[l.jsxs("h2",{className:"section-title",children:["Inventory (",g.length," sellable items)"]}),g.length===0?l.jsx("div",{className:"empty-inventory",children:l.jsx("p",{children:"No items to sell"})}):l.jsx("div",{className:"sell-items-grid",children:g.map(T=>l.jsxs("div",{className:`sell-item ${q(T.rarity)} ${f?.id===T.id?"selected":""}`,onClick:()=>h(T),children:[l.jsx("div",{className:"item-icon",children:T.type}),l.jsx("div",{className:"item-name",children:T.name}),l.jsxs("div",{className:"item-sell-price",children:[Nu(T)," G"]})]},T.id))})]}),l.jsx("div",{className:"sell-detail-panel",children:f?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:f.type}),l.jsx("h3",{className:`detail-name ${q(f.rarity)}`,children:f.name})]}),l.jsx("p",{className:"detail-description",children:f.description}),l.jsxs("div",{className:"detail-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Type:"}),l.jsx("span",{children:f.itemType})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Rarity:"}),l.jsx("span",{className:q(f.rarity),children:f.rarity})]}),f.equipmentSlot&&l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Slot:"}),l.jsx("span",{children:f.equipmentSlot})]})]}),l.jsxs("div",{className:"sell-action",children:[l.jsxs("div",{className:"sell-price",children:["Sell Price:"," ",l.jsxs("strong",{children:[Nu(f)," G"]})]}),l.jsx("button",{className:"sell-button",onClick:()=>j(f),children:"Sell Item"})]})]}):l.jsx("div",{className:"no-selection",children:l.jsx("p",{children:"Select an item to sell"})})})]})]})},ob=()=>{const{playerData:s,addGold:r,updatePlayerData:o}=Da(),[u,m]=S.useState(0),[f,h]=S.useState(null),b=s.resources.baseCampMagicStones,p=Ii(b),v=D=>{h(D),setTimeout(()=>h(null),2e3)},g=()=>{if(u<=0){v("Enter an amount to exchange!");return}if(u>p){v("Not enough magic stones!");return}const D=yp(b,u);if(!D){v("Exchange failed!");return}o({resources:{...s.resources,baseCampMagicStones:D.newStones}}),r(D.actualValue,!0),v(`Exchanged for ${D.actualValue} G!`),m(0)},j=D=>{if(D>p){v("Not enough magic stones!");return}const U=yp(b,D);if(!U){v("Exchange failed!");return}o({resources:{...s.resources,baseCampMagicStones:U.newStones}}),r(U.actualValue,!0),v(`Exchanged for ${U.actualValue} G!`)},q=(D,U)=>{if(b[D]<=0){v("No stones of this type!");return}const C={...b,[D]:b[D]-1};o({resources:{...s.resources,baseCampMagicStones:C}}),r(U,!0),v(`Exchanged for ${U} G!`)},T=(D,U,C,k)=>{const w=b[D];return l.jsx(l.Fragment,{children:w>0&&l.jsxs("div",{className:"stone-row",children:[l.jsx("div",{className:"stone-icon",children:k}),l.jsx("div",{className:"stone-label",children:U}),l.jsxs("div",{className:"stone-count",children:["x ",w]}),l.jsxs("div",{className:"stone-value",children:[C," G"]}),l.jsx("button",{className:"stone-exchange-btn",onClick:()=>q(D,C),disabled:w<=0,children:"Exchange"})]},D)})};return l.jsxs("div",{className:"exchange-tab",children:[f&&l.jsx("div",{className:"shop-notification",children:f}),l.jsxs("section",{className:"exchange-section",children:[l.jsx("h2",{className:"section-title",children:"Magic Stone Inventory"}),l.jsxs("div",{className:"stone-list",children:[T("small","Small Magic Stone",30,""),T("medium","Medium Magic Stone",100,""),T("large","Large Magic Stone",350,""),T("huge","Huge Magic Stone",1e3,""),l.jsxs("div",{className:"quick-exchange",children:[l.jsx("span",{className:"quick-exchange-tittle",children:"Quick Exchange "}),l.jsxs("span",{className:"quick-exchange-value",children:["(",p,"G)"]}),l.jsx("button",{className:"stone-exchange-btn",onClick:()=>j(p),disabled:p<=0,children:"All exchange"})]})]})]}),l.jsxs("section",{className:"exchange-section",children:[l.jsx("h2",{className:"section-title",children:"Exchange Stones for Gold"}),l.jsxs("div",{className:"exchange-controls",children:[l.jsxs("div",{className:"exchange-input-group",children:[l.jsx("label",{children:"Amount to exchange:"}),l.jsx("input",{type:"number",className:"exchange-input",value:u,onChange:D=>m(Math.max(0,parseInt(D.target.value)||0)),min:0,max:p}),l.jsx("span",{className:"input-suffix",children:"G"})]}),l.jsx("button",{className:"exchange-button",onClick:g,disabled:u<=0||u>p,children:"Exchange"})]}),l.jsx("p",{className:"exchange-note",children:"Note: Smallest stones are consumed first. Due to stone denominations, actual gold received may be slightly more than requested."})]})]})},db=()=>{const[s,r]=S.useState("buy"),{returnToCamp:o}=Ga();return l.jsxs("div",{className:"shop-screen",children:[l.jsx(nn,{title:""}),l.jsxs("nav",{className:"shop-tabs",children:[l.jsxs("button",{className:`shop-tab ${s==="buy"?"active":""}`,onClick:()=>r("buy"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Buy"})]}),l.jsxs("button",{className:`shop-tab ${s==="sell"?"active":""}`,onClick:()=>r("sell"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Sell"})]}),l.jsxs("button",{className:`shop-tab ${s==="exchange"?"active":""}`,onClick:()=>r("exchange"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Exchange"})]})]}),l.jsxs("div",{className:"shop-content",children:[s==="buy"&&l.jsx(rb,{}),s==="sell"&&l.jsx(ub,{}),s==="exchange"&&l.jsx(ob,{})]}),l.jsx("button",{className:"shop-back-button",onClick:o,children:" Back to Camp"})]})},Cu=({item:s,isSelected:r,onClick:o,compact:u=!1})=>{const m=()=>{switch(s.rarity){case"common":return"rarity-common";case"uncommon":return"rarity-uncommon";case"rare":return"rarity-rare";case"epic":return"rarity-epic";case"legendary":return"rarity-legendary";default:return"rarity-common"}},f=()=>s.itemType!=="equipment"||!s.quality?"":`quality-${s.quality}`,h=(p,v=15)=>p.length<=v?p:l.jsx(l.Fragment,{children:p.split(" ").map((g,j)=>l.jsx("span",{children:" "+g},j))}),b=u?"item-card-compact":"item-card";return l.jsxs("div",{className:`${b} ${m()} ${f()} ${r?"item-card-selected":""}`,onClick:o,title:s.name,children:[u&&l.jsx("div",{className:"item-card-name",children:h(s.name)}),s.itemType==="equipment"&&s.level!==void 0&&s.level>0&&l.jsx("div",{className:u?"item-level-compact":"item-card-level",children:u?s.level:`Lv${s.level}`}),s.stackable&&s.stackCount!==void 0&&s.stackCount>1&&l.jsx("div",{className:u?"item-stack-compact":"item-card-stack",children:u?s.stackCount:`x${s.stackCount}`})]})},mb=({item:s,source:r,onMoveToStorage:o,onMoveToInventory:u,onMoveToEquipmentInventory:m,onEquip:f,onUnequip:h,onDelete:b})=>{if(!s)return l.jsx("div",{className:"item-detail-panel",children:l.jsx("div",{className:"item-detail-placeholder",children:"Select an item to view details"})});const p=()=>{switch(s.rarity){case"common":return"#9e9e9e";case"uncommon":return"#4caf50";case"rare":return"#2196f3";case"epic":return"#9c27b0";case"legendary":return"#ffc107";default:return"#ffffff"}},v=()=>{if(s.itemType!=="equipment"||!s.quality)return"#ffffff";switch(s.quality){case"poor":return"#8f8e8e";case"normal":return"#82e779";case"good":return"#f1f664";case"master":return"#ff2d2d";default:return"#ffffff"}},g=s.itemType==="equipment";return l.jsxs("div",{className:"item-detail-panel",children:[l.jsx("h3",{className:"item-detail-name",style:{color:p()},children:s.name}),l.jsx("div",{className:"item-detail-icon",children:s.type}),l.jsxs("div",{className:"item-detail-rarity",children:["Rarity:",l.jsx("span",{style:{color:p()},children:" "+s.rarity.charAt(0).toUpperCase()+s.rarity.slice(1)}),g&&s.quality&&l.jsxs("span",{style:{color:v(),marginLeft:"1vw"},children:[" | ",s.quality.charAt(0).toUpperCase()+s.quality.slice(1)]})]}),g&&l.jsxs("div",{className:"item-detail-stats",children:[s.level!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Level: ",s.level]}),s.durability!==void 0&&s.maxDurability!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Durability: ",s.durability,"/",s.maxDurability]}),s.equipmentSlot&&l.jsxs("div",{className:"item-detail-stat",children:["Slot: ",s.equipmentSlot]})]}),g&&s.effects&&s.effects.length>0&&l.jsxs("div",{className:"item-detail-effects",children:[l.jsx("h4",{children:"Effects:"}),s.effects.map((j,q)=>l.jsxs("div",{className:"item-detail-effect",children:["- ",j.description]},q))]}),s.stackable&&l.jsx("div",{className:"item-detail-stats",children:l.jsxs("div",{className:"item-detail-stat",children:["Stack: ",s.stackCount||1,"/",s.maxStack||99]})}),l.jsx("div",{className:"item-detail-description",children:s.description}),l.jsxs("div",{className:"item-detail-type",children:["Type: ",s.itemType.charAt(0).toUpperCase()+s.itemType.slice(1)]}),s.canSell&&l.jsxs("div",{className:"item-detail-sell-price",children:["Sell Price: ",s.sellPrice," G"]}),l.jsxs("div",{className:"item-detail-actions",children:[r==="inventory"&&l.jsx("button",{className:"item-action-button",onClick:o,children:"Move to Storage"}),r==="storage"&&!g&&l.jsx("button",{className:"item-action-button",onClick:u,children:"Move to Inventory"}),g&&r==="storage"&&s.equipmentSlot&&l.jsxs("button",{className:"item-action-button equip",onClick:f,children:["Equip (",s.equipmentSlot,")"]}),g&&r==="storage"&&l.jsx("button",{className:"item-action-button equip",onClick:m,children:"Move to Equipment inventory"}),r==="equipment"&&l.jsx(l.Fragment,{children:l.jsx("button",{className:"item-action-button",onClick:()=>{h?.()},children:"Unequip to Storage"})}),(r==="storage"||r==="inventory")&&l.jsx("button",{className:"item-action-button delete",onClick:b,children:"Delete"})]})]})},fb=({item:s,source:r,onMoveToStorage:o,onMoveToEquipmentInventory:u,onEquip:m,onDelete:f})=>{if(!s)return l.jsx("div",{className:"item-detail-panel",children:l.jsx("div",{className:"item-detail-placeholder",children:"Select an equipment to view details"})});const h=()=>{switch(s.rarity){case"common":return"#9e9e9e";case"uncommon":return"#4caf50";case"rare":return"#2196f3";case"epic":return"#9c27b0";case"legendary":return"#ffc107";default:return"#ffffff"}},b=()=>{if(s.itemType!=="equipment"||!s.quality)return"#ffffff";switch(s.quality){case"poor":return"#8f8e8e";case"normal":return"#82e779";case"good":return"#f1f664";case"master":return"#ff2d2d";default:return"#ffffff"}},p=s.itemType==="equipment";return l.jsxs("div",{className:"item-detail-panel",children:[l.jsx("h3",{className:"item-detail-name",style:{color:h()},children:s.name}),l.jsx("div",{className:"item-detail-icon",children:s.type}),l.jsxs("div",{className:"item-detail-rarity",children:[l.jsx("span",{style:{color:h()},children:s.rarity.charAt(0).toUpperCase()+s.rarity.slice(1)}),p&&s.quality&&l.jsxs("span",{style:{color:b(),marginLeft:"1vw"},children:[" | ",s.quality.charAt(0).toUpperCase()+s.quality.slice(1)]})]}),p&&l.jsxs("div",{className:"item-detail-stats",children:[s.level!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Level: ",s.level]}),s.durability!==void 0&&s.maxDurability!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Durability: ",s.durability,"/",s.maxDurability]}),s.equipmentSlot&&l.jsxs("div",{className:"item-detail-stat",children:["Slot: ",s.equipmentSlot]})]}),p&&s.effects&&s.effects.length>0&&l.jsxs("div",{className:"item-detail-effects",children:[l.jsx("h4",{children:"Effects:"}),s.effects.map((v,g)=>l.jsxs("div",{className:"item-detail-effect",children:["- ",v.description]},g))]}),s.stackable&&l.jsx("div",{className:"item-detail-stats",children:l.jsxs("div",{className:"item-detail-stat",children:["Stack: ",s.stackCount||1,"/",s.maxStack||99]})}),l.jsx("div",{className:"item-detail-description",children:s.description}),l.jsxs("div",{className:"item-detail-type",children:["Type: ",s.itemType.charAt(0).toUpperCase()+s.itemType.slice(1)]}),s.canSell&&l.jsxs("div",{className:"item-detail-sell-price",children:["Sell Price: ",s.sellPrice," G"]}),l.jsxs("div",{className:"item-detail-actions",children:[p&&r==="storage"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"item-action-button equip",onClick:m,children:"Equip"}),l.jsx("button",{className:"item-action-button",onClick:u,children:"To Equipment Inventory"}),l.jsx("button",{className:"item-action-button delete",onClick:f,children:"Delete"})]}),r==="equipmentInventory"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"item-action-button equip",onClick:m,children:"Equip"}),l.jsx("button",{className:"item-action-button",onClick:o,children:"To Storage"}),l.jsx("button",{className:"item-action-button delete",onClick:f,children:"Delete"})]})]})]})},pb=({item:s,isOpen:r,onConfirm:o,onCancel:u})=>{if(!r)return null;const m=()=>{switch(s.rarity){case"common":return"#9e9e9e";case"uncommon":return"#4caf50";case"rare":return"#2196f3";case"epic":return"#9c27b0";case"legendary":return"#ffc107";default:return"#ffffff"}},f=h=>{h.target===h.currentTarget&&u()};return l.jsx("div",{className:"delete-modal-backdrop",onClick:f,children:l.jsxs("div",{className:"delete-modal",children:[l.jsx("div",{className:"delete-modal-header",children:l.jsx("h2",{className:"delete-modal-title",children:"Delete Item"})}),l.jsxs("div",{className:"delete-modal-content",children:[l.jsx("p",{className:"delete-modal-message",children:"Are you sure you want to delete this item?"}),l.jsxs("div",{className:"delete-modal-item-info",children:[l.jsx("span",{className:"delete-modal-item-icon",children:s.type}),l.jsx("span",{className:"delete-modal-item-name",style:{color:m()},children:s.name})]}),l.jsx("p",{className:"delete-modal-warning",children:"This action cannot be undone."})]}),l.jsxs("div",{className:"delete-modal-actions",children:[l.jsx("button",{className:"delete-modal-button delete-modal-cancel",onClick:u,children:"Cancel"}),l.jsx("button",{className:"delete-modal-button delete-modal-confirm",onClick:o,children:"Delete"})]})]})})},yb=()=>{const{returnToCamp:s}=Ga(),{playerData:r}=Da(),{moveItem:o,equipItem:u,unequipItem:m,removeItemFromInventory:f,removeItemFromStorage:h,removeItemFromEquipmentInventory:b}=Fi(),[p,v]=S.useState("items"),[g,j]=S.useState(null),[q,T]=S.useState("storage"),[D,U]=S.useState(""),[C,k]=S.useState(!1),w=(V,W)=>{j(V),T(W)},x=(V,W=2e3)=>{U(V),setTimeout(()=>U(""),W)},B=()=>{if(!g)return;const V=o(g.id,"inventory_to_storage");x(V.message),V.success&&j(null)},z=()=>{if(!g)return;const V=o(g.id,"storage_to_inventory");x(V.message),V.success&&j(null)},$=()=>{if(!g||!g.equipmentSlot)return;const V=u(g.id,g.equipmentSlot);x(V.message),V.success&&j(null)},K=()=>{if(!g||!g.equipmentSlot)return;const V=m(g.equipmentSlot);x(V.message),V.success&&j(null)},ae=()=>{g&&k(!0)},le=()=>{if(!g)return;let V=!1;q==="storage"?V=h(g.id):q==="inventory"?V=f(g.id):q==="equipmentInventory"&&(V=b(g.id)),V?(x(`Deleted ${g.name}`),j(null)):x("Failed to delete item"),k(!1)},be=()=>{if(!g)return;const V=o(g.id,"storage_to_equipment_inventory");x(V.message),V.success&&j(null)},M=()=>{if(!g)return;const V=o(g.id,"equipment_inventory_to_storage");x(V.message),V.success&&j(null)},H=()=>{k(!1)},F=(V,W,re)=>{const E=[];for(let Y=0;Y<re;Y++)if(Y<V.length){const J=V[Y];E.push(l.jsx(Cu,{item:J,isSelected:g?.id===J.id,onClick:()=>w(J,W),compact:!0},J.id))}else E.push(l.jsx("div",{className:"item-card-compact item-card-empty",children:l.jsx("span",{className:"empty-placeholder",children:"empty"})},`empty-${W}-${Y}`));return E},de=()=>[{key:"weapon",label:"Weapon",item:r.inventory.equipmentSlots.weapon},{key:"armor",label:"Armor",item:r.inventory.equipmentSlots.armor},{key:"helmet",label:"Helmet",item:r.inventory.equipmentSlots.helmet},{key:"boots",label:"Boots",item:r.inventory.equipmentSlots.boots},{key:"accessory1",label:"Acc 1",item:r.inventory.equipmentSlots.accessory1},{key:"accessory2",label:"Acc 2",item:r.inventory.equipmentSlots.accessory2}].map(W=>l.jsxs("div",{className:`equip-slot-compact ${g?.id===W.item?.id?"equip-slot-selected":""} ${W.item?"equip-slot-filled":""}`,onClick:()=>W.item&&w(W.item,"equipment"),children:[l.jsx("div",{className:"equip-slot-label-compact",children:W.label}),W.item?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"equip-slot-icon-compact",children:W.item.type}),l.jsx("div",{className:"equip-slot-name-compact",children:W.item.name})]}):l.jsx("div",{className:"equip-slot-empty-compact",children:"-"})]},W.key)),ce=()=>{const V=r.inventory.equipmentInventory.maxCapacity,W=[];for(let re=0;re<V;re++)if(re<r.inventory.equipmentInventory.items.length){const E=r.inventory.equipmentInventory.items[re];W.push(l.jsx(Cu,{item:E,isSelected:g?.id===E.id,onClick:()=>w(E,"equipmentInventory"),compact:!0},E.id))}else W.push(l.jsx("div",{className:"item-card-compact item-card-empty",children:l.jsx("span",{className:"empty-placeholder",children:"empty"})},`empty-equip-inv-${re}`));return W},L=r.inventory.storage.items.filter(V=>V.itemType==="equipment"),Z=r.inventory.inventory.items.filter(V=>V.itemType!=="equipment");return l.jsxs("div",{className:"storage-container",children:[l.jsx(nn,{title:""}),l.jsxs("nav",{className:"nav",children:[l.jsxs("div",{className:"storage-tabs",children:[l.jsx("button",{className:`storage-tab ${p==="items"?"storage-tab-active":""}`,onClick:()=>{v("items"),j(null)},children:"Items"}),l.jsx("button",{className:`storage-tab ${p==="equipment"?"storage-tab-active":""}`,onClick:()=>{v("equipment"),j(null)},children:"Equipment"})]}),l.jsx("div",{className:"back-content",children:l.jsx("button",{className:"storage-back-button",onClick:s,children:" baseCamp Back"})})]}),l.jsx("div",{className:"storage-content",children:p==="items"?l.jsxs("div",{className:"items-tab-content",children:[l.jsxs("div",{className:"dual-grid-panel",children:[l.jsxs("div",{className:"storage-grid-section",children:[l.jsxs("div",{className:"storage-grid-header",children:[l.jsx("span",{className:"storage-grid-title",children:"Storage"}),l.jsxs("span",{className:"storage-grid-count",children:[r.inventory.storage.currentCapacity,"/",r.inventory.storage.maxCapacity]})]}),l.jsx("div",{className:"compact-grid storage-grid",children:F(r.inventory.storage.items,"storage",r.inventory.storage.maxCapacity)})]}),l.jsxs("div",{className:"transfer-buttons",children:[l.jsx("button",{className:"transfer-btn",onClick:z,disabled:!g||q!=="storage",title:"Move to Inventory",children:""}),l.jsx("button",{className:"transfer-btn",onClick:B,disabled:!g||q!=="inventory",title:"Move to Storage",children:""})]}),l.jsxs("div",{className:"storage-grid-section",children:[l.jsxs("div",{className:"storage-grid-header",children:[l.jsx("span",{className:"storage-grid-title",children:"Inventory"}),l.jsxs("span",{className:"storage-grid-count",children:[Z.length,"/",r.inventory.inventory.maxCapacity]})]}),l.jsx("div",{className:"compact-grid inventory-grid",children:F(Z,"inventory",r.inventory.inventory.maxCapacity)})]})]}),l.jsx("div",{className:"storage-detail-panel",children:l.jsx(mb,{item:g,source:q,onMoveToStorage:B,onMoveToInventory:z,onMoveToEquipmentInventory:be,onEquip:$,onUnequip:K,onDelete:ae})})]}):l.jsxs("div",{className:"equipment-tab-content",children:[l.jsxs("div",{className:"equipment-list-panel",children:[l.jsxs("div",{className:"storage-grid-header",children:[l.jsx("span",{className:"storage-grid-title",children:"Equipment List"}),l.jsxs("span",{className:"storage-grid-count",children:[L.length," items"]})]}),l.jsx("div",{className:"compact-grid equipment-list-grid",children:L.length>0?L.map(V=>l.jsx(Cu,{item:V,isSelected:g?.id===V.id,onClick:()=>w(V,"storage"),compact:!0},V.id)):l.jsx("div",{className:"empty-list-message",children:"No equipment in storage"})})]}),l.jsxs("div",{className:"transfer-buttons",children:[l.jsx("button",{className:"transfer-btn",onClick:be,disabled:!g||q!=="storage",title:"Move to Inventory",children:""}),l.jsx("button",{className:"transfer-btn",onClick:M,disabled:!g||q!=="equipmentInventory",title:"Move to Storage",children:""})]}),l.jsxs("div",{className:"equipment-right-panel",children:[l.jsxs("div",{className:"equipment-slots-section",children:[l.jsx("div",{className:"storage-section-header",children:l.jsx("span",{className:"storage-section-title",children:"Equipped Item"})}),l.jsx("div",{className:"equip-slots-grid-compact",children:de()})]}),l.jsxs("div",{className:"transfer-buttons-equip",children:[l.jsx("button",{className:"transfer-btn",onClick:()=>o(g.id,"equipment_inventory_to_equipment"),disabled:!g||q!=="equipmentInventory",title:"Move to Equipment Slots",children:""}),l.jsx("button",{className:"transfer-btn",onClick:()=>o(g.id,"equipment_to_equipment_inventory"),disabled:!g||q!=="equipment",title:"Move to Equipment Inventory",children:""})]}),l.jsxs("div",{className:"equipment-inventory-section",children:[l.jsxs("div",{className:"storage-section-header",children:[l.jsx("span",{className:"storage-section-title",children:"Equipment's Inventory"}),l.jsxs("span",{className:"storage-section-count",children:[r.inventory.equipmentInventory.currentCapacity,"/",r.inventory.equipmentInventory.maxCapacity]})]}),l.jsx("div",{className:"equipment-inventory-grid",children:ce()})]})]}),l.jsx("div",{className:"equip-detail-panel",children:l.jsx(fb,{item:g,source:q,onMoveToStorage:B,onMoveToEquipmentInventory:be,onEquip:$,onUnequipToEquipmentInventory:K,onDelete:ae})})]})}),g&&l.jsx(pb,{item:g,isOpen:C,onConfirm:le,onCancel:H}),D&&l.jsx("div",{className:"storage-message",children:D}),l.jsx("div",{className:"storage-footer",children:" "})]})},Xi={0:1,1:1.1,2:1.2,3:1.3},Vi={0:1,1:1.2,2:1.4,3:1.6},gp={poor:.95,normal:1,good:1.03,master:1.05},hl={poor:"#888888",normal:"#ffffff",good:"#4ade80",master:"#fbbf24"},En={poor:"",normal:"",good:"",master:""},ju=["poor","normal","good","master"],Vu=3;function ku(s){const r=ju.indexOf(s);return r===-1||r===ju.length-1?null:ju[r+1]}function Wi(s){return s.itemType==="equipment"}function gb(s){return Wi(s)&&(s.level??0)<Vu}function hb(s){return Wi(s)&&s.quality!==void 0&&s.quality!=="master"}function vb(s){return Wi(s)&&s.durability!==void 0&&s.maxDurability!==void 0&&s.durability<s.maxDurability}function bb(s){return Wi(s)&&s.canDiscard}const xb={common:[{gold:200,magicStones:150},{gold:400,magicStones:300},{gold:800,magicStones:600}],uncommon:[{gold:200,magicStones:150},{gold:400,magicStones:300},{gold:800,magicStones:600}],rare:[{gold:400,magicStones:300},{gold:800,magicStones:600},{gold:1600,magicStones:1200}],epic:[{gold:800,magicStones:600},{gold:1600,magicStones:1200},{gold:3200,magicStones:2400}],legendary:[{gold:1600,magicStones:1200},{gold:3200,magicStones:2400},{gold:6400,magicStones:4800}]},hp={gold:500,magicStones:300},Ji={normal:{option:"normal",label:"",description:"",costMultiplier:1,successRates:{poorToNormal:.4,normalToGood:.2,goodToMaster:.1}},qualityFocused:{option:"qualityFocused",label:"",description:"1.5",costMultiplier:1.5,successRates:{poorToNormal:.8,normalToGood:.4,goodToMaster:.15}},maxQuality:{option:"maxQuality",label:"",description:"2",costMultiplier:2,successRates:{poorToNormal:1,normalToGood:.6,goodToMaster:.25}}},Sb=.5,Nb={common:1,uncommon:1.2,rare:1.5,epic:2,legendary:3},Zi={sellPriceReturnRate:{common:.1,uncommon:.12,rare:.15,epic:.2,legendary:.25},bonusChances:{common:0,uncommon:0,rare:.1,epic:.3,legendary:.5},levelBonusChance:{0:0,1:.05,2:.1,3:.15},bonusMagicStoneValue:100};function Cb(s,r){const o=xb[s];return r<0||r>=o.length?null:o[r]}function jb(s){const r=Ji[s];return{gold:Math.floor(hp.gold*r.costMultiplier),magicStones:Math.floor(hp.magicStones*r.costMultiplier)}}function Eb(s,r,o){const u=r-s,m=Nb[o];return Math.ceil(u*Sb*m)}function _b(s,r){const o=Zi.sellPriceReturnRate[r];return Math.floor(s*o)}function Db(s,r){const o=Zi.bonusChances[s],u=Zi.levelBonusChance[r]??0;return o+u}function vl(s){return gb(s)}function cy(s){if(!vl(s))return null;const r=s.level??0;return Cb(s.rarity,r)}function wb(s,r,o){if(!vl(s))return null;const u=s.level??0,m=u+1,f=cy(s);if(!f)return null;const h=[];if(s.effects){for(const b of s.effects)if(b.type==="stat"&&typeof b.value=="number"){const p=Xi[u],v=Xi[m],g=b.value/p;h.push({stat:b.target,before:Math.floor(b.value),after:Math.floor(g*v)})}}if(s.maxDurability){const b=Vi[u],p=Vi[m],v=s.maxDurability/b;h.push({stat:"maxAP",before:Math.floor(s.maxDurability),after:Math.floor(v*p)})}return{currentLevel:u,nextLevel:m,statChanges:h,cost:f,canAfford:r>=f.gold&&o>=f.magicStones}}function Mb(s){if(!vl(s))return s;const r=s.level??0,o=r+1,u=Xi[r],m=Xi[o],f=Vi[r],h=Vi[o],b=s.effects?.map(g=>{if(g.type==="stat"&&typeof g.value=="number"){const j=g.value/u;return{...g,value:Math.floor(j*m)}}return g});let p=s.maxDurability,v=s.durability;if(s.maxDurability){const g=s.maxDurability/f;if(p=Math.floor(g*h),s.durability){const j=s.durability/s.maxDurability;v=Math.floor(p*j)}}return{...s,level:o,effects:b,maxDurability:p,durability:v}}function qu(s){return hb(s)}function Eu(s){return jb(s)}function Ru(s,r){const o=Ji[r];switch(s){case"poor":return o.successRates.poorToNormal;case"normal":return o.successRates.normalToGood;case"good":return o.successRates.goodToMaster;default:return 0}}function Tb(s,r){if(!qu(s)||!s.quality)return{success:!1,message:"",qualityChanged:!1};const o=ku(s.quality);if(!o)return{success:!1,message:"",qualityChanged:!1};const u=Ru(s.quality,r);if(Math.random()<u){const h=gp[s.quality],b=gp[o],p=s.effects?.map(g=>{if(g.type==="stat"&&typeof g.value=="number"){const j=g.value/h;return{...g,value:Math.floor(j*b)}}return g}),v={...s,quality:o,effects:p};return{success:!0,message:`! ${s.quality}  ${o}`,item:v,qualityChanged:!0}}else return{success:!1,message:`... (${Math.floor(u*100)}%)`,item:s,qualityChanged:!1}}function Ju(s){return vb(s)}function Gu(s){if(!Ju(s))return null;const r=s.durability??0,o=s.maxDurability??100,u=o-r;return{gold:Eb(r,o,s.rarity),durabilityRestored:u}}function vp(s){return Ju(s)?{...s,durability:s.maxDurability}:s}function Zu(s){return bb(s)}function ry(s){if(!Zu(s))return null;const r=_b(s.sellPrice,s.rarity),o=s.level??0,u=Db(s.rarity,o),m=Zi.bonusMagicStoneValue;let f="";return u>0?f=`${Math.floor(u*100)}%`:f="",{goldReturn:r,magicStoneChance:u,magicStoneReturn:m,bonusDescription:f}}function Ab(s){if(!Zu(s))return{success:!1,message:""};const r=ry(s);if(!r)return{success:!1,message:""};const o=Math.random()<r.magicStoneChance,u=o?r.magicStoneReturn:0;let m=`${s.name}${r.goldReturn}G `;return o&&(m+=`${u}!`),{success:!0,message:m,goldChange:r.goldReturn,magicStoneChange:u}}function Bi(s,r,o){return s>=o.gold&&r>=o.magicStones}function bp(s,r){return s>=r.gold}function xp(s){const r=s.rarity==="rare"||s.rarity==="epic"||s.rarity==="legendary",o=(s.level??0)>=1,u=s.quality==="good"||s.quality==="master";return r&&o&&u}function kb(s){return s.reduce((r,o)=>{const u=Gu(o);return r+(u?.gold??0)},0)}function qb(s){return s.filter(r=>Ju(r))}function Rb(s){return s.filter(r=>Zu(r))}const Ku=({item:s,isSelected:r,onClick:o,showDurability:u=!1})=>{const m=s.level??0,f=s.quality??"normal",h=s.durability??100,b=s.maxDurability??100,p=h/b*100,v=()=>p<=20?"critical":p<=50?"low":"";return l.jsxs("div",{className:`equipment-card rarity-${s.rarity} ${r?"selected":""}`,onClick:o,children:[l.jsxs("span",{className:`level-badge ${m>=Vu?"max":""}`,children:["Lv.",m]}),l.jsx("span",{className:`quality-badge ${f}`,children:En[f]}),l.jsx("span",{className:"item-icon",children:s.type}),l.jsx("span",{className:"item-name",children:s.name}),u&&l.jsx("div",{className:"durability-bar",children:l.jsx("div",{className:`durability-fill ${v()}`,style:{width:`${p}%`}})})]})},Gb=()=>{const{playerData:s,updatePlayerData:r,useGold:o}=Da(),[u,m]=S.useState(null),[f,h]=S.useState("normal"),[b,p]=S.useState(null),v=s.inventory.storage.items.filter(x=>x.itemType==="equipment"),g=yl(s.resources.baseCampMagicStones),j=(x,B)=>{p({message:x,type:B}),setTimeout(()=>p(null),2e3)},q=x=>{const B=s.inventory.storage.items.map(z=>z.id===x.id?x:z);r({inventory:{...s.inventory,storage:{...s.inventory.storage,items:B}}}),m(x)},T=()=>{if(!u)return;const x=cy(u);if(!x){j("This item cannot be upgraded further","error");return}if(!Bi(s.resources.baseCampGold,g,x)){j("Not enough resources","error");return}if(!o(x.gold)){j("Failed to deduct gold","error");return}const B=Mb(u);q(B),j(`Level upgraded! ${u.name} is now Lv.${B.level}`,"success")},D=()=>{if(!u)return;const x=Eu(f);if(!Bi(s.resources.baseCampGold,g,x)){j("Not enough resources","error");return}if(!o(x.gold)){j("Failed to deduct gold","error");return}const B=Tb(u,f);B.success&&B.item?(q(B.item),j(B.message,"success")):j(B.message,"error")},U=u?wb(u,s.resources.baseCampGold,g):null,C=u?.quality?Ru(u.quality,f):0,k=Eu(f),w=Bi(s.resources.baseCampGold,g,k);return l.jsxs("div",{className:"tab-layout",children:[b&&l.jsx("div",{className:`blacksmith-notification ${b.type}`,children:b.message}),l.jsxs("div",{className:"equipment-list-section",children:[l.jsxs("h3",{className:"blacksmith-section-title",children:["Equipment (",v.length,")"]}),v.length===0?l.jsx("div",{className:"empty-message",children:"No equipment in storage"}):l.jsx("div",{className:"equipment-grid",children:v.map(x=>l.jsx(Ku,{item:x,isSelected:u?.id===x.id,onClick:()=>m(x)},x.id))})]}),l.jsx("div",{className:"detail-panel",children:u?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:u.type}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h4",{className:"detail-name",children:u.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge level",children:["Lv.",u.level??0]}),l.jsx("span",{className:`badge quality-${u.quality??"normal"}`,style:{color:hl[u.quality??"normal"]},children:En[u.quality??"normal"]})]})]})]}),l.jsxs("div",{className:"stats-section",children:[u.effects?.map((x,B)=>l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:x.target.toUpperCase()}),l.jsxs("span",{className:"value",children:["+",x.value]})]},B)),u.maxDurability&&l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"MAX AP"}),l.jsx("span",{className:"value",children:u.maxDurability})]})]}),vl(u)&&U&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Level Upgrade"}),l.jsx("div",{className:"stats-section",children:U.statChanges.map((x,B)=>l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:x.stat.toUpperCase()}),l.jsxs("span",{className:"value",children:[x.before,"  ",l.jsx("span",{className:"improved",children:x.after})]})]},B))}),l.jsxs("div",{className:"cost-display",children:[l.jsxs("span",{className:`cost-item gold ${s.resources.baseCampGold<U.cost.gold?"insufficient":""}`,children:[" ",U.cost.gold," G"]}),l.jsxs("span",{className:`cost-item stones ${g<U.cost.magicStones?"insufficient":""}`,children:[" ",U.cost.magicStones," G"]})]}),l.jsxs("button",{className:"action-button",onClick:T,disabled:!U.canAfford,children:["Upgrade to Lv.",U.nextLevel]})]}),!vl(u)&&l.jsx("div",{className:"action-section",children:l.jsxs("div",{className:"empty-message",style:{height:"auto",padding:"1vh 0"},children:["Maximum level reached (Lv.",Vu,")"]})}),qu(u)&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Quality Upgrade"}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Quality"}),l.jsxs("span",{className:"value",children:[l.jsx("span",{style:{color:hl[u.quality??"normal"]},children:En[u.quality??"normal"]}),"  ",l.jsx("span",{style:{color:hl[ku(u.quality??"normal")??"normal"]},children:En[ku(u.quality??"normal")??"normal"]})]})]}),l.jsx("div",{className:"quality-options",children:Object.keys(Ji).map(x=>{const B=Ji[x],z=Eu(x),$=Ru(u.quality??"normal",x),K=Bi(s.resources.baseCampGold,g,z);return l.jsxs("div",{className:`quality-option ${f===x?"selected":""} ${K?"":"disabled"}`,onClick:()=>K&&h(x),children:[l.jsxs("div",{className:"quality-option-header",children:[l.jsx("span",{className:"quality-option-name",children:B.label}),l.jsxs("span",{className:"quality-option-chance",children:[Math.floor($*100),"%"]})]}),l.jsx("div",{className:"quality-option-desc",children:B.description}),l.jsxs("div",{className:"quality-option-cost",children:[l.jsxs("span",{className:`cost-item gold ${s.resources.baseCampGold<z.gold?"insufficient":""}`,children:[" ",z.gold," G"]}),l.jsxs("span",{className:`cost-item stones ${g<z.magicStones?"insufficient":""}`,children:[" ",z.magicStones," G"]})]})]},x)})}),l.jsxs("button",{className:"action-button secondary",onClick:D,disabled:!w,children:["Attempt Quality Upgrade (",Math.floor(C*100),"%)"]})]}),!qu(u)&&l.jsx("div",{className:"action-section",children:l.jsx("div",{className:"empty-message",style:{height:"auto",padding:"1vh 0"},children:"Maximum quality reached (Master)"})})]}):l.jsx("div",{className:"no-selection",children:"Select equipment to upgrade"})})]})},zb=()=>{const{playerData:s,updatePlayerData:r,useGold:o}=Da(),[u,m]=S.useState(null),[f,h]=S.useState(null),b=qb(s.inventory.storage.items),p=kb(b),v=(C,k)=>{h({message:C,type:k}),setTimeout(()=>h(null),2e3)},g=C=>{const k=s.inventory.storage.items.map(w=>w.id===C.id?C:w);r({inventory:{...s.inventory,storage:{...s.inventory.storage,items:k}}}),m(C)},j=C=>{const k=new Set(C.map(x=>x.id)),w=s.inventory.storage.items.map(x=>k.has(x.id)?C.find(B=>B.id===x.id)??x:x);r({inventory:{...s.inventory,storage:{...s.inventory.storage,items:w}}})},q=()=>{if(!u)return;const C=Gu(u);if(!C){v("This item doesn't need repair","error");return}if(!bp(s.resources.baseCampGold,C)){v("Not enough gold","error");return}if(!o(C.gold)){v("Failed to deduct gold","error");return}const k=vp(u);g(k),v(`${u.name} has been fully repaired!`,"success")},T=()=>{if(b.length===0){v("No items need repair","error");return}if(s.resources.baseCampGold<p){v("Not enough gold for all repairs","error");return}if(!o(p)){v("Failed to deduct gold","error");return}const C=b.map(k=>vp(k));if(j(C),u&&b.some(k=>k.id===u.id)){const k=C.find(w=>w.id===u.id);k&&m(k)}v(`Repaired ${b.length} items!`,"success")},D=u?Gu(u):null,U=D?bp(s.resources.baseCampGold,D):!1;return l.jsxs("div",{className:"tab-layout",children:[f&&l.jsx("div",{className:`blacksmith-notification ${f.type}`,children:f.message}),l.jsxs("div",{className:"equipment-list-section",children:[b.length>0&&l.jsxs("div",{className:"repair-all-section",children:[l.jsxs("div",{className:"repair-all-info",children:[l.jsxs("span",{className:"repair-all-title",children:["Repair All (",b.length," items)"]}),l.jsxs("span",{className:"repair-all-cost",children:["Total Cost: ",p," G"]})]}),l.jsx("button",{className:"repair-all-button",onClick:T,disabled:s.resources.baseCampGold<p,children:"Repair All"})]}),l.jsxs("h3",{className:"blacksmith-section-title",children:["Damaged Equipment (",b.length,")"]}),b.length===0?l.jsx("div",{className:"empty-message",children:"All equipment is fully repaired"}):l.jsx("div",{className:"equipment-grid",children:b.map(C=>l.jsx(Ku,{item:C,isSelected:u?.id===C.id,onClick:()=>m(C),showDurability:!0},C.id))})]}),l.jsx("div",{className:"detail-panel",children:u?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:u.type}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h4",{className:"detail-name",children:u.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge level",children:["Lv.",u.level??0]}),l.jsx("span",{className:`badge quality-${u.quality??"normal"}`,style:{color:hl[u.quality??"normal"]},children:En[u.quality??"normal"]})]})]})]}),l.jsxs("div",{className:"durability-display",children:[l.jsx("span",{className:"label",children:"Durability"}),l.jsx("div",{className:"bar",children:l.jsx("div",{className:"fill",style:{width:`${(u.durability??0)/(u.maxDurability??100)*100}%`}})}),l.jsxs("span",{className:"text",children:[u.durability??0," / ",u.maxDurability??100]})]}),D&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Repair"}),l.jsxs("div",{className:"stats-section",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Durability to Restore"}),l.jsxs("span",{className:"value improved",children:["+",D.durabilityRestored]})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"After Repair"}),l.jsxs("span",{className:"value",children:[u.maxDurability??100," / ",u.maxDurability??100]})]})]}),l.jsx("div",{className:"cost-display",children:l.jsxs("span",{className:`cost-item gold ${U?"":"insufficient"}`,children:[" ",D.gold," G"]})}),l.jsx("button",{className:"action-button",onClick:q,disabled:!U,children:"Repair Equipment"})]}),!D&&l.jsx("div",{className:"action-section",children:l.jsx("div",{className:"empty-message",style:{height:"auto",padding:"1vh 0"},children:"This equipment is fully repaired"})})]}):l.jsx("div",{className:"no-selection",children:"Select equipment to repair"})})]})},Ub=()=>{const{playerData:s,addGold:r,addMagicStones:o}=Da(),{removeItemFromStorage:u}=Fi(),[m,f]=S.useState(null),[h,b]=S.useState(!1),[p,v]=S.useState(null),g=Rb(s.inventory.storage.items),j=(D,U)=>{v({message:D,type:U}),setTimeout(()=>v(null),2500)},q=()=>{if(!m)return;if(xp(m)&&!h){b(!0);return}const D=Ab(m);D.success?(u(m.id),D.goldChange&&r(D.goldChange,!0),D.magicStoneChange&&D.magicStoneChange>0&&o({medium:1},!0),f(null),b(!1),j(D.message,"success")):j(D.message,"error")},T=m?ry(m):null;return l.jsxs("div",{className:"tab-layout",children:[p&&l.jsx("div",{className:`blacksmith-notification ${p.type}`,children:p.message}),h&&m&&l.jsx("div",{className:"confirm-modal-overlay",onClick:()=>b(!1),children:l.jsxs("div",{className:"confirm-modal",onClick:D=>D.stopPropagation(),children:[l.jsx("h3",{children:"Dismantle Valuable Item?"}),l.jsxs("p",{children:['"',m.name,'" is a valuable item (',m.rarity," / Lv.",m.level??0," /"," ",En[m.quality??"normal"],"). This action cannot be undone."]}),l.jsxs("div",{className:"confirm-buttons",children:[l.jsx("button",{className:"confirm-button cancel",onClick:()=>b(!1),children:"Cancel"}),l.jsx("button",{className:"confirm-button confirm",onClick:q,children:"Dismantle"})]})]})}),l.jsxs("div",{className:"equipment-list-section",children:[l.jsxs("h3",{className:"blacksmith-section-title",children:["Dismantleable Equipment (",g.length,")"]}),g.length===0?l.jsx("div",{className:"empty-message",children:"No equipment available for dismantle"}):l.jsx("div",{className:"equipment-grid",children:g.map(D=>l.jsx(Ku,{item:D,isSelected:m?.id===D.id,onClick:()=>f(D)},D.id))})]}),l.jsx("div",{className:"detail-panel",children:m?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:m.type}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h4",{className:"detail-name",children:m.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge level",children:["Lv.",m.level??0]}),l.jsx("span",{className:`badge quality-${m.quality??"normal"}`,style:{color:hl[m.quality??"normal"]},children:En[m.quality??"normal"]})]})]})]}),xp(m)&&l.jsxs("div",{className:"dismantle-warning",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"This is a valuable item! Consider carefully before dismantling."})]}),l.jsxs("div",{className:"stats-section",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Rarity"}),l.jsx("span",{className:`value rarity-${m.rarity}`,children:m.rarity.charAt(0).toUpperCase()+m.rarity.slice(1)})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Sell Price"}),l.jsxs("span",{className:"value",children:[m.sellPrice," G"]})]}),m.effects?.map((D,U)=>l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:D.target.toUpperCase()}),l.jsxs("span",{className:"value",children:["+",D.value]})]},U))]}),T&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Dismantle Result"}),l.jsxs("div",{className:"dismantle-preview",children:[l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Gold Return"}),l.jsxs("span",{className:"value gold",children:["+",T.goldReturn," G"]})]}),T.magicStoneChance>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Bonus Chance"}),l.jsxs("span",{className:"value bonus",children:[Math.floor(T.magicStoneChance*100),"%"]})]}),l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Bonus Reward"}),l.jsx("span",{className:"value",children:"Magic Stone (Medium)"})]})]}),T.magicStoneChance===0&&l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Bonus"}),l.jsx("span",{className:"value",children:"None (Rare+ items only)"})]})]}),l.jsx("button",{className:"action-button danger",onClick:q,children:"Dismantle Equipment"})]})]}):l.jsx("div",{className:"no-selection",children:"Select equipment to dismantle"})})]})},Ob=()=>{const[s,r]=S.useState("upgrade"),{returnToCamp:o}=Ga();return l.jsxs(l.Fragment,{children:[l.jsx("img",{className:"blacksmith-background",alt:"Blacksmith Background",src:"/assets/images/Blacksmith-background.png"}),l.jsxs("div",{className:"blacksmith-screen",children:[l.jsx(nn,{title:""}),l.jsxs("nav",{className:"blacksmith-tabs",children:[l.jsxs("button",{className:`blacksmith-tab ${s==="upgrade"?"active":""}`,onClick:()=>r("upgrade"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Upgrade"})]}),l.jsxs("button",{className:`blacksmith-tab ${s==="repair"?"active":""}`,onClick:()=>r("repair"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Repair"})]}),l.jsxs("button",{className:`blacksmith-tab ${s==="dismantle"?"active":""}`,onClick:()=>r("dismantle"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Dismantle"})]})]}),l.jsxs("div",{className:"blacksmith-content",children:[s==="upgrade"&&l.jsx(Gb,{}),s==="repair"&&l.jsx(zb,{}),s==="dismantle"&&l.jsx(Ub,{})]}),l.jsx("button",{className:"blacksmith-back-button",onClick:o,children:" Back to Camp"})]})]})};function Lb(s,r,o){const u=(s-90)*Math.PI/180,m=(r*6+4)*(o/50),f=Math.cos(u)*m,h=Math.sin(u)*m,b=`calc(50% + ${f}vh)`,p=`calc(50% + ${h}vh)`;return{left:b,top:p}}const Bb=({node:s,status:r,isSelected:o,justUnlocked:u,treeSize:m,onClick:f})=>{const h=Lb(s.position.angle,s.position.radius,m),b=["skill-node",r,o?"selected":"",u?"just-unlocked":""].filter(Boolean).join(" "),p=S.useCallback(j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),f())},[f]),v=()=>{switch(r){case"unlocked":return"";case"available":return"";case"locked":return""}},g=`${s.name} - ${v()}${r!=="unlocked"?` (${s.cost})`:""}`;return l.jsx("div",{className:b,style:{left:h.left,top:h.top},onClick:f,onKeyDown:p,title:s.name,tabIndex:0,role:"button","aria-label":g,"aria-pressed":o,children:l.jsxs("div",{className:"skill-node-inner",children:[l.jsx("span",{className:"node-icon",children:s.icon}),r!=="unlocked"&&l.jsx("span",{className:"node-cost",children:s.cost})]})})};function Hb(s,r,o){const u=(s.position.angle-90)*Math.PI/180,m=(r.position.angle-90)*Math.PI/180,f=(s.position.radius*6+4)*(o/50),h=(r.position.radius*6+4)*(o/50),b=Math.cos(u)*f,p=Math.sin(u)*f,v=Math.cos(m)*h,g=Math.sin(m)*h,j=Math.sqrt(Math.pow(v-b,2)+Math.pow(g-p,2)),q=Math.atan2(g-p,v-b)*(180/Math.PI);return{left:`calc(50% + ${b}vh)`,top:`calc(50% + ${p}vh)`,width:`${j}vh`,transform:`rotate(${q}deg)`}}const Yb=({progress:s,playerClass:r,selectedNodeId:o,justUnlockedId:u,onNodeSelect:m})=>{const h=Qu.filter(p=>!p.classRestriction||p.classRestriction===r),b=[];for(const p of h)for(const v of p.prerequisites){const g=xl(v);g&&b.push({from:g,to:p,fromStatus:gl(g,s,r),toStatus:gl(p,s,r)})}return l.jsx("div",{className:"skill-tree-container",children:l.jsxs("div",{className:"skill-tree",style:{width:"60vh",height:"60vh"},children:[l.jsx("div",{className:"tier-ring tier-1"}),l.jsx("div",{className:"tier-ring tier-2"}),l.jsx("div",{className:"tier-ring tier-3"}),b.map((p,v)=>{const g=p.fromStatus==="unlocked"&&p.toStatus==="unlocked",j=p.fromStatus==="unlocked"&&p.toStatus==="available";return l.jsx("div",{className:`connection-line ${g?"unlocked":""} ${j?"available":""}`,style:Hb(p.from,p.to,60)},`conn-${v}`)}),l.jsxs("div",{className:"center-orb",children:[l.jsx("span",{className:"center-orb-icon",children:""}),l.jsx("span",{className:"center-orb-value",children:s.totalSouls})]}),h.map(p=>{const v=gl(p,s,r);return l.jsx(Bb,{node:p,status:v,isSelected:o===p.id,justUnlocked:u===p.id,treeSize:60,onClick:()=>m(p)},p.id)})]})})},Ib={unlocked:"",available:"",locked:""},Qb=({node:s,status:r,totalSouls:o,unlockedNodes:u,playerClass:m,onUnlock:f})=>{const[h,b]=S.useState(0),[p,v]=S.useState(!1),g=S.useRef(null),j=S.useRef(null),q=s?o>=s.cost:!1,T=r==="available"&&q,D=S.useCallback(()=>{g.current&&(clearTimeout(g.current),g.current=null),j.current&&(clearInterval(j.current),j.current=null),v(!1),b(0)},[]),U=S.useCallback(()=>{if(!s||!T)return;v(!0);const $=Date.now(),K=vs.UNLOCK_HOLD_DURATION;j.current=window.setInterval(()=>{const ae=Date.now()-$,le=Math.min(ae/K*100,100);b(le),le>=100&&(D(),f(s))},16)},[s,T,D,f]),C=S.useCallback(()=>{T&&U()},[T,U]),k=S.useCallback(()=>{D()},[D]),w=S.useCallback(()=>{D()},[D]);if(!s)return l.jsx("div",{className:"detail-panel",children:l.jsxs("div",{className:"no-selection",children:[l.jsx("span",{className:"no-selection-icon",children:""}),l.jsx("span",{className:"no-selection-text",children:""})]})});const x=K0[s.category],B=s.prerequisites.map($=>{const K=xl($),ae=u.includes($);return{id:$,name:K?.name||$,isMet:ae}}),z=s.classRestriction&&s.classRestriction!==m;return l.jsx("div",{className:"detail-panel",children:l.jsxs("div",{className:"node-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:s.icon}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h3",{className:"detail-name",children:s.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge tier",children:["Tier ",s.tier]}),l.jsx("span",{className:`badge category ${s.category}`,style:{backgroundColor:x.bgColor},children:x.name}),l.jsx("span",{className:`badge status ${r}`,children:Ib[r]})]})]})]}),s.classRestriction&&l.jsxs("div",{className:`class-restriction ${s.classRestriction}`,children:[l.jsxs("span",{children:[s.classRestriction==="swordsman"&&"",s.classRestriction==="mage"&&"",s.classRestriction==="summoner"&&""]}),l.jsxs("span",{children:[s.classRestriction==="swordsman"&&"",s.classRestriction==="mage"&&"",s.classRestriction==="summoner"&&"",""]})]}),l.jsx("p",{className:"detail-description",children:s.description}),l.jsxs("div",{className:"effects-section",children:[l.jsx("div",{className:"effects-title",children:""}),s.effects.map(($,K)=>l.jsxs("div",{className:"effect-item",children:[l.jsx("span",{className:"effect-bullet"}),l.jsx("span",{className:"effect-text",children:$.description})]},K))]}),B.length>0&&l.jsxs("div",{className:"prerequisites-section",children:[l.jsx("div",{className:"prerequisites-title",children:""}),B.map($=>l.jsxs("div",{className:"prerequisite-item",children:[l.jsx("span",{className:"prerequisite-status",children:$.isMet?"":""}),l.jsx("span",{className:`prerequisite-name ${$.isMet?"met":"unmet"}`,children:$.name})]},$.id))]}),r!=="unlocked"&&l.jsxs("div",{className:`cost-section ${q?"affordable":"insufficient"}`,children:[l.jsx("span",{className:"cost-icon",children:""}),l.jsx("span",{className:"cost-amount",children:s.cost}),l.jsxs("span",{className:"cost-label",children:[" (",q?"":` ${s.cost-o} `,")"]})]}),l.jsx("div",{className:"unlock-button-container",children:r==="unlocked"?l.jsxs("div",{className:"unlocked-message",children:[l.jsx("span",{className:"unlocked-icon",children:""}),l.jsx("span",{children:""})]}):r==="available"?l.jsxs("button",{className:`unlock-button ${p?"unlocking":""}`,disabled:!T,onMouseDown:C,onMouseUp:k,onMouseLeave:w,onTouchStart:C,onTouchEnd:k,children:[l.jsx("div",{className:"unlock-progress",style:{width:`${h}%`}}),l.jsx("span",{className:"button-text",children:p?"...":q?"":""})]}):l.jsx("div",{className:"locked-message",children:z?`${s.classRestriction==="swordsman"?"":s.classRestriction==="mage"?"":""}`:""})})]})})},Pb=()=>{const{returnToCamp:s}=Ga(),{playerData:r,updatePlayerData:o}=Da(),[u,m]=S.useState(null),[f,h]=S.useState(null),[b,p]=S.useState(null),v=r.persistent.playerClass,g=r.progression.sanctuaryProgress,j=Vp(g),q=tv(g,v),T=S.useCallback(C=>{m(C),h(null)},[]),D=S.useCallback(C=>{const k=W0(C,g,v);k.success&&k.newProgress?(o({progression:{...r.progression,sanctuaryProgress:k.newProgress}}),p({message:k.message,type:"success"}),h(C.id),setTimeout(()=>{p(null)},3e3)):(p({message:k.message,type:"error"}),setTimeout(()=>{p(null)},3e3))},[g,v,o]),U=u?gl(u,g,v):"locked";return l.jsxs(l.Fragment,{children:[l.jsx("img",{className:"sanctuary-background",alt:"Sanctuary Background",src:"/assets/images/Sanctuary-background.png"}),l.jsxs("div",{className:"sanctuary-screen",children:[b&&l.jsx("div",{className:`sanctuary-notification ${b.type}`,children:b.message}),l.jsx(nn,{title:""}),l.jsxs("div",{className:"sanctuary-soul-section",children:[l.jsxs("div",{className:"sanctuary-resources",children:[l.jsxs("div",{className:"soul-display total",children:[l.jsx("span",{className:"soul-icon",children:""}),l.jsxs("div",{className:"soul-info",children:[l.jsx("span",{className:"soul-label",children:""}),l.jsx("span",{className:"soul-value",children:g.totalSouls})]})]}),l.jsxs("div",{className:"soul-display current-run",children:[l.jsx("span",{className:"soul-icon",children:""}),l.jsxs("div",{className:"soul-info",children:[l.jsx("span",{className:"soul-label",children:""}),l.jsx("span",{className:"soul-value",children:g.currentRunSouls})]})]}),l.jsxs("div",{className:"exploration-display",children:[l.jsx("span",{className:"exploration-icon",children:""}),l.jsxs("span",{className:"exploration-value",children:[r.resources.explorationLimit.current," /"," ",r.resources.explorationLimit.max+j.explorationLimitBonus]})]})]}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:q.unlockedCount}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:q.availableCount}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("span",{className:"stat-value",children:[q.completionPercent,"%"]}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:q.soulsSpent}),l.jsx("span",{className:"stat-label",children:""})]})]})]}),l.jsxs("div",{className:"sanctuary-content",children:[l.jsx(Yb,{progress:g,playerClass:v,selectedNodeId:u?.id||null,justUnlockedId:f,onNodeSelect:T}),l.jsx(Qb,{node:u,status:U,totalSouls:g.totalSouls,unlockedNodes:g.unlockedNodes,playerClass:v,onUnlock:D})]}),l.jsx("button",{className:"sanctuary-back-button",onClick:s,children:" "})]})]})};function uy(){const s=Object.values(tn),r={common:0,rare:1,epic:2,legend:3};return s.sort((o,u)=>o.cost!==u.cost?o.cost-u.cost:r[o.rarity]-r[u.rarity])}function $b(){return uy().map(r=>({card:r,isUnlocked:!0,timesUsed:0,firstObtainedDate:void 0}))}function Xb(){const s=uy(),r={},o={};return s.forEach(u=>{r[u.rarity]=(r[u.rarity]||0)+1,o[u.category]=(o[u.category]||0)+1}),{total:s.length,byRarity:r,byCategory:o}}const Vb=()=>{const[s,r]=S.useState({rarity:null,category:null,characterClass:null,searchText:""}),o=S.useMemo(()=>$b(),[]),u=S.useMemo(()=>Xb(),[]),m=S.useMemo(()=>o.filter(f=>{const{card:h}=f;if(s.rarity&&h.rarity!==s.rarity||s.category&&h.category!==s.category||s.characterClass&&h.characterClass!==s.characterClass&&h.characterClass!=="common")return!1;if(s.searchText){const b=s.searchText.toLowerCase();if(!h.name.toLowerCase().includes(b)&&!h.description.toLowerCase().includes(b))return!1}return!0}),[o,s]);return l.jsxs("div",{className:"library-content",children:[l.jsxs("div",{className:"library-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.total}),l.jsx("span",{className:"stat-label",children:"Total Cards"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.common||0}),l.jsx("span",{className:"stat-label",children:"Common"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.rare||0}),l.jsx("span",{className:"stat-label",children:"Rare"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.epic||0}),l.jsx("span",{className:"stat-label",children:"Epic"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.legend||0}),l.jsx("span",{className:"stat-label",children:"Legend"})]})]}),l.jsxs("div",{className:"library-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("span",{className:"filter-label",children:"Rarity:"}),l.jsxs("select",{className:"filter-select",value:s.rarity||"",onChange:f=>r({...s,rarity:f.target.value||null}),children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"common",children:"Common"}),l.jsx("option",{value:"rare",children:"Rare"}),l.jsx("option",{value:"epic",children:"Epic"}),l.jsx("option",{value:"legend",children:"Legend"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("span",{className:"filter-label",children:"Category:"}),l.jsxs("select",{className:"filter-select",value:s.category||"",onChange:f=>r({...s,category:f.target.value||null}),children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"atk",children:"Attack"}),l.jsx("option",{value:"def",children:"Defense"}),l.jsx("option",{value:"buff",children:"Buff"}),l.jsx("option",{value:"debuff",children:"Debuff"}),l.jsx("option",{value:"heal",children:"Heal"}),l.jsx("option",{value:"swordEnergy",children:"Sword Energy"})]})]}),l.jsx("div",{className:"filter-group",children:l.jsx("input",{type:"text",className:"search-input",placeholder:"Search cards...",value:s.searchText,onChange:f=>r({...s,searchText:f.target.value})})})]}),m.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-state-icon",children:""}),l.jsx("span",{className:"empty-state-text",children:"No cards found"})]}):l.jsx("div",{className:"card-grid",children:m.map(f=>l.jsx("div",{className:"encyclopedia-card-wrapper",children:l.jsx(bl,{card:f.card,depth:1,isPlayable:!0})},f.card.id))})]})};function oy(){return[...y0].sort((s,r)=>s.baseMaxHp-r.baseMaxHp)}function Jb(){return oy().map(r=>({enemy:r,isEncountered:!0,timesDefeated:0,firstEncounteredDate:void 0}))}function zu(s){return s.id.includes("boss")||s.baseMaxHp>100}function Zb(){const s=oy(),r=s.filter(zu),o=s.reduce((u,m)=>u+m.baseMaxHp,0);return{total:s.length,normalCount:s.length-r.length,bossCount:r.length,avgHp:Math.round(o/s.length)}}const Kb=()=>{const[s,r]=S.useState({depth:null,isBoss:null,searchText:""}),o=S.useMemo(()=>Jb(),[]),u=S.useMemo(()=>Zb(),[]),m=S.useMemo(()=>o.filter(f=>{const{enemy:h}=f;if(s.isBoss!==null&&zu(h)!==s.isBoss)return!1;if(s.searchText){const b=s.searchText.toLowerCase();if(!h.name.toLowerCase().includes(b)&&!(h.nameJa?.toLowerCase().includes(b)??!1)&&!h.description.toLowerCase().includes(b))return!1}return!0}),[o,s]);return l.jsxs("div",{className:"library-content",children:[l.jsxs("div",{className:"library-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.total}),l.jsx("span",{className:"stat-label",children:"Total Enemies"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.normalCount}),l.jsx("span",{className:"stat-label",children:"Normal"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.bossCount}),l.jsx("span",{className:"stat-label",children:"Boss"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.avgHp}),l.jsx("span",{className:"stat-label",children:"Avg HP"})]})]}),l.jsxs("div",{className:"library-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("span",{className:"filter-label",children:"Type:"}),l.jsxs("select",{className:"filter-select",value:s.isBoss===null?"":s.isBoss?"boss":"normal",onChange:f=>{const h=f.target.value;r({...s,isBoss:h===""?null:h==="boss"})},children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"normal",children:"Normal"}),l.jsx("option",{value:"boss",children:"Boss"})]})]}),l.jsx("div",{className:"filter-group",children:l.jsx("input",{type:"text",className:"search-input",placeholder:"Search enemies...",value:s.searchText,onChange:f=>r({...s,searchText:f.target.value})})})]}),m.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-state-icon",children:""}),l.jsx("span",{className:"empty-state-text",children:"No enemies found"})]}):l.jsx("div",{className:"enemy-grid",children:m.map(f=>{const{enemy:h}=f,b=zu(h);return l.jsxs("div",{className:`enemy-card ${b?"boss":""}`,children:[l.jsxs("div",{className:"enemy-card-header",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"enemy-name",children:h.name}),h.nameJa&&l.jsx("p",{className:"enemy-name-ja",children:h.nameJa})]}),l.jsx("span",{className:`enemy-badge ${b?"boss":"normal"}`,children:b?"BOSS":"Normal"})]}),l.jsxs("div",{className:"enemy-stats",children:[l.jsxs("div",{className:"enemy-stat",children:[l.jsx("span",{className:"enemy-stat-label",children:"HP"}),l.jsx("span",{className:"enemy-stat-value",children:h.baseMaxHp})]}),l.jsxs("div",{className:"enemy-stat",children:[l.jsx("span",{className:"enemy-stat-label",children:"Speed"}),l.jsx("span",{className:"enemy-stat-value",children:h.baseSpeed})]}),l.jsxs("div",{className:"enemy-stat",children:[l.jsx("span",{className:"enemy-stat-label",children:"Guard"}),l.jsx("span",{className:"enemy-stat-value",children:h.startingGuard?Math.floor(h.baseMaxAp*.5):0})]})]}),l.jsx("p",{className:"enemy-description",children:h.description})]},h.id)})})]})},Uu=[{id:"tip_battle_001",category:"battle",title:"Energy Management",content:"Each turn you receive 3 energy to play cards. Plan your card plays carefully to maximize damage while maintaining defense. Unused energy does not carry over to the next turn.",isUnlocked:!0},{id:"tip_battle_002",category:"battle",title:"Guard Mechanics",content:"Guard blocks incoming damage before HP. Guard does not stack between turns - any remaining guard is lost at the start of your turn. Prioritize guard when expecting heavy enemy attacks.",isUnlocked:!0},{id:"tip_battle_003",category:"battle",title:"Speed and Turn Order",content:"Higher speed means you act first. If your speed is higher than the enemy, you can attack before they do. Use preemptive cards to attack even earlier in the turn.",isUnlocked:!0},{id:"tip_battle_004",category:"battle",title:"Armor Points (AP)",content:"AP provides permanent damage reduction. When HP damage occurs, AP absorbs some damage. Unlike guard, AP persists across turns but is harder to recover.",isUnlocked:!0},{id:"tip_cards_001",category:"cards",title:"Card Mastery System",content:"Using a card increases its mastery level. Higher mastery provides damage bonuses: Lv1 = +20%, Lv2 = +40%, Lv3 = +100%. Build your deck around cards you use frequently.",isUnlocked:!0},{id:"tip_cards_002",category:"cards",title:"Card Cost Reduction",content:"Some cards reduce the cost of the next card played. Chaining these cards together allows you to play more cards per turn. Look for cards with 'cost reduction' effects.",isUnlocked:!0},{id:"tip_cards_003",category:"cards",title:"Multi-Hit Attacks",content:"Multi-hit cards deal damage multiple times. Each hit can trigger on-hit effects and is calculated separately against enemy defense. Great for breaking through guard.",isUnlocked:!0},{id:"tip_explore_001",category:"exploration",title:"Dungeon Node Types",content:"The dungeon map contains different node types: Battle nodes for combat, Rest nodes for healing, Event nodes for random encounters, and Treasure nodes for loot.",isUnlocked:!0},{id:"tip_explore_002",category:"exploration",title:"Exploration Limit",content:"You have a limited number of explorations before needing to rest. Plan your dungeon runs carefully and return to camp before running out of explorations.",isUnlocked:!0},{id:"tip_explore_003",category:"exploration",title:"Resource Management",content:"Gold and magic stones gained during exploration are temporary until you return to camp. If you die, you lose all exploration resources. Return safely to keep your loot.",isUnlocked:!0},{id:"tip_class_001",category:"class",title:"Sword Energy (Swordsman)",content:"The Swordsman builds Sword Energy by playing attack cards. Spend accumulated energy to unleash powerful finisher moves. Balance energy building and spending for optimal damage.",isUnlocked:!0},{id:"tip_class_002",category:"class",title:"Guild Promotions",content:"Complete guild exams to increase your rank. Higher ranks unlock better rewards, new cards, and access to deeper dungeon levels. Check the guild for available promotions.",isUnlocked:!0},{id:"tip_general_001",category:"general",title:"Sanctuary Upgrades",content:"The Sanctuary offers permanent upgrades using souls. Souls are gained from defeating enemies and are transferred to your total when you return safely. Unlock nodes to grow stronger.",isUnlocked:!0},{id:"tip_general_002",category:"general",title:"Blacksmith Services",content:"The Blacksmith can upgrade, repair, and dismantle equipment. Upgrading improves stats, repairing restores durability, and dismantling recovers materials from unwanted items.",isUnlocked:!0},{id:"tip_general_003",category:"general",title:"Shop Inventory",content:"The shop sells consumables, equipment, and cards. Inventory refreshes periodically. Check back regularly for new items and stock up on healing items before difficult runs.",isUnlocked:!0}];function Fb(){return Uu}function Wb(){const s={};return Uu.forEach(r=>{s[r.category]=(s[r.category]||0)+1}),{total:Uu.length,byCategory:s}}const Sp={battle:"Battle",cards:"Cards",exploration:"Exploration",class:"Class",general:"General"},ex={battle:"",cards:"",exploration:"",class:"",general:""},ax=()=>{const[s,r]=S.useState(null),[o,u]=S.useState(new Set(["battle","cards","exploration","class","general"])),m=S.useMemo(()=>Fb(),[]),f=S.useMemo(()=>Wb(),[]),h=S.useMemo(()=>{const g={battle:[],cards:[],exploration:[],class:[],general:[]};return m.forEach(j=>{g[j.category].push(j)}),g},[m]),b=g=>{const j=new Set(o);j.has(g)?j.delete(g):j.add(g),u(j)},p=g=>{r(s===g?null:g)},v=["battle","cards","exploration","class","general"];return l.jsxs("div",{className:"library-content",children:[l.jsxs("div",{className:"library-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:f.total}),l.jsx("span",{className:"stat-label",children:"Total Tips"})]}),v.map(g=>l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:f.byCategory[g]||0}),l.jsx("span",{className:"stat-label",children:Sp[g]})]},g))]}),l.jsx("div",{className:"tips-container",children:v.map(g=>{const j=h[g],q=o.has(g);return j.length===0?null:l.jsxs("div",{className:"tips-category",children:[l.jsxs("div",{className:"tips-category-header",onClick:()=>b(g),children:[l.jsx("span",{className:"tips-category-icon",children:ex[g]}),l.jsx("span",{className:"tips-category-title",children:Sp[g]}),l.jsxs("span",{className:"tips-category-count",children:[j.length," tips"]}),l.jsx("span",{children:q?"":""})]}),q&&l.jsx("div",{className:"tips-list",children:j.map(T=>l.jsxs("div",{className:`tip-card ${s===T.id?"expanded":""}`,onClick:()=>p(T.id),children:[l.jsx("div",{className:"tip-title",children:T.title}),l.jsx("div",{className:"tip-content",children:T.content})]},T.id))})]},g)})})]})},tx=()=>{const[s,r]=S.useState("cards"),{returnToCamp:o}=Ga(),u=[{id:"cards",label:"Card Encyclopedia"},{id:"enemies",label:"Enemy Bestiary"},{id:"tips",label:"Game Tips"}],m=()=>{switch(s){case"cards":return l.jsx(Vb,{});case"enemies":return l.jsx(Kb,{});case"tips":return l.jsx(ax,{});default:return null}};return l.jsxs("div",{className:"library-screen",children:[l.jsx(nn,{title:""}),l.jsx("nav",{className:"library-tabs",children:u.map(f=>l.jsx("button",{className:`library-tab ${s===f.id?"active":""}`,onClick:()=>r(f.id),children:f.label},f.id))}),m(),l.jsx("button",{className:"library-back-button",onClick:o,children:"Return to Camp"})]})},nx={battle:{icon:"",label:"Battle",description:"Encounter enemies"},elite:{icon:"",label:"Elite",description:"Powerful enemy with better rewards"},boss:{icon:"",label:"Boss",description:"Floor boss - defeat to progress"},event:{icon:"",label:"Event",description:"Unknown encounter"},rest:{icon:"",label:"Rest",description:"Restore health"},treasure:{icon:"",label:"Treasure",description:"Find rewards"}},Ou={1:{depth:1,name:"Corruption",japaneseName:"",description:"Where decay begins its embrace",recommendedLevel:1},2:{depth:2,name:"Frenzy",japaneseName:"",description:"Madness lurks in every shadow",recommendedLevel:5},3:{depth:3,name:"Chaos",japaneseName:"",description:"Order loses all meaning",recommendedLevel:10},4:{depth:4,name:"Void",japaneseName:"",description:"Where existence fades",recommendedLevel:15},5:{depth:5,name:"Abyss",japaneseName:"",description:"The endless darkness awaits",recommendedLevel:20}},dy={totalRows:7,nodesPerRow:[1,2,2,2,2,2,1],eliteChance:.15,eventChance:.1,restChance:.1,treasureChance:.05};function sx(){const{returnToCamp:s,navigateTo:r,setDepth:o}=Ga(),{resetRuntimeState:u}=Da(),[m,f]=S.useState(null),h=S.useCallback(v=>{f(v)},[]),b=S.useCallback(()=>{m!==null&&(u(),o(m),r("dungeon_map"))},[m,o,r,u]),p=v=>Pu;return l.jsxs("div",{className:"dungeon-gate-screen",children:[l.jsx(nn,{title:""}),l.jsxs("div",{className:"depth-selection-container",children:[l.jsx("h2",{className:"depth-selection-title",children:"Select Depth"}),l.jsx("div",{className:"depth-cards-grid",children:[1,2,3,4,5].map(v=>{const g=p(),j=Ou[v],q=m===v;return l.jsxs("button",{className:`depth-card ${q?"selected":""}`,onClick:()=>h(v),style:{"--depth-primary":g.primary,"--depth-secondary":g.secondary,"--depth-accent":g.accent,"--depth-glow":g.glow,"--depth-hover":g.hover},children:[l.jsxs("div",{className:"depth-card-inner",children:[l.jsx("div",{className:"depth-number",children:v}),l.jsxs("div",{className:"depth-name-container",children:[l.jsx("span",{className:"depth-name-jp",children:j.japaneseName}),l.jsx("span",{className:"depth-name-en",children:j.name})]}),l.jsx("p",{className:"depth-description",children:j.description}),l.jsxs("div",{className:"depth-level",children:["Lv. ",j.recommendedLevel,"+"]})]}),q&&l.jsx("div",{className:"depth-selected-indicator"})]},v)})})]}),l.jsx("div",{className:"dungeon-gate-actions",children:l.jsx("button",{className:"start-exploration-button",onClick:b,disabled:m===null,children:m!==null?`Enter ${Ou[m].japaneseName}`:"Select a Depth"})}),l.jsx("button",{className:"dungeon-gate-back-button",onClick:s,children:" Back to Camp"})]})}function lx(s,r){return`node-${s}-${r}`}function ix(){return`run-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function cx(s,r,o=dy){if(s===0)return"battle";if(s===r-1)return"boss";const u=Math.random();let m=0;return m+=o.eliteChance,u<m?"elite":(m+=o.eventChance,u<m?"event":(m+=o.restChance,u<m?"rest":(m+=o.treasureChance,u<m?"treasure":"battle")))}function rx(s,r){s.forEach((o,u)=>{const m=r.length;if(m===1)o.connections.push(r[0].id);else if(s.length===1)r.forEach(f=>{o.connections.push(f.id)});else{const f=Math.min(u,m-1);if(o.connections.push(r[f].id),Math.random()>.5){const h=u<s.length/2?f+1:f-1;if(h>=0&&h<m){const b=r[h].id;o.connections.includes(b)||o.connections.push(b)}}}})}function ux(s,r=dy){const{totalRows:o,nodesPerRow:u}=r,m=[],f=[];for(let h=0;h<o;h++){const b=u[h]||1,p=[];for(let v=0;v<b;v++){const g={id:lx(h,v),type:cx(h,o,r),row:h,column:v,connections:[],status:h===0?"available":"locked"};p.push(g),m.push(g)}f.push(p)}for(let h=0;h<o-1;h++)rx(f[h],f[h+1]);return{depth:s,nodes:m,currentNodeId:null,isCompleted:!1,totalRows:o}}function Fu(s,r){return s.nodes.find(o=>o.id===r)}function Lu(s,r,o){return s.map(u=>u.id===r?{...u,status:o}:u)}function ox(s,r){const o=Fu(s,r);if(!o||o.status!=="available")return s;let u=s.nodes.map(m=>m.status==="available"&&m.id!==r?{...m,status:"skipped"}:m);return u=Lu(u,r,"current"),{...s,nodes:u,currentNodeId:r}}function dx(s,r,o){const u=Fu(s,r);if(!u||u.status!=="current")return s;if(o==="defeat"||o==="retreat")return{...s,isCompleted:!1};let m=Lu(s.nodes,r,"completed");return u.row===s.totalRows-1?{...s,nodes:m,currentNodeId:null,isCompleted:!0}:(u.connections.forEach(h=>{const b=s.nodes.find(p=>p.id===h);b&&b.status==="locked"&&(m=Lu(m,h,"available"))}),{...s,nodes:m,currentNodeId:null})}function mx(s){return{runId:ix(),selectedDepth:s,currentFloor:ux(s),encounterCount:0,isActive:!0,startedAt:Date.now()}}function fx(s){const r=s.nodes.filter(u=>u.status==="completed").length,o=s.nodes.length;return Math.round(r/o*100)}function px(s){const r=new Map;s.nodes.forEach(u=>{const m=r.get(u.row)||[];m.push(u),r.set(u.row,m)});const o=[];for(let u=0;u<s.totalRows;u++)o.push(r.get(u)||[]);return o}function yx(s){const r=[],o=new Set(s.nodes.filter(u=>u.status==="completed").map(u=>u.id));return s.nodes.forEach(u=>{u.connections.forEach(m=>{r.push({fromId:u.id,toId:m,isUnlocked:o.has(u.id)})})}),r}const my=S.createContext(null);function gx({children:s,initialRun:r=null}){const[o,u]=S.useState(r),m=S.useCallback(j=>{const q=mx(j);u(q)},[]),f=S.useCallback(j=>{u(q=>{if(!q)return q;const T=ox(q.currentFloor,j);return{...q,currentFloor:T}})},[]),h=S.useCallback(j=>{u(q=>{if(!q||!q.currentFloor.currentNodeId)return q;const T=dx(q.currentFloor,q.currentFloor.currentNodeId,j);return j==="defeat"?{...q,currentFloor:T,isActive:!1}:{...q,currentFloor:T,encounterCount:q.encounterCount+1}})},[]),b=S.useCallback(()=>{u(j=>j&&{...j,isActive:!1})},[]),p=S.useCallback(()=>!o||!o.currentFloor.currentNodeId?null:Fu(o.currentFloor,o.currentFloor.currentNodeId)||null,[o]),v=S.useCallback(()=>{u(j=>j&&{...j,encounterCount:j.encounterCount+1})},[]),g={dungeonRun:o,initializeRun:m,selectNodeToVisit:f,completeCurrentNode:h,retreatFromDungeon:b,getCurrentNode:p,incrementEncounter:v};return l.jsx(my.Provider,{value:g,children:s})}function hx(){const s=S.useContext(my);if(!s)throw new Error("useDungeonRun must be used within a DungeonRunProvider");return s}function vx({node:s,onClick:r,isHighlighted:o=!1}){const{id:u,type:m,status:f}=s,h=nx[m],b=f==="available",p=S.useMemo(()=>{const j=["map-node",`map-node-${f}`,`map-node-type-${m}`];return b&&j.push("map-node-clickable"),o&&j.push("map-node-highlighted"),j.join(" ")},[f,m,b,o]),v=()=>{b&&r(u)},g=j=>{(j.key==="Enter"||j.key===" ")&&b&&(j.preventDefault(),r(u))};return l.jsxs("div",{className:p,onClick:v,onKeyDown:g,role:b?"button":"presentation",tabIndex:b?0:-1,"aria-label":`${h.label} node - ${f}`,"aria-disabled":!b,children:[l.jsxs("div",{className:"map-node-inner",children:[l.jsx("span",{className:"map-node-icon",children:h.icon}),f==="current"&&l.jsx("div",{className:"map-node-current-indicator"})]}),f==="available"&&l.jsx("div",{className:"map-node-available-pulse"})]})}function bx(){const{returnToCamp:s,navigateTo:r,startBattle:o,gameState:u}=Ga(),{dungeonRun:m,initializeRun:f,selectNodeToVisit:h,completeCurrentNode:b,retreatFromDungeon:p,getCurrentNode:v}=hx();S.useEffect(()=>{!m&&u.depth&&f(u.depth)},[m,u.depth,f]);const g=S.useMemo(()=>Pu,[]),j=S.useMemo(()=>{const w=m?.selectedDepth||u.depth||1;return Ou[w]},[m,u.depth]),q=S.useMemo(()=>m?px(m.currentFloor):[],[m]),T=S.useMemo(()=>m?yx(m.currentFloor):[],[m]),D=S.useMemo(()=>m?fx(m.currentFloor):0,[m]),U=S.useCallback(w=>{if(!m)return;const x=m.currentFloor.nodes.find(B=>B.id===w);if(!(!x||x.status!=="available"))if(h(w),x.type==="battle"||x.type==="elite"||x.type==="boss"){const B=x.type==="battle"?"normal":x.type;o({enemyIds:[],backgroundType:"dungeon",enemyType:B,onWin:()=>{b("victory"),r("dungeon_map")},onLose:()=>{b("defeat"),s()}},"normal")}else b("victory")},[m,h,o,b,r,s]),C=S.useCallback(()=>{p(),s()},[p,s]);if(S.useEffect(()=>{m?.currentFloor.isCompleted&&s()},[m?.currentFloor.isCompleted,s]),!m)return l.jsx("div",{className:"node-map-screen node-map-loading",children:l.jsx("p",{children:"Entering the depths..."})});const k=v();return l.jsxs("div",{className:"node-map-screen",style:{"--map-primary":g.primary,"--map-secondary":g.secondary,"--map-accent":g.accent,"--map-glow":g.glow},children:[l.jsxs("header",{className:"node-map-header",children:[l.jsxs("div",{className:"node-map-title-row",children:[l.jsx("span",{className:"node-map-depth-badge",children:j.japaneseName}),l.jsx("h1",{className:"node-map-title",children:"Floor Map"})]}),l.jsxs("div",{className:"node-map-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Progress"}),l.jsxs("span",{className:"stat-value",children:[D,"%"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Encounters"}),l.jsx("span",{className:"stat-value",children:m.encounterCount})]})]})]}),l.jsx("div",{className:"node-map-container",children:l.jsxs("div",{className:"node-map-grid",children:[l.jsx("svg",{className:"connection-lines-layer",preserveAspectRatio:"none",children:T.map(w=>{const x=m.currentFloor.nodes.find(le=>le.id===w.fromId),B=m.currentFloor.nodes.find(le=>le.id===w.toId);if(!x||!B)return null;const z=_u(x.column,q[x.row]?.length||1),$=Du(x.row,m.currentFloor.totalRows),K=_u(B.column,q[B.row]?.length||1),ae=Du(B.row,m.currentFloor.totalRows);return l.jsx("line",{className:`connection-line ${w.isUnlocked?"unlocked":""}`,x1:`${z}%`,y1:`${$}%`,x2:`${K}%`,y2:`${ae}%`},`${w.fromId}-${w.toId}`)})}),l.jsx("div",{className:"nodes-layer",children:q.map((w,x)=>l.jsx("div",{className:"node-row",style:{top:`${Du(x,m.currentFloor.totalRows)}%`},children:w.map(B=>l.jsx("div",{className:"node-wrapper",style:{left:`${_u(B.column,w.length)}%`},children:l.jsx(vx,{node:B,onClick:U,isHighlighted:k?.id===B.id})},B.id))},x))})]})}),k&&l.jsxs("div",{className:"current-node-info",children:[l.jsx("span",{className:"current-node-label",children:"Current:"}),l.jsx("span",{className:"current-node-type",children:k.type.charAt(0).toUpperCase()+k.type.slice(1)})]}),l.jsx("div",{className:"node-map-actions",children:l.jsx("button",{className:"retreat-button",onClick:C,children:"Retreat"})}),l.jsx("button",{className:"node-map-back-button",onClick:s,children:" Back to Camp"})]})}function _u(s,r){if(r===1)return 50;const o=60/(r-1);return 20+s*o}function Du(s,r){const m=84/(r-1);return 8+(r-1-s)*m}function xx(s){switch(s){case"sword":return"";case"staff":return"";case"summon":return"";default:return""}}const Sx=({classInfo:s,isSelected:r,onSelect:o})=>{const{name:u,japaneseName:m,description:f,uniqueMechanic:h,mechanicDescription:b,stats:p,isAvailable:v,themeColor:g,icon:j}=s,q=["character-card",r&&"selected",!v&&"disabled"].filter(Boolean).join(" "),T=()=>{v&&o()};return l.jsxs("div",{className:q,style:{"--theme-color":g},onClick:T,children:[!v&&l.jsxs("div",{className:"coming-soon-overlay",children:[l.jsx("span",{className:"coming-soon-text",children:"Coming Soon"}),l.jsx("span",{className:"coming-soon-subtext",children:"Under Development"})]}),l.jsx("div",{className:"selection-indicator",children:l.jsx("span",{className:"selection-checkmark",children:""})}),l.jsxs("div",{className:"character-card-header",children:[l.jsx("div",{className:"character-icon",children:xx(j)}),l.jsxs("div",{className:"character-name-block",children:[l.jsx("h3",{className:"character-class-name",children:u}),l.jsx("span",{className:"character-class-japanese",children:m})]})]}),l.jsxs("div",{className:"character-stats",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"HP"}),l.jsx("span",{className:"stat-value",children:p.hp})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"AP"}),l.jsx("span",{className:"stat-value",children:p.ap})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"Speed"}),l.jsx("span",{className:"stat-value",children:p.speed})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"Energy"}),l.jsx("span",{className:"stat-value",children:p.cardActEnergy})]})]}),l.jsxs("div",{className:"unique-mechanic",children:[l.jsx("div",{className:"mechanic-title",children:h}),l.jsx("div",{className:"mechanic-description",children:b})]}),l.jsx("p",{className:"character-description",children:f})]})},Nx=({cards:s,className:r=""})=>{const o=S.useMemo(()=>{const u=new Set;return s.filter(m=>u.has(m.cardTypeId)?!1:(u.add(m.cardTypeId),!0))},[s]);return s.length===0?l.jsxs("div",{className:`starter-deck-preview ${r}`,children:[l.jsxs("div",{className:"starter-deck-header",children:[l.jsx("h3",{className:"starter-deck-title",children:"Starter Deck"}),l.jsx("span",{className:"starter-deck-count",children:"0 cards"})]}),l.jsx("div",{className:"no-deck-message",children:"Starter deck is not yet available for this class."})]}):l.jsxs("div",{className:`starter-deck-preview ${r}`,children:[l.jsxs("div",{className:"starter-deck-header",children:[l.jsx("h3",{className:"starter-deck-title",children:"Starter Deck"}),l.jsxs("span",{className:"starter-deck-count",children:[s.length," cards"]})]}),l.jsx("div",{className:"starter-deck-cards",children:o.map(u=>l.jsx("div",{className:"starter-deck-card",children:l.jsx(bl,{card:u,depth:1,isPlayable:!0})},u.cardTypeId))})]})},Cx=()=>{const[s,r]=S.useState(null),{navigateTo:o}=Ga(),{initializeWithClass:u}=Da(),m=hv(),f=s&&m.find(v=>v.class===s)||null,h=v=>{r(v)},b=()=>{!s||!f?.isAvailable||(u(s),Xu.save({player:{name:"Adventurer",playerClass:s,classGrade:"E",level:1,hp:f.stats.hp,maxHp:f.stats.hp,ap:f.stats.ap,maxAp:f.stats.ap,speed:f.stats.speed,deckCardIds:f.starterDeck.map(v=>v.id)},resources:{baseCampGold:0,baseCampMagicStones:{small:0,medium:0,large:0,huge:0}},inventory:{storageItems:[],equipmentSlots:{weapon:null,armor:null,helmet:null,boots:null,accessory1:null,accessory2:null}},progression:{sanctuaryProgress:{currentRunSouls:0,totalSouls:0,unlockedNodes:[],explorationLimitBonus:0},unlockedDepths:[1]}}),o("camp"))},p=s!==null&&f?.isAvailable;return l.jsxs("div",{className:"character-select-screen",children:[l.jsxs("header",{className:"character-select-header",children:[l.jsx("h1",{className:"character-select-title",children:"Choose Your Path"}),l.jsx("p",{className:"character-select-subtitle",children:"Select a class to begin your journey into the abyss"})]}),l.jsxs("div",{className:"character-select-content",children:[l.jsx("div",{className:"character-grid",children:m.map(v=>l.jsx(Sx,{classInfo:v,isSelected:s===v.class,onSelect:()=>h(v.class)},v.class))}),f&&l.jsx(Nx,{cards:f.starterDeck}),l.jsx("div",{className:"confirm-button-container",children:l.jsx("button",{className:"confirm-button",onClick:b,disabled:!p,children:"Begin Journey"})})]})]})},jx={id:"exam_training_dummy",name:"Training Dummy",nameJa:"",description:"Basic training dummy for practicing swordsmanship",baseMaxHp:50,baseMaxAp:0,baseSpeed:40,startingGuard:!1,actEnergy:2,aiPatterns:[{phaseNumber:0,action:{name:"Wooden Strike",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}}]},Ex={id:"exam_guild_instructor",name:"Guild Instructor",nameJa:"",description:"Veteran warrior who trains guild members",baseMaxHp:120,baseMaxAp:0,baseSpeed:55,startingGuard:!1,actEnergy:3,aiPatterns:[{phaseNumber:1,action:{name:"Instructor's Strike",type:"attack",baseDamage:15,displayIcon:"",priority:0,energyCost:2}},{phaseNumber:2,action:{name:"Defensive Stance",type:"buff",baseDamage:0,guardGain:20,displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"Instructor's Strike",type:"attack",baseDamage:15,displayIcon:"",priority:0,energyCost:2},probability:.7},{phaseNumber:0,action:{name:"Defensive Stance",type:"buff",baseDamage:0,guardGain:20,displayIcon:"",priority:1,energyCost:1},probability:.3}]},_x={id:"exam_veteran_warrior",name:"Veteran Warrior",nameJa:"",description:"Battle-hardened warrior with decades of experience",baseMaxHp:200,baseMaxAp:0,baseSpeed:60,startingGuard:!1,actEnergy:4,aiPatterns:[{phaseNumber:1,action:{name:"Skilled Slash",type:"attack",baseDamage:20,displayIcon:"",priority:0,energyCost:2}},{phaseNumber:2,action:{name:"Iron Defense",type:"buff",baseDamage:0,guardGain:30,displayIcon:"",priority:1,energyCost:2}},{phaseNumber:0,action:{name:"Skilled Slash",type:"attack",baseDamage:20,displayIcon:"",priority:0,energyCost:2},probability:.5},{phaseNumber:0,action:{name:"Combo Strike",type:"attack",baseDamage:12,hitCount:2,displayIcon:"",priority:0,energyCost:3,applyDebuffs:[{name:"bleed",stacks:1,duration:2,value:5,isPermanent:!1}]},probability:.3},{phaseNumber:0,action:{name:"Iron Defense",type:"buff",baseDamage:0,guardGain:30,displayIcon:"",priority:1,energyCost:2},probability:.2}]},Dx={id:"exam_sword_saint_phantom",name:"Phantom of the Sword Saint",nameJa:"",description:"Manifestation of a legendary sword saint's spirit",baseMaxHp:350,baseMaxAp:0,baseSpeed:70,startingGuard:!1,actEnergy:5,aiPatterns:[{phaseNumber:1,action:{name:"Divine Slash",type:"attack",baseDamage:25,displayIcon:"",priority:0,energyCost:3}},{phaseNumber:2,action:{name:"Sword Spirit Release",type:"attack",baseDamage:18,displayIcon:"",priority:1,energyCost:2,applyDebuffs:[{name:"defDownMinor",stacks:1,duration:2,value:20,isPermanent:!1}]}},{phaseNumber:5,condition:(s,r)=>s<=r*.5,action:{name:"Ultimate Art: Void Blade",type:"attack",baseDamage:40,displayIcon:"",priority:0,energyCost:5,applyDebuffs:[{name:"stun",stacks:1,duration:1,value:0,isPermanent:!1}]}},{phaseNumber:0,action:{name:"Divine Slash",type:"attack",baseDamage:25,displayIcon:"",priority:0,energyCost:3},probability:.6},{phaseNumber:0,action:{name:"Sword Spirit Release",type:"attack",baseDamage:18,displayIcon:"",priority:1,energyCost:2,applyDebuffs:[{name:"defDownMinor",stacks:1,duration:2,value:20,isPermanent:!1}]},probability:.4}]},wx={id:"exam_magic_golem",name:"Magic Training Golem",nameJa:"",description:"Golem designed for mage training",baseMaxHp:45,baseMaxAp:0,baseSpeed:35,startingGuard:!0,actEnergy:2,aiPatterns:[{phaseNumber:0,action:{name:"Magic Bullet",type:"attack",baseDamage:10,displayIcon:"",priority:0,energyCost:1}}]},Mx={id:"exam_wild_spirit",name:"Wild Spirit",nameJa:"",description:"Untamed spirit for summoner training",baseMaxHp:40,baseMaxAp:0,baseSpeed:50,startingGuard:!1,actEnergy:2,aiPatterns:[{phaseNumber:0,action:{name:"Spirit Blast",type:"attack",baseDamage:9,displayIcon:"",priority:0,energyCost:1}}]},Tx=[jx,Ex,_x,Dx,wx,Mx];function Ax(s){return Tx.find(r=>r.id===s)}function kx(){const{gameState:s,setDepth:r,returnToCamp:o}=Ga(),{currentScreen:u,depth:m,battleMode:f,battleConfig:h}=s;return l.jsxs("div",{className:"app-container",children:[u==="character_select"&&l.jsx(Cx,{}),u==="camp"&&l.jsx(zv,{}),u==="battle"&&l.jsx(l.Fragment,{children:f==="exam"&&h?(()=>{const b=Ax(h.enemyIds[0]);return b?l.jsx(Rv,{examEnemy:b,onWin:h.onWin||(()=>{}),onLose:h.onLose||(()=>{})}):(console.error("Exam enemy not found:",h.enemyIds[0]),l.jsx("div",{children:"Error: Exam enemy not found"}))})():l.jsx(qv,{depth:m,onDepthChange:r,onReturnToCamp:o,onWin:h?.onWin,onLose:h?.onLose})}),u==="guild"&&l.jsx($v,{}),u==="shop"&&l.jsx(db,{}),u==="blacksmith"&&l.jsx(Ob,{}),u==="sanctuary"&&l.jsx(Pb,{}),u==="library"&&l.jsx(tx,{}),u==="storage"&&l.jsx(yb,{}),u==="dungeon"&&l.jsx(sx,{}),u==="dungeon_map"&&l.jsx(bx,{})]})}function qx(){return l.jsx(Ev,{children:l.jsx(xv,{children:l.jsx(Nv,{children:l.jsx(Xv,{children:l.jsx(gx,{children:l.jsx(kx,{})})})})})})}Gh.createRoot(document.getElementById("root")).render(l.jsx(S.StrictMode,{children:l.jsx(qx,{})}));
