(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const f of m)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function o(m){const f={};return m.integrity&&(f.integrity=m.integrity),m.referrerPolicy&&(f.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?f.credentials="include":m.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(m){if(m.ep)return;m.ep=!0;const f=o(m);fetch(m.href,f)}})();function Mh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var yu={exports:{}},gl={};var Kf;function wh(){if(Kf)return gl;Kf=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(u,m,f){var h=null;if(f!==void 0&&(h=""+f),m.key!==void 0&&(h=""+m.key),"key"in m){f={};for(var b in m)b!=="key"&&(f[b]=m[b])}else f=m;return m=f.ref,{$$typeof:s,type:u,key:h,ref:m!==void 0?m:null,props:f}}return gl.Fragment=r,gl.jsx=o,gl.jsxs=o,gl}var Ff;function Rh(){return Ff||(Ff=1,yu.exports=wh()),yu.exports}var l=Rh(),gu={exports:{}},pe={};var Wf;function kh(){if(Wf)return pe;Wf=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.iterator;function M(_){return _===null||typeof _!="object"?null:(_=k&&_[k]||_["@@iterator"],typeof _=="function"?_:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,j={};function R(_,Y,J){this.props=_,this.context=Y,this.refs=j,this.updater=J||D}R.prototype.isReactComponent={},R.prototype.setState=function(_,Y){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,Y,"setState")},R.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function A(){}A.prototype=R.prototype;function x(_,Y,J){this.props=_,this.context=Y,this.refs=j,this.updater=J||D}var I=x.prototype=new A;I.constructor=x,O(I,R.prototype),I.isPureReactComponent=!0;var G=Array.isArray;function X(){}var K={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function le(_,Y,J){var ee=J.ref;return{$$typeof:s,type:_,key:Y,ref:ee!==void 0?ee:null,props:J}}function be(_,Y){return le(_.type,Y,_.props)}function T(_){return typeof _=="object"&&_!==null&&_.$$typeof===s}function z(_){var Y={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(J){return Y[J]})}var F=/\/+/g;function de(_,Y){return typeof _=="object"&&_!==null&&_.key!=null?z(""+_.key):Y.toString(36)}function ce(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(X,X):(_.status="pending",_.then(function(Y){_.status==="pending"&&(_.status="fulfilled",_.value=Y)},function(Y){_.status==="pending"&&(_.status="rejected",_.reason=Y)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function B(_,Y,J,ee,oe){var me=typeof _;(me==="undefined"||me==="boolean")&&(_=null);var ge=!1;if(_===null)ge=!0;else switch(me){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(_.$$typeof){case s:case r:ge=!0;break;case g:return ge=_._init,B(ge(_._payload),Y,J,ee,oe)}}if(ge)return oe=oe(_),ge=ee===""?"."+de(_,0):ee,G(oe)?(J="",ge!=null&&(J=ge.replace(F,"$&/")+"/"),B(oe,Y,J,"",function(Ua){return Ua})):oe!=null&&(T(oe)&&(oe=be(oe,J+(oe.key==null||_&&_.key===oe.key?"":(""+oe.key).replace(F,"$&/")+"/")+ge)),Y.push(oe)),1;ge=0;var Me=ee===""?".":ee+":";if(G(_))for(var Se=0;Se<_.length;Se++)ee=_[Se],me=Me+de(ee,Se),ge+=B(ee,Y,J,me,oe);else if(Se=M(_),typeof Se=="function")for(_=Se.call(_),Se=0;!(ee=_.next()).done;)ee=ee.value,me=Me+de(ee,Se++),ge+=B(ee,Y,J,me,oe);else if(me==="object"){if(typeof _.then=="function")return B(ce(_),Y,J,ee,oe);throw Y=String(_),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ge}function Z(_,Y,J){if(_==null)return _;var ee=[],oe=0;return B(_,ee,"","",function(me){return Y.call(J,me,oe++)}),ee}function V(_){if(_._status===-1){var Y=_._result;Y=Y(),Y.then(function(J){(_._status===0||_._status===-1)&&(_._status=1,_._result=J)},function(J){(_._status===0||_._status===-1)&&(_._status=2,_._result=J)}),_._status===-1&&(_._status=0,_._result=Y)}if(_._status===1)return _._result.default;throw _._result}var W=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},re={map:Z,forEach:function(_,Y,J){Z(_,function(){Y.apply(this,arguments)},J)},count:function(_){var Y=0;return Z(_,function(){Y++}),Y},toArray:function(_){return Z(_,function(Y){return Y})||[]},only:function(_){if(!T(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return pe.Activity=N,pe.Children=re,pe.Component=R,pe.Fragment=o,pe.Profiler=m,pe.PureComponent=x,pe.StrictMode=u,pe.Suspense=p,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,pe.__COMPILER_RUNTIME={__proto__:null,c:function(_){return K.H.useMemoCache(_)}},pe.cache=function(_){return function(){return _.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(_,Y,J){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var ee=O({},_.props),oe=_.key;if(Y!=null)for(me in Y.key!==void 0&&(oe=""+Y.key),Y)!ae.call(Y,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&Y.ref===void 0||(ee[me]=Y[me]);var me=arguments.length-2;if(me===1)ee.children=J;else if(1<me){for(var ge=Array(me),Me=0;Me<me;Me++)ge[Me]=arguments[Me+2];ee.children=ge}return le(_.type,oe,ee)},pe.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:f,_context:_},_},pe.createElement=function(_,Y,J){var ee,oe={},me=null;if(Y!=null)for(ee in Y.key!==void 0&&(me=""+Y.key),Y)ae.call(Y,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(oe[ee]=Y[ee]);var ge=arguments.length-2;if(ge===1)oe.children=J;else if(1<ge){for(var Me=Array(ge),Se=0;Se<ge;Se++)Me[Se]=arguments[Se+2];oe.children=Me}if(_&&_.defaultProps)for(ee in ge=_.defaultProps,ge)oe[ee]===void 0&&(oe[ee]=ge[ee]);return le(_,me,oe)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(_){return{$$typeof:b,render:_}},pe.isValidElement=T,pe.lazy=function(_){return{$$typeof:g,_payload:{_status:-1,_result:_},_init:V}},pe.memo=function(_,Y){return{$$typeof:v,type:_,compare:Y===void 0?null:Y}},pe.startTransition=function(_){var Y=K.T,J={};K.T=J;try{var ee=_(),oe=K.S;oe!==null&&oe(J,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(X,W)}catch(me){W(me)}finally{Y!==null&&J.types!==null&&(Y.types=J.types),K.T=Y}},pe.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},pe.use=function(_){return K.H.use(_)},pe.useActionState=function(_,Y,J){return K.H.useActionState(_,Y,J)},pe.useCallback=function(_,Y){return K.H.useCallback(_,Y)},pe.useContext=function(_){return K.H.useContext(_)},pe.useDebugValue=function(){},pe.useDeferredValue=function(_,Y){return K.H.useDeferredValue(_,Y)},pe.useEffect=function(_,Y){return K.H.useEffect(_,Y)},pe.useEffectEvent=function(_){return K.H.useEffectEvent(_)},pe.useId=function(){return K.H.useId()},pe.useImperativeHandle=function(_,Y,J){return K.H.useImperativeHandle(_,Y,J)},pe.useInsertionEffect=function(_,Y){return K.H.useInsertionEffect(_,Y)},pe.useLayoutEffect=function(_,Y){return K.H.useLayoutEffect(_,Y)},pe.useMemo=function(_,Y){return K.H.useMemo(_,Y)},pe.useOptimistic=function(_,Y){return K.H.useOptimistic(_,Y)},pe.useReducer=function(_,Y,J){return K.H.useReducer(_,Y,J)},pe.useRef=function(_){return K.H.useRef(_)},pe.useState=function(_){return K.H.useState(_)},pe.useSyncExternalStore=function(_,Y,J){return K.H.useSyncExternalStore(_,Y,J)},pe.useTransition=function(){return K.H.useTransition()},pe.version="19.2.0",pe}var ep;function Pu(){return ep||(ep=1,gu.exports=kh()),gu.exports}var S=Pu();const qh=Mh(S);var hu={exports:{}},hl={},vu={exports:{}},bu={};var ap;function Lh(){return ap||(ap=1,(function(s){function r(B,Z){var V=B.length;B.push(Z);e:for(;0<V;){var W=V-1>>>1,re=B[W];if(0<m(re,Z))B[W]=Z,B[V]=re,V=W;else break e}}function o(B){return B.length===0?null:B[0]}function u(B){if(B.length===0)return null;var Z=B[0],V=B.pop();if(V!==Z){B[0]=V;e:for(var W=0,re=B.length,_=re>>>1;W<_;){var Y=2*(W+1)-1,J=B[Y],ee=Y+1,oe=B[ee];if(0>m(J,V))ee<re&&0>m(oe,J)?(B[W]=oe,B[ee]=V,W=ee):(B[W]=J,B[Y]=V,W=Y);else if(ee<re&&0>m(oe,V))B[W]=oe,B[ee]=V,W=ee;else break e}}return Z}function m(B,Z){var V=B.sortIndex-Z.sortIndex;return V!==0?V:B.id-Z.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var h=Date,b=h.now();s.unstable_now=function(){return h.now()-b}}var p=[],v=[],g=1,N=null,k=3,M=!1,D=!1,O=!1,j=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function I(B){for(var Z=o(v);Z!==null;){if(Z.callback===null)u(v);else if(Z.startTime<=B)u(v),Z.sortIndex=Z.expirationTime,r(p,Z);else break;Z=o(v)}}function G(B){if(O=!1,I(B),!D)if(o(p)!==null)D=!0,X||(X=!0,z());else{var Z=o(v);Z!==null&&ce(G,Z.startTime-B)}}var X=!1,K=-1,ae=5,le=-1;function be(){return j?!0:!(s.unstable_now()-le<ae)}function T(){if(j=!1,X){var B=s.unstable_now();le=B;var Z=!0;try{e:{D=!1,O&&(O=!1,A(K),K=-1),M=!0;var V=k;try{a:{for(I(B),N=o(p);N!==null&&!(N.expirationTime>B&&be());){var W=N.callback;if(typeof W=="function"){N.callback=null,k=N.priorityLevel;var re=W(N.expirationTime<=B);if(B=s.unstable_now(),typeof re=="function"){N.callback=re,I(B),Z=!0;break a}N===o(p)&&u(p),I(B)}else u(p);N=o(p)}if(N!==null)Z=!0;else{var _=o(v);_!==null&&ce(G,_.startTime-B),Z=!1}}break e}finally{N=null,k=V,M=!1}Z=void 0}}finally{Z?z():X=!1}}}var z;if(typeof x=="function")z=function(){x(T)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,de=F.port2;F.port1.onmessage=T,z=function(){de.postMessage(null)}}else z=function(){R(T,0)};function ce(B,Z){K=R(function(){B(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(B){switch(k){case 1:case 2:case 3:var Z=3;break;default:Z=k}var V=k;k=Z;try{return B()}finally{k=V}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=k;k=B;try{return Z()}finally{k=V}},s.unstable_scheduleCallback=function(B,Z,V){var W=s.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=V+re,B={id:g++,callback:Z,priorityLevel:B,startTime:V,expirationTime:re,sortIndex:-1},V>W?(B.sortIndex=V,r(v,B),o(p)===null&&B===o(v)&&(O?(A(K),K=-1):O=!0,ce(G,V-W))):(B.sortIndex=re,r(p,B),D||M||(D=!0,X||(X=!0,z()))),B},s.unstable_shouldYield=be,s.unstable_wrapCallback=function(B){var Z=k;return function(){var V=k;k=Z;try{return B.apply(this,arguments)}finally{k=V}}}})(bu)),bu}var tp;function Gh(){return tp||(tp=1,vu.exports=Lh()),vu.exports}var xu={exports:{}},fa={};var np;function Oh(){if(np)return fa;np=1;var s=Pu();function r(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)v+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var u={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},m=Symbol.for("react.portal");function f(p,v,g){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:N==null?null:""+N,children:p,containerInfo:v,implementation:g}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,fa.createPortal=function(p,v){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(r(299));return f(p,v,null,g)},fa.flushSync=function(p){var v=h.T,g=u.p;try{if(h.T=null,u.p=2,p)return p()}finally{h.T=v,u.p=g,u.d.f()}},fa.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,u.d.C(p,v))},fa.prefetchDNS=function(p){typeof p=="string"&&u.d.D(p)},fa.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var g=v.as,N=b(g,v.crossOrigin),k=typeof v.integrity=="string"?v.integrity:void 0,M=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;g==="style"?u.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:N,integrity:k,fetchPriority:M}):g==="script"&&u.d.X(p,{crossOrigin:N,integrity:k,fetchPriority:M,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},fa.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var g=b(v.as,v.crossOrigin);u.d.M(p,{crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&u.d.M(p)},fa.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var g=v.as,N=b(g,v.crossOrigin);u.d.L(p,g,{crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},fa.preloadModule=function(p,v){if(typeof p=="string")if(v){var g=b(v.as,v.crossOrigin);u.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else u.d.m(p)},fa.requestFormReset=function(p){u.d.r(p)},fa.unstable_batchedUpdates=function(p,v){return p(v)},fa.useFormState=function(p,v,g){return h.H.useFormState(p,v,g)},fa.useFormStatus=function(){return h.H.useHostTransitionStatus()},fa.version="19.2.0",fa}var sp;function Uh(){if(sp)return xu.exports;sp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),xu.exports=Oh(),xu.exports}var lp;function zh(){if(lp)return hl;lp=1;var s=Gh(),r=Pu(),o=Uh();function u(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)a+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var a=e,t=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(t=a.return),e=a.return;while(e)}return a.tag===3?t:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function b(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(u(188))}function v(e){var a=e.alternate;if(!a){if(a=f(e),a===null)throw Error(u(188));return a!==e?null:e}for(var t=e,n=a;;){var i=t.return;if(i===null)break;var c=i.alternate;if(c===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===t)return p(i),e;if(c===n)return p(i),a;c=c.sibling}throw Error(u(188))}if(t.return!==n.return)t=i,n=c;else{for(var d=!1,y=i.child;y;){if(y===t){d=!0,t=i,n=c;break}if(y===n){d=!0,n=i,t=c;break}y=y.sibling}if(!d){for(y=c.child;y;){if(y===t){d=!0,t=c,n=i;break}if(y===n){d=!0,n=c,t=i;break}y=y.sibling}if(!d)throw Error(u(189))}}if(t.alternate!==n)throw Error(u(190))}if(t.tag!==3)throw Error(u(188));return t.stateNode.current===t?e:a}function g(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=g(e),a!==null)return a;e=e.sibling}return null}var N=Object.assign,k=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),x=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function z(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case R:return"Profiler";case j:return"StrictMode";case G:return"Suspense";case X:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case x:return e.displayName||"Context";case A:return(e._context.displayName||"Context")+".Consumer";case I:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return a=e.displayName||null,a!==null?a:de(e.type)||"Memo";case ae:a=e._payload,e=e._init;try{return de(e(a))}catch{}}return null}var ce=Array.isArray,B=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},W=[],re=-1;function _(e){return{current:e}}function Y(e){0>re||(e.current=W[re],W[re]=null,re--)}function J(e,a){re++,W[re]=e.current,e.current=a}var ee=_(null),oe=_(null),me=_(null),ge=_(null);function Me(e,a){switch(J(me,a),J(oe,e),J(ee,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?xf(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=xf(a),e=Sf(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(ee),J(ee,e)}function Se(){Y(ee),Y(oe),Y(me)}function Ua(e){e.memoizedState!==null&&J(ge,e);var a=ee.current,t=Sf(a,e.type);a!==t&&(J(oe,e),J(ee,t))}function za(e){oe.current===e&&(Y(ee),Y(oe)),ge.current===e&&(Y(ge),ml._currentValue=V)}var Ka,wt;function da(e){if(Ka===void 0)try{throw Error()}catch(t){var a=t.stack.trim().match(/\n( *(at )?)/);Ka=a&&a[1]||"",wt=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ka+e+wt}var Ba=!1;function rt(e,a){if(!e||Ba)return"";Ba=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var U=H}Reflect.construct(e,[],$)}else{try{$.call()}catch(H){U=H}e.call($.prototype)}}else{try{throw Error()}catch(H){U=H}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&U&&typeof H.stack=="string")return[H.stack,U.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),d=c[0],y=c[1];if(d&&y){var C=d.split(`
`),L=y.split(`
`);for(i=n=0;n<C.length&&!C[n].includes("DetermineComponentFrameRoot");)n++;for(;i<L.length&&!L[i].includes("DetermineComponentFrameRoot");)i++;if(n===C.length||i===L.length)for(n=C.length-1,i=L.length-1;1<=n&&0<=i&&C[n]!==L[i];)i--;for(;1<=n&&0<=i;n--,i--)if(C[n]!==L[i]){if(n!==1||i!==1)do if(n--,i--,0>i||C[n]!==L[i]){var P=`
`+C[n].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=n&&0<=i);break}}}finally{Ba=!1,Error.prepareStackTrace=t}return(t=e?e.displayName||e.name:"")?da(t):""}function ha(e,a){switch(e.tag){case 26:case 27:case 5:return da(e.type);case 16:return da("Lazy");case 13:return e.child!==a&&a!==null?da("Suspense Fallback"):da("Suspense");case 19:return da("SuspenseList");case 0:case 15:return rt(e.type,!1);case 11:return rt(e.type.render,!1);case 1:return rt(e.type,!0);case 31:return da("Activity");default:return""}}function pa(e){try{var a="",t=null;do a+=ha(e,t),t=e,e=e.return;while(e);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var te=Object.prototype.hasOwnProperty,fe=s.unstable_scheduleCallback,Re=s.unstable_cancelCallback,ya=s.unstable_shouldYield,Fa=s.unstable_requestPaint,sa=s.unstable_now,on=s.unstable_getCurrentPriorityLevel,Rt=s.unstable_ImmediatePriority,xe=s.unstable_UserBlockingPriority,we=s.unstable_NormalPriority,la=s.unstable_LowPriority,Pe=s.unstable_IdlePriority,Ta=s.log,kt=s.unstable_setDisableYieldValue,ut=null,aa=null;function va(e){if(typeof Ta=="function"&&kt(e),aa&&typeof aa.setStrictMode=="function")try{aa.setStrictMode(ut,e)}catch{}}var ma=Math.clz32?Math.clz32:El,_l=Math.log,Rn=Math.LN2;function El(e){return e>>>=0,e===0?32:31-(_l(e)/Rn|0)|0}var ot=256,dt=262144,kn=4194304;function Wa(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qn(e,a,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var y=n&134217727;return y!==0?(n=y&~c,n!==0?i=Wa(n):(d&=y,d!==0?i=Wa(d):t||(t=y&~e,t!==0&&(i=Wa(t))))):(y=n&~c,y!==0?i=Wa(y):d!==0?i=Wa(d):t||(t=n&~e,t!==0&&(i=Wa(t)))),i===0?0:a!==0&&a!==i&&(a&c)===0&&(c=i&-i,t=a&-a,c>=t||c===32&&(t&4194048)!==0)?a:i}function dn(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function sc(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dl(){var e=kn;return kn<<=1,(kn&62914560)===0&&(kn=4194304),e}function _s(e){for(var a=[],t=0;31>t;t++)a.push(e);return a}function mn(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ze(e,a,t,n,i,c){var d=e.pendingLanes;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=t,e.entangledLanes&=t,e.errorRecoveryDisabledLanes&=t,e.shellSuspendCounter=0;var y=e.entanglements,C=e.expirationTimes,L=e.hiddenUpdates;for(t=d&~t;0<t;){var P=31-ma(t),$=1<<P;y[P]=0,C[P]=-1;var U=L[P];if(U!==null)for(L[P]=null,P=0;P<U.length;P++){var H=U[P];H!==null&&(H.lane&=-536870913)}t&=~$}n!==0&&Qe(e,n,0),c!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=c&~(d&~a))}function Qe(e,a,t){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-ma(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|t&261930}function et(e,a){var t=e.entangledLanes|=a;for(e=e.entanglements;t;){var n=31-ma(t),i=1<<n;i&a|e[n]&a&&(e[n]|=a),t&=~i}}function qt(e,a){var t=a&-a;return t=(t&42)!==0?1:Es(t),(t&(e.suspendedLanes|a))!==0?0:t}function Es(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function lc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function no(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:Pf(e.type))}function so(e,a){var t=Z.p;try{return Z.p=e,a()}finally{Z.p=t}}var Lt=Math.random().toString(36).slice(2),ia="__reactFiber$"+Lt,ba="__reactProps$"+Lt,Ln="__reactContainer$"+Lt,ic="__reactEvents$"+Lt,by="__reactListeners$"+Lt,xy="__reactHandles$"+Lt,lo="__reactResources$"+Lt,Ds="__reactMarker$"+Lt;function cc(e){delete e[ia],delete e[ba],delete e[ic],delete e[by],delete e[xy]}function Gn(e){var a=e[ia];if(a)return a;for(var t=e.parentNode;t;){if(a=t[Ln]||t[ia]){if(t=a.alternate,a.child!==null||t!==null&&t.child!==null)for(e=Af(e);e!==null;){if(t=e[ia])return t;e=Af(e)}return a}e=t,t=e.parentNode}return null}function On(e){if(e=e[ia]||e[Ln]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function As(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(u(33))}function Un(e){var a=e[lo];return a||(a=e[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ta(e){e[Ds]=!0}var io=new Set,co={};function fn(e,a){zn(e,a),zn(e+"Capture",a)}function zn(e,a){for(co[e]=a,e=0;e<a.length;e++)io.add(a[e])}var Sy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ro={},uo={};function Ny(e){return te.call(uo,e)?!0:te.call(ro,e)?!1:Sy.test(e)?uo[e]=!0:(ro[e]=!0,!1)}function Al(e,a,t){if(Ny(a))if(t===null)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+t)}}function Tl(e,a,t){if(t===null)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+t)}}function mt(e,a,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttributeNS(a,t,""+n)}}function Ha(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oo(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Cy(e,a,t){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,c=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return i.call(this)},set:function(d){t=""+d,c.call(this,d)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return t},setValue:function(d){t=""+d},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function rc(e){if(!e._valueTracker){var a=oo(e)?"checked":"value";e._valueTracker=Cy(e,a,""+e[a])}}function mo(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var t=a.getValue(),n="";return e&&(n=oo(e)?e.checked?"true":"false":e.value),e=n,e!==t?(a.setValue(e),!0):!1}function Ml(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jy=/[\n"\\]/g;function Ia(e){return e.replace(jy,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function uc(e,a,t,n,i,c,d,y){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),a!=null?d==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Ha(a)):e.value!==""+Ha(a)&&(e.value=""+Ha(a)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),a!=null?oc(e,d,Ha(a)):t!=null?oc(e,d,Ha(t)):n!=null&&e.removeAttribute("value"),i==null&&c!=null&&(e.defaultChecked=!!c),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Ha(y):e.removeAttribute("name")}function fo(e,a,t,n,i,c,d,y){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),a!=null||t!=null){if(!(c!=="submit"&&c!=="reset"||a!=null)){rc(e);return}t=t!=null?""+Ha(t):"",a=a!=null?""+Ha(a):t,y||a===e.value||(e.value=a),e.defaultValue=a}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=y?e.checked:!!n,e.defaultChecked=!!n,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),rc(e)}function oc(e,a,t){a==="number"&&Ml(e.ownerDocument)===e||e.defaultValue===""+t||(e.defaultValue=""+t)}function Bn(e,a,t,n){if(e=e.options,a){a={};for(var i=0;i<t.length;i++)a["$"+t[i]]=!0;for(t=0;t<e.length;t++)i=a.hasOwnProperty("$"+e[t].value),e[t].selected!==i&&(e[t].selected=i),i&&n&&(e[t].defaultSelected=!0)}else{for(t=""+Ha(t),a=null,i=0;i<e.length;i++){if(e[i].value===t){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}a!==null||e[i].disabled||(a=e[i])}a!==null&&(a.selected=!0)}}function po(e,a,t){if(a!=null&&(a=""+Ha(a),a!==e.value&&(e.value=a),t==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=t!=null?""+Ha(t):""}function yo(e,a,t,n){if(a==null){if(n!=null){if(t!=null)throw Error(u(92));if(ce(n)){if(1<n.length)throw Error(u(93));n=n[0]}t=n}t==null&&(t=""),a=t}t=Ha(a),e.defaultValue=t,n=e.textContent,n===t&&n!==""&&n!==null&&(e.value=n),rc(e)}function Hn(e,a){if(a){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=a;return}}e.textContent=a}var _y=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function go(e,a,t){var n=a.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,t):typeof t!="number"||t===0||_y.has(a)?a==="float"?e.cssFloat=t:e[a]=(""+t).trim():e[a]=t+"px"}function ho(e,a,t){if(a!=null&&typeof a!="object")throw Error(u(62));if(e=e.style,t!=null){for(var n in t)!t.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in a)n=a[i],a.hasOwnProperty(i)&&t[i]!==n&&go(e,i,n)}else for(var c in a)a.hasOwnProperty(c)&&go(e,c,a[c])}function dc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ey=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(e){return Dy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ft(){}var mc=null;function fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var In=null,Yn=null;function vo(e){var a=On(e);if(a&&(e=a.stateNode)){var t=e[ba]||null;e:switch(e=a.stateNode,a.type){case"input":if(uc(e,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),a=t.name,t.type==="radio"&&a!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+Ia(""+a)+'"][type="radio"]'),a=0;a<t.length;a++){var n=t[a];if(n!==e&&n.form===e.form){var i=n[ba]||null;if(!i)throw Error(u(90));uc(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(a=0;a<t.length;a++)n=t[a],n.form===e.form&&mo(n)}break e;case"textarea":po(e,t.value,t.defaultValue);break e;case"select":a=t.value,a!=null&&Bn(e,!!t.multiple,a,!1)}}}var pc=!1;function bo(e,a,t){if(pc)return e(a,t);pc=!0;try{var n=e(a);return n}finally{if(pc=!1,(In!==null||Yn!==null)&&(vi(),In&&(a=In,e=Yn,Yn=In=null,vo(a),e)))for(a=0;a<e.length;a++)vo(e[a])}}function Ts(e,a){var t=e.stateNode;if(t===null)return null;var n=t[ba]||null;if(n===null)return null;t=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(u(231,a,typeof t));return t}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=!1;if(pt)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){yc=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{yc=!1}var Gt=null,gc=null,Rl=null;function xo(){if(Rl)return Rl;var e,a=gc,t=a.length,n,i="value"in Gt?Gt.value:Gt.textContent,c=i.length;for(e=0;e<t&&a[e]===i[e];e++);var d=t-e;for(n=1;n<=d&&a[t-n]===i[c-n];n++);return Rl=i.slice(e,1<n?1-n:void 0)}function kl(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function ql(){return!0}function So(){return!1}function xa(e){function a(t,n,i,c,d){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(t=e[y],this[y]=t?t(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ql:So,this.isPropagationStopped=So,this}return N(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),a}var pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=xa(pn),ws=N({},pn,{view:0,detail:0}),Ay=xa(ws),hc,vc,Rs,Gl=N({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(hc=e.screenX-Rs.screenX,vc=e.screenY-Rs.screenY):vc=hc=0,Rs=e),hc)},movementY:function(e){return"movementY"in e?e.movementY:vc}}),No=xa(Gl),Ty=N({},Gl,{dataTransfer:0}),My=xa(Ty),wy=N({},ws,{relatedTarget:0}),bc=xa(wy),Ry=N({},pn,{animationName:0,elapsedTime:0,pseudoElement:0}),ky=xa(Ry),qy=N({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ly=xa(qy),Gy=N({},pn,{data:0}),Co=xa(Gy),Oy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=zy[e])?!!a[e]:!1}function xc(){return By}var Hy=N({},ws,{key:function(e){if(e.key){var a=Oy[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Iy=xa(Hy),Yy=N({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jo=xa(Yy),Py=N({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),Qy=xa(Py),Xy=N({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$y=xa(Xy),Vy=N({},Gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jy=xa(Vy),Zy=N({},pn,{newState:0,oldState:0}),Ky=xa(Zy),Fy=[9,13,27,32],Sc=pt&&"CompositionEvent"in window,ks=null;pt&&"documentMode"in document&&(ks=document.documentMode);var Wy=pt&&"TextEvent"in window&&!ks,_o=pt&&(!Sc||ks&&8<ks&&11>=ks),Eo=" ",Do=!1;function Ao(e,a){switch(e){case"keyup":return Fy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function To(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pn=!1;function eg(e,a){switch(e){case"compositionend":return To(a);case"keypress":return a.which!==32?null:(Do=!0,Eo);case"textInput":return e=a.data,e===Eo&&Do?null:e;default:return null}}function ag(e,a){if(Pn)return e==="compositionend"||!Sc&&Ao(e,a)?(e=xo(),Rl=gc=Gt=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _o&&a.locale!=="ko"?null:a.data;default:return null}}var tg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mo(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!tg[e.type]:a==="textarea"}function wo(e,a,t,n){In?Yn?Yn.push(n):Yn=[n]:In=n,a=_i(a,"onChange"),0<a.length&&(t=new Ll("onChange","change",null,t,n),e.push({event:t,listeners:a}))}var qs=null,Ls=null;function ng(e){pf(e,0)}function Ol(e){var a=As(e);if(mo(a))return e}function Ro(e,a){if(e==="change")return a}var ko=!1;if(pt){var Nc;if(pt){var Cc="oninput"in document;if(!Cc){var qo=document.createElement("div");qo.setAttribute("oninput","return;"),Cc=typeof qo.oninput=="function"}Nc=Cc}else Nc=!1;ko=Nc&&(!document.documentMode||9<document.documentMode)}function Lo(){qs&&(qs.detachEvent("onpropertychange",Go),Ls=qs=null)}function Go(e){if(e.propertyName==="value"&&Ol(Ls)){var a=[];wo(a,Ls,e,fc(e)),bo(ng,a)}}function sg(e,a,t){e==="focusin"?(Lo(),qs=a,Ls=t,qs.attachEvent("onpropertychange",Go)):e==="focusout"&&Lo()}function lg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ol(Ls)}function ig(e,a){if(e==="click")return Ol(a)}function cg(e,a){if(e==="input"||e==="change")return Ol(a)}function rg(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Ma=typeof Object.is=="function"?Object.is:rg;function Gs(e,a){if(Ma(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var t=Object.keys(e),n=Object.keys(a);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!te.call(a,i)||!Ma(e[i],a[i]))return!1}return!0}function Oo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uo(e,a){var t=Oo(e);e=0;for(var n;t;){if(t.nodeType===3){if(n=e+t.textContent.length,e<=a&&n>=a)return{node:t,offset:a-e};e=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Oo(t)}}function zo(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?zo(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Bo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Ml(e.document);a instanceof e.HTMLIFrameElement;){try{var t=typeof a.contentWindow.location.href=="string"}catch{t=!1}if(t)e=a.contentWindow;else break;a=Ml(e.document)}return a}function jc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var ug=pt&&"documentMode"in document&&11>=document.documentMode,Qn=null,_c=null,Os=null,Ec=!1;function Ho(e,a,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ec||Qn==null||Qn!==Ml(n)||(n=Qn,"selectionStart"in n&&jc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Os&&Gs(Os,n)||(Os=n,n=_i(_c,"onSelect"),0<n.length&&(a=new Ll("onSelect","select",null,a,t),e.push({event:a,listeners:n}),a.target=Qn)))}function yn(e,a){var t={};return t[e.toLowerCase()]=a.toLowerCase(),t["Webkit"+e]="webkit"+a,t["Moz"+e]="moz"+a,t}var Xn={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionrun:yn("Transition","TransitionRun"),transitionstart:yn("Transition","TransitionStart"),transitioncancel:yn("Transition","TransitionCancel"),transitionend:yn("Transition","TransitionEnd")},Dc={},Io={};pt&&(Io=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function gn(e){if(Dc[e])return Dc[e];if(!Xn[e])return e;var a=Xn[e],t;for(t in a)if(a.hasOwnProperty(t)&&t in Io)return Dc[e]=a[t];return e}var Yo=gn("animationend"),Po=gn("animationiteration"),Qo=gn("animationstart"),og=gn("transitionrun"),dg=gn("transitionstart"),mg=gn("transitioncancel"),Xo=gn("transitionend"),$o=new Map,Ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ac.push("scrollEnd");function at(e,a){$o.set(e,a),fn(a,[e])}var Ul=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ya=[],$n=0,Tc=0;function zl(){for(var e=$n,a=Tc=$n=0;a<e;){var t=Ya[a];Ya[a++]=null;var n=Ya[a];Ya[a++]=null;var i=Ya[a];Ya[a++]=null;var c=Ya[a];if(Ya[a++]=null,n!==null&&i!==null){var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}c!==0&&Vo(t,i,c)}}function Bl(e,a,t,n){Ya[$n++]=e,Ya[$n++]=a,Ya[$n++]=t,Ya[$n++]=n,Tc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Mc(e,a,t,n){return Bl(e,a,t,n),Hl(e)}function hn(e,a){return Bl(e,null,null,a),Hl(e)}function Vo(e,a,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t);for(var i=!1,c=e.return;c!==null;)c.childLanes|=t,n=c.alternate,n!==null&&(n.childLanes|=t),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(i=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,i&&a!==null&&(i=31-ma(t),e=c.hiddenUpdates,n=e[i],n===null?e[i]=[a]:n.push(a),a.lane=t|536870912),c):null}function Hl(e){if(50<ll)throw ll=0,zr=null,Error(u(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Vn={};function fg(e,a,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(e,a,t,n){return new fg(e,a,t,n)}function wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yt(e,a){var t=e.alternate;return t===null?(t=wa(e.tag,a,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=a,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&65011712,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,a=e.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t.refCleanup=e.refCleanup,t}function Jo(e,a){e.flags&=65011714;var t=e.alternate;return t===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,e.type=t.type,a=t.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Il(e,a,t,n,i,c){var d=0;if(n=e,typeof e=="function")wc(e)&&(d=1);else if(typeof e=="string")d=vh(e,t,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=wa(31,t,a,i),e.elementType=le,e.lanes=c,e;case O:return vn(t.children,i,c,a);case j:d=8,i|=24;break;case R:return e=wa(12,t,a,i|2),e.elementType=R,e.lanes=c,e;case G:return e=wa(13,t,a,i),e.elementType=G,e.lanes=c,e;case X:return e=wa(19,t,a,i),e.elementType=X,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x:d=10;break e;case A:d=9;break e;case I:d=11;break e;case K:d=14;break e;case ae:d=16,n=null;break e}d=29,t=Error(u(130,e===null?"null":typeof e,"")),n=null}return a=wa(d,t,a,i),a.elementType=e,a.type=n,a.lanes=c,a}function vn(e,a,t,n){return e=wa(7,e,n,a),e.lanes=t,e}function Rc(e,a,t){return e=wa(6,e,null,a),e.lanes=t,e}function Zo(e){var a=wa(18,null,null,0);return a.stateNode=e,a}function kc(e,a,t){return a=wa(4,e.children!==null?e.children:[],e.key,a),a.lanes=t,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Ko=new WeakMap;function Pa(e,a){if(typeof e=="object"&&e!==null){var t=Ko.get(e);return t!==void 0?t:(a={value:e,source:a,stack:pa(a)},Ko.set(e,a),a)}return{value:e,source:a,stack:pa(a)}}var Jn=[],Zn=0,Yl=null,Us=0,Qa=[],Xa=0,Ot=null,st=1,lt="";function gt(e,a){Jn[Zn++]=Us,Jn[Zn++]=Yl,Yl=e,Us=a}function Fo(e,a,t){Qa[Xa++]=st,Qa[Xa++]=lt,Qa[Xa++]=Ot,Ot=e;var n=st;e=lt;var i=32-ma(n)-1;n&=~(1<<i),t+=1;var c=32-ma(a)+i;if(30<c){var d=i-i%5;c=(n&(1<<d)-1).toString(32),n>>=d,i-=d,st=1<<32-ma(a)+i|t<<i|n,lt=c+e}else st=1<<c|t<<i|n,lt=e}function qc(e){e.return!==null&&(gt(e,1),Fo(e,1,0))}function Lc(e){for(;e===Yl;)Yl=Jn[--Zn],Jn[Zn]=null,Us=Jn[--Zn],Jn[Zn]=null;for(;e===Ot;)Ot=Qa[--Xa],Qa[Xa]=null,lt=Qa[--Xa],Qa[Xa]=null,st=Qa[--Xa],Qa[Xa]=null}function Wo(e,a){Qa[Xa++]=st,Qa[Xa++]=lt,Qa[Xa++]=Ot,st=a.id,lt=a.overflow,Ot=e}var ca=null,He=null,Ee=!1,Ut=null,$a=!1,Gc=Error(u(519));function zt(e){var a=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zs(Pa(a,e)),Gc}function ed(e){var a=e.stateNode,t=e.type,n=e.memoizedProps;switch(a[ia]=e,a[ba]=n,t){case"dialog":Ce("cancel",a),Ce("close",a);break;case"iframe":case"object":case"embed":Ce("load",a);break;case"video":case"audio":for(t=0;t<cl.length;t++)Ce(cl[t],a);break;case"source":Ce("error",a);break;case"img":case"image":case"link":Ce("error",a),Ce("load",a);break;case"details":Ce("toggle",a);break;case"input":Ce("invalid",a),fo(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Ce("invalid",a);break;case"textarea":Ce("invalid",a),yo(a,n.value,n.defaultValue,n.children)}t=n.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||a.textContent===""+t||n.suppressHydrationWarning===!0||vf(a.textContent,t)?(n.popover!=null&&(Ce("beforetoggle",a),Ce("toggle",a)),n.onScroll!=null&&Ce("scroll",a),n.onScrollEnd!=null&&Ce("scrollend",a),n.onClick!=null&&(a.onclick=ft),a=!0):a=!1,a||zt(e,!0)}function ad(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:ca=ca.return}}function Kn(e){if(e!==ca)return!1;if(!Ee)return ad(e),Ee=!0,!1;var a=e.tag,t;if((t=a!==3&&a!==27)&&((t=a===5)&&(t=e.type,t=!(t!=="form"&&t!=="button")||eu(e.type,e.memoizedProps)),t=!t),t&&He&&zt(e),ad(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=Df(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=Df(e)}else a===27?(a=He,Wt(e.type)?(e=lu,lu=null,He=e):He=a):He=ca?Ja(e.stateNode.nextSibling):null;return!0}function bn(){He=ca=null,Ee=!1}function Oc(){var e=Ut;return e!==null&&(ja===null?ja=e:ja.push.apply(ja,e),Ut=null),e}function zs(e){Ut===null?Ut=[e]:Ut.push(e)}var Uc=_(null),xn=null,ht=null;function Bt(e,a,t){J(Uc,a._currentValue),a._currentValue=t}function vt(e){e._currentValue=Uc.current,Y(Uc)}function zc(e,a,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===t)break;e=e.return}}function Bc(e,a,t,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){var d=i.child;c=c.firstContext;e:for(;c!==null;){var y=c;c=i;for(var C=0;C<a.length;C++)if(y.context===a[C]){c.lanes|=t,y=c.alternate,y!==null&&(y.lanes|=t),zc(c.return,t,e),n||(d=null);break e}c=y.next}}else if(i.tag===18){if(d=i.return,d===null)throw Error(u(341));d.lanes|=t,c=d.alternate,c!==null&&(c.lanes|=t),zc(d,t,e),d=null}else d=i.child;if(d!==null)d.return=i;else for(d=i;d!==null;){if(d===e){d=null;break}if(i=d.sibling,i!==null){i.return=d.return,d=i;break}d=d.return}i=d}}function Fn(e,a,t,n){e=null;for(var i=a,c=!1;i!==null;){if(!c){if((i.flags&524288)!==0)c=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var d=i.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var y=i.type;Ma(i.pendingProps.value,d.value)||(e!==null?e.push(y):e=[y])}}else if(i===ge.current){if(d=i.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(ml):e=[ml])}i=i.return}e!==null&&Bc(a,e,t,n),a.flags|=262144}function Pl(e){for(e=e.firstContext;e!==null;){if(!Ma(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sn(e){xn=e,ht=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ra(e){return td(xn,e)}function Ql(e,a){return xn===null&&Sn(e),td(e,a)}function td(e,a){var t=a._currentValue;if(a={context:a,memoizedValue:t,next:null},ht===null){if(e===null)throw Error(u(308));ht=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else ht=ht.next=a;return t}var pg=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(t){return t()})}},yg=s.unstable_scheduleCallback,gg=s.unstable_NormalPriority,Ze={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hc(){return{controller:new pg,data:new Map,refCount:0}}function Bs(e){e.refCount--,e.refCount===0&&yg(gg,function(){e.controller.abort()})}var Hs=null,Ic=0,Wn=0,es=null;function hg(e,a){if(Hs===null){var t=Hs=[];Ic=0,Wn=Qr(),es={status:"pending",value:void 0,then:function(n){t.push(n)}}}return Ic++,a.then(nd,nd),a}function nd(){if(--Ic===0&&Hs!==null){es!==null&&(es.status="fulfilled");var e=Hs;Hs=null,Wn=0,es=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function vg(e,a){var t=[],n={status:"pending",value:null,reason:null,then:function(i){t.push(i)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var i=0;i<t.length;i++)(0,t[i])(a)},function(i){for(n.status="rejected",n.reason=i,i=0;i<t.length;i++)(0,t[i])(void 0)}),n}var sd=B.S;B.S=function(e,a){Hm=sa(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&hg(e,a),sd!==null&&sd(e,a)};var Nn=_(null);function Yc(){var e=Nn.current;return e!==null?e:Be.pooledCache}function Xl(e,a){a===null?J(Nn,Nn.current):J(Nn,a.pool)}function ld(){var e=Yc();return e===null?null:{parent:Ze._currentValue,pool:e}}var as=Error(u(460)),Pc=Error(u(474)),$l=Error(u(542)),Vl={then:function(){}};function id(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cd(e,a,t){switch(t=e[t],t===void 0?e.push(a):t!==a&&(a.then(ft,ft),a=t),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,ud(e),e;default:if(typeof a.status=="string")a.then(ft,ft);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var i=a;i.status="fulfilled",i.value=n}},function(n){if(a.status==="pending"){var i=a;i.status="rejected",i.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,ud(e),e}throw jn=a,as}}function Cn(e){try{var a=e._init;return a(e._payload)}catch(t){throw t!==null&&typeof t=="object"&&typeof t.then=="function"?(jn=t,as):t}}var jn=null;function rd(){if(jn===null)throw Error(u(459));var e=jn;return jn=null,e}function ud(e){if(e===as||e===$l)throw Error(u(483))}var ts=null,Is=0;function Jl(e){var a=Is;return Is+=1,ts===null&&(ts=[]),cd(ts,e,a)}function Ys(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Zl(e,a){throw a.$$typeof===k?Error(u(525)):(e=Object.prototype.toString.call(a),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function od(e){function a(w,E){if(e){var q=w.deletions;q===null?(w.deletions=[E],w.flags|=16):q.push(E)}}function t(w,E){if(!e)return null;for(;E!==null;)a(w,E),E=E.sibling;return null}function n(w){for(var E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(w,E){return w=yt(w,E),w.index=0,w.sibling=null,w}function c(w,E,q){return w.index=q,e?(q=w.alternate,q!==null?(q=q.index,q<E?(w.flags|=67108866,E):q):(w.flags|=67108866,E)):(w.flags|=1048576,E)}function d(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function y(w,E,q,Q){return E===null||E.tag!==6?(E=Rc(q,w.mode,Q),E.return=w,E):(E=i(E,q),E.return=w,E)}function C(w,E,q,Q){var ie=q.type;return ie===O?P(w,E,q.props.children,Q,q.key):E!==null&&(E.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ae&&Cn(ie)===E.type)?(E=i(E,q.props),Ys(E,q),E.return=w,E):(E=Il(q.type,q.key,q.props,null,w.mode,Q),Ys(E,q),E.return=w,E)}function L(w,E,q,Q){return E===null||E.tag!==4||E.stateNode.containerInfo!==q.containerInfo||E.stateNode.implementation!==q.implementation?(E=kc(q,w.mode,Q),E.return=w,E):(E=i(E,q.children||[]),E.return=w,E)}function P(w,E,q,Q,ie){return E===null||E.tag!==7?(E=vn(q,w.mode,Q,ie),E.return=w,E):(E=i(E,q),E.return=w,E)}function $(w,E,q){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Rc(""+E,w.mode,q),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case M:return q=Il(E.type,E.key,E.props,null,w.mode,q),Ys(q,E),q.return=w,q;case D:return E=kc(E,w.mode,q),E.return=w,E;case ae:return E=Cn(E),$(w,E,q)}if(ce(E)||z(E))return E=vn(E,w.mode,q,null),E.return=w,E;if(typeof E.then=="function")return $(w,Jl(E),q);if(E.$$typeof===x)return $(w,Ql(w,E),q);Zl(w,E)}return null}function U(w,E,q,Q){var ie=E!==null?E.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ie!==null?null:y(w,E,""+q,Q);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case M:return q.key===ie?C(w,E,q,Q):null;case D:return q.key===ie?L(w,E,q,Q):null;case ae:return q=Cn(q),U(w,E,q,Q)}if(ce(q)||z(q))return ie!==null?null:P(w,E,q,Q,null);if(typeof q.then=="function")return U(w,E,Jl(q),Q);if(q.$$typeof===x)return U(w,E,Ql(w,q),Q);Zl(w,q)}return null}function H(w,E,q,Q,ie){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return w=w.get(q)||null,y(E,w,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case M:return w=w.get(Q.key===null?q:Q.key)||null,C(E,w,Q,ie);case D:return w=w.get(Q.key===null?q:Q.key)||null,L(E,w,Q,ie);case ae:return Q=Cn(Q),H(w,E,q,Q,ie)}if(ce(Q)||z(Q))return w=w.get(q)||null,P(E,w,Q,ie,null);if(typeof Q.then=="function")return H(w,E,q,Jl(Q),ie);if(Q.$$typeof===x)return H(w,E,q,Ql(E,Q),ie);Zl(E,Q)}return null}function ne(w,E,q,Q){for(var ie=null,De=null,se=E,ve=E=0,_e=null;se!==null&&ve<q.length;ve++){se.index>ve?(_e=se,se=null):_e=se.sibling;var Ae=U(w,se,q[ve],Q);if(Ae===null){se===null&&(se=_e);break}e&&se&&Ae.alternate===null&&a(w,se),E=c(Ae,E,ve),De===null?ie=Ae:De.sibling=Ae,De=Ae,se=_e}if(ve===q.length)return t(w,se),Ee&&gt(w,ve),ie;if(se===null){for(;ve<q.length;ve++)se=$(w,q[ve],Q),se!==null&&(E=c(se,E,ve),De===null?ie=se:De.sibling=se,De=se);return Ee&&gt(w,ve),ie}for(se=n(se);ve<q.length;ve++)_e=H(se,w,ve,q[ve],Q),_e!==null&&(e&&_e.alternate!==null&&se.delete(_e.key===null?ve:_e.key),E=c(_e,E,ve),De===null?ie=_e:De.sibling=_e,De=_e);return e&&se.forEach(function(sn){return a(w,sn)}),Ee&&gt(w,ve),ie}function ue(w,E,q,Q){if(q==null)throw Error(u(151));for(var ie=null,De=null,se=E,ve=E=0,_e=null,Ae=q.next();se!==null&&!Ae.done;ve++,Ae=q.next()){se.index>ve?(_e=se,se=null):_e=se.sibling;var sn=U(w,se,Ae.value,Q);if(sn===null){se===null&&(se=_e);break}e&&se&&sn.alternate===null&&a(w,se),E=c(sn,E,ve),De===null?ie=sn:De.sibling=sn,De=sn,se=_e}if(Ae.done)return t(w,se),Ee&&gt(w,ve),ie;if(se===null){for(;!Ae.done;ve++,Ae=q.next())Ae=$(w,Ae.value,Q),Ae!==null&&(E=c(Ae,E,ve),De===null?ie=Ae:De.sibling=Ae,De=Ae);return Ee&&gt(w,ve),ie}for(se=n(se);!Ae.done;ve++,Ae=q.next())Ae=H(se,w,ve,Ae.value,Q),Ae!==null&&(e&&Ae.alternate!==null&&se.delete(Ae.key===null?ve:Ae.key),E=c(Ae,E,ve),De===null?ie=Ae:De.sibling=Ae,De=Ae);return e&&se.forEach(function(Th){return a(w,Th)}),Ee&&gt(w,ve),ie}function Ue(w,E,q,Q){if(typeof q=="object"&&q!==null&&q.type===O&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case M:e:{for(var ie=q.key;E!==null;){if(E.key===ie){if(ie=q.type,ie===O){if(E.tag===7){t(w,E.sibling),Q=i(E,q.props.children),Q.return=w,w=Q;break e}}else if(E.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ae&&Cn(ie)===E.type){t(w,E.sibling),Q=i(E,q.props),Ys(Q,q),Q.return=w,w=Q;break e}t(w,E);break}else a(w,E);E=E.sibling}q.type===O?(Q=vn(q.props.children,w.mode,Q,q.key),Q.return=w,w=Q):(Q=Il(q.type,q.key,q.props,null,w.mode,Q),Ys(Q,q),Q.return=w,w=Q)}return d(w);case D:e:{for(ie=q.key;E!==null;){if(E.key===ie)if(E.tag===4&&E.stateNode.containerInfo===q.containerInfo&&E.stateNode.implementation===q.implementation){t(w,E.sibling),Q=i(E,q.children||[]),Q.return=w,w=Q;break e}else{t(w,E);break}else a(w,E);E=E.sibling}Q=kc(q,w.mode,Q),Q.return=w,w=Q}return d(w);case ae:return q=Cn(q),Ue(w,E,q,Q)}if(ce(q))return ne(w,E,q,Q);if(z(q)){if(ie=z(q),typeof ie!="function")throw Error(u(150));return q=ie.call(q),ue(w,E,q,Q)}if(typeof q.then=="function")return Ue(w,E,Jl(q),Q);if(q.$$typeof===x)return Ue(w,E,Ql(w,q),Q);Zl(w,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,E!==null&&E.tag===6?(t(w,E.sibling),Q=i(E,q),Q.return=w,w=Q):(t(w,E),Q=Rc(q,w.mode,Q),Q.return=w,w=Q),d(w)):t(w,E)}return function(w,E,q,Q){try{Is=0;var ie=Ue(w,E,q,Q);return ts=null,ie}catch(se){if(se===as||se===$l)throw se;var De=wa(29,se,null,w.mode);return De.lanes=Q,De.return=w,De}finally{}}}var _n=od(!0),dd=od(!1),Ht=!1;function Qc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function It(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Yt(e,a,t){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Te&2)!==0){var i=n.pending;return i===null?a.next=a:(a.next=i.next,i.next=a),n.pending=a,a=Hl(e),Vo(e,null,t),a}return Bl(e,n,a,t),Hl(e)}function Ps(e,a,t){if(a=a.updateQueue,a!==null&&(a=a.shared,(t&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,t|=n,a.lanes=t,et(e,t)}}function $c(e,a){var t=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,c=null;if(t=t.firstBaseUpdate,t!==null){do{var d={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};c===null?i=c=d:c=c.next=d,t=t.next}while(t!==null);c===null?i=c=a:c=c.next=a}else i=c=a;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=a:e.next=a,t.lastBaseUpdate=a}var Vc=!1;function Qs(){if(Vc){var e=es;if(e!==null)throw e}}function Xs(e,a,t,n){Vc=!1;var i=e.updateQueue;Ht=!1;var c=i.firstBaseUpdate,d=i.lastBaseUpdate,y=i.shared.pending;if(y!==null){i.shared.pending=null;var C=y,L=C.next;C.next=null,d===null?c=L:d.next=L,d=C;var P=e.alternate;P!==null&&(P=P.updateQueue,y=P.lastBaseUpdate,y!==d&&(y===null?P.firstBaseUpdate=L:y.next=L,P.lastBaseUpdate=C))}if(c!==null){var $=i.baseState;d=0,P=L=C=null,y=c;do{var U=y.lane&-536870913,H=U!==y.lane;if(H?(je&U)===U:(n&U)===U){U!==0&&U===Wn&&(Vc=!0),P!==null&&(P=P.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ne=e,ue=y;U=a;var Ue=t;switch(ue.tag){case 1:if(ne=ue.payload,typeof ne=="function"){$=ne.call(Ue,$,U);break e}$=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ue.payload,U=typeof ne=="function"?ne.call(Ue,$,U):ne,U==null)break e;$=N({},$,U);break e;case 2:Ht=!0}}U=y.callback,U!==null&&(e.flags|=64,H&&(e.flags|=8192),H=i.callbacks,H===null?i.callbacks=[U]:H.push(U))}else H={lane:U,tag:y.tag,payload:y.payload,callback:y.callback,next:null},P===null?(L=P=H,C=$):P=P.next=H,d|=U;if(y=y.next,y===null){if(y=i.shared.pending,y===null)break;H=y,y=H.next,H.next=null,i.lastBaseUpdate=H,i.shared.pending=null}}while(!0);P===null&&(C=$),i.baseState=C,i.firstBaseUpdate=L,i.lastBaseUpdate=P,c===null&&(i.shared.lanes=0),Vt|=d,e.lanes=d,e.memoizedState=$}}function md(e,a){if(typeof e!="function")throw Error(u(191,e));e.call(a)}function fd(e,a){var t=e.callbacks;if(t!==null)for(e.callbacks=null,e=0;e<t.length;e++)md(t[e],a)}var ns=_(null),Kl=_(0);function pd(e,a){e=Dt,J(Kl,e),J(ns,a),Dt=e|a.baseLanes}function Jc(){J(Kl,Dt),J(ns,ns.current)}function Zc(){Dt=Kl.current,Y(ns),Y(Kl)}var Ra=_(null),Va=null;function Pt(e){var a=e.alternate;J(Ve,Ve.current&1),J(Ra,e),Va===null&&(a===null||ns.current!==null||a.memoizedState!==null)&&(Va=e)}function Kc(e){J(Ve,Ve.current),J(Ra,e),Va===null&&(Va=e)}function yd(e){e.tag===22?(J(Ve,Ve.current),J(Ra,e),Va===null&&(Va=e)):Qt()}function Qt(){J(Ve,Ve.current),J(Ra,Ra.current)}function ka(e){Y(Ra),Va===e&&(Va=null),Y(Ve)}var Ve=_(0);function Fl(e){for(var a=e;a!==null;){if(a.tag===13){var t=a.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||nu(t)||su(t)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var bt=0,he=null,Ge=null,Ke=null,Wl=!1,ss=!1,En=!1,ei=0,$s=0,ls=null,bg=0;function Xe(){throw Error(u(321))}function Fc(e,a){if(a===null)return!1;for(var t=0;t<a.length&&t<e.length;t++)if(!Ma(e[t],a[t]))return!1;return!0}function Wc(e,a,t,n,i,c){return bt=c,he=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=e===null||e.memoizedState===null?Fd:pr,En=!1,c=t(n,i),En=!1,ss&&(c=hd(a,t,n,i)),gd(e),c}function gd(e){B.H=Zs;var a=Ge!==null&&Ge.next!==null;if(bt=0,Ke=Ge=he=null,Wl=!1,$s=0,ls=null,a)throw Error(u(300));e===null||Fe||(e=e.dependencies,e!==null&&Pl(e)&&(Fe=!0))}function hd(e,a,t,n){he=e;var i=0;do{if(ss&&(ls=null),$s=0,ss=!1,25<=i)throw Error(u(301));if(i+=1,Ke=Ge=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}B.H=Wd,c=a(t,n)}while(ss);return c}function xg(){var e=B.H,a=e.useState()[0];return a=typeof a.then=="function"?Vs(a):a,e=e.useState()[0],(Ge!==null?Ge.memoizedState:null)!==e&&(he.flags|=1024),a}function er(){var e=ei!==0;return ei=0,e}function ar(e,a,t){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~t}function tr(e){if(Wl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Wl=!1}bt=0,Ke=Ge=he=null,ss=!1,$s=ei=0,ls=null}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?he.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Je(){if(Ge===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var a=Ke===null?he.memoizedState:Ke.next;if(a!==null)Ke=a,Ge=e;else{if(e===null)throw he.alternate===null?Error(u(467)):Error(u(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ke===null?he.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function ai(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vs(e){var a=$s;return $s+=1,ls===null&&(ls=[]),e=cd(ls,e,a),a=he,(Ke===null?a.memoizedState:Ke.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?Fd:pr),e}function ti(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Vs(e);if(e.$$typeof===x)return ra(e)}throw Error(u(438,String(e)))}function nr(e){var a=null,t=he.updateQueue;if(t!==null&&(a=t.memoCache),a==null){var n=he.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(i){return i.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),t===null&&(t=ai(),he.updateQueue=t),t.memoCache=a,t=a.data[a.index],t===void 0)for(t=a.data[a.index]=Array(e),n=0;n<e;n++)t[n]=be;return a.index++,t}function xt(e,a){return typeof a=="function"?a(e):a}function ni(e){var a=Je();return sr(a,Ge,e)}function sr(e,a,t){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=t;var i=e.baseQueue,c=n.pending;if(c!==null){if(i!==null){var d=i.next;i.next=c.next,c.next=d}a.baseQueue=i=c,n.pending=null}if(c=e.baseState,i===null)e.memoizedState=c;else{a=i.next;var y=d=null,C=null,L=a,P=!1;do{var $=L.lane&-536870913;if($!==L.lane?(je&$)===$:(bt&$)===$){var U=L.revertLane;if(U===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),$===Wn&&(P=!0);else if((bt&U)===U){L=L.next,U===Wn&&(P=!0);continue}else $={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(y=C=$,d=c):C=C.next=$,he.lanes|=U,Vt|=U;$=L.action,En&&t(c,$),c=L.hasEagerState?L.eagerState:t(c,$)}else U={lane:$,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(y=C=U,d=c):C=C.next=U,he.lanes|=$,Vt|=$;L=L.next}while(L!==null&&L!==a);if(C===null?d=c:C.next=y,!Ma(c,e.memoizedState)&&(Fe=!0,P&&(t=es,t!==null)))throw t;e.memoizedState=c,e.baseState=d,e.baseQueue=C,n.lastRenderedState=c}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function lr(e){var a=Je(),t=a.queue;if(t===null)throw Error(u(311));t.lastRenderedReducer=e;var n=t.dispatch,i=t.pending,c=a.memoizedState;if(i!==null){t.pending=null;var d=i=i.next;do c=e(c,d.action),d=d.next;while(d!==i);Ma(c,a.memoizedState)||(Fe=!0),a.memoizedState=c,a.baseQueue===null&&(a.baseState=c),t.lastRenderedState=c}return[c,n]}function vd(e,a,t){var n=he,i=Je(),c=Ee;if(c){if(t===void 0)throw Error(u(407));t=t()}else t=a();var d=!Ma((Ge||i).memoizedState,t);if(d&&(i.memoizedState=t,Fe=!0),i=i.queue,rr(Sd.bind(null,n,i,e),[e]),i.getSnapshot!==a||d||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,is(9,{destroy:void 0},xd.bind(null,n,i,t,a),null),Be===null)throw Error(u(349));c||(bt&127)!==0||bd(n,a,t)}return t}function bd(e,a,t){e.flags|=16384,e={getSnapshot:a,value:t},a=he.updateQueue,a===null?(a=ai(),he.updateQueue=a,a.stores=[e]):(t=a.stores,t===null?a.stores=[e]:t.push(e))}function xd(e,a,t,n){a.value=t,a.getSnapshot=n,Nd(a)&&Cd(e)}function Sd(e,a,t){return t(function(){Nd(a)&&Cd(e)})}function Nd(e){var a=e.getSnapshot;e=e.value;try{var t=a();return!Ma(e,t)}catch{return!0}}function Cd(e){var a=hn(e,2);a!==null&&_a(a,e,2)}function ir(e){var a=ga();if(typeof e=="function"){var t=e;if(e=t(),En){va(!0);try{t()}finally{va(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xt,lastRenderedState:e},a}function jd(e,a,t,n){return e.baseState=t,sr(e,Ge,typeof n=="function"?n:xt)}function Sg(e,a,t,n,i){if(ii(e))throw Error(u(485));if(e=a.action,e!==null){var c={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){c.listeners.push(d)}};B.T!==null?t(!0):c.isTransition=!1,n(c),t=a.pending,t===null?(c.next=a.pending=c,_d(a,c)):(c.next=t.next,a.pending=t.next=c)}}function _d(e,a){var t=a.action,n=a.payload,i=e.state;if(a.isTransition){var c=B.T,d={};B.T=d;try{var y=t(i,n),C=B.S;C!==null&&C(d,y),Ed(e,a,y)}catch(L){cr(e,a,L)}finally{c!==null&&d.types!==null&&(c.types=d.types),B.T=c}}else try{c=t(i,n),Ed(e,a,c)}catch(L){cr(e,a,L)}}function Ed(e,a,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(n){Dd(e,a,n)},function(n){return cr(e,a,n)}):Dd(e,a,t)}function Dd(e,a,t){a.status="fulfilled",a.value=t,Ad(a),e.state=t,a=e.pending,a!==null&&(t=a.next,t===a?e.pending=null:(t=t.next,a.next=t,_d(e,t)))}function cr(e,a,t){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=t,Ad(a),a=a.next;while(a!==n)}e.action=null}function Ad(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Td(e,a){return a}function Md(e,a){if(Ee){var t=Be.formState;if(t!==null){e:{var n=he;if(Ee){if(He){a:{for(var i=He,c=$a;i.nodeType!==8;){if(!c){i=null;break a}if(i=Ja(i.nextSibling),i===null){i=null;break a}}c=i.data,i=c==="F!"||c==="F"?i:null}if(i){He=Ja(i.nextSibling),n=i.data==="F!";break e}}zt(n)}n=!1}n&&(a=t[0])}}return t=ga(),t.memoizedState=t.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Td,lastRenderedState:a},t.queue=n,t=Jd.bind(null,he,n),n.dispatch=t,n=ir(!1),c=fr.bind(null,he,!1,n.queue),n=ga(),i={state:a,dispatch:null,action:e,pending:null},n.queue=i,t=Sg.bind(null,he,i,c,t),i.dispatch=t,n.memoizedState=e,[a,t,!1]}function wd(e){var a=Je();return Rd(a,Ge,e)}function Rd(e,a,t){if(a=sr(e,a,Td)[0],e=ni(xt)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=Vs(a)}catch(d){throw d===as?$l:d}else n=a;a=Je();var i=a.queue,c=i.dispatch;return t!==a.memoizedState&&(he.flags|=2048,is(9,{destroy:void 0},Ng.bind(null,i,t),null)),[n,c,e]}function Ng(e,a){e.action=a}function kd(e){var a=Je(),t=Ge;if(t!==null)return Rd(a,t,e);Je(),a=a.memoizedState,t=Je();var n=t.queue.dispatch;return t.memoizedState=e,[a,n,!1]}function is(e,a,t,n){return e={tag:e,create:t,deps:n,inst:a,next:null},a=he.updateQueue,a===null&&(a=ai(),he.updateQueue=a),t=a.lastEffect,t===null?a.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,a.lastEffect=e),e}function qd(){return Je().memoizedState}function si(e,a,t,n){var i=ga();he.flags|=e,i.memoizedState=is(1|a,{destroy:void 0},t,n===void 0?null:n)}function li(e,a,t,n){var i=Je();n=n===void 0?null:n;var c=i.memoizedState.inst;Ge!==null&&n!==null&&Fc(n,Ge.memoizedState.deps)?i.memoizedState=is(a,c,t,n):(he.flags|=e,i.memoizedState=is(1|a,c,t,n))}function Ld(e,a){si(8390656,8,e,a)}function rr(e,a){li(2048,8,e,a)}function Cg(e){he.flags|=4;var a=he.updateQueue;if(a===null)a=ai(),he.updateQueue=a,a.events=[e];else{var t=a.events;t===null?a.events=[e]:t.push(e)}}function Gd(e){var a=Je().memoizedState;return Cg({ref:a,nextImpl:e}),function(){if((Te&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}function Od(e,a){return li(4,2,e,a)}function Ud(e,a){return li(4,4,e,a)}function zd(e,a){if(typeof a=="function"){e=e();var t=a(e);return function(){typeof t=="function"?t():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Bd(e,a,t){t=t!=null?t.concat([e]):null,li(4,4,zd.bind(null,a,e),t)}function ur(){}function Hd(e,a){var t=Je();a=a===void 0?null:a;var n=t.memoizedState;return a!==null&&Fc(a,n[1])?n[0]:(t.memoizedState=[e,a],e)}function Id(e,a){var t=Je();a=a===void 0?null:a;var n=t.memoizedState;if(a!==null&&Fc(a,n[1]))return n[0];if(n=e(),En){va(!0);try{e()}finally{va(!1)}}return t.memoizedState=[n,a],n}function or(e,a,t){return t===void 0||(bt&1073741824)!==0&&(je&261930)===0?e.memoizedState=a:(e.memoizedState=t,e=Ym(),he.lanes|=e,Vt|=e,t)}function Yd(e,a,t,n){return Ma(t,a)?t:ns.current!==null?(e=or(e,t,n),Ma(e,a)||(Fe=!0),e):(bt&42)===0||(bt&1073741824)!==0&&(je&261930)===0?(Fe=!0,e.memoizedState=t):(e=Ym(),he.lanes|=e,Vt|=e,a)}function Pd(e,a,t,n,i){var c=Z.p;Z.p=c!==0&&8>c?c:8;var d=B.T,y={};B.T=y,fr(e,!1,a,t);try{var C=i(),L=B.S;if(L!==null&&L(y,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var P=vg(C,n);Js(e,a,P,Ga(e))}else Js(e,a,n,Ga(e))}catch($){Js(e,a,{then:function(){},status:"rejected",reason:$},Ga())}finally{Z.p=c,d!==null&&y.types!==null&&(d.types=y.types),B.T=d}}function jg(){}function dr(e,a,t,n){if(e.tag!==5)throw Error(u(476));var i=Qd(e).queue;Pd(e,i,a,V,t===null?jg:function(){return Xd(e),t(n)})}function Qd(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xt,lastRenderedState:V},next:null};var t={};return a.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xt,lastRenderedState:t},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Xd(e){var a=Qd(e);a.next===null&&(a=e.alternate.memoizedState),Js(e,a.next.queue,{},Ga())}function mr(){return ra(ml)}function $d(){return Je().memoizedState}function Vd(){return Je().memoizedState}function _g(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var t=Ga();e=It(t);var n=Yt(a,e,t);n!==null&&(_a(n,a,t),Ps(n,a,t)),a={cache:Hc()},e.payload=a;return}a=a.return}}function Eg(e,a,t){var n=Ga();t={lane:n,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null},ii(e)?Zd(a,t):(t=Mc(e,a,t,n),t!==null&&(_a(t,e,n),Kd(t,a,n)))}function Jd(e,a,t){var n=Ga();Js(e,a,t,n)}function Js(e,a,t,n){var i={lane:n,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null};if(ii(e))Zd(a,i);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=a.lastRenderedReducer,c!==null))try{var d=a.lastRenderedState,y=c(d,t);if(i.hasEagerState=!0,i.eagerState=y,Ma(y,d))return Bl(e,a,i,0),Be===null&&zl(),!1}catch{}finally{}if(t=Mc(e,a,i,n),t!==null)return _a(t,e,n),Kd(t,a,n),!0}return!1}function fr(e,a,t,n){if(n={lane:2,revertLane:Qr(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ii(e)){if(a)throw Error(u(479))}else a=Mc(e,t,n,2),a!==null&&_a(a,e,2)}function ii(e){var a=e.alternate;return e===he||a!==null&&a===he}function Zd(e,a){ss=Wl=!0;var t=e.pending;t===null?a.next=a:(a.next=t.next,t.next=a),e.pending=a}function Kd(e,a,t){if((t&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,t|=n,a.lanes=t,et(e,t)}}var Zs={readContext:ra,use:ti,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Zs.useEffectEvent=Xe;var Fd={readContext:ra,use:ti,useCallback:function(e,a){return ga().memoizedState=[e,a===void 0?null:a],e},useContext:ra,useEffect:Ld,useImperativeHandle:function(e,a,t){t=t!=null?t.concat([e]):null,si(4194308,4,zd.bind(null,a,e),t)},useLayoutEffect:function(e,a){return si(4194308,4,e,a)},useInsertionEffect:function(e,a){si(4,2,e,a)},useMemo:function(e,a){var t=ga();a=a===void 0?null:a;var n=e();if(En){va(!0);try{e()}finally{va(!1)}}return t.memoizedState=[n,a],n},useReducer:function(e,a,t){var n=ga();if(t!==void 0){var i=t(a);if(En){va(!0);try{t(a)}finally{va(!1)}}}else i=a;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Eg.bind(null,he,e),[n.memoizedState,e]},useRef:function(e){var a=ga();return e={current:e},a.memoizedState=e},useState:function(e){e=ir(e);var a=e.queue,t=Jd.bind(null,he,a);return a.dispatch=t,[e.memoizedState,t]},useDebugValue:ur,useDeferredValue:function(e,a){var t=ga();return or(t,e,a)},useTransition:function(){var e=ir(!1);return e=Pd.bind(null,he,e.queue,!0,!1),ga().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,t){var n=he,i=ga();if(Ee){if(t===void 0)throw Error(u(407));t=t()}else{if(t=a(),Be===null)throw Error(u(349));(je&127)!==0||bd(n,a,t)}i.memoizedState=t;var c={value:t,getSnapshot:a};return i.queue=c,Ld(Sd.bind(null,n,c,e),[e]),n.flags|=2048,is(9,{destroy:void 0},xd.bind(null,n,c,t,a),null),t},useId:function(){var e=ga(),a=Be.identifierPrefix;if(Ee){var t=lt,n=st;t=(n&~(1<<32-ma(n)-1)).toString(32)+t,a="_"+a+"R_"+t,t=ei++,0<t&&(a+="H"+t.toString(32)),a+="_"}else t=bg++,a="_"+a+"r_"+t.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:mr,useFormState:Md,useActionState:Md,useOptimistic:function(e){var a=ga();a.memoizedState=a.baseState=e;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=t,a=fr.bind(null,he,!0,t),t.dispatch=a,[e,a]},useMemoCache:nr,useCacheRefresh:function(){return ga().memoizedState=_g.bind(null,he)},useEffectEvent:function(e){var a=ga(),t={impl:e};return a.memoizedState=t,function(){if((Te&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}},pr={readContext:ra,use:ti,useCallback:Hd,useContext:ra,useEffect:rr,useImperativeHandle:Bd,useInsertionEffect:Od,useLayoutEffect:Ud,useMemo:Id,useReducer:ni,useRef:qd,useState:function(){return ni(xt)},useDebugValue:ur,useDeferredValue:function(e,a){var t=Je();return Yd(t,Ge.memoizedState,e,a)},useTransition:function(){var e=ni(xt)[0],a=Je().memoizedState;return[typeof e=="boolean"?e:Vs(e),a]},useSyncExternalStore:vd,useId:$d,useHostTransitionStatus:mr,useFormState:wd,useActionState:wd,useOptimistic:function(e,a){var t=Je();return jd(t,Ge,e,a)},useMemoCache:nr,useCacheRefresh:Vd};pr.useEffectEvent=Gd;var Wd={readContext:ra,use:ti,useCallback:Hd,useContext:ra,useEffect:rr,useImperativeHandle:Bd,useInsertionEffect:Od,useLayoutEffect:Ud,useMemo:Id,useReducer:lr,useRef:qd,useState:function(){return lr(xt)},useDebugValue:ur,useDeferredValue:function(e,a){var t=Je();return Ge===null?or(t,e,a):Yd(t,Ge.memoizedState,e,a)},useTransition:function(){var e=lr(xt)[0],a=Je().memoizedState;return[typeof e=="boolean"?e:Vs(e),a]},useSyncExternalStore:vd,useId:$d,useHostTransitionStatus:mr,useFormState:kd,useActionState:kd,useOptimistic:function(e,a){var t=Je();return Ge!==null?jd(t,Ge,e,a):(t.baseState=e,[e,t.queue.dispatch])},useMemoCache:nr,useCacheRefresh:Vd};Wd.useEffectEvent=Gd;function yr(e,a,t,n){a=e.memoizedState,t=t(n,a),t=t==null?a:N({},a,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var gr={enqueueSetState:function(e,a,t){e=e._reactInternals;var n=Ga(),i=It(n);i.payload=a,t!=null&&(i.callback=t),a=Yt(e,i,n),a!==null&&(_a(a,e,n),Ps(a,e,n))},enqueueReplaceState:function(e,a,t){e=e._reactInternals;var n=Ga(),i=It(n);i.tag=1,i.payload=a,t!=null&&(i.callback=t),a=Yt(e,i,n),a!==null&&(_a(a,e,n),Ps(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var t=Ga(),n=It(t);n.tag=2,a!=null&&(n.callback=a),a=Yt(e,n,t),a!==null&&(_a(a,e,t),Ps(a,e,t))}};function em(e,a,t,n,i,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,d):a.prototype&&a.prototype.isPureReactComponent?!Gs(t,n)||!Gs(i,c):!0}function am(e,a,t,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(t,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(t,n),a.state!==e&&gr.enqueueReplaceState(a,a.state,null)}function Dn(e,a){var t=a;if("ref"in a){t={};for(var n in a)n!=="ref"&&(t[n]=a[n])}if(e=e.defaultProps){t===a&&(t=N({},t));for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t}function tm(e){Ul(e)}function nm(e){console.error(e)}function sm(e){Ul(e)}function ci(e,a){try{var t=e.onUncaughtError;t(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function lm(e,a,t){try{var n=e.onCaughtError;n(t.value,{componentStack:t.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function hr(e,a,t){return t=It(t),t.tag=3,t.payload={element:null},t.callback=function(){ci(e,a)},t}function im(e){return e=It(e),e.tag=3,e}function cm(e,a,t,n){var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var c=n.value;e.payload=function(){return i(c)},e.callback=function(){lm(a,t,n)}}var d=t.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){lm(a,t,n),typeof i!="function"&&(Jt===null?Jt=new Set([this]):Jt.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})})}function Dg(e,a,t,n,i){if(t.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=t.alternate,a!==null&&Fn(a,t,i,!0),t=Ra.current,t!==null){switch(t.tag){case 31:case 13:return Va===null?bi():t.alternate===null&&$e===0&&($e=3),t.flags&=-257,t.flags|=65536,t.lanes=i,n===Vl?t.flags|=16384:(a=t.updateQueue,a===null?t.updateQueue=new Set([n]):a.add(n),Ir(e,n,i)),!1;case 22:return t.flags|=65536,n===Vl?t.flags|=16384:(a=t.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},t.updateQueue=a):(t=a.retryQueue,t===null?a.retryQueue=new Set([n]):t.add(n)),Ir(e,n,i)),!1}throw Error(u(435,t.tag))}return Ir(e,n,i),bi(),!1}if(Ee)return a=Ra.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=i,n!==Gc&&(e=Error(u(422),{cause:n}),zs(Pa(e,t)))):(n!==Gc&&(a=Error(u(423),{cause:n}),zs(Pa(a,t))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Pa(n,t),i=hr(e.stateNode,n,i),$c(e,i),$e!==4&&($e=2)),!1;var c=Error(u(520),{cause:n});if(c=Pa(c,t),sl===null?sl=[c]:sl.push(c),$e!==4&&($e=2),a===null)return!0;n=Pa(n,t),t=a;do{switch(t.tag){case 3:return t.flags|=65536,e=i&-i,t.lanes|=e,e=hr(t.stateNode,n,e),$c(t,e),!1;case 1:if(a=t.type,c=t.stateNode,(t.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Jt===null||!Jt.has(c))))return t.flags|=65536,i&=-i,t.lanes|=i,i=im(i),cm(i,e,t,n),$c(t,i),!1}t=t.return}while(t!==null);return!1}var vr=Error(u(461)),Fe=!1;function ua(e,a,t,n){a.child=e===null?dd(a,null,t,n):_n(a,e.child,t,n)}function rm(e,a,t,n,i){t=t.render;var c=a.ref;if("ref"in n){var d={};for(var y in n)y!=="ref"&&(d[y]=n[y])}else d=n;return Sn(a),n=Wc(e,a,t,d,c,i),y=er(),e!==null&&!Fe?(ar(e,a,i),St(e,a,i)):(Ee&&y&&qc(a),a.flags|=1,ua(e,a,n,i),a.child)}function um(e,a,t,n,i){if(e===null){var c=t.type;return typeof c=="function"&&!wc(c)&&c.defaultProps===void 0&&t.compare===null?(a.tag=15,a.type=c,om(e,a,c,n,i)):(e=Il(t.type,null,n,a,a.mode,i),e.ref=a.ref,e.return=a,a.child=e)}if(c=e.child,!Er(e,i)){var d=c.memoizedProps;if(t=t.compare,t=t!==null?t:Gs,t(d,n)&&e.ref===a.ref)return St(e,a,i)}return a.flags|=1,e=yt(c,n),e.ref=a.ref,e.return=a,a.child=e}function om(e,a,t,n,i){if(e!==null){var c=e.memoizedProps;if(Gs(c,n)&&e.ref===a.ref)if(Fe=!1,a.pendingProps=n=c,Er(e,i))(e.flags&131072)!==0&&(Fe=!0);else return a.lanes=e.lanes,St(e,a,i)}return br(e,a,t,n,i)}function dm(e,a,t,n){var i=n.children,c=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(c=c!==null?c.baseLanes|t:t,e!==null){for(n=a.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~c}else n=0,a.child=null;return mm(e,a,c,t,n)}if((t&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xl(a,c!==null?c.cachePool:null),c!==null?pd(a,c):Jc(),yd(a);else return n=a.lanes=536870912,mm(e,a,c!==null?c.baseLanes|t:t,t,n)}else c!==null?(Xl(a,c.cachePool),pd(a,c),Qt(),a.memoizedState=null):(e!==null&&Xl(a,null),Jc(),Qt());return ua(e,a,i,t),a.child}function Ks(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function mm(e,a,t,n,i){var c=Yc();return c=c===null?null:{parent:Ze._currentValue,pool:c},a.memoizedState={baseLanes:t,cachePool:c},e!==null&&Xl(a,null),Jc(),yd(a),e!==null&&Fn(e,a,n,!0),a.childLanes=i,null}function ri(e,a){return a=oi({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function fm(e,a,t){return _n(a,e.child,null,t),e=ri(a,a.pendingProps),e.flags|=2,ka(a),a.memoizedState=null,e}function Ag(e,a,t){var n=a.pendingProps,i=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(Ee){if(n.mode==="hidden")return e=ri(a,n),a.lanes=536870912,Ks(null,e);if(Kc(a),(e=He)?(e=Ef(e,$a),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ot!==null?{id:st,overflow:lt}:null,retryLane:536870912,hydrationErrors:null},t=Zo(e),t.return=a,a.child=t,ca=a,He=null)):e=null,e===null)throw zt(a);return a.lanes=536870912,null}return ri(a,n)}var c=e.memoizedState;if(c!==null){var d=c.dehydrated;if(Kc(a),i)if(a.flags&256)a.flags&=-257,a=fm(e,a,t);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(u(558));else if(Fe||Fn(e,a,t,!1),i=(t&e.childLanes)!==0,Fe||i){if(n=Be,n!==null&&(d=qt(n,t),d!==0&&d!==c.retryLane))throw c.retryLane=d,hn(e,d),_a(n,e,d),vr;bi(),a=fm(e,a,t)}else e=c.treeContext,He=Ja(d.nextSibling),ca=a,Ee=!0,Ut=null,$a=!1,e!==null&&Wo(a,e),a=ri(a,n),a.flags|=4096;return a}return e=yt(e.child,{mode:n.mode,children:n.children}),e.ref=a.ref,a.child=e,e.return=a,e}function ui(e,a){var t=a.ref;if(t===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(u(284));(e===null||e.ref!==t)&&(a.flags|=4194816)}}function br(e,a,t,n,i){return Sn(a),t=Wc(e,a,t,n,void 0,i),n=er(),e!==null&&!Fe?(ar(e,a,i),St(e,a,i)):(Ee&&n&&qc(a),a.flags|=1,ua(e,a,t,i),a.child)}function pm(e,a,t,n,i,c){return Sn(a),a.updateQueue=null,t=hd(a,n,t,i),gd(e),n=er(),e!==null&&!Fe?(ar(e,a,c),St(e,a,c)):(Ee&&n&&qc(a),a.flags|=1,ua(e,a,t,c),a.child)}function ym(e,a,t,n,i){if(Sn(a),a.stateNode===null){var c=Vn,d=t.contextType;typeof d=="object"&&d!==null&&(c=ra(d)),c=new t(n,c),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=gr,a.stateNode=c,c._reactInternals=a,c=a.stateNode,c.props=n,c.state=a.memoizedState,c.refs={},Qc(a),d=t.contextType,c.context=typeof d=="object"&&d!==null?ra(d):Vn,c.state=a.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(yr(a,t,d,n),c.state=a.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(d=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),d!==c.state&&gr.enqueueReplaceState(c,c.state,null),Xs(a,n,c,i),Qs(),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){c=a.stateNode;var y=a.memoizedProps,C=Dn(t,y);c.props=C;var L=c.context,P=t.contextType;d=Vn,typeof P=="object"&&P!==null&&(d=ra(P));var $=t.getDerivedStateFromProps;P=typeof $=="function"||typeof c.getSnapshotBeforeUpdate=="function",y=a.pendingProps!==y,P||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y||L!==d)&&am(a,c,n,d),Ht=!1;var U=a.memoizedState;c.state=U,Xs(a,n,c,i),Qs(),L=a.memoizedState,y||U!==L||Ht?(typeof $=="function"&&(yr(a,t,$,n),L=a.memoizedState),(C=Ht||em(a,t,C,n,U,L,d))?(P||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(a.flags|=4194308)):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=L),c.props=n,c.state=L,c.context=d,n=C):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{c=a.stateNode,Xc(e,a),d=a.memoizedProps,P=Dn(t,d),c.props=P,$=a.pendingProps,U=c.context,L=t.contextType,C=Vn,typeof L=="object"&&L!==null&&(C=ra(L)),y=t.getDerivedStateFromProps,(L=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==$||U!==C)&&am(a,c,n,C),Ht=!1,U=a.memoizedState,c.state=U,Xs(a,n,c,i),Qs();var H=a.memoizedState;d!==$||U!==H||Ht||e!==null&&e.dependencies!==null&&Pl(e.dependencies)?(typeof y=="function"&&(yr(a,t,y,n),H=a.memoizedState),(P=Ht||em(a,t,P,n,U,H,C)||e!==null&&e.dependencies!==null&&Pl(e.dependencies))?(L||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,H,C),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,H,C)),typeof c.componentDidUpdate=="function"&&(a.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=H),c.props=n,c.state=H,c.context=C,n=P):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(a.flags|=1024),n=!1)}return c=n,ui(e,a),n=(a.flags&128)!==0,c||n?(c=a.stateNode,t=n&&typeof t.getDerivedStateFromError!="function"?null:c.render(),a.flags|=1,e!==null&&n?(a.child=_n(a,e.child,null,i),a.child=_n(a,null,t,i)):ua(e,a,t,i),a.memoizedState=c.state,e=a.child):e=St(e,a,i),e}function gm(e,a,t,n){return bn(),a.flags|=256,ua(e,a,t,n),a.child}var xr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sr(e){return{baseLanes:e,cachePool:ld()}}function Nr(e,a,t){return e=e!==null?e.childLanes&~t:0,a&&(e|=La),e}function hm(e,a,t){var n=a.pendingProps,i=!1,c=(a.flags&128)!==0,d;if((d=c)||(d=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),d&&(i=!0,a.flags&=-129),d=(a.flags&32)!==0,a.flags&=-33,e===null){if(Ee){if(i?Pt(a):Qt(),(e=He)?(e=Ef(e,$a),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ot!==null?{id:st,overflow:lt}:null,retryLane:536870912,hydrationErrors:null},t=Zo(e),t.return=a,a.child=t,ca=a,He=null)):e=null,e===null)throw zt(a);return su(e)?a.lanes=32:a.lanes=536870912,null}var y=n.children;return n=n.fallback,i?(Qt(),i=a.mode,y=oi({mode:"hidden",children:y},i),n=vn(n,i,t,null),y.return=a,n.return=a,y.sibling=n,a.child=y,n=a.child,n.memoizedState=Sr(t),n.childLanes=Nr(e,d,t),a.memoizedState=xr,Ks(null,n)):(Pt(a),Cr(a,y))}var C=e.memoizedState;if(C!==null&&(y=C.dehydrated,y!==null)){if(c)a.flags&256?(Pt(a),a.flags&=-257,a=jr(e,a,t)):a.memoizedState!==null?(Qt(),a.child=e.child,a.flags|=128,a=null):(Qt(),y=n.fallback,i=a.mode,n=oi({mode:"visible",children:n.children},i),y=vn(y,i,t,null),y.flags|=2,n.return=a,y.return=a,n.sibling=y,a.child=n,_n(a,e.child,null,t),n=a.child,n.memoizedState=Sr(t),n.childLanes=Nr(e,d,t),a.memoizedState=xr,a=Ks(null,n));else if(Pt(a),su(y)){if(d=y.nextSibling&&y.nextSibling.dataset,d)var L=d.dgst;d=L,n=Error(u(419)),n.stack="",n.digest=d,zs({value:n,source:null,stack:null}),a=jr(e,a,t)}else if(Fe||Fn(e,a,t,!1),d=(t&e.childLanes)!==0,Fe||d){if(d=Be,d!==null&&(n=qt(d,t),n!==0&&n!==C.retryLane))throw C.retryLane=n,hn(e,n),_a(d,e,n),vr;nu(y)||bi(),a=jr(e,a,t)}else nu(y)?(a.flags|=192,a.child=e.child,a=null):(e=C.treeContext,He=Ja(y.nextSibling),ca=a,Ee=!0,Ut=null,$a=!1,e!==null&&Wo(a,e),a=Cr(a,n.children),a.flags|=4096);return a}return i?(Qt(),y=n.fallback,i=a.mode,C=e.child,L=C.sibling,n=yt(C,{mode:"hidden",children:n.children}),n.subtreeFlags=C.subtreeFlags&65011712,L!==null?y=yt(L,y):(y=vn(y,i,t,null),y.flags|=2),y.return=a,n.return=a,n.sibling=y,a.child=n,Ks(null,n),n=a.child,y=e.child.memoizedState,y===null?y=Sr(t):(i=y.cachePool,i!==null?(C=Ze._currentValue,i=i.parent!==C?{parent:C,pool:C}:i):i=ld(),y={baseLanes:y.baseLanes|t,cachePool:i}),n.memoizedState=y,n.childLanes=Nr(e,d,t),a.memoizedState=xr,Ks(e.child,n)):(Pt(a),t=e.child,e=t.sibling,t=yt(t,{mode:"visible",children:n.children}),t.return=a,t.sibling=null,e!==null&&(d=a.deletions,d===null?(a.deletions=[e],a.flags|=16):d.push(e)),a.child=t,a.memoizedState=null,t)}function Cr(e,a){return a=oi({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function oi(e,a){return e=wa(22,e,null,a),e.lanes=0,e}function jr(e,a,t){return _n(a,e.child,null,t),e=Cr(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function vm(e,a,t){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),zc(e.return,a,t)}function _r(e,a,t,n,i,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i,treeForkCount:c}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=t,d.tailMode=i,d.treeForkCount=c)}function bm(e,a,t){var n=a.pendingProps,i=n.revealOrder,c=n.tail;n=n.children;var d=Ve.current,y=(d&2)!==0;if(y?(d=d&1|2,a.flags|=128):d&=1,J(Ve,d),ua(e,a,n,t),n=Ee?Us:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vm(e,t,a);else if(e.tag===19)vm(e,t,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(t=a.child,i=null;t!==null;)e=t.alternate,e!==null&&Fl(e)===null&&(i=t),t=t.sibling;t=i,t===null?(i=a.child,a.child=null):(i=t.sibling,t.sibling=null),_r(a,!1,i,t,c,n);break;case"backwards":case"unstable_legacy-backwards":for(t=null,i=a.child,a.child=null;i!==null;){if(e=i.alternate,e!==null&&Fl(e)===null){a.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}_r(a,!0,t,null,c,n);break;case"together":_r(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function St(e,a,t){if(e!==null&&(a.dependencies=e.dependencies),Vt|=a.lanes,(t&a.childLanes)===0)if(e!==null){if(Fn(e,a,t,!1),(t&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(u(153));if(a.child!==null){for(e=a.child,t=yt(e,e.pendingProps),a.child=t,t.return=a;e.sibling!==null;)e=e.sibling,t=t.sibling=yt(e,e.pendingProps),t.return=a;t.sibling=null}return a.child}function Er(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Pl(e)))}function Tg(e,a,t){switch(a.tag){case 3:Me(a,a.stateNode.containerInfo),Bt(a,Ze,e.memoizedState.cache),bn();break;case 27:case 5:Ua(a);break;case 4:Me(a,a.stateNode.containerInfo);break;case 10:Bt(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Kc(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(Pt(a),a.flags|=128,null):(t&a.child.childLanes)!==0?hm(e,a,t):(Pt(a),e=St(e,a,t),e!==null?e.sibling:null);Pt(a);break;case 19:var i=(e.flags&128)!==0;if(n=(t&a.childLanes)!==0,n||(Fn(e,a,t,!1),n=(t&a.childLanes)!==0),i){if(n)return bm(e,a,t);a.flags|=128}if(i=a.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(Ve,Ve.current),n)break;return null;case 22:return a.lanes=0,dm(e,a,t,a.pendingProps);case 24:Bt(a,Ze,e.memoizedState.cache)}return St(e,a,t)}function xm(e,a,t){if(e!==null)if(e.memoizedProps!==a.pendingProps)Fe=!0;else{if(!Er(e,t)&&(a.flags&128)===0)return Fe=!1,Tg(e,a,t);Fe=(e.flags&131072)!==0}else Fe=!1,Ee&&(a.flags&1048576)!==0&&Fo(a,Us,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=Cn(a.elementType),a.type=e,typeof e=="function")wc(e)?(n=Dn(e,n),a.tag=1,a=ym(null,a,e,n,t)):(a.tag=0,a=br(null,a,e,n,t));else{if(e!=null){var i=e.$$typeof;if(i===I){a.tag=11,a=rm(null,a,e,n,t);break e}else if(i===K){a.tag=14,a=um(null,a,e,n,t);break e}}throw a=de(e)||e,Error(u(306,a,""))}}return a;case 0:return br(e,a,a.type,a.pendingProps,t);case 1:return n=a.type,i=Dn(n,a.pendingProps),ym(e,a,n,i,t);case 3:e:{if(Me(a,a.stateNode.containerInfo),e===null)throw Error(u(387));n=a.pendingProps;var c=a.memoizedState;i=c.element,Xc(e,a),Xs(a,n,null,t);var d=a.memoizedState;if(n=d.cache,Bt(a,Ze,n),n!==c.cache&&Bc(a,[Ze],t,!0),Qs(),n=d.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:d.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=gm(e,a,n,t);break e}else if(n!==i){i=Pa(Error(u(424)),a),zs(i),a=gm(e,a,n,t);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(He=Ja(e.firstChild),ca=a,Ee=!0,Ut=null,$a=!0,t=dd(a,null,n,t),a.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(bn(),n===i){a=St(e,a,t);break e}ua(e,a,n,t)}a=a.child}return a;case 26:return ui(e,a),e===null?(t=Rf(a.type,null,a.pendingProps,null))?a.memoizedState=t:Ee||(t=a.type,e=a.pendingProps,n=Ei(me.current).createElement(t),n[ia]=a,n[ba]=e,oa(n,t,e),ta(n),a.stateNode=n):a.memoizedState=Rf(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Ua(a),e===null&&Ee&&(n=a.stateNode=Tf(a.type,a.pendingProps,me.current),ca=a,$a=!0,i=He,Wt(a.type)?(lu=i,He=Ja(n.firstChild)):He=i),ua(e,a,a.pendingProps.children,t),ui(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Ee&&((i=n=He)&&(n=lh(n,a.type,a.pendingProps,$a),n!==null?(a.stateNode=n,ca=a,He=Ja(n.firstChild),$a=!1,i=!0):i=!1),i||zt(a)),Ua(a),i=a.type,c=a.pendingProps,d=e!==null?e.memoizedProps:null,n=c.children,eu(i,c)?n=null:d!==null&&eu(i,d)&&(a.flags|=32),a.memoizedState!==null&&(i=Wc(e,a,xg,null,null,t),ml._currentValue=i),ui(e,a),ua(e,a,n,t),a.child;case 6:return e===null&&Ee&&((e=t=He)&&(t=ih(t,a.pendingProps,$a),t!==null?(a.stateNode=t,ca=a,He=null,e=!0):e=!1),e||zt(a)),null;case 13:return hm(e,a,t);case 4:return Me(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=_n(a,null,n,t):ua(e,a,n,t),a.child;case 11:return rm(e,a,a.type,a.pendingProps,t);case 7:return ua(e,a,a.pendingProps,t),a.child;case 8:return ua(e,a,a.pendingProps.children,t),a.child;case 12:return ua(e,a,a.pendingProps.children,t),a.child;case 10:return n=a.pendingProps,Bt(a,a.type,n.value),ua(e,a,n.children,t),a.child;case 9:return i=a.type._context,n=a.pendingProps.children,Sn(a),i=ra(i),n=n(i),a.flags|=1,ua(e,a,n,t),a.child;case 14:return um(e,a,a.type,a.pendingProps,t);case 15:return om(e,a,a.type,a.pendingProps,t);case 19:return bm(e,a,t);case 31:return Ag(e,a,t);case 22:return dm(e,a,t,a.pendingProps);case 24:return Sn(a),n=ra(Ze),e===null?(i=Yc(),i===null&&(i=Be,c=Hc(),i.pooledCache=c,c.refCount++,c!==null&&(i.pooledCacheLanes|=t),i=c),a.memoizedState={parent:n,cache:i},Qc(a),Bt(a,Ze,i)):((e.lanes&t)!==0&&(Xc(e,a),Xs(a,null,null,t),Qs()),i=e.memoizedState,c=a.memoizedState,i.parent!==n?(i={parent:n,cache:n},a.memoizedState=i,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=i),Bt(a,Ze,n)):(n=c.cache,Bt(a,Ze,n),n!==i.cache&&Bc(a,[Ze],t,!0))),ua(e,a,a.pendingProps.children,t),a.child;case 29:throw a.pendingProps}throw Error(u(156,a.tag))}function Nt(e){e.flags|=4}function Dr(e,a,t,n,i){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if($m())e.flags|=8192;else throw jn=Vl,Pc}else e.flags&=-16777217}function Sm(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Of(a))if($m())e.flags|=8192;else throw jn=Vl,Pc}function di(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Dl():536870912,e.lanes|=a,os|=a)}function Fs(e,a){if(!Ee)switch(e.tailMode){case"hidden":a=e.tail;for(var t=null;a!==null;)a.alternate!==null&&(t=a),a=a.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ie(e){var a=e.alternate!==null&&e.alternate.child===e.child,t=0,n=0;if(a)for(var i=e.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=t,a}function Mg(e,a,t){var n=a.pendingProps;switch(Lc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(a),null;case 1:return Ie(a),null;case 3:return t=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),vt(Ze),Se(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(e===null||e.child===null)&&(Kn(a)?Nt(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Oc())),Ie(a),null;case 26:var i=a.type,c=a.memoizedState;return e===null?(Nt(a),c!==null?(Ie(a),Sm(a,c)):(Ie(a),Dr(a,i,null,n,t))):c?c!==e.memoizedState?(Nt(a),Ie(a),Sm(a,c)):(Ie(a),a.flags&=-16777217):(e=e.memoizedProps,e!==n&&Nt(a),Ie(a),Dr(a,i,e,n,t)),null;case 27:if(za(a),t=me.current,i=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Nt(a);else{if(!n){if(a.stateNode===null)throw Error(u(166));return Ie(a),null}e=ee.current,Kn(a)?ed(a):(e=Tf(i,n,t),a.stateNode=e,Nt(a))}return Ie(a),null;case 5:if(za(a),i=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Nt(a);else{if(!n){if(a.stateNode===null)throw Error(u(166));return Ie(a),null}if(c=ee.current,Kn(a))ed(a);else{var d=Ei(me.current);switch(c){case 1:c=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:c=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":c=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":c=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":c=d.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?d.createElement("select",{is:n.is}):d.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?d.createElement(i,{is:n.is}):d.createElement(i)}}c[ia]=a,c[ba]=n;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)c.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=c;e:switch(oa(c,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Nt(a)}}return Ie(a),Dr(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,t),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&Nt(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(u(166));if(e=me.current,Kn(a)){if(e=a.stateNode,t=a.memoizedProps,n=null,i=ca,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[ia]=a,e=!!(e.nodeValue===t||n!==null&&n.suppressHydrationWarning===!0||vf(e.nodeValue,t)),e||zt(a,!0)}else e=Ei(e).createTextNode(n),e[ia]=a,a.stateNode=e}return Ie(a),null;case 31:if(t=a.memoizedState,e===null||e.memoizedState!==null){if(n=Kn(a),t!==null){if(e===null){if(!n)throw Error(u(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[ia]=a}else bn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ie(a),e=!1}else t=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=t),e=!0;if(!e)return a.flags&256?(ka(a),a):(ka(a),null);if((a.flags&128)!==0)throw Error(u(558))}return Ie(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Kn(a),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[ia]=a}else bn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ie(a),i=!1}else i=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return a.flags&256?(ka(a),a):(ka(a),null)}return ka(a),(a.flags&128)!==0?(a.lanes=t,a):(t=n!==null,e=e!==null&&e.memoizedState!==null,t&&(n=a.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048)),t!==e&&t&&(a.child.flags|=8192),di(a,a.updateQueue),Ie(a),null);case 4:return Se(),e===null&&Jr(a.stateNode.containerInfo),Ie(a),null;case 10:return vt(a.type),Ie(a),null;case 19:if(Y(Ve),n=a.memoizedState,n===null)return Ie(a),null;if(i=(a.flags&128)!==0,c=n.rendering,c===null)if(i)Fs(n,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(c=Fl(e),c!==null){for(a.flags|=128,Fs(n,!1),e=c.updateQueue,a.updateQueue=e,di(a,e),a.subtreeFlags=0,e=t,t=a.child;t!==null;)Jo(t,e),t=t.sibling;return J(Ve,Ve.current&1|2),Ee&&gt(a,n.treeForkCount),a.child}e=e.sibling}n.tail!==null&&sa()>gi&&(a.flags|=128,i=!0,Fs(n,!1),a.lanes=4194304)}else{if(!i)if(e=Fl(c),e!==null){if(a.flags|=128,i=!0,e=e.updateQueue,a.updateQueue=e,di(a,e),Fs(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Ee)return Ie(a),null}else 2*sa()-n.renderingStartTime>gi&&t!==536870912&&(a.flags|=128,i=!0,Fs(n,!1),a.lanes=4194304);n.isBackwards?(c.sibling=a.child,a.child=c):(e=n.last,e!==null?e.sibling=c:a.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=sa(),e.sibling=null,t=Ve.current,J(Ve,i?t&1|2:t&1),Ee&&gt(a,n.treeForkCount),e):(Ie(a),null);case 22:case 23:return ka(a),Zc(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(t&536870912)!==0&&(a.flags&128)===0&&(Ie(a),a.subtreeFlags&6&&(a.flags|=8192)):Ie(a),t=a.updateQueue,t!==null&&di(a,t.retryQueue),t=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==t&&(a.flags|=2048),e!==null&&Y(Nn),null;case 24:return t=null,e!==null&&(t=e.memoizedState.cache),a.memoizedState.cache!==t&&(a.flags|=2048),vt(Ze),Ie(a),null;case 25:return null;case 30:return null}throw Error(u(156,a.tag))}function wg(e,a){switch(Lc(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return vt(Ze),Se(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return za(a),null;case 31:if(a.memoizedState!==null){if(ka(a),a.alternate===null)throw Error(u(340));bn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(ka(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(u(340));bn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Y(Ve),null;case 4:return Se(),null;case 10:return vt(a.type),null;case 22:case 23:return ka(a),Zc(),e!==null&&Y(Nn),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return vt(Ze),null;case 25:return null;default:return null}}function Nm(e,a){switch(Lc(a),a.tag){case 3:vt(Ze),Se();break;case 26:case 27:case 5:za(a);break;case 4:Se();break;case 31:a.memoizedState!==null&&ka(a);break;case 13:ka(a);break;case 19:Y(Ve);break;case 10:vt(a.type);break;case 22:case 23:ka(a),Zc(),e!==null&&Y(Nn);break;case 24:vt(Ze)}}function Ws(e,a){try{var t=a.updateQueue,n=t!==null?t.lastEffect:null;if(n!==null){var i=n.next;t=i;do{if((t.tag&e)===e){n=void 0;var c=t.create,d=t.inst;n=c(),d.destroy=n}t=t.next}while(t!==i)}}catch(y){qe(a,a.return,y)}}function Xt(e,a,t){try{var n=a.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var c=i.next;n=c;do{if((n.tag&e)===e){var d=n.inst,y=d.destroy;if(y!==void 0){d.destroy=void 0,i=a;var C=t,L=y;try{L()}catch(P){qe(i,C,P)}}}n=n.next}while(n!==c)}}catch(P){qe(a,a.return,P)}}function Cm(e){var a=e.updateQueue;if(a!==null){var t=e.stateNode;try{fd(a,t)}catch(n){qe(e,e.return,n)}}}function jm(e,a,t){t.props=Dn(e.type,e.memoizedProps),t.state=e.memoizedState;try{t.componentWillUnmount()}catch(n){qe(e,a,n)}}function el(e,a){try{var t=e.ref;if(t!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof t=="function"?e.refCleanup=t(n):t.current=n}}catch(i){qe(e,a,i)}}function it(e,a){var t=e.ref,n=e.refCleanup;if(t!==null)if(typeof n=="function")try{n()}catch(i){qe(e,a,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(i){qe(e,a,i)}else t.current=null}function _m(e){var a=e.type,t=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":t.autoFocus&&n.focus();break e;case"img":t.src?n.src=t.src:t.srcSet&&(n.srcset=t.srcSet)}}catch(i){qe(e,e.return,i)}}function Ar(e,a,t){try{var n=e.stateNode;Wg(n,e.type,t,a),n[ba]=a}catch(i){qe(e,e.return,i)}}function Em(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wt(e.type)||e.tag===4}function Tr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wt(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mr(e,a,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(e,a):(a=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.appendChild(e),t=t._reactRootContainer,t!=null||a.onclick!==null||(a.onclick=ft));else if(n!==4&&(n===27&&Wt(e.type)&&(t=e.stateNode,a=null),e=e.child,e!==null))for(Mr(e,a,t),e=e.sibling;e!==null;)Mr(e,a,t),e=e.sibling}function mi(e,a,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?t.insertBefore(e,a):t.appendChild(e);else if(n!==4&&(n===27&&Wt(e.type)&&(t=e.stateNode),e=e.child,e!==null))for(mi(e,a,t),e=e.sibling;e!==null;)mi(e,a,t),e=e.sibling}function Dm(e){var a=e.stateNode,t=e.memoizedProps;try{for(var n=e.type,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);oa(a,n,t),a[ia]=e,a[ba]=t}catch(c){qe(e,e.return,c)}}var Ct=!1,We=!1,wr=!1,Am=typeof WeakSet=="function"?WeakSet:Set,na=null;function Rg(e,a){if(e=e.containerInfo,Fr=ki,e=Bo(e),jc(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{t.nodeType,c.nodeType}catch{t=null;break e}var d=0,y=-1,C=-1,L=0,P=0,$=e,U=null;a:for(;;){for(var H;$!==t||i!==0&&$.nodeType!==3||(y=d+i),$!==c||n!==0&&$.nodeType!==3||(C=d+n),$.nodeType===3&&(d+=$.nodeValue.length),(H=$.firstChild)!==null;)U=$,$=H;for(;;){if($===e)break a;if(U===t&&++L===i&&(y=d),U===c&&++P===n&&(C=d),(H=$.nextSibling)!==null)break;$=U,U=$.parentNode}$=H}t=y===-1||C===-1?null:{start:y,end:C}}else t=null}t=t||{start:0,end:0}}else t=null;for(Wr={focusedElem:e,selectionRange:t},ki=!1,na=a;na!==null;)if(a=na,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,na=e;else for(;na!==null;){switch(a=na,c=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(t=0;t<e.length;t++)i=e[t],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,t=a,i=c.memoizedProps,c=c.memoizedState,n=t.stateNode;try{var ne=Dn(t.type,i);e=n.getSnapshotBeforeUpdate(ne,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(ue){qe(t,t.return,ue)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,t=e.nodeType,t===9)tu(e);else if(t===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=a.sibling,e!==null){e.return=a.return,na=e;break}na=a.return}}function Tm(e,a,t){var n=t.flags;switch(t.tag){case 0:case 11:case 15:_t(e,t),n&4&&Ws(5,t);break;case 1:if(_t(e,t),n&4)if(e=t.stateNode,a===null)try{e.componentDidMount()}catch(d){qe(t,t.return,d)}else{var i=Dn(t.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(i,a,e.__reactInternalSnapshotBeforeUpdate)}catch(d){qe(t,t.return,d)}}n&64&&Cm(t),n&512&&el(t,t.return);break;case 3:if(_t(e,t),n&64&&(e=t.updateQueue,e!==null)){if(a=null,t.child!==null)switch(t.child.tag){case 27:case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}try{fd(e,a)}catch(d){qe(t,t.return,d)}}break;case 27:a===null&&n&4&&Dm(t);case 26:case 5:_t(e,t),a===null&&n&4&&_m(t),n&512&&el(t,t.return);break;case 12:_t(e,t);break;case 31:_t(e,t),n&4&&Rm(e,t);break;case 13:_t(e,t),n&4&&km(e,t),n&64&&(e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(t=Hg.bind(null,t),ch(e,t))));break;case 22:if(n=t.memoizedState!==null||Ct,!n){a=a!==null&&a.memoizedState!==null||We,i=Ct;var c=We;Ct=n,(We=a)&&!c?Et(e,t,(t.subtreeFlags&8772)!==0):_t(e,t),Ct=i,We=c}break;case 30:break;default:_t(e,t)}}function Mm(e){var a=e.alternate;a!==null&&(e.alternate=null,Mm(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&cc(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,Sa=!1;function jt(e,a,t){for(t=t.child;t!==null;)wm(e,a,t),t=t.sibling}function wm(e,a,t){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(ut,t)}catch{}switch(t.tag){case 26:We||it(t,a),jt(e,a,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:We||it(t,a);var n=Ye,i=Sa;Wt(t.type)&&(Ye=t.stateNode,Sa=!1),jt(e,a,t),ul(t.stateNode),Ye=n,Sa=i;break;case 5:We||it(t,a);case 6:if(n=Ye,i=Sa,Ye=null,jt(e,a,t),Ye=n,Sa=i,Ye!==null)if(Sa)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(t.stateNode)}catch(c){qe(t,a,c)}else try{Ye.removeChild(t.stateNode)}catch(c){qe(t,a,c)}break;case 18:Ye!==null&&(Sa?(e=Ye,jf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.stateNode),vs(e)):jf(Ye,t.stateNode));break;case 4:n=Ye,i=Sa,Ye=t.stateNode.containerInfo,Sa=!0,jt(e,a,t),Ye=n,Sa=i;break;case 0:case 11:case 14:case 15:Xt(2,t,a),We||Xt(4,t,a),jt(e,a,t);break;case 1:We||(it(t,a),n=t.stateNode,typeof n.componentWillUnmount=="function"&&jm(t,a,n)),jt(e,a,t);break;case 21:jt(e,a,t);break;case 22:We=(n=We)||t.memoizedState!==null,jt(e,a,t),We=n;break;default:jt(e,a,t)}}function Rm(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vs(e)}catch(t){qe(a,a.return,t)}}}function km(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vs(e)}catch(t){qe(a,a.return,t)}}function kg(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Am),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Am),a;default:throw Error(u(435,e.tag))}}function fi(e,a){var t=kg(e);a.forEach(function(n){if(!t.has(n)){t.add(n);var i=Ig.bind(null,e,n);n.then(i,i)}})}function Na(e,a){var t=a.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n],c=e,d=a,y=d;e:for(;y!==null;){switch(y.tag){case 27:if(Wt(y.type)){Ye=y.stateNode,Sa=!1;break e}break;case 5:Ye=y.stateNode,Sa=!1;break e;case 3:case 4:Ye=y.stateNode.containerInfo,Sa=!0;break e}y=y.return}if(Ye===null)throw Error(u(160));wm(c,d,i),Ye=null,Sa=!1,c=i.alternate,c!==null&&(c.return=null),i.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)qm(a,e),a=a.sibling}var tt=null;function qm(e,a){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Na(a,e),Ca(e),n&4&&(Xt(3,e,e.return),Ws(3,e),Xt(5,e,e.return));break;case 1:Na(a,e),Ca(e),n&512&&(We||t===null||it(t,t.return)),n&64&&Ct&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(t=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=t===null?n:t.concat(n))));break;case 26:var i=tt;if(Na(a,e),Ca(e),n&512&&(We||t===null||it(t,t.return)),n&4){var c=t!==null?t.memoizedState:null;if(n=e.memoizedState,t===null)if(n===null)if(e.stateNode===null){e:{n=e.type,t=e.memoizedProps,i=i.ownerDocument||i;a:switch(n){case"title":c=i.getElementsByTagName("title")[0],(!c||c[Ds]||c[ia]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=i.createElement(n),i.head.insertBefore(c,i.querySelector("head > title"))),oa(c,n,t),c[ia]=e,ta(c),n=c;break e;case"link":var d=Lf("link","href",i).get(n+(t.href||""));if(d){for(var y=0;y<d.length;y++)if(c=d[y],c.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&c.getAttribute("rel")===(t.rel==null?null:t.rel)&&c.getAttribute("title")===(t.title==null?null:t.title)&&c.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){d.splice(y,1);break a}}c=i.createElement(n),oa(c,n,t),i.head.appendChild(c);break;case"meta":if(d=Lf("meta","content",i).get(n+(t.content||""))){for(y=0;y<d.length;y++)if(c=d[y],c.getAttribute("content")===(t.content==null?null:""+t.content)&&c.getAttribute("name")===(t.name==null?null:t.name)&&c.getAttribute("property")===(t.property==null?null:t.property)&&c.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&c.getAttribute("charset")===(t.charSet==null?null:t.charSet)){d.splice(y,1);break a}}c=i.createElement(n),oa(c,n,t),i.head.appendChild(c);break;default:throw Error(u(468,n))}c[ia]=e,ta(c),n=c}e.stateNode=n}else Gf(i,e.type,e.stateNode);else e.stateNode=qf(i,n,e.memoizedProps);else c!==n?(c===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):c.count--,n===null?Gf(i,e.type,e.stateNode):qf(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Ar(e,e.memoizedProps,t.memoizedProps)}break;case 27:Na(a,e),Ca(e),n&512&&(We||t===null||it(t,t.return)),t!==null&&n&4&&Ar(e,e.memoizedProps,t.memoizedProps);break;case 5:if(Na(a,e),Ca(e),n&512&&(We||t===null||it(t,t.return)),e.flags&32){i=e.stateNode;try{Hn(i,"")}catch(ne){qe(e,e.return,ne)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,Ar(e,i,t!==null?t.memoizedProps:i)),n&1024&&(wr=!0);break;case 6:if(Na(a,e),Ca(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,t=e.stateNode;try{t.nodeValue=n}catch(ne){qe(e,e.return,ne)}}break;case 3:if(Ti=null,i=tt,tt=Di(a.containerInfo),Na(a,e),tt=i,Ca(e),n&4&&t!==null&&t.memoizedState.isDehydrated)try{vs(a.containerInfo)}catch(ne){qe(e,e.return,ne)}wr&&(wr=!1,Lm(e));break;case 4:n=tt,tt=Di(e.stateNode.containerInfo),Na(a,e),Ca(e),tt=n;break;case 12:Na(a,e),Ca(e);break;case 31:Na(a,e),Ca(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,fi(e,n)));break;case 13:Na(a,e),Ca(e),e.child.flags&8192&&e.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(yi=sa()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,fi(e,n)));break;case 22:i=e.memoizedState!==null;var C=t!==null&&t.memoizedState!==null,L=Ct,P=We;if(Ct=L||i,We=P||C,Na(a,e),We=P,Ct=L,Ca(e),n&8192)e:for(a=e.stateNode,a._visibility=i?a._visibility&-2:a._visibility|1,i&&(t===null||C||Ct||We||An(e)),t=null,a=e;;){if(a.tag===5||a.tag===26){if(t===null){C=t=a;try{if(c=C.stateNode,i)d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{y=C.stateNode;var $=C.memoizedProps.style,U=$!=null&&$.hasOwnProperty("display")?$.display:null;y.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(ne){qe(C,C.return,ne)}}}else if(a.tag===6){if(t===null){C=a;try{C.stateNode.nodeValue=i?"":C.memoizedProps}catch(ne){qe(C,C.return,ne)}}}else if(a.tag===18){if(t===null){C=a;try{var H=C.stateNode;i?_f(H,!0):_f(C.stateNode,!1)}catch(ne){qe(C,C.return,ne)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;t===a&&(t=null),a=a.return}t===a&&(t=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(t=n.retryQueue,t!==null&&(n.retryQueue=null,fi(e,t))));break;case 19:Na(a,e),Ca(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,fi(e,n)));break;case 30:break;case 21:break;default:Na(a,e),Ca(e)}}function Ca(e){var a=e.flags;if(a&2){try{for(var t,n=e.return;n!==null;){if(Em(n)){t=n;break}n=n.return}if(t==null)throw Error(u(160));switch(t.tag){case 27:var i=t.stateNode,c=Tr(e);mi(e,c,i);break;case 5:var d=t.stateNode;t.flags&32&&(Hn(d,""),t.flags&=-33);var y=Tr(e);mi(e,y,d);break;case 3:case 4:var C=t.stateNode.containerInfo,L=Tr(e);Mr(e,L,C);break;default:throw Error(u(161))}}catch(P){qe(e,e.return,P)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Lm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Lm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function _t(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Tm(e,a.alternate,a),a=a.sibling}function An(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Xt(4,a,a.return),An(a);break;case 1:it(a,a.return);var t=a.stateNode;typeof t.componentWillUnmount=="function"&&jm(a,a.return,t),An(a);break;case 27:ul(a.stateNode);case 26:case 5:it(a,a.return),An(a);break;case 22:a.memoizedState===null&&An(a);break;case 30:An(a);break;default:An(a)}e=e.sibling}}function Et(e,a,t){for(t=t&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,i=e,c=a,d=c.flags;switch(c.tag){case 0:case 11:case 15:Et(i,c,t),Ws(4,c);break;case 1:if(Et(i,c,t),n=c,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(L){qe(n,n.return,L)}if(n=c,i=n.updateQueue,i!==null){var y=n.stateNode;try{var C=i.shared.hiddenCallbacks;if(C!==null)for(i.shared.hiddenCallbacks=null,i=0;i<C.length;i++)md(C[i],y)}catch(L){qe(n,n.return,L)}}t&&d&64&&Cm(c),el(c,c.return);break;case 27:Dm(c);case 26:case 5:Et(i,c,t),t&&n===null&&d&4&&_m(c),el(c,c.return);break;case 12:Et(i,c,t);break;case 31:Et(i,c,t),t&&d&4&&Rm(i,c);break;case 13:Et(i,c,t),t&&d&4&&km(i,c);break;case 22:c.memoizedState===null&&Et(i,c,t),el(c,c.return);break;case 30:break;default:Et(i,c,t)}a=a.sibling}}function Rr(e,a){var t=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==t&&(e!=null&&e.refCount++,t!=null&&Bs(t))}function kr(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Bs(e))}function nt(e,a,t,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Gm(e,a,t,n),a=a.sibling}function Gm(e,a,t,n){var i=a.flags;switch(a.tag){case 0:case 11:case 15:nt(e,a,t,n),i&2048&&Ws(9,a);break;case 1:nt(e,a,t,n);break;case 3:nt(e,a,t,n),i&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Bs(e)));break;case 12:if(i&2048){nt(e,a,t,n),e=a.stateNode;try{var c=a.memoizedProps,d=c.id,y=c.onPostCommit;typeof y=="function"&&y(d,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){qe(a,a.return,C)}}else nt(e,a,t,n);break;case 31:nt(e,a,t,n);break;case 13:nt(e,a,t,n);break;case 23:break;case 22:c=a.stateNode,d=a.alternate,a.memoizedState!==null?c._visibility&2?nt(e,a,t,n):al(e,a):c._visibility&2?nt(e,a,t,n):(c._visibility|=2,cs(e,a,t,n,(a.subtreeFlags&10256)!==0||!1)),i&2048&&Rr(d,a);break;case 24:nt(e,a,t,n),i&2048&&kr(a.alternate,a);break;default:nt(e,a,t,n)}}function cs(e,a,t,n,i){for(i=i&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var c=e,d=a,y=t,C=n,L=d.flags;switch(d.tag){case 0:case 11:case 15:cs(c,d,y,C,i),Ws(8,d);break;case 23:break;case 22:var P=d.stateNode;d.memoizedState!==null?P._visibility&2?cs(c,d,y,C,i):al(c,d):(P._visibility|=2,cs(c,d,y,C,i)),i&&L&2048&&Rr(d.alternate,d);break;case 24:cs(c,d,y,C,i),i&&L&2048&&kr(d.alternate,d);break;default:cs(c,d,y,C,i)}a=a.sibling}}function al(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var t=e,n=a,i=n.flags;switch(n.tag){case 22:al(t,n),i&2048&&Rr(n.alternate,n);break;case 24:al(t,n),i&2048&&kr(n.alternate,n);break;default:al(t,n)}a=a.sibling}}var tl=8192;function rs(e,a,t){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)Om(e,a,t),e=e.sibling}function Om(e,a,t){switch(e.tag){case 26:rs(e,a,t),e.flags&tl&&e.memoizedState!==null&&bh(t,tt,e.memoizedState,e.memoizedProps);break;case 5:rs(e,a,t);break;case 3:case 4:var n=tt;tt=Di(e.stateNode.containerInfo),rs(e,a,t),tt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=tl,tl=16777216,rs(e,a,t),tl=n):rs(e,a,t));break;default:rs(e,a,t)}}function Um(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function nl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];na=n,Bm(n,e)}Um(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zm(e),e=e.sibling}function zm(e){switch(e.tag){case 0:case 11:case 15:nl(e),e.flags&2048&&Xt(9,e,e.return);break;case 3:nl(e);break;case 12:nl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,pi(e)):nl(e);break;default:nl(e)}}function pi(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];na=n,Bm(n,e)}Um(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Xt(8,a,a.return),pi(a);break;case 22:t=a.stateNode,t._visibility&2&&(t._visibility&=-3,pi(a));break;default:pi(a)}e=e.sibling}}function Bm(e,a){for(;na!==null;){var t=na;switch(t.tag){case 0:case 11:case 15:Xt(8,t,a);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var n=t.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Bs(t.memoizedState.cache)}if(n=t.child,n!==null)n.return=t,na=n;else e:for(t=e;na!==null;){n=na;var i=n.sibling,c=n.return;if(Mm(n),n===t){na=null;break e}if(i!==null){i.return=c,na=i;break e}na=c}}}var qg={getCacheForType:function(e){var a=ra(Ze),t=a.data.get(e);return t===void 0&&(t=e(),a.data.set(e,t)),t},cacheSignal:function(){return ra(Ze).controller.signal}},Lg=typeof WeakMap=="function"?WeakMap:Map,Te=0,Be=null,Ne=null,je=0,ke=0,qa=null,$t=!1,us=!1,qr=!1,Dt=0,$e=0,Vt=0,Tn=0,Lr=0,La=0,os=0,sl=null,ja=null,Gr=!1,yi=0,Hm=0,gi=1/0,hi=null,Jt=null,ea=0,Zt=null,ds=null,At=0,Or=0,Ur=null,Im=null,ll=0,zr=null;function Ga(){return(Te&2)!==0&&je!==0?je&-je:B.T!==null?Qr():no()}function Ym(){if(La===0)if((je&536870912)===0||Ee){var e=dt;dt<<=1,(dt&3932160)===0&&(dt=262144),La=e}else La=536870912;return e=Ra.current,e!==null&&(e.flags|=32),La}function _a(e,a,t){(e===Be&&(ke===2||ke===9)||e.cancelPendingCommit!==null)&&(ms(e,0),Kt(e,je,La,!1)),mn(e,t),((Te&2)===0||e!==Be)&&(e===Be&&((Te&2)===0&&(Tn|=t),$e===4&&Kt(e,je,La,!1)),ct(e))}function Pm(e,a,t){if((Te&6)!==0)throw Error(u(327));var n=!t&&(a&127)===0&&(a&e.expiredLanes)===0||dn(e,a),i=n?Ug(e,a):Hr(e,a,!0),c=n;do{if(i===0){us&&!n&&Kt(e,a,0,!1);break}else{if(t=e.current.alternate,c&&!Gg(t)){i=Hr(e,a,!1),c=!1;continue}if(i===2){if(c=a,e.errorRecoveryDisabledLanes&c)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){a=d;e:{var y=e;i=sl;var C=y.current.memoizedState.isDehydrated;if(C&&(ms(y,d).flags|=256),d=Hr(y,d,!1),d!==2){if(qr&&!C){y.errorRecoveryDisabledLanes|=c,Tn|=c,i=4;break e}c=ja,ja=i,c!==null&&(ja===null?ja=c:ja.push.apply(ja,c))}i=d}if(c=!1,i!==2)continue}}if(i===1){ms(e,0),Kt(e,a,0,!0);break}e:{switch(n=e,c=i,c){case 0:case 1:throw Error(u(345));case 4:if((a&4194048)!==a)break;case 6:Kt(n,a,La,!$t);break e;case 2:ja=null;break;case 3:case 5:break;default:throw Error(u(329))}if((a&62914560)===a&&(i=yi+300-sa(),10<i)){if(Kt(n,a,La,!$t),qn(n,0,!0)!==0)break e;At=a,n.timeoutHandle=Nf(Qm.bind(null,n,t,ja,hi,Gr,a,La,Tn,os,$t,c,"Throttled",-0,0),i);break e}Qm(n,t,ja,hi,Gr,a,La,Tn,os,$t,c,null,-0,0)}}break}while(!0);ct(e)}function Qm(e,a,t,n,i,c,d,y,C,L,P,$,U,H){if(e.timeoutHandle=-1,$=a.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ft},Om(a,c,$);var ne=(c&62914560)===c?yi-sa():(c&4194048)===c?Hm-sa():0;if(ne=xh($,ne),ne!==null){At=c,e.cancelPendingCommit=ne(Wm.bind(null,e,a,c,t,n,i,d,y,C,P,$,null,U,H)),Kt(e,c,d,!L);return}}Wm(e,a,c,t,n,i,d,y,C)}function Gg(e){for(var a=e;;){var t=a.tag;if((t===0||t===11||t===15)&&a.flags&16384&&(t=a.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var n=0;n<t.length;n++){var i=t[n],c=i.getSnapshot;i=i.value;try{if(!Ma(c(),i))return!1}catch{return!1}}if(t=a.child,a.subtreeFlags&16384&&t!==null)t.return=a,a=t;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Kt(e,a,t,n){a&=~Lr,a&=~Tn,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var i=a;0<i;){var c=31-ma(i),d=1<<c;n[c]=-1,i&=~d}t!==0&&Qe(e,t,a)}function vi(){return(Te&6)===0?(il(0),!1):!0}function Br(){if(Ne!==null){if(ke===0)var e=Ne.return;else e=Ne,ht=xn=null,tr(e),ts=null,Is=0,e=Ne;for(;e!==null;)Nm(e.alternate,e),e=e.return;Ne=null}}function ms(e,a){var t=e.timeoutHandle;t!==-1&&(e.timeoutHandle=-1,th(t)),t=e.cancelPendingCommit,t!==null&&(e.cancelPendingCommit=null,t()),At=0,Br(),Be=e,Ne=t=yt(e.current,null),je=a,ke=0,qa=null,$t=!1,us=dn(e,a),qr=!1,os=La=Lr=Tn=Vt=$e=0,ja=sl=null,Gr=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var i=31-ma(n),c=1<<i;a|=e[i],n&=~c}return Dt=a,zl(),t}function Xm(e,a){he=null,B.H=Zs,a===as||a===$l?(a=rd(),ke=3):a===Pc?(a=rd(),ke=4):ke=a===vr?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,qa=a,Ne===null&&($e=1,ci(e,Pa(a,e.current)))}function $m(){var e=Ra.current;return e===null?!0:(je&4194048)===je?Va===null:(je&62914560)===je||(je&536870912)!==0?e===Va:!1}function Vm(){var e=B.H;return B.H=Zs,e===null?Zs:e}function Jm(){var e=B.A;return B.A=qg,e}function bi(){$e=4,$t||(je&4194048)!==je&&Ra.current!==null||(us=!0),(Vt&134217727)===0&&(Tn&134217727)===0||Be===null||Kt(Be,je,La,!1)}function Hr(e,a,t){var n=Te;Te|=2;var i=Vm(),c=Jm();(Be!==e||je!==a)&&(hi=null,ms(e,a)),a=!1;var d=$e;e:do try{if(ke!==0&&Ne!==null){var y=Ne,C=qa;switch(ke){case 8:Br(),d=6;break e;case 3:case 2:case 9:case 6:Ra.current===null&&(a=!0);var L=ke;if(ke=0,qa=null,fs(e,y,C,L),t&&us){d=0;break e}break;default:L=ke,ke=0,qa=null,fs(e,y,C,L)}}Og(),d=$e;break}catch(P){Xm(e,P)}while(!0);return a&&e.shellSuspendCounter++,ht=xn=null,Te=n,B.H=i,B.A=c,Ne===null&&(Be=null,je=0,zl()),d}function Og(){for(;Ne!==null;)Zm(Ne)}function Ug(e,a){var t=Te;Te|=2;var n=Vm(),i=Jm();Be!==e||je!==a?(hi=null,gi=sa()+500,ms(e,a)):us=dn(e,a);e:do try{if(ke!==0&&Ne!==null){a=Ne;var c=qa;a:switch(ke){case 1:ke=0,qa=null,fs(e,a,c,1);break;case 2:case 9:if(id(c)){ke=0,qa=null,Km(a);break}a=function(){ke!==2&&ke!==9||Be!==e||(ke=7),ct(e)},c.then(a,a);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:id(c)?(ke=0,qa=null,Km(a)):(ke=0,qa=null,fs(e,a,c,7));break;case 5:var d=null;switch(Ne.tag){case 26:d=Ne.memoizedState;case 5:case 27:var y=Ne;if(d?Of(d):y.stateNode.complete){ke=0,qa=null;var C=y.sibling;if(C!==null)Ne=C;else{var L=y.return;L!==null?(Ne=L,xi(L)):Ne=null}break a}}ke=0,qa=null,fs(e,a,c,5);break;case 6:ke=0,qa=null,fs(e,a,c,6);break;case 8:Br(),$e=6;break e;default:throw Error(u(462))}}zg();break}catch(P){Xm(e,P)}while(!0);return ht=xn=null,B.H=n,B.A=i,Te=t,Ne!==null?0:(Be=null,je=0,zl(),$e)}function zg(){for(;Ne!==null&&!ya();)Zm(Ne)}function Zm(e){var a=xm(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,a===null?xi(e):Ne=a}function Km(e){var a=e,t=a.alternate;switch(a.tag){case 15:case 0:a=pm(t,a,a.pendingProps,a.type,void 0,je);break;case 11:a=pm(t,a,a.pendingProps,a.type.render,a.ref,je);break;case 5:tr(a);default:Nm(t,a),a=Ne=Jo(a,Dt),a=xm(t,a,Dt)}e.memoizedProps=e.pendingProps,a===null?xi(e):Ne=a}function fs(e,a,t,n){ht=xn=null,tr(a),ts=null,Is=0;var i=a.return;try{if(Dg(e,i,a,t,je)){$e=1,ci(e,Pa(t,e.current)),Ne=null;return}}catch(c){if(i!==null)throw Ne=i,c;$e=1,ci(e,Pa(t,e.current)),Ne=null;return}a.flags&32768?(Ee||n===1?e=!0:us||(je&536870912)!==0?e=!1:($t=e=!0,(n===2||n===9||n===3||n===6)&&(n=Ra.current,n!==null&&n.tag===13&&(n.flags|=16384))),Fm(a,e)):xi(a)}function xi(e){var a=e;do{if((a.flags&32768)!==0){Fm(a,$t);return}e=a.return;var t=Mg(a.alternate,a,Dt);if(t!==null){Ne=t;return}if(a=a.sibling,a!==null){Ne=a;return}Ne=a=e}while(a!==null);$e===0&&($e=5)}function Fm(e,a){do{var t=wg(e.alternate,e);if(t!==null){t.flags&=32767,Ne=t;return}if(t=e.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!a&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=t}while(e!==null);$e=6,Ne=null}function Wm(e,a,t,n,i,c,d,y,C){e.cancelPendingCommit=null;do Si();while(ea!==0);if((Te&6)!==0)throw Error(u(327));if(a!==null){if(a===e.current)throw Error(u(177));if(c=a.lanes|a.childLanes,c|=Tc,ze(e,t,c,d,y,C),e===Be&&(Ne=Be=null,je=0),ds=a,Zt=e,At=t,Or=c,Ur=i,Im=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Yg(we,function(){return sf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=B.T,B.T=null,i=Z.p,Z.p=2,d=Te,Te|=4;try{Rg(e,a,t)}finally{Te=d,Z.p=i,B.T=n}}ea=1,ef(),af(),tf()}}function ef(){if(ea===1){ea=0;var e=Zt,a=ds,t=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||t){t=B.T,B.T=null;var n=Z.p;Z.p=2;var i=Te;Te|=4;try{qm(a,e);var c=Wr,d=Bo(e.containerInfo),y=c.focusedElem,C=c.selectionRange;if(d!==y&&y&&y.ownerDocument&&zo(y.ownerDocument.documentElement,y)){if(C!==null&&jc(y)){var L=C.start,P=C.end;if(P===void 0&&(P=L),"selectionStart"in y)y.selectionStart=L,y.selectionEnd=Math.min(P,y.value.length);else{var $=y.ownerDocument||document,U=$&&$.defaultView||window;if(U.getSelection){var H=U.getSelection(),ne=y.textContent.length,ue=Math.min(C.start,ne),Ue=C.end===void 0?ue:Math.min(C.end,ne);!H.extend&&ue>Ue&&(d=Ue,Ue=ue,ue=d);var w=Uo(y,ue),E=Uo(y,Ue);if(w&&E&&(H.rangeCount!==1||H.anchorNode!==w.node||H.anchorOffset!==w.offset||H.focusNode!==E.node||H.focusOffset!==E.offset)){var q=$.createRange();q.setStart(w.node,w.offset),H.removeAllRanges(),ue>Ue?(H.addRange(q),H.extend(E.node,E.offset)):(q.setEnd(E.node,E.offset),H.addRange(q))}}}}for($=[],H=y;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<$.length;y++){var Q=$[y];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}ki=!!Fr,Wr=Fr=null}finally{Te=i,Z.p=n,B.T=t}}e.current=a,ea=2}}function af(){if(ea===2){ea=0;var e=Zt,a=ds,t=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||t){t=B.T,B.T=null;var n=Z.p;Z.p=2;var i=Te;Te|=4;try{Tm(e,a.alternate,a)}finally{Te=i,Z.p=n,B.T=t}}ea=3}}function tf(){if(ea===4||ea===3){ea=0,Fa();var e=Zt,a=ds,t=At,n=Im;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ea=5:(ea=0,ds=Zt=null,nf(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Jt=null),lc(t),a=a.stateNode,aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(ut,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=B.T,i=Z.p,Z.p=2,B.T=null;try{for(var c=e.onRecoverableError,d=0;d<n.length;d++){var y=n[d];c(y.value,{componentStack:y.stack})}}finally{B.T=a,Z.p=i}}(At&3)!==0&&Si(),ct(e),i=e.pendingLanes,(t&261930)!==0&&(i&42)!==0?e===zr?ll++:(ll=0,zr=e):ll=0,il(0)}}function nf(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Bs(a)))}function Si(){return ef(),af(),tf(),sf()}function sf(){if(ea!==5)return!1;var e=Zt,a=Or;Or=0;var t=lc(At),n=B.T,i=Z.p;try{Z.p=32>t?32:t,B.T=null,t=Ur,Ur=null;var c=Zt,d=At;if(ea=0,ds=Zt=null,At=0,(Te&6)!==0)throw Error(u(331));var y=Te;if(Te|=4,zm(c.current),Gm(c,c.current,d,t),Te=y,il(0,!1),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(ut,c)}catch{}return!0}finally{Z.p=i,B.T=n,nf(e,a)}}function lf(e,a,t){a=Pa(t,a),a=hr(e.stateNode,a,2),e=Yt(e,a,2),e!==null&&(mn(e,2),ct(e))}function qe(e,a,t){if(e.tag===3)lf(e,e,t);else for(;a!==null;){if(a.tag===3){lf(a,e,t);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jt===null||!Jt.has(n))){e=Pa(t,e),t=im(2),n=Yt(a,t,2),n!==null&&(cm(t,n,a,e),mn(n,2),ct(n));break}}a=a.return}}function Ir(e,a,t){var n=e.pingCache;if(n===null){n=e.pingCache=new Lg;var i=new Set;n.set(a,i)}else i=n.get(a),i===void 0&&(i=new Set,n.set(a,i));i.has(t)||(qr=!0,i.add(t),e=Bg.bind(null,e,a,t),a.then(e,e))}function Bg(e,a,t){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&t,e.warmLanes&=~t,Be===e&&(je&t)===t&&($e===4||$e===3&&(je&62914560)===je&&300>sa()-yi?(Te&2)===0&&ms(e,0):Lr|=t,os===je&&(os=0)),ct(e)}function cf(e,a){a===0&&(a=Dl()),e=hn(e,a),e!==null&&(mn(e,a),ct(e))}function Hg(e){var a=e.memoizedState,t=0;a!==null&&(t=a.retryLane),cf(e,t)}function Ig(e,a){var t=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(a),cf(e,t)}function Yg(e,a){return fe(e,a)}var Ni=null,ps=null,Yr=!1,Ci=!1,Pr=!1,Ft=0;function ct(e){e!==ps&&e.next===null&&(ps===null?Ni=ps=e:ps=ps.next=e),Ci=!0,Yr||(Yr=!0,Qg())}function il(e,a){if(!Pr&&Ci){Pr=!0;do for(var t=!1,n=Ni;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var c=0;else{var d=n.suspendedLanes,y=n.pingedLanes;c=(1<<31-ma(42|e)+1)-1,c&=i&~(d&~y),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(t=!0,df(n,c))}else c=je,c=qn(n,n===Be?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||dn(n,c)||(t=!0,df(n,c));n=n.next}while(t);Pr=!1}}function Pg(){rf()}function rf(){Ci=Yr=!1;var e=0;Ft!==0&&ah()&&(e=Ft);for(var a=sa(),t=null,n=Ni;n!==null;){var i=n.next,c=uf(n,a);c===0?(n.next=null,t===null?Ni=i:t.next=i,i===null&&(ps=t)):(t=n,(e!==0||(c&3)!==0)&&(Ci=!0)),n=i}ea!==0&&ea!==5||il(e),Ft!==0&&(Ft=0)}function uf(e,a){for(var t=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var d=31-ma(c),y=1<<d,C=i[d];C===-1?((y&t)===0||(y&n)!==0)&&(i[d]=sc(y,a)):C<=a&&(e.expiredLanes|=y),c&=~y}if(a=Be,t=je,t=qn(e,e===a?t:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,t===0||e===a&&(ke===2||ke===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Re(n),e.callbackNode=null,e.callbackPriority=0;if((t&3)===0||dn(e,t)){if(a=t&-t,a===e.callbackPriority)return a;switch(n!==null&&Re(n),lc(t)){case 2:case 8:t=xe;break;case 32:t=we;break;case 268435456:t=Pe;break;default:t=we}return n=of.bind(null,e),t=fe(t,n),e.callbackPriority=a,e.callbackNode=t,a}return n!==null&&n!==null&&Re(n),e.callbackPriority=2,e.callbackNode=null,2}function of(e,a){if(ea!==0&&ea!==5)return e.callbackNode=null,e.callbackPriority=0,null;var t=e.callbackNode;if(Si()&&e.callbackNode!==t)return null;var n=je;return n=qn(e,e===Be?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Pm(e,n,a),uf(e,sa()),e.callbackNode!=null&&e.callbackNode===t?of.bind(null,e):null)}function df(e,a){if(Si())return null;Pm(e,a,!0)}function Qg(){nh(function(){(Te&6)!==0?fe(Rt,Pg):rf()})}function Qr(){if(Ft===0){var e=Wn;e===0&&(e=ot,ot<<=1,(ot&261888)===0&&(ot=256)),Ft=e}return Ft}function mf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wl(""+e)}function ff(e,a){var t=a.ownerDocument.createElement("input");return t.name=a.name,t.value=a.value,e.id&&t.setAttribute("form",e.id),a.parentNode.insertBefore(t,a),e=new FormData(e),t.parentNode.removeChild(t),e}function Xg(e,a,t,n,i){if(a==="submit"&&t&&t.stateNode===i){var c=mf((i[ba]||null).action),d=n.submitter;d&&(a=(a=d[ba]||null)?mf(a.formAction):d.getAttribute("formAction"),a!==null&&(c=a,d=null));var y=new Ll("action","action",null,n,i);e.push({event:y,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ft!==0){var C=d?ff(i,d):new FormData(i);dr(t,{pending:!0,data:C,method:i.method,action:c},null,C)}}else typeof c=="function"&&(y.preventDefault(),C=d?ff(i,d):new FormData(i),dr(t,{pending:!0,data:C,method:i.method,action:c},c,C))},currentTarget:i}]})}}for(var Xr=0;Xr<Ac.length;Xr++){var $r=Ac[Xr],$g=$r.toLowerCase(),Vg=$r[0].toUpperCase()+$r.slice(1);at($g,"on"+Vg)}at(Yo,"onAnimationEnd"),at(Po,"onAnimationIteration"),at(Qo,"onAnimationStart"),at("dblclick","onDoubleClick"),at("focusin","onFocus"),at("focusout","onBlur"),at(og,"onTransitionRun"),at(dg,"onTransitionStart"),at(mg,"onTransitionCancel"),at(Xo,"onTransitionEnd"),zn("onMouseEnter",["mouseout","mouseover"]),zn("onMouseLeave",["mouseout","mouseover"]),zn("onPointerEnter",["pointerout","pointerover"]),zn("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function pf(e,a){a=(a&4)!==0;for(var t=0;t<e.length;t++){var n=e[t],i=n.event;n=n.listeners;e:{var c=void 0;if(a)for(var d=n.length-1;0<=d;d--){var y=n[d],C=y.instance,L=y.currentTarget;if(y=y.listener,C!==c&&i.isPropagationStopped())break e;c=y,i.currentTarget=L;try{c(i)}catch(P){Ul(P)}i.currentTarget=null,c=C}else for(d=0;d<n.length;d++){if(y=n[d],C=y.instance,L=y.currentTarget,y=y.listener,C!==c&&i.isPropagationStopped())break e;c=y,i.currentTarget=L;try{c(i)}catch(P){Ul(P)}i.currentTarget=null,c=C}}}}function Ce(e,a){var t=a[ic];t===void 0&&(t=a[ic]=new Set);var n=e+"__bubble";t.has(n)||(yf(a,e,2,!1),t.add(n))}function Vr(e,a,t){var n=0;a&&(n|=4),yf(t,e,n,a)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Jr(e){if(!e[ji]){e[ji]=!0,io.forEach(function(t){t!=="selectionchange"&&(Jg.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[ji]||(a[ji]=!0,Vr("selectionchange",!1,a))}}function yf(e,a,t,n){switch(Pf(a)){case 2:var i=Ch;break;case 8:i=jh;break;default:i=ou}t=i.bind(null,a,t,e),i=void 0,!yc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(a,t,{capture:!0,passive:i}):e.addEventListener(a,t,!0):i!==void 0?e.addEventListener(a,t,{passive:i}):e.addEventListener(a,t,!1)}function Zr(e,a,t,n,i){var c=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var y=n.stateNode.containerInfo;if(y===i)break;if(d===4)for(d=n.return;d!==null;){var C=d.tag;if((C===3||C===4)&&d.stateNode.containerInfo===i)return;d=d.return}for(;y!==null;){if(d=Gn(y),d===null)return;if(C=d.tag,C===5||C===6||C===26||C===27){n=c=d;continue e}y=y.parentNode}}n=n.return}bo(function(){var L=c,P=fc(t),$=[];e:{var U=$o.get(e);if(U!==void 0){var H=Ll,ne=e;switch(e){case"keypress":if(kl(t)===0)break e;case"keydown":case"keyup":H=Iy;break;case"focusin":ne="focus",H=bc;break;case"focusout":ne="blur",H=bc;break;case"beforeblur":case"afterblur":H=bc;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Qy;break;case Yo:case Po:case Qo:H=ky;break;case Xo:H=$y;break;case"scroll":case"scrollend":H=Ay;break;case"wheel":H=Jy;break;case"copy":case"cut":case"paste":H=Ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=jo;break;case"toggle":case"beforetoggle":H=Ky}var ue=(a&4)!==0,Ue=!ue&&(e==="scroll"||e==="scrollend"),w=ue?U!==null?U+"Capture":null:U;ue=[];for(var E=L,q;E!==null;){var Q=E;if(q=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||q===null||w===null||(Q=Ts(E,w),Q!=null&&ue.push(rl(E,Q,q))),Ue)break;E=E.return}0<ue.length&&(U=new H(U,ne,null,t,P),$.push({event:U,listeners:ue}))}}if((a&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",U&&t!==mc&&(ne=t.relatedTarget||t.fromElement)&&(Gn(ne)||ne[Ln]))break e;if((H||U)&&(U=P.window===P?P:(U=P.ownerDocument)?U.defaultView||U.parentWindow:window,H?(ne=t.relatedTarget||t.toElement,H=L,ne=ne?Gn(ne):null,ne!==null&&(Ue=f(ne),ue=ne.tag,ne!==Ue||ue!==5&&ue!==27&&ue!==6)&&(ne=null)):(H=null,ne=L),H!==ne)){if(ue=No,Q="onMouseLeave",w="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ue=jo,Q="onPointerLeave",w="onPointerEnter",E="pointer"),Ue=H==null?U:As(H),q=ne==null?U:As(ne),U=new ue(Q,E+"leave",H,t,P),U.target=Ue,U.relatedTarget=q,Q=null,Gn(P)===L&&(ue=new ue(w,E+"enter",ne,t,P),ue.target=q,ue.relatedTarget=Ue,Q=ue),Ue=Q,H&&ne)a:{for(ue=Zg,w=H,E=ne,q=0,Q=w;Q;Q=ue(Q))q++;Q=0;for(var ie=E;ie;ie=ue(ie))Q++;for(;0<q-Q;)w=ue(w),q--;for(;0<Q-q;)E=ue(E),Q--;for(;q--;){if(w===E||E!==null&&w===E.alternate){ue=w;break a}w=ue(w),E=ue(E)}ue=null}else ue=null;H!==null&&gf($,U,H,ue,!1),ne!==null&&Ue!==null&&gf($,Ue,ne,ue,!0)}}e:{if(U=L?As(L):window,H=U.nodeName&&U.nodeName.toLowerCase(),H==="select"||H==="input"&&U.type==="file")var De=Ro;else if(Mo(U))if(ko)De=cg;else{De=lg;var se=sg}else H=U.nodeName,!H||H.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?L&&dc(L.elementType)&&(De=Ro):De=ig;if(De&&(De=De(e,L))){wo($,De,t,P);break e}se&&se(e,U,L),e==="focusout"&&L&&U.type==="number"&&L.memoizedProps.value!=null&&oc(U,"number",U.value)}switch(se=L?As(L):window,e){case"focusin":(Mo(se)||se.contentEditable==="true")&&(Qn=se,_c=L,Os=null);break;case"focusout":Os=_c=Qn=null;break;case"mousedown":Ec=!0;break;case"contextmenu":case"mouseup":case"dragend":Ec=!1,Ho($,t,P);break;case"selectionchange":if(ug)break;case"keydown":case"keyup":Ho($,t,P)}var ve;if(Sc)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Pn?Ao(e,t)&&(_e="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(_e="onCompositionStart");_e&&(_o&&t.locale!=="ko"&&(Pn||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Pn&&(ve=xo()):(Gt=P,gc="value"in Gt?Gt.value:Gt.textContent,Pn=!0)),se=_i(L,_e),0<se.length&&(_e=new Co(_e,e,null,t,P),$.push({event:_e,listeners:se}),ve?_e.data=ve:(ve=To(t),ve!==null&&(_e.data=ve)))),(ve=Wy?eg(e,t):ag(e,t))&&(_e=_i(L,"onBeforeInput"),0<_e.length&&(se=new Co("onBeforeInput","beforeinput",null,t,P),$.push({event:se,listeners:_e}),se.data=ve)),Xg($,e,L,t,P)}pf($,a)})}function rl(e,a,t){return{instance:e,listener:a,currentTarget:t}}function _i(e,a){for(var t=a+"Capture",n=[];e!==null;){var i=e,c=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||c===null||(i=Ts(e,t),i!=null&&n.unshift(rl(e,i,c)),i=Ts(e,a),i!=null&&n.push(rl(e,i,c))),e.tag===3)return n;e=e.return}return[]}function Zg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gf(e,a,t,n,i){for(var c=a._reactName,d=[];t!==null&&t!==n;){var y=t,C=y.alternate,L=y.stateNode;if(y=y.tag,C!==null&&C===n)break;y!==5&&y!==26&&y!==27||L===null||(C=L,i?(L=Ts(t,c),L!=null&&d.unshift(rl(t,L,C))):i||(L=Ts(t,c),L!=null&&d.push(rl(t,L,C)))),t=t.return}d.length!==0&&e.push({event:a,listeners:d})}var Kg=/\r\n?/g,Fg=/\u0000|\uFFFD/g;function hf(e){return(typeof e=="string"?e:""+e).replace(Kg,`
`).replace(Fg,"")}function vf(e,a){return a=hf(a),hf(e)===a}function Oe(e,a,t,n,i,c){switch(t){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||Hn(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&Hn(e,""+n);break;case"className":Tl(e,"class",n);break;case"tabIndex":Tl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Tl(e,t,n);break;case"style":ho(e,n,c);break;case"data":if(a!=="object"){Tl(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||t!=="href")){e.removeAttribute(t);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(t);break}n=wl(""+n),e.setAttribute(t,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(t==="formAction"?(a!=="input"&&Oe(e,a,"name",i.name,i,null),Oe(e,a,"formEncType",i.formEncType,i,null),Oe(e,a,"formMethod",i.formMethod,i,null),Oe(e,a,"formTarget",i.formTarget,i,null)):(Oe(e,a,"encType",i.encType,i,null),Oe(e,a,"method",i.method,i,null),Oe(e,a,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(t);break}n=wl(""+n),e.setAttribute(t,n);break;case"onClick":n!=null&&(e.onclick=ft);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(t=n.__html,t!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=t}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}t=wl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,""+n):e.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,""):e.removeAttribute(t);break;case"capture":case"download":n===!0?e.setAttribute(t,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,n):e.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(t,n):e.removeAttribute(t);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(t):e.setAttribute(t,n);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),Al(e,"popover",n);break;case"xlinkActuate":mt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":mt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":mt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":mt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":mt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":mt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":mt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":mt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":mt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Al(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=Ey.get(t)||t,Al(e,t,n))}}function Kr(e,a,t,n,i,c){switch(t){case"style":ho(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(t=n.__html,t!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=t}}break;case"children":typeof n=="string"?Hn(e,n):(typeof n=="number"||typeof n=="bigint")&&Hn(e,""+n);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(i=t.endsWith("Capture"),a=t.slice(2,i?t.length-7:void 0),c=e[ba]||null,c=c!=null?c[t]:null,typeof c=="function"&&e.removeEventListener(a,c,i),typeof n=="function")){typeof c!="function"&&c!==null&&(t in e?e[t]=null:e.hasAttribute(t)&&e.removeAttribute(t)),e.addEventListener(a,n,i);break e}t in e?e[t]=n:n===!0?e.setAttribute(t,""):Al(e,t,n)}}}function oa(e,a,t){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var n=!1,i=!1,c;for(c in t)if(t.hasOwnProperty(c)){var d=t[c];if(d!=null)switch(c){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Oe(e,a,c,d,t,null)}}i&&Oe(e,a,"srcSet",t.srcSet,t,null),n&&Oe(e,a,"src",t.src,t,null);return;case"input":Ce("invalid",e);var y=c=d=i=null,C=null,L=null;for(n in t)if(t.hasOwnProperty(n)){var P=t[n];if(P!=null)switch(n){case"name":i=P;break;case"type":d=P;break;case"checked":C=P;break;case"defaultChecked":L=P;break;case"value":c=P;break;case"defaultValue":y=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(u(137,a));break;default:Oe(e,a,n,P,t,null)}}fo(e,c,y,C,L,d,i,!1);return;case"select":Ce("invalid",e),n=d=c=null;for(i in t)if(t.hasOwnProperty(i)&&(y=t[i],y!=null))switch(i){case"value":c=y;break;case"defaultValue":d=y;break;case"multiple":n=y;default:Oe(e,a,i,y,t,null)}a=c,t=d,e.multiple=!!n,a!=null?Bn(e,!!n,a,!1):t!=null&&Bn(e,!!n,t,!0);return;case"textarea":Ce("invalid",e),c=i=n=null;for(d in t)if(t.hasOwnProperty(d)&&(y=t[d],y!=null))switch(d){case"value":n=y;break;case"defaultValue":i=y;break;case"children":c=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(u(91));break;default:Oe(e,a,d,y,t,null)}yo(e,n,i,c);return;case"option":for(C in t)if(t.hasOwnProperty(C)&&(n=t[C],n!=null))switch(C){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Oe(e,a,C,n,t,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(n=0;n<cl.length;n++)Ce(cl[n],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in t)if(t.hasOwnProperty(L)&&(n=t[L],n!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Oe(e,a,L,n,t,null)}return;default:if(dc(a)){for(P in t)t.hasOwnProperty(P)&&(n=t[P],n!==void 0&&Kr(e,a,P,n,t,void 0));return}}for(y in t)t.hasOwnProperty(y)&&(n=t[y],n!=null&&Oe(e,a,y,n,t,null))}function Wg(e,a,t,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,c=null,d=null,y=null,C=null,L=null,P=null;for(H in t){var $=t[H];if(t.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=$;default:n.hasOwnProperty(H)||Oe(e,a,H,null,n,$)}}for(var U in n){var H=n[U];if($=t[U],n.hasOwnProperty(U)&&(H!=null||$!=null))switch(U){case"type":c=H;break;case"name":i=H;break;case"checked":L=H;break;case"defaultChecked":P=H;break;case"value":d=H;break;case"defaultValue":y=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(u(137,a));break;default:H!==$&&Oe(e,a,U,H,n,$)}}uc(e,d,y,C,L,P,c,i);return;case"select":H=d=y=U=null;for(c in t)if(C=t[c],t.hasOwnProperty(c)&&C!=null)switch(c){case"value":break;case"multiple":H=C;default:n.hasOwnProperty(c)||Oe(e,a,c,null,n,C)}for(i in n)if(c=n[i],C=t[i],n.hasOwnProperty(i)&&(c!=null||C!=null))switch(i){case"value":U=c;break;case"defaultValue":y=c;break;case"multiple":d=c;default:c!==C&&Oe(e,a,i,c,n,C)}a=y,t=d,n=H,U!=null?Bn(e,!!t,U,!1):!!n!=!!t&&(a!=null?Bn(e,!!t,a,!0):Bn(e,!!t,t?[]:"",!1));return;case"textarea":H=U=null;for(y in t)if(i=t[y],t.hasOwnProperty(y)&&i!=null&&!n.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Oe(e,a,y,null,n,i)}for(d in n)if(i=n[d],c=t[d],n.hasOwnProperty(d)&&(i!=null||c!=null))switch(d){case"value":U=i;break;case"defaultValue":H=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==c&&Oe(e,a,d,i,n,c)}po(e,U,H);return;case"option":for(var ne in t)if(U=t[ne],t.hasOwnProperty(ne)&&U!=null&&!n.hasOwnProperty(ne))switch(ne){case"selected":e.selected=!1;break;default:Oe(e,a,ne,null,n,U)}for(C in n)if(U=n[C],H=t[C],n.hasOwnProperty(C)&&U!==H&&(U!=null||H!=null))switch(C){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Oe(e,a,C,U,n,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in t)U=t[ue],t.hasOwnProperty(ue)&&U!=null&&!n.hasOwnProperty(ue)&&Oe(e,a,ue,null,n,U);for(L in n)if(U=n[L],H=t[L],n.hasOwnProperty(L)&&U!==H&&(U!=null||H!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(u(137,a));break;default:Oe(e,a,L,U,n,H)}return;default:if(dc(a)){for(var Ue in t)U=t[Ue],t.hasOwnProperty(Ue)&&U!==void 0&&!n.hasOwnProperty(Ue)&&Kr(e,a,Ue,void 0,n,U);for(P in n)U=n[P],H=t[P],!n.hasOwnProperty(P)||U===H||U===void 0&&H===void 0||Kr(e,a,P,U,n,H);return}}for(var w in t)U=t[w],t.hasOwnProperty(w)&&U!=null&&!n.hasOwnProperty(w)&&Oe(e,a,w,null,n,U);for($ in n)U=n[$],H=t[$],!n.hasOwnProperty($)||U===H||U==null&&H==null||Oe(e,a,$,U,n,H)}function bf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,t=performance.getEntriesByType("resource"),n=0;n<t.length;n++){var i=t[n],c=i.transferSize,d=i.initiatorType,y=i.duration;if(c&&y&&bf(d)){for(d=0,y=i.responseEnd,n+=1;n<t.length;n++){var C=t[n],L=C.startTime;if(L>y)break;var P=C.transferSize,$=C.initiatorType;P&&bf($)&&(C=C.responseEnd,d+=P*(C<y?1:(y-L)/(C-L)))}if(--n,a+=8*(c+d)/(i.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Fr=null,Wr=null;function Ei(e){return e.nodeType===9?e:e.ownerDocument}function xf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sf(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function eu(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var au=null;function ah(){var e=window.event;return e&&e.type==="popstate"?e===au?!1:(au=e,!0):(au=null,!1)}var Nf=typeof setTimeout=="function"?setTimeout:void 0,th=typeof clearTimeout=="function"?clearTimeout:void 0,Cf=typeof Promise=="function"?Promise:void 0,nh=typeof queueMicrotask=="function"?queueMicrotask:typeof Cf<"u"?function(e){return Cf.resolve(null).then(e).catch(sh)}:Nf;function sh(e){setTimeout(function(){throw e})}function Wt(e){return e==="head"}function jf(e,a){var t=a,n=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"||t==="/&"){if(n===0){e.removeChild(i),vs(a);return}n--}else if(t==="$"||t==="$?"||t==="$~"||t==="$!"||t==="&")n++;else if(t==="html")ul(e.ownerDocument.documentElement);else if(t==="head"){t=e.ownerDocument.head,ul(t);for(var c=t.firstChild;c;){var d=c.nextSibling,y=c.nodeName;c[Ds]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&c.rel.toLowerCase()==="stylesheet"||t.removeChild(c),c=d}}else t==="body"&&ul(e.ownerDocument.body);t=i}while(t);vs(a)}function _f(e,a){var t=e;e=0;do{var n=t.nextSibling;if(t.nodeType===1?a?(t._stashedDisplay=t.style.display,t.style.display="none"):(t.style.display=t._stashedDisplay||"",t.getAttribute("style")===""&&t.removeAttribute("style")):t.nodeType===3&&(a?(t._stashedText=t.nodeValue,t.nodeValue=""):t.nodeValue=t._stashedText||""),n&&n.nodeType===8)if(t=n.data,t==="/$"){if(e===0)break;e--}else t!=="$"&&t!=="$?"&&t!=="$~"&&t!=="$!"||e++;t=n}while(t)}function tu(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var t=a;switch(a=a.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":tu(t),cc(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}e.removeChild(t)}}function lh(e,a,t,n){for(;e.nodeType===1;){var i=t;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Ds])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var c=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Ja(e.nextSibling),e===null)break}return null}function ih(e,a,t){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ja(e.nextSibling),e===null))return null;return e}function Ef(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ja(e.nextSibling),e===null))return null;return e}function nu(e){return e.data==="$?"||e.data==="$~"}function su(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ch(e,a){var t=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||t.readyState!=="loading")a();else{var n=function(){a(),t.removeEventListener("DOMContentLoaded",n)};t.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ja(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var lu=null;function Df(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"||t==="/&"){if(a===0)return Ja(e.nextSibling);a--}else t!=="$"&&t!=="$!"&&t!=="$?"&&t!=="$~"&&t!=="&"||a++}e=e.nextSibling}return null}function Af(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"){if(a===0)return e;a--}else t!=="/$"&&t!=="/&"||a++}e=e.previousSibling}return null}function Tf(e,a,t){switch(a=Ei(t),e){case"html":if(e=a.documentElement,!e)throw Error(u(452));return e;case"head":if(e=a.head,!e)throw Error(u(453));return e;case"body":if(e=a.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function ul(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);cc(e)}var Za=new Map,Mf=new Set;function Di(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Tt=Z.d;Z.d={f:rh,r:uh,D:oh,C:dh,L:mh,m:fh,X:yh,S:ph,M:gh};function rh(){var e=Tt.f(),a=vi();return e||a}function uh(e){var a=On(e);a!==null&&a.tag===5&&a.type==="form"?Xd(a):Tt.r(e)}var ys=typeof document>"u"?null:document;function wf(e,a,t){var n=ys;if(n&&typeof a=="string"&&a){var i=Ia(a);i='link[rel="'+e+'"][href="'+i+'"]',typeof t=="string"&&(i+='[crossorigin="'+t+'"]'),Mf.has(i)||(Mf.add(i),e={rel:e,crossOrigin:t,href:a},n.querySelector(i)===null&&(a=n.createElement("link"),oa(a,"link",e),ta(a),n.head.appendChild(a)))}}function oh(e){Tt.D(e),wf("dns-prefetch",e,null)}function dh(e,a){Tt.C(e,a),wf("preconnect",e,a)}function mh(e,a,t){Tt.L(e,a,t);var n=ys;if(n&&e&&a){var i='link[rel="preload"][as="'+Ia(a)+'"]';a==="image"&&t&&t.imageSrcSet?(i+='[imagesrcset="'+Ia(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(i+='[imagesizes="'+Ia(t.imageSizes)+'"]')):i+='[href="'+Ia(e)+'"]';var c=i;switch(a){case"style":c=gs(e);break;case"script":c=hs(e)}Za.has(c)||(e=N({rel:"preload",href:a==="image"&&t&&t.imageSrcSet?void 0:e,as:a},t),Za.set(c,e),n.querySelector(i)!==null||a==="style"&&n.querySelector(ol(c))||a==="script"&&n.querySelector(dl(c))||(a=n.createElement("link"),oa(a,"link",e),ta(a),n.head.appendChild(a)))}}function fh(e,a){Tt.m(e,a);var t=ys;if(t&&e){var n=a&&typeof a.as=="string"?a.as:"script",i='link[rel="modulepreload"][as="'+Ia(n)+'"][href="'+Ia(e)+'"]',c=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=hs(e)}if(!Za.has(c)&&(e=N({rel:"modulepreload",href:e},a),Za.set(c,e),t.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(dl(c)))return}n=t.createElement("link"),oa(n,"link",e),ta(n),t.head.appendChild(n)}}}function ph(e,a,t){Tt.S(e,a,t);var n=ys;if(n&&e){var i=Un(n).hoistableStyles,c=gs(e);a=a||"default";var d=i.get(c);if(!d){var y={loading:0,preload:null};if(d=n.querySelector(ol(c)))y.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":a},t),(t=Za.get(c))&&iu(e,t);var C=d=n.createElement("link");ta(C),oa(C,"link",e),C._p=new Promise(function(L,P){C.onload=L,C.onerror=P}),C.addEventListener("load",function(){y.loading|=1}),C.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Ai(d,a,n)}d={type:"stylesheet",instance:d,count:1,state:y},i.set(c,d)}}}function yh(e,a){Tt.X(e,a);var t=ys;if(t&&e){var n=Un(t).hoistableScripts,i=hs(e),c=n.get(i);c||(c=t.querySelector(dl(i)),c||(e=N({src:e,async:!0},a),(a=Za.get(i))&&cu(e,a),c=t.createElement("script"),ta(c),oa(c,"link",e),t.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(i,c))}}function gh(e,a){Tt.M(e,a);var t=ys;if(t&&e){var n=Un(t).hoistableScripts,i=hs(e),c=n.get(i);c||(c=t.querySelector(dl(i)),c||(e=N({src:e,async:!0,type:"module"},a),(a=Za.get(i))&&cu(e,a),c=t.createElement("script"),ta(c),oa(c,"link",e),t.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(i,c))}}function Rf(e,a,t,n){var i=(i=me.current)?Di(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(a=gs(t.href),t=Un(i).hoistableStyles,n=t.get(a),n||(n={type:"style",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){e=gs(t.href);var c=Un(i).hoistableStyles,d=c.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=i.querySelector(ol(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Za.has(e)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},Za.set(e,t),c||hh(i,e,t,d.state))),a&&n===null)throw Error(u(528,""));return d}if(a&&n!==null)throw Error(u(529,""));return null;case"script":return a=t.async,t=t.src,typeof t=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=hs(t),t=Un(i).hoistableScripts,n=t.get(a),n||(n={type:"script",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function gs(e){return'href="'+Ia(e)+'"'}function ol(e){return'link[rel="stylesheet"]['+e+"]"}function kf(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function hh(e,a,t,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),oa(a,"link",t),ta(a),e.head.appendChild(a))}function hs(e){return'[src="'+Ia(e)+'"]'}function dl(e){return"script[async]"+e}function qf(e,a,t){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+Ia(t.href)+'"]');if(n)return a.instance=n,ta(n),n;var i=N({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ta(n),oa(n,"style",i),Ai(n,t.precedence,e),a.instance=n;case"stylesheet":i=gs(t.href);var c=e.querySelector(ol(i));if(c)return a.state.loading|=4,a.instance=c,ta(c),c;n=kf(t),(i=Za.get(i))&&iu(n,i),c=(e.ownerDocument||e).createElement("link"),ta(c);var d=c;return d._p=new Promise(function(y,C){d.onload=y,d.onerror=C}),oa(c,"link",n),a.state.loading|=4,Ai(c,t.precedence,e),a.instance=c;case"script":return c=hs(t.src),(i=e.querySelector(dl(c)))?(a.instance=i,ta(i),i):(n=t,(i=Za.get(c))&&(n=N({},t),cu(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),ta(i),oa(i,"link",n),e.head.appendChild(i),a.instance=i);case"void":return null;default:throw Error(u(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,Ai(n,t.precedence,e));return a.instance}function Ai(e,a,t){for(var n=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,c=i,d=0;d<n.length;d++){var y=n[d];if(y.dataset.precedence===a)c=y;else if(c!==i)break}c?c.parentNode.insertBefore(e,c.nextSibling):(a=t.nodeType===9?t.head:t,a.insertBefore(e,a.firstChild))}function iu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function cu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Ti=null;function Lf(e,a,t){if(Ti===null){var n=new Map,i=Ti=new Map;i.set(t,n)}else i=Ti,n=i.get(t),n||(n=new Map,i.set(t,n));if(n.has(e))return n;for(n.set(e,null),t=t.getElementsByTagName(e),i=0;i<t.length;i++){var c=t[i];if(!(c[Ds]||c[ia]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var d=c.getAttribute(a)||"";d=e+d;var y=n.get(d);y?y.push(c):n.set(d,[c])}}return n}function Gf(e,a,t){e=e.ownerDocument||e,e.head.insertBefore(t,a==="title"?e.querySelector("head > title"):null)}function vh(e,a,t){if(t===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Of(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function bh(e,a,t,n){if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var i=gs(n.href),c=a.querySelector(ol(i));if(c){a=c._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Mi.bind(e),a.then(e,e)),t.state.loading|=4,t.instance=c,ta(c);return}c=a.ownerDocument||a,n=kf(n),(i=Za.get(i))&&iu(n,i),c=c.createElement("link"),ta(c);var d=c;d._p=new Promise(function(y,C){d.onload=y,d.onerror=C}),oa(c,"link",n),t.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(t,a),(a=t.state.preload)&&(t.state.loading&3)===0&&(e.count++,t=Mi.bind(e),a.addEventListener("load",t),a.addEventListener("error",t))}}var ru=0;function xh(e,a){return e.stylesheets&&e.count===0&&Ri(e,e.stylesheets),0<e.count||0<e.imgCount?function(t){var n=setTimeout(function(){if(e.stylesheets&&Ri(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+a);0<e.imgBytes&&ru===0&&(ru=62500*eh());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ri(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>ru?50:800)+a);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function Mi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ri(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wi=null;function Ri(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wi=new Map,a.forEach(Sh,e),wi=null,Mi.call(e))}function Sh(e,a){if(!(a.state.loading&4)){var t=wi.get(e);if(t)var n=t.get(null);else{t=new Map,wi.set(e,t);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<i.length;c++){var d=i[c];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(t.set(d.dataset.precedence,d),n=d)}n&&t.set(null,n)}i=a.instance,d=i.getAttribute("data-precedence"),c=t.get(d)||n,c===n&&t.set(null,i),t.set(d,i),this.count++,n=Mi.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),c?c.parentNode.insertBefore(i,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),a.state.loading|=4}}var ml={$$typeof:x,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Nh(e,a,t,n,i,c,d,y,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_s(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_s(0),this.hiddenUpdates=_s(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=c,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Uf(e,a,t,n,i,c,d,y,C,L,P,$){return e=new Nh(e,a,t,d,C,L,P,$,y),a=1,c===!0&&(a|=24),c=wa(3,null,null,a),e.current=c,c.stateNode=e,a=Hc(),a.refCount++,e.pooledCache=a,a.refCount++,c.memoizedState={element:n,isDehydrated:t,cache:a},Qc(c),e}function zf(e){return e?(e=Vn,e):Vn}function Bf(e,a,t,n,i,c){i=zf(i),n.context===null?n.context=i:n.pendingContext=i,n=It(a),n.payload={element:t},c=c===void 0?null:c,c!==null&&(n.callback=c),t=Yt(e,n,a),t!==null&&(_a(t,e,a),Ps(t,e,a))}function Hf(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<a?t:a}}function uu(e,a){Hf(e,a),(e=e.alternate)&&Hf(e,a)}function If(e){if(e.tag===13||e.tag===31){var a=hn(e,67108864);a!==null&&_a(a,e,67108864),uu(e,67108864)}}function Yf(e){if(e.tag===13||e.tag===31){var a=Ga();a=Es(a);var t=hn(e,a);t!==null&&_a(t,e,a),uu(e,a)}}var ki=!0;function Ch(e,a,t,n){var i=B.T;B.T=null;var c=Z.p;try{Z.p=2,ou(e,a,t,n)}finally{Z.p=c,B.T=i}}function jh(e,a,t,n){var i=B.T;B.T=null;var c=Z.p;try{Z.p=8,ou(e,a,t,n)}finally{Z.p=c,B.T=i}}function ou(e,a,t,n){if(ki){var i=du(n);if(i===null)Zr(e,a,n,qi,t),Qf(e,n);else if(Eh(i,e,a,t,n))n.stopPropagation();else if(Qf(e,n),a&4&&-1<_h.indexOf(e)){for(;i!==null;){var c=On(i);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=Wa(c.pendingLanes);if(d!==0){var y=c;for(y.pendingLanes|=2,y.entangledLanes|=2;d;){var C=1<<31-ma(d);y.entanglements[1]|=C,d&=~C}ct(c),(Te&6)===0&&(gi=sa()+500,il(0))}}break;case 31:case 13:y=hn(c,2),y!==null&&_a(y,c,2),vi(),uu(c,2)}if(c=du(n),c===null&&Zr(e,a,n,qi,t),c===i)break;i=c}i!==null&&n.stopPropagation()}else Zr(e,a,n,null,t)}}function du(e){return e=fc(e),mu(e)}var qi=null;function mu(e){if(qi=null,e=Gn(e),e!==null){var a=f(e);if(a===null)e=null;else{var t=a.tag;if(t===13){if(e=h(a),e!==null)return e;e=null}else if(t===31){if(e=b(a),e!==null)return e;e=null}else if(t===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return qi=e,null}function Pf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case Rt:return 2;case xe:return 8;case we:case la:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var fu=!1,en=null,an=null,tn=null,fl=new Map,pl=new Map,nn=[],_h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qf(e,a){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":fl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(a.pointerId)}}function yl(e,a,t,n,i,c){return e===null||e.nativeEvent!==c?(e={blockedOn:a,domEventName:t,eventSystemFlags:n,nativeEvent:c,targetContainers:[i]},a!==null&&(a=On(a),a!==null&&If(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,i!==null&&a.indexOf(i)===-1&&a.push(i),e)}function Eh(e,a,t,n,i){switch(a){case"focusin":return en=yl(en,e,a,t,n,i),!0;case"dragenter":return an=yl(an,e,a,t,n,i),!0;case"mouseover":return tn=yl(tn,e,a,t,n,i),!0;case"pointerover":var c=i.pointerId;return fl.set(c,yl(fl.get(c)||null,e,a,t,n,i)),!0;case"gotpointercapture":return c=i.pointerId,pl.set(c,yl(pl.get(c)||null,e,a,t,n,i)),!0}return!1}function Xf(e){var a=Gn(e.target);if(a!==null){var t=f(a);if(t!==null){if(a=t.tag,a===13){if(a=h(t),a!==null){e.blockedOn=a,so(e.priority,function(){Yf(t)});return}}else if(a===31){if(a=b(t),a!==null){e.blockedOn=a,so(e.priority,function(){Yf(t)});return}}else if(a===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Li(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var t=du(e.nativeEvent);if(t===null){t=e.nativeEvent;var n=new t.constructor(t.type,t);mc=n,t.target.dispatchEvent(n),mc=null}else return a=On(t),a!==null&&If(a),e.blockedOn=t,!1;a.shift()}return!0}function $f(e,a,t){Li(e)&&t.delete(a)}function Dh(){fu=!1,en!==null&&Li(en)&&(en=null),an!==null&&Li(an)&&(an=null),tn!==null&&Li(tn)&&(tn=null),fl.forEach($f),pl.forEach($f)}function Gi(e,a){e.blockedOn===a&&(e.blockedOn=null,fu||(fu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Dh)))}var Oi=null;function Vf(e){Oi!==e&&(Oi=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Oi===e&&(Oi=null);for(var a=0;a<e.length;a+=3){var t=e[a],n=e[a+1],i=e[a+2];if(typeof n!="function"){if(mu(n||t)===null)continue;break}var c=On(t);c!==null&&(e.splice(a,3),a-=3,dr(c,{pending:!0,data:i,method:t.method,action:n},n,i))}}))}function vs(e){function a(C){return Gi(C,e)}en!==null&&Gi(en,e),an!==null&&Gi(an,e),tn!==null&&Gi(tn,e),fl.forEach(a),pl.forEach(a);for(var t=0;t<nn.length;t++){var n=nn[t];n.blockedOn===e&&(n.blockedOn=null)}for(;0<nn.length&&(t=nn[0],t.blockedOn===null);)Xf(t),t.blockedOn===null&&nn.shift();if(t=(e.ownerDocument||e).$$reactFormReplay,t!=null)for(n=0;n<t.length;n+=3){var i=t[n],c=t[n+1],d=i[ba]||null;if(typeof c=="function")d||Vf(t);else if(d){var y=null;if(c&&c.hasAttribute("formAction")){if(i=c,d=c[ba]||null)y=d.formAction;else if(mu(i)!==null)continue}else y=d.action;typeof y=="function"?t[n+1]=y:(t.splice(n,3),n-=3),Vf(t)}}}function Jf(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(d){return i=d})},focusReset:"manual",scroll:"manual"})}function a(){i!==null&&(i(),i=null),n||setTimeout(t,20)}function t(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(t,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),i!==null&&(i(),i=null)}}}function pu(e){this._internalRoot=e}Ui.prototype.render=pu.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(u(409));var t=a.current,n=Ga();Bf(t,n,e,a,null,null)},Ui.prototype.unmount=pu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Bf(e.current,2,null,e,null,null),vi(),a[Ln]=null}};function Ui(e){this._internalRoot=e}Ui.prototype.unstable_scheduleHydration=function(e){if(e){var a=no();e={blockedOn:null,target:e,priority:a};for(var t=0;t<nn.length&&a!==0&&a<nn[t].priority;t++);nn.splice(t,0,e),t===0&&Xf(e)}};var Zf=r.version;if(Zf!=="19.2.0")throw Error(u(527,Zf,"19.2.0"));Z.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=v(a),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Ah={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zi.isDisabled&&zi.supportsFiber)try{ut=zi.inject(Ah),aa=zi}catch{}}return hl.createRoot=function(e,a){if(!m(e))throw Error(u(299));var t=!1,n="",i=tm,c=nm,d=sm;return a!=null&&(a.unstable_strictMode===!0&&(t=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(d=a.onRecoverableError)),a=Uf(e,1,!1,null,null,t,n,null,i,c,d,Jf),e[Ln]=a.current,Jr(e),new pu(a)},hl.hydrateRoot=function(e,a,t){if(!m(e))throw Error(u(299));var n=!1,i="",c=tm,d=nm,y=sm,C=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.formState!==void 0&&(C=t.formState)),a=Uf(e,1,!0,a,t??null,n,i,C,c,d,y,Jf),a.context=zf(null),t=a.current,n=Ga(),n=Es(n),i=It(n),i.callback=null,Yt(t,i,n),t=n,a.current.lanes=t,mn(a,t),ct(a),e[Ln]=a.current,Jr(e),new Ui(a)},hl.version="19.2.0",hl}var ip;function Bh(){if(ip)return hu.exports;ip=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),hu.exports=zh(),hu.exports}var Hh=Bh();const Vi=10;function Ji(){return{type:"swordEnergy",current:0,max:Vi}}let cp=0;const Ih=s=>(cp++,`${s}_instance_${cp}`),Qu=s=>{const r=[...s];for(let o=r.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[r[o],r[u]]=[r[u],r[o]]}return r},Yh=(s,r)=>{const o=Qu(r);return{newDrawPile:[...s,...o],newDiscardPile:[]}},Ep=(s,r,o)=>{let u=[...r],m=[...o];const f=[];for(let h=0;h<s;h++){if(u.length===0){if(m.length===0)break;const p=Yh(u,m);u=p.newDrawPile,m=p.newDiscardPile}const b=u.pop();b&&f.push(b)}return{drawnCards:f,newDrawPile:u,newDiscardPile:m}},rp=(s,r)=>[...r,...s],Ph=(s,r)=>{const o=[];return Object.entries(s).forEach(([u,m])=>{const f=r.find(h=>h.id===u||h.cardTypeId===u);if(f)for(let h=0;h<m;h++)o.push({...f,id:Ih(f.cardTypeId||f.id),cardTypeId:f.cardTypeId||f.id})}),Qu(o)},Qh=(s,r)=>{switch(r.type){case"END_TURN":{const o=rp(r.cardsToDiscard,s.discardPile);return{...s,discardPile:o,hand:[]}}case"CARD_PLAY":{const o=s.hand.filter(m=>m.id!==r.card.id),u=rp([r.card],s.discardPile);return{...s,hand:o,discardPile:u}}case"SET_PILES":return{...s,drawPile:r.newDrawPile,discardPile:r.newDiscardPile};case"ADD_TO_HAND":return{...s,hand:[...s.hand,...r.cards]};case"RESET_DECK":return{hand:r.hand,drawPile:r.drawPile,discardPile:r.discardPile};default:return s}},rn={sw_001:{id:"sw_001",cardTypeId:"sw_001",name:"",description:"+1",cost:0,category:"atk",baseDamage:5,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_002:{id:"sw_002",cardTypeId:"sw_002",name:"",description:"+1-1",cost:1,category:"atk",baseDamage:3,swordEnergyGain:1,nextCardCostReduction:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_003:{id:"sw_003",cardTypeId:"sw_003",name:"",description:"3+1",cost:1,category:"atk",baseDamage:6,hitCount:3,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_004:{id:"sw_004",cardTypeId:"sw_004",name:"",description:"3+120%",cost:1,category:"atk",baseDamage:8,hitCount:3,swordEnergyGain:1,penetration:.2,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_005:{id:"sw_005",cardTypeId:"sw_005",name:"",description:"+1",cost:2,category:"atk",baseDamage:12,swordEnergyGain:1,isPreemptive:!0,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_006:{id:"sw_006",cardTypeId:"sw_006",name:"",description:"6+1",cost:2,category:"atk",baseDamage:4,hitCount:6,swordEnergyGain:1,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_007:{id:"sw_007",cardTypeId:"sw_007",name:"",description:"+1",cost:1,category:"atk",baseDamage:10,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_008:{id:"sw_008",cardTypeId:"sw_008",name:"",description:"+11",cost:1,category:"atk",baseDamage:11,swordEnergyGain:1,applyEnemyDebuff:[{name:"bleed",stacks:1,duration:3}],tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_009:{id:"sw_009",cardTypeId:"sw_009",name:"",description:"+1",cost:1,category:"atk",baseDamage:9,swordEnergyGain:1,tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_010:{id:"sw_010",cardTypeId:"sw_010",name:"",description:"+130%",cost:2,category:"atk",baseDamage:13,swordEnergyGain:1,penetration:.3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_011:{id:"sw_011",cardTypeId:"sw_011",name:"",description:"[+]+1",cost:2,category:"atk",baseDamage:8,swordEnergyGain:1,applyPlayerBuff:[{name:"atkUpMinor",stacks:1,duration:1}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_012:{id:"sw_012",cardTypeId:"sw_012",name:"",description:"[],[]+3",cost:2,category:"atk",baseDamage:10,swordEnergyGain:1,applyPlayerBuff:[{name:"immunity",stacks:1,duration:1}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_013:{id:"sw_013",cardTypeId:"sw_013",name:"",description:"+4+1",cost:1,category:"swordEnergy",swordEnergyGain:4,drawCards:1,tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_014:{id:"sw_014",cardTypeId:"sw_014",name:"",description:"+3HP+10",cost:1,category:"swordEnergy",swordEnergyGain:3,healAmount:10,tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_015:{id:"sw_015",cardTypeId:"sw_015",name:"",description:"+7+30%",cost:2,category:"swordEnergy",swordEnergyGain:7,applyPlayerBuff:[{name:"atkUpMajor",stacks:1,duration:2}],tags:["skill"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_016:{id:"sw_016",cardTypeId:"sw_016",name:"",description:"+2+1",cost:0,category:"swordEnergy",swordEnergyGain:2,energyGain:1,tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_017:{id:"sw_017",cardTypeId:"sw_017",name:"",description:"30%+2",cost:2,category:"atk",baseDamage:25,swordEnergyGain:2,penetration:.3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_018:{id:"sw_018",cardTypeId:"sw_018",name:"",description:"+2Guard+15",cost:2,category:"atk",baseDamage:22,swordEnergyGain:2,guardAmount:15,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_019:{id:"sw_019",cardTypeId:"sw_019",name:"",description:"+2",cost:2,category:"atk",baseDamage:20,swordEnergyGain:2,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_020:{id:"sw_020",cardTypeId:"sw_020",name:"",description:"+3",cost:2,category:"atk",baseDamage:24,swordEnergyGain:3,isPreemptive:!0,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_021:{id:"sw_021",cardTypeId:"sw_021",name:"",description:"Guard-25%+2",cost:2,category:"atk",baseDamage:28,swordEnergyGain:2,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_022:{id:"sw_022",cardTypeId:"sw_022",name:"",description:"+2",cost:2,category:"atk",baseDamage:23,swordEnergyGain:2,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_023:{id:"sw_023",cardTypeId:"sw_023",name:"",description:"2+3",cost:2,category:"atk",baseDamage:26,swordEnergyGain:3,applyEnemyDebuff:[{name:"bleed",stacks:2,duration:3}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_024:{id:"sw_024",cardTypeId:"sw_024",name:"",description:"1+2",cost:2,category:"atk",baseDamage:27,swordEnergyGain:2,applyEnemyDebuff:[{name:"burn",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_025:{id:"sw_025",cardTypeId:"sw_025",name:"",description:"2+2",cost:3,category:"atk",baseDamage:30,swordEnergyGain:2,applyEnemyDebuff:[{name:"stun",stacks:1,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_026:{id:"sw_026",cardTypeId:"sw_026",name:"",description:"2+3",cost:3,category:"atk",baseDamage:15,hitCount:2,swordEnergyGain:3,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_027:{id:"sw_027",cardTypeId:"sw_027",name:"",description:"3 = 3",cost:1,category:"atk",baseDamage:0,swordEnergyConsume:3,swordEnergyMultiplier:3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_028:{id:"sw_028",cardTypeId:"sw_028",name:"",description:"340%12+(8)",cost:1,category:"atk",baseDamage:12,swordEnergyConsume:3,swordEnergyMultiplier:8,penetration:.4,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_029:{id:"sw_029",cardTypeId:"sw_029",name:"",description:"5310+(6)3",cost:2,category:"atk",baseDamage:10,hitCount:3,swordEnergyConsume:5,swordEnergyMultiplier:6,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_030:{id:"sw_030",cardTypeId:"sw_030",name:"",description:"520+(12)",cost:2,category:"atk",baseDamage:20,swordEnergyConsume:5,swordEnergyMultiplier:12,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_031:{id:"sw_031",cardTypeId:"sw_031",name:"",description:"350%18+(9)",cost:1,category:"atk",baseDamage:18,swordEnergyConsume:3,swordEnergyMultiplier:9,penetration:.5,tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_032:{id:"sw_032",cardTypeId:"sw_032",name:"",description:"32",cost:2,category:"atk",baseDamage:16,swordEnergyConsume:3,swordEnergyMultiplier:10,applyEnemyDebuff:[{name:"stun",stacks:1,duration:2,isPermanent:!1}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_033:{id:"sw_033",cardTypeId:"sw_033",name:"",description:"+10[], [], [], []3",cost:3,category:"buff",baseDamage:0,swordEnergyGain:10,applyPlayerBuff:[{name:"immunity",stacks:1,duration:3},{name:"cleanse",stacks:1,duration:3},{name:"atkUpMajor",stacks:1,duration:3},{name:"haste",stacks:1,duration:3}],tags:["skill"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_034:{id:"sw_034",cardTypeId:"sw_034",name:"",description:"40+5",cost:4,category:"atk",baseDamage:40,swordEnergyConsume:0,swordEnergyMultiplier:25,penetration:.6,tags:["attack"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_035:{id:"sw_035",cardTypeId:"sw_035",name:"",description:"[][]3",cost:2,category:"buff",baseDamage:0,swordEnergyConsume:0,swordEnergyMultiplier:22,applyPlayerBuff:[{name:"atkUpMajor",stacks:1,duration:3},{name:"reflect",stacks:1,duration:3}],tags:["skill"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_036:{id:"sw_036",cardTypeId:"sw_036",name:"",description:"253",cost:3,category:"atk",baseDamage:25,hitCount:3,swordEnergyConsume:0,swordEnergyMultiplier:18,applyEnemyDebuff:[{name:"bleed",stacks:3,duration:3}],tags:["attack"],rarity:"legend",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_037:{id:"sw_037",cardTypeId:"sw_037",name:"",description:"Guard = 8",cost:1,category:"def",tags:["guard"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_039:{id:"sw_039",cardTypeId:"sw_039",name:"",description:"HP+20Guard = 2",cost:2,category:"def",healAmount:20,tags:["guard"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_040:{id:"sw_040",cardTypeId:"sw_040",name:"",description:"HP50%Guard = 3+3",cost:2,category:"def",baseDamage:18,swordEnergyGain:3,applyPlayerBuff:[{name:"lifesteal",stacks:1,duration:1}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_041:{id:"sw_041",cardTypeId:"sw_041",name:"",description:"2Guard = 10 + (8)",cost:1,category:"def",guardAmount:10,swordEnergyConsume:2,swordEnergyMultiplier:8,tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_042:{id:"sw_042",cardTypeId:"sw_042",name:"",description:"Guard+20+1",cost:1,category:"def",guardAmount:20,swordEnergyGain:1,tags:["guard"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"},sw_043:{id:"sw_043",cardTypeId:"sw_043",name:"",description:"230%8 + (5)",cost:1,category:"atk",baseDamage:8,swordEnergyConsume:2,swordEnergyMultiplier:5,penetration:.3,tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"swordsman"}},Su=Object.values(rn),Dp={mg_001:{id:"mg_001",cardTypeId:"mg_001",name:"",description:"",cost:1,category:"atk",baseDamage:12,element:"fire",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_002:{id:"mg_002",cardTypeId:"mg_002",name:"",description:"3",cost:2,category:"atk",baseDamage:8,hitCount:3,element:"fire",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_003:{id:"mg_003",cardTypeId:"mg_003",name:"",description:"1",cost:2,category:"atk",baseDamage:18,element:"fire",applyEnemyDebuff:[{name:"burn",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_004:{id:"mg_004",cardTypeId:"mg_004",name:"",description:"20%",cost:2,category:"atk",baseDamage:16,penetration:.2,element:"fire",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_005:{id:"mg_005",cardTypeId:"mg_005",name:"",description:"2",cost:3,category:"atk",baseDamage:24,element:"fire",applyEnemyDebuff:[{name:"burn",stacks:2,duration:3}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_006:{id:"mg_006",cardTypeId:"mg_006",name:"",description:"+15%",cost:2,category:"atk",baseDamage:15,element:"fire",applyPlayerBuff:[{name:"atkUpMinor",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_007:{id:"mg_007",cardTypeId:"mg_007",name:"",description:"Guard+15",cost:2,category:"def",guardAmount:15,element:"fire",applyPlayerBuff:[{name:"reflect",stacks:1,duration:1}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_008:{id:"mg_008",cardTypeId:"mg_008",name:"",description:"0",cost:0,category:"atk",baseDamage:6,element:"fire",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_009:{id:"mg_009",cardTypeId:"mg_009",name:"",description:"",cost:1,category:"atk",baseDamage:11,element:"ice",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_010:{id:"mg_010",cardTypeId:"mg_010",name:"",description:"",cost:2,category:"atk",baseDamage:14,element:"ice",applyEnemyDebuff:[{name:"slow",stacks:1,duration:2}],tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_011:{id:"mg_011",cardTypeId:"mg_011",name:"",description:"2",cost:3,category:"atk",baseDamage:20,element:"ice",applyEnemyDebuff:[{name:"freeze",stacks:1,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_012:{id:"mg_012",cardTypeId:"mg_012",name:"",description:"25%",cost:2,category:"atk",baseDamage:17,penetration:.25,element:"ice",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_013:{id:"mg_013",cardTypeId:"mg_013",name:"",description:"Guard+20+15%",cost:2,category:"def",guardAmount:20,element:"ice",applyPlayerBuff:[{name:"defUpMinor",stacks:1,duration:2}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_014:{id:"mg_014",cardTypeId:"mg_014",name:"",description:"-15%",cost:1,category:"debuff",baseDamage:8,element:"ice",applyEnemyDebuff:[{name:"atkDownMinor",stacks:1,duration:2}],tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_015:{id:"mg_015",cardTypeId:"mg_015",name:"",description:"3",cost:3,category:"atk",baseDamage:10,hitCount:3,element:"ice",applyEnemyDebuff:[{name:"slow",stacks:2,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_016:{id:"mg_016",cardTypeId:"mg_016",name:"",description:"0",cost:0,category:"atk",baseDamage:5,element:"ice",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_017:{id:"mg_017",cardTypeId:"mg_017",name:"",description:"",cost:1,category:"atk",baseDamage:13,element:"lightning",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_018:{id:"mg_018",cardTypeId:"mg_018",name:"",description:"4",cost:2,category:"atk",baseDamage:6,hitCount:4,element:"lightning",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_019:{id:"mg_019",cardTypeId:"mg_019",name:"",description:"2",cost:3,category:"atk",baseDamage:22,element:"lightning",applyEnemyDebuff:[{name:"stun",stacks:1,duration:2}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_020:{id:"mg_020",cardTypeId:"mg_020",name:"",description:"30%",cost:2,category:"atk",baseDamage:15,penetration:.3,element:"lightning",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_021:{id:"mg_021",cardTypeId:"mg_021",name:"",description:"",cost:2,category:"buff",baseDamage:10,element:"lightning",applyPlayerBuff:[{name:"haste",stacks:1,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_022:{id:"mg_022",cardTypeId:"mg_022",name:"",description:"",cost:2,category:"atk",baseDamage:14,isPreemptive:!0,element:"lightning",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_023:{id:"mg_023",cardTypeId:"mg_023",name:"",description:"Guard+15",cost:2,category:"def",guardAmount:15,element:"lightning",applyPlayerBuff:[{name:"reflect",stacks:1,duration:1}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_024:{id:"mg_024",cardTypeId:"mg_024",name:"",description:"0",cost:0,category:"atk",baseDamage:7,element:"lightning",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_025:{id:"mg_025",cardTypeId:"mg_025",name:"",description:"",cost:1,category:"atk",baseDamage:10,element:"dark",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_026:{id:"mg_026",cardTypeId:"mg_026",name:"",description:"3",cost:2,category:"atk",baseDamage:7,hitCount:3,element:"dark",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_027:{id:"mg_027",cardTypeId:"mg_027",name:"",description:"2",cost:2,category:"atk",baseDamage:16,element:"dark",applyEnemyDebuff:[{name:"curse",stacks:2,duration:3}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_028:{id:"mg_028",cardTypeId:"mg_028",name:"",description:"",cost:2,category:"atk",baseDamage:14,element:"dark",applyEnemyDebuff:[{name:"slow",stacks:2,duration:2}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_029:{id:"mg_029",cardTypeId:"mg_029",name:"",description:"25%",cost:2,category:"atk",baseDamage:18,penetration:.25,element:"dark",tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_030:{id:"mg_030",cardTypeId:"mg_030",name:"",description:"30%",cost:2,category:"atk",baseDamage:15,element:"dark",applyPlayerBuff:[{name:"lifesteal",stacks:1,duration:1}],tags:["attack"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_031:{id:"mg_031",cardTypeId:"mg_031",name:"",description:"Guard+18",cost:2,category:"def",guardAmount:18,element:"dark",applyPlayerBuff:[{name:"lifesteal",stacks:1,duration:1}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_032:{id:"mg_032",cardTypeId:"mg_032",name:"",description:"",cost:3,category:"atk",baseDamage:22,element:"dark",applyEnemyDebuff:[{name:"weakness",stacks:1,duration:3}],tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_033:{id:"mg_033",cardTypeId:"mg_033",name:"",description:"",cost:1,category:"atk",baseDamage:11,element:"light",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_034:{id:"mg_034",cardTypeId:"mg_034",name:"",description:"3",cost:2,category:"atk",baseDamage:6,hitCount:3,element:"light",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_035:{id:"mg_035",cardTypeId:"mg_035",name:"",description:"35%",cost:3,category:"atk",baseDamage:25,penetration:.35,element:"light",tags:["attack"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_036:{id:"mg_036",cardTypeId:"mg_036",name:"",description:"0",cost:0,category:"atk",baseDamage:5,element:"light",tags:["attack"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_037:{id:"mg_037",cardTypeId:"mg_037",name:"",description:"HP+15",cost:1,category:"heal",healAmount:15,element:"light",tags:["skill"],rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_038:{id:"mg_038",cardTypeId:"mg_038",name:"",description:"Guard+20",cost:2,category:"def",guardAmount:20,element:"light",applyPlayerBuff:[{name:"regeneration",stacks:1,duration:2}],tags:["guard"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_039:{id:"mg_039",cardTypeId:"mg_039",name:"",description:"1HP+10",cost:2,category:"heal",healAmount:10,element:"light",applyPlayerBuff:[{name:"cleanse",stacks:1,duration:1}],tags:["skill"],rarity:"rare",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"},mg_040:{id:"mg_040",cardTypeId:"mg_040",name:"",description:"2",cost:3,category:"buff",element:"light",applyPlayerBuff:[{name:"immunity",stacks:1,duration:2}],tags:["skill"],rarity:"epic",useCount:0,masteryLevel:0,gemLevel:0,characterClass:"mage"}},Xh=Object.values(Dp),Zi={swordsman:{sw_001:3,sw_003:2,sw_007:2,sw_013:2,sw_037:2,sw_039:2,sw_014:2},mage:{mg_001:3,mg_008:2,mg_009:2,mg_017:2,mg_033:2,mg_007:2,mg_037:2},summoner:{}};function Ap(s){return Zi[s]??Zi.swordsman}const Cs={1:8,2:16,3:24};function $h(s){return s>=Cs[3]?3:s>=Cs[2]?2:s>=Cs[1]?1:0}function Vh(s,r){const o=r.get(s.cardTypeId)??s.useCount,u=$h(o);return{...s,useCount:o,masteryLevel:u}}function Jh(s,r){return s.map(o=>Vh(o,r))}const Ns={easeInQuad:s=>s*s,easeOutQuad:s=>s*(2-s),easeInCubic:s=>s*s*s,easeOutCubic:s=>--s*s*s+1,easeOutBack:s=>1+2.70158*Math.pow(s-1,3)+1.70158*Math.pow(s-1,2)},Zh=({element:s,duration:r,easing:o=Ns.easeOutCubic,from:u={},to:m,onProgress:f,onComplete:h})=>{const b=performance.now();let p,v=!1;const g=N=>{if(v)return;const k=N-b,M=Math.min(k/r,1),D=o(M);Object.entries(m).forEach(([O,j])=>{const R=O,A=u[R],x=Kh(A||"0",j,D);s.style.setProperty(String(R),x)}),f?.(D),M<1?p=requestAnimationFrame(g):h?.()};return p=requestAnimationFrame(g),()=>{v=!0,cancelAnimationFrame(p)}},Kh=(s,r,o)=>{const u=s.match(/^(-?\d+\.?\d*)(.*)$/),m=r.match(/^(-?\d+\.?\d*)(.*)$/);if(u&&m){const f=parseFloat(u[1]),h=parseFloat(m[1]),b=m[2];return`${f+(h-f)*o}${b}`}return r},vl=s=>new Promise(r=>{Zh({...s,onComplete:()=>{s.onComplete?.(),r()}})}),Nu=({container:s,x:r,y:o,count:u=20,color:m="#fff",size:f=4,duration:h=1e3,spread:b=100,gravity:p=.5})=>{for(let v=0;v<u;v++){const g=document.createElement("div");g.style.position="absolute",g.style.left=`${r}px`,g.style.top=`${o}px`,g.style.width=`${f}px`,g.style.height=`${f}px`,g.style.backgroundColor=m,g.style.borderRadius="50%",g.style.pointerEvents="none",g.style.zIndex="9999",g.style.boxShadow=`0 0 ${f*2}px ${m}`,s.appendChild(g);const N=Math.PI*2*v/u,k=Math.random()*b+b/2,M=Math.cos(N)*k;let O=Math.sin(N)*k-b/2;const j=performance.now(),R=A=>{const x=A-j,I=x/h;if(I>=1){g.remove();return}O+=p;const G=r+M*x*.05,X=o+O*x*.05,K=1-I;g.style.left=`${G}px`,g.style.top=`${X}px`,g.style.opacity=`${K}`,requestAnimationFrame(R)};requestAnimationFrame(R)}},Cu=({container:s,x:r,y:o,value:u,color:m="#ff4444",fontSize:f=32,duration:h=1500,isCritical:b=!1})=>{const p=document.createElement("div");p.textContent=b?`${u}!!!`:`${u}`,p.style.position="absolute",p.style.left=`${r}px`,p.style.top=`${o}px`,p.style.fontSize=`${f}px`,p.style.fontWeight="bold",p.style.color=m,p.style.pointerEvents="none",p.style.zIndex="9999",p.style.textShadow=`0 0 10px ${m}, 0 0 20px ${m}`,p.style.fontFamily="monospace",p.style.userSelect="none",p.style.transform="translate(-50%, -50%)",b&&(p.style.fontSize=`${f*1.5}px`,p.style.animation="shake 0.3s"),s.appendChild(p);const v=performance.now(),g=o,N=k=>{const D=(k-v)/h;if(D>=1){p.remove();return}const O=g-100*D,j=1-D,R=1+D*.5;p.style.top=`${O}px`,p.style.opacity=`${j}`,p.style.transform=`translate(-50%, -50%) scale(${R})`,requestAnimationFrame(N)};requestAnimationFrame(N)},up=(s,r=10,o=300)=>{const u=s.style.transform||"",m=performance.now(),f=h=>{const p=(h-m)/o;if(p>=1){s.style.transform=u;return}const v=(Math.random()-.5)*r*(1-p),g=(Math.random()-.5)*r*(1-p);s.style.transform=`${u} translate(${v}px, ${g}px)`,requestAnimationFrame(f)};requestAnimationFrame(f)},ju=5,Fh=.3,Ru=15,Wh=10,e0=8,a0=1.5,t0=.75,n0=.1,s0=.8,l0=.2,i0=.5,c0=.5,r0=50,u0=5,Tp=.5,o0=.05,d0=7,m0=3,f0=4,p0=100,y0=20,g0=3,h0=10,Mp=30,Le={DRAW_INTERVAL:150,DRAW_DURATION:800,DRAW_START_OFFSET_X:100,DRAW_START_OFFSET_Y:150,DRAW_INITIAL_SCALE:.1,DRAW_INITIAL_ROTATION:20,DISCARD_INTERVAL:100,DISCARD_DURATION:500,DISCARD_END_OFFSET_X:100,DISCARD_END_OFFSET_Y:150,DISCARD_ROTATION:25,DISCARD_PARTICLE_COUNT:10,DISCARD_PARTICLE_OPACITY:.6,DISCARD_PARTICLE_SIZE:3,DISCARD_PARTICLE_SPREAD:50,PLAY_DURATION:400,PLAY_FINAL_SCALE:.5,PLAY_FINAL_ROTATION:360,PLAY_TRAIL_INTERVAL:50,PLAY_PARTICLE_COUNT:30,PLAY_PARTICLE_OPACITY:.8,PLAY_PARTICLE_SIZE:5,PLAY_PARTICLE_SPREAD:150,PLAY_Z_INDEX:200,DRAW_Z_INDEX:100},Mt={CRIT_SHAKE_AMPLITUDE:20,NORMAL_SHAKE_AMPLITUDE:10,CRIT_PARTICLE_COUNT:40,NORMAL_PARTICLE_COUNT:20,CRIT_PARTICLE_SIZE:6,NORMAL_PARTICLE_SIZE:4,CRIT_PARTICLE_SPREAD:200,NORMAL_PARTICLE_SPREAD:100,SHAKE_DURATION:300},ln={PARTICLE_COUNT:20,PARTICLE_INTERVAL:30,PARTICLE_DURATION:1e3,PARTICLE_SIZE:8,PARTICLE_Y_OFFSET:50,PARTICLE_FINAL_Y:100,GLOW_BLUR:10},cn={TEXT_FONT_SIZE:28,RING_INITIAL_SIZE:20,RING_BORDER:3,RING_GLOW_BLUR:20,RING_DURATION:800,RING_FINAL_SIZE:200},v0={CONSUMPTION_TIMEOUT:600},b0=()=>{const[s,r]=S.useState([]),[o,u]=S.useState(new Set);return{drawCardsWithAnimation:async(D,O,j=Le.DRAW_INTERVAL)=>{const R=new Set(D.map(x=>x.id));u(x=>new Set([...x,...R])),O(D);const A=Le.DRAW_DURATION+(D.length-1)*j;await new Promise(x=>setTimeout(x,A)),u(x=>{const I=new Set(x);return D.forEach(G=>I.delete(G.id)),I})},discardCardsWithAnimation:async(D,O=Le.DISCARD_INTERVAL,j)=>{if(D.length===0){j&&j();return}const R=[...D].reverse();for(let A=0;A<R.length;A++){const x=R[A];r(I=>[...I,x]),A<R.length-1&&await new Promise(I=>setTimeout(I,O))}await new Promise(A=>setTimeout(A,Le.DISCARD_DURATION)),r([]),j&&j()},applyDrawAnimation:async D=>{const O=D.closest(".battle-screen");if(!O)return;const j=O.getBoundingClientRect(),R=D.getBoundingClientRect(),A=j.width-Le.DRAW_START_OFFSET_X,x=j.height-Le.DRAW_START_OFFSET_Y,I=R.left-j.left,G=R.top-j.top;D.style.position="absolute",D.style.left=`${A}px`,D.style.top=`${x}px`,D.style.opacity="0",D.style.transform=`scale(${Le.DRAW_INITIAL_SCALE}) rotate(${Le.DRAW_INITIAL_ROTATION}deg)`,D.style.zIndex=String(Le.DRAW_Z_INDEX),await vl({element:D,duration:600,easing:Ns.easeOutBack,to:{left:`${I}px`,top:`${G}px`,opacity:"1",transform:"scale(1) rotate(0deg)"}}),D.style.position="",D.style.left="",D.style.top="",D.style.zIndex=""},applyDiscardAnimation:async D=>{const O=D.closest(".battle-screen");if(!O)return;const j=O.getBoundingClientRect(),R=D.getBoundingClientRect(),A=R.left-j.left,x=R.top-j.top,I=Le.DISCARD_END_OFFSET_X,G=j.height-Le.DISCARD_END_OFFSET_Y;D.style.position="absolute",D.style.left=`${A}px`,D.style.top=`${x}px`,D.style.zIndex=String(Le.DRAW_Z_INDEX),Nu({container:O,x:A+80,y:x+100,count:Le.DISCARD_PARTICLE_COUNT,color:`rgba(100, 100, 255, ${Le.DISCARD_PARTICLE_OPACITY})`,size:Le.DISCARD_PARTICLE_SIZE,spread:Le.DISCARD_PARTICLE_SPREAD}),await vl({element:D,duration:Le.DISCARD_DURATION,easing:Ns.easeInCubic,to:{left:`${I}px`,top:`${G}px`,opacity:"0",transform:`scale(${Le.DRAW_INITIAL_SCALE}) rotate(-${Le.DISCARD_ROTATION}deg)`}})},playCardWithAnimation:async(D,O,j)=>{const R=D.closest(".battle-screen");if(!R){j();return}const A=R.getBoundingClientRect(),x=D.getBoundingClientRect(),I=O.getBoundingClientRect(),G=x.left-A.left,X=x.top-A.top,K=I.left-A.left+I.width/2,ae=I.top-A.top+I.height/2,le=D.cloneNode(!0);le.style.position="absolute",le.style.left=`${G}px`,le.style.top=`${X}px`,le.style.zIndex=String(Le.PLAY_Z_INDEX),le.style.pointerEvents="none",R.appendChild(le),D.style.opacity="0";const T=setInterval(()=>{const z=le.cloneNode(!0);z.style.opacity="0.3",z.style.filter="blur(2px)",z.style.zIndex="199",R.appendChild(z),setTimeout(()=>{z.remove()},200)},Le.PLAY_TRAIL_INTERVAL);await vl({element:le,duration:Le.PLAY_DURATION,easing:Ns.easeInQuad,to:{left:`${K}px`,top:`${ae}px`,transform:`scale(${Le.PLAY_FINAL_SCALE}) rotate(${Le.PLAY_FINAL_ROTATION}deg)`,opacity:String(Le.PLAY_PARTICLE_OPACITY)}}),clearInterval(T),Nu({container:R,x:K,y:ae,count:Le.PLAY_PARTICLE_COUNT,color:`rgba(255, 200, 100, ${Le.PLAY_PARTICLE_OPACITY})`,size:Le.PLAY_PARTICLE_SIZE,spread:Le.PLAY_PARTICLE_SPREAD,gravity:1}),up(O,15,300),le.remove(),D.style.opacity="",j()},showDamageEffect:(D,O,j=!1)=>{const R=D.closest(".battle-screen");if(!R)return;const A=R.getBoundingClientRect(),x=D.getBoundingClientRect(),I=x.left-A.left+x.width/2,G=x.top-A.top+x.height/2;Cu({container:R,x:I,y:G,value:O,color:j?"#ff6600":"#ff4444",isCritical:j}),up(D,j?Mt.CRIT_SHAKE_AMPLITUDE:Mt.NORMAL_SHAKE_AMPLITUDE,Mt.SHAKE_DURATION),Nu({container:R,x:I,y:G,count:j?Mt.CRIT_PARTICLE_COUNT:Mt.NORMAL_PARTICLE_COUNT,color:j?"#ff6600":"#ff4444",size:j?Mt.CRIT_PARTICLE_SIZE:Mt.NORMAL_PARTICLE_SIZE,spread:j?Mt.CRIT_PARTICLE_SPREAD:Mt.NORMAL_PARTICLE_SPREAD})},showHealEffect:(D,O)=>{const j=D.closest(".battle-screen");if(!j)return;const R=j.getBoundingClientRect(),A=D.getBoundingClientRect(),x=A.left-R.left+A.width/2,I=A.top-R.top+A.height/2;Cu({container:j,x,y:I,value:O,color:"#44ff44"});for(let G=0;G<ln.PARTICLE_COUNT;G++)setTimeout(()=>{const X=document.createElement("div");X.style.position="absolute",X.style.left=`${x+(Math.random()-.5)*100}px`,X.style.top=`${I+ln.PARTICLE_Y_OFFSET}px`,X.style.width=`${ln.PARTICLE_SIZE}px`,X.style.height=`${ln.PARTICLE_SIZE}px`,X.style.backgroundColor="#44ff44",X.style.borderRadius="50%",X.style.pointerEvents="none",X.style.zIndex="9999",X.style.boxShadow=`0 0 ${ln.GLOW_BLUR}px #44ff44`,j.appendChild(X),vl({element:X,duration:ln.PARTICLE_DURATION,easing:Ns.easeOutQuad,to:{top:`${I-ln.PARTICLE_FINAL_Y}px`,opacity:"0"}}).then(()=>{X.remove()})},G*ln.PARTICLE_INTERVAL)},showShieldEffect:(D,O)=>{const j=D.closest(".battle-screen");if(!j)return;const R=j.getBoundingClientRect(),A=D.getBoundingClientRect(),x=A.left-R.left+A.width/2,I=A.top-R.top+A.height/2;Cu({container:j,x,y:I,value:O,color:"#4488ff",fontSize:cn.TEXT_FONT_SIZE});const G=document.createElement("div");G.style.position="absolute",G.style.left=`${x}px`,G.style.top=`${I}px`,G.style.width=`${cn.RING_INITIAL_SIZE}px`,G.style.height=`${cn.RING_INITIAL_SIZE}px`,G.style.border=`${cn.RING_BORDER}px solid #4488ff`,G.style.borderRadius="50%",G.style.pointerEvents="none",G.style.zIndex="9999",G.style.transform="translate(-50%, -50%)",G.style.boxShadow=`0 0 ${cn.RING_GLOW_BLUR}px #4488ff`,j.appendChild(G),vl({element:G,duration:cn.RING_DURATION,easing:Ns.easeOutQuad,to:{width:`${cn.RING_FINAL_SIZE}px`,height:`${cn.RING_FINAL_SIZE}px`,opacity:"0"}}).then(()=>{G.remove()})},isNewCard:D=>o.has(D),getDiscardingCards:()=>s}},x0=()=>{const[s,r]=S.useState(""),[o,u]=S.useState(!1);return{turnMessage:s,showTurnMessage:o,showMessage:(h,b=5e3,p)=>{r(h),u(!0),setTimeout(()=>{u(!1),p&&p()},b)},hideMessage:()=>{u(!1),r("")}}};function op(s,r){const o=r.varianceHistory.length>0?r.varianceHistory.reduce((v,g)=>v+g,0)/r.varianceHistory.length:0,u=(Math.random()-.5)*2*ju,m=-o*Fh,f=u+m,h=Math.max(-ju,Math.min(ju,f)),b=Math.round(s*(1+h/100)),p=[...r.varianceHistory,h].slice(-5);return{speed:Math.max(0,b),newRandomState:{varianceHistory:p}}}function S0(s){return s<Ru?1:2+Math.floor((s-Ru)/Wh)}function N0(s,r,o,u){const m=[];if(u<Ru)m.push(s,r);else{for(let f=0;f<o;f++)m.push(s);m.push(r)}return m}function C0(s,r){const o=Math.abs(s-r),u=s>=r?"player":"enemy",m=u==="player"?"enemy":"player",f=S0(o),h=N0(u,m,f,o),b=[];for(;b.length<e0;)b.push(...h);return{queue:{phases:b,currentIndex:0},playerSpeed:s,enemySpeed:r,speedDifference:o,consecutivePhases:f,fasterActor:u}}function Bi(){return{varianceHistory:[]}}function j0(s){let r=r0;if(s.has("haste")){const o=s.get("haste");r+=o.value}if(s.has("superFast")){const o=s.get("superFast");r+=o.value}if(s.has("slow")){const o=s.get("slow");r-=o.value}if(s.has("stall")){const o=s.get("stall");r-=o.value}return Math.max(0,r)}function _0(s,r){let o=s.baseSpeed;if(r.has("haste")){const u=r.get("haste");o+=u.value}else if(r.has("superFast")){const u=r.get("superFast");o+=u.value}else if(r.has("slow")){const u=r.get("slow");o-=u.value}else if(r.has("stall")){const u=r.get("stall");o-=u.value}return Math.max(0,o)}function E0(s){const[r,o]=S.useState(null),[u,m]=S.useState(0),[f,h]=S.useState(1),[b,p]=S.useState(!1),[v,g]=S.useState(!1),[N,k]=S.useState(s),[M,D]=S.useState(0),[O,j]=S.useState(Bi()),[R,A]=S.useState(Bi()),x=S.useCallback((F,de,ce)=>{const B=j0(F),Z=de?_0(de,ce):0,V=op(B,O),W=op(Z,R);j(V.newRandomState),A(W.newRandomState),k(V.speed),D(W.speed);const re=C0(V.speed,W.speed);return o(re.queue),m(0),re.queue},[O,R]),I=S.useCallback(()=>{m(F=>F+1)},[]),G=S.useCallback(F=>{m(F)},[]),X=S.useCallback(()=>{p(!0),g(!1)},[]),K=S.useCallback(()=>{p(!1),g(!0)},[]),ae=S.useCallback(()=>{p(!1),g(!1)},[]),le=S.useCallback(()=>{h(F=>F+1)},[]),be=S.useCallback(()=>{o(null),m(0),h(1),p(!1),g(!1),j(Bi()),A(Bi())},[]),T=S.useCallback(()=>r?u>=r.phases.length:!0,[r,u]),z=S.useCallback(()=>!r||u>=r.phases.length?null:r.phases[u],[r,u]);return{phaseQueue:r,currentPhaseIndex:u,phaseCount:f,isPlayerPhase:b,isEnemyPhase:v,playerSpeed:N,enemySpeed:M,generatePhaseQueueFromSpeeds:x,advancePhaseIndex:I,setPhaseIndex:G,setPlayerPhaseActive:X,setEnemyPhaseActive:K,clearActivePhase:ae,incrementPhaseCount:le,resetPhaseState:be,isRoundComplete:T,getCurrentActor:z}}const ye={bleed:{name:"Bleed",nameJa:"",value:3,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`${ye.bleed.value}% maxHP damage per card use`},poison:{name:"Poison",nameJa:"",value:5,isDebuff:!0,isPercentage:!1,stackable:!0,description:()=>`${ye.poison.value} damage at turn end`},burn:{name:"Burn",nameJa:"",value:3,isDebuff:!0,isPercentage:!1,stackable:!0,description:()=>`${ye.burn.value} damage at turn end`},curse:{name:"Curse",nameJa:"",value:20,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`Healing -${ye.curse.value}%`},overCurse:{name:"Heavy Curse",nameJa:"",value:50,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`Healing -${ye.overCurse.value}%`},stagger:{name:"stagger",nameJa:"",value:100,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>"Cannot act"},stun:{name:"Stun",nameJa:"",value:100,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>"Skip next turn"},freeze:{name:"Freeze",nameJa:"",value:100,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>"Cannot act (ice)"},atkDownMinor:{name:"Minor Atk Down",nameJa:"",value:15,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Attack -${ye.atkDownMinor.value}%`},atkDownMajor:{name:"Major Atk Down",nameJa:"",value:30,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Attack -${ye.atkDownMajor.value}%`},defDownMinor:{name:"Minor Def Down",nameJa:"",value:15,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Defense -${ye.defDownMinor.value}%`},defDownMajor:{name:"Major Def Down",nameJa:"",value:30,isDebuff:!0,isPercentage:!0,stackable:!1,description:()=>`Defense -${ye.defDownMajor.value}%`},weakness:{name:"Weakness",nameJa:"",value:20,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`All stats -${ye.weakness.value}%`},prostoration:{name:"Prostoration",nameJa:"",value:50,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`All stats -${ye.prostoration.value}%`},slow:{name:"Slow",nameJa:"",value:10,isDebuff:!0,isPercentage:!1,stackable:!0,description:()=>`Speed -${ye.slow.value}`},stall:{name:"Stall",nameJa:"",value:15,isDebuff:!0,isPercentage:!0,stackable:!0,description:()=>`Speed -${ye.stall.value}`},atkUpMinor:{name:"Minor Atk Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Attack +${ye.atkUpMinor.value}%`},atkUpMajor:{name:"Major Atk Up",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Attack +${ye.atkUpMajor.value}%`},defUpMinor:{name:"Minor Def Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Defense +${ye.defUpMinor.value}%`},defUpMajor:{name:"Major Def Up",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Defense +${ye.defUpMajor.value}%`},penetrationUp:{name:"Penetration Up",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Penetration +${ye.penetrationUp.value}%`},hitRateUp:{name:"Hit Rate Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Hit rate +${ye.hitRateUp.value}%`},criticalUp:{name:"Critical Up",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Critical damage +${ye.criticalUp.value}%`},haste:{name:"Haste",nameJa:"",value:15,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Speed +${ye.haste.value}`},superFast:{name:"Super Fast",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Speed +${ye.superFast.value}`},regeneration:{name:"Regeneration",nameJa:"",value:5,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>`Heal ${ye.regeneration.value} HP per turn`},shieldRegen:{name:"Iron Stance",nameJa:"",value:5,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>`Guard +${ye.shieldRegen.value} per turn`},reflect:{name:"Reflect",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Reflect ${ye.reflect.value}% damage`},immunity:{name:"Immunity",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Immune to damage"},energyRegen:{name:"Energy Regen",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>`Energy +${ye.energyRegen.value}`},drawPower:{name:"Draw Power",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Draw +1 card"},costReduction:{name:"Cost Reduction",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Cost -1"},lifesteal:{name:"Lifesteal",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Heal ${ye.lifesteal.value}% of damage dealt`},doubleStrike:{name:"Double Strike",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>"Next ATK card triggers twice"},swordEnergyGain:{name:"Sword Energy Amp",nameJa:"",value:3,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Sword energy gain +${ye.swordEnergyGain.value}%`},elementalMastery:{name:"Elemental Mastery",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Elemental damage +${ye.elementalMastery.value}%`},fireField:{name:"Fire Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Fire card effects +${ye.fireField.value}%`},electroField:{name:"Electric Field",nameJa:"",value:10,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`+${ye.electroField.value} damage per lightning card`},iceField:{name:"Ice Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Ice damage +${ye.iceField.value}%`},darkField:{name:"Dark Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Dark damage +${ye.darkField.value}%`},lightField:{name:"Light Field",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!1,description:()=>`Light damage +${ye.lightField.value}%`},summonPower:{name:"Summon Power",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Summon power +${ye.summonPower.value}%`},sacrificeBonus:{name:"Sacrifice Bonus",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Sacrifice effect +${ye.sacrificeBonus.value}%`},focus:{name:"Focus",nameJa:"",value:50,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Next card effect +${ye.focus.value}%`},momentum:{name:"Momentum",nameJa:"",value:5,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`Attack +${ye.momentum.value}% per card used`},cleanse:{name:"Cleanse",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Remove 1 debuff at turn end"},tenacity:{name:"Tenacity",nameJa:"",value:30,isDebuff:!1,isPercentage:!0,stackable:!0,description:()=>`All stats +${ye.tenacity.value}% when HP < 30%`},lastStand:{name:"Last Stand",nameJa:"",value:1,isDebuff:!1,isPercentage:!1,stackable:!0,description:()=>"Survive lethal damage once"}},D0={burn:"",bleed:"",poison:"",curse:"",overCurse:"",stagger:"",stun:"",freeze:"",atkDownMinor:"",atkDownMajor:"",defDownMinor:"",defDownMajor:"",weakness:"",prostoration:"",slow:"",stall:"",atkUpMinor:"",atkUpMajor:"",defUpMinor:"",defUpMajor:"",penetrationUp:"",hitRateUp:"",criticalUp:"",haste:"",superFast:"",regeneration:"",shieldRegen:"",reflect:"",immunity:"",energyRegen:"",drawPower:"",costReduction:"",lifesteal:"",doubleStrike:"",swordEnergyGain:"",elementalMastery:"",fireField:"",electroField:"",iceField:"",darkField:"",lightField:"",summonPower:"",sacrificeBonus:"",focus:"",momentum:"",cleanse:"",tenacity:"",lastStand:""};function A0(s){let r=1;if(s.has("atkUpMinor")){const o=s.get("atkUpMinor");r+=o.value/100}if(s.has("atkUpMajor")){const o=s.get("atkUpMajor");r+=o.value/100}if(s.has("momentum")){const o=s.get("momentum");r+=o.value/100*o.stacks}if(s.has("atkDownMinor")){const o=s.get("atkDownMinor");r*=1-o.value/100}if(s.has("atkDownMajor")){const o=s.get("atkDownMajor");r*=1-o.value/100}return r}function T0(s){let r=1,o=1;if(s.has("defUpMinor")){const u=s.get("defUpMinor");o*=1-u.value/100}if(s.has("defUpMajor")){const u=s.get("defUpMajor");o*=1-u.value/100}if(s.has("defDownMinor")){const u=s.get("defDownMinor");r*=1+u.value/100}if(s.has("defDownMajor")){const u=s.get("defDownMajor");r*=1+u.value/100}if(s.has("tenacity")){const u=s.get("tenacity");r>1&&(r=1+(r-1)*(1-u.value/100))}return{vulnerabilityMod:r,damageReductionMod:o}}function M0(s){let r=n0;if(s.has("criticalUp")){const o=s.get("criticalUp");r+=o.value/100}return Math.min(s0,r)}function w0(s,r){let o=0;if(s.has("reflect")){const u=s.get("reflect");o=Math.floor(r*(u.value/100))}return o}const wp=s=>{let r=0,o=0;return s.forEach(u=>{switch(u.name){case"regeneration":r+=u.value*u.stacks;break;case"shieldRegen":o+=u.value*u.stacks;break}}),s.has("curse")&&(r=Math.floor(r*l0)),s.has("overCurse")&&(r=Math.floor(r*i0)),{hp:r,shield:o}};function R0(s,r){let o=0;if(s.has("lifesteal")){const u=s.get("lifesteal");o=Math.floor(r*(u.value/100))}return o}const Rp=s=>{let r=0;return s.forEach(o=>{switch(o.name){case"burn":r+=o.value,s.has("fireField")&&(r+=o.value*c0);break;case"poison":r+=o.value;break}}),r},k0=s=>!s.has("stun"),q0=s=>{let r=0;return s.forEach(o=>{o.name==="drawPower"&&(r+=o.value*o.stacks)}),r};function dp(s,r,o="environment"){const u=ye[s.name];return{name:s.name,stacks:u.stackable?s.stacks:1,duration:s.duration,value:u.value,isPermanent:s.isPermanent??!1,source:r,appliedBy:o}}const ku=(s,r,o,u,m,f=!1,h,b="environment")=>{const p=new Map(s),v=p.get(r);return v?p.set(r,{...v,stacks:v.stacks+m,duration:Math.max(v.duration,o),value:Math.max(v.value,u)}):p.set(r,{name:r,stacks:m,duration:o,value:u,isPermanent:f,source:h,appliedBy:b}),p},L0=s=>{const r=new Map;return s.forEach((o,u)=>{ye[u].isDebuff||r.set(u,o)}),r},kp=(s,r)=>{const o=new Map;return s.forEach((u,m)=>{if(u.isPermanent){o.set(m,u);return}(u.appliedBy??"environment")===r?u.duration>1&&o.set(m,{...u,duration:u.duration-1}):o.set(m,u)}),o};function G0(s){const{playerBuffs:r,drawPile:o,discardPile:u,baseDrawCount:m=u0}=s;let f=kp(r,"player");const{hp:h,shield:b}=wp(r),p=r.has("cleanse");p&&(f=L0(f));const v=q0(r),g=m+v,{drawnCards:N,newDrawPile:k,newDiscardPile:M}=Ep(g,o,u),D=M.length===0&&u.length>0;return{newBuffs:f,shouldCleanse:p,healAmount:h,shieldAmount:b,drawCount:g,drawnCards:N,newDrawPile:k,newDiscardPile:M,needsShuffle:D}}function O0(s){const{playerBuffs:r}=s,o=Rp(r);let u=new Map(r);if(u.has("momentum")){const m=u.get("momentum");u.set("momentum",{...m,stacks:m.stacks+1})}return{dotDamage:o,newBuffs:u}}function U0(s,r,o){return Math.min(o,r+s)}const mp=new Map;function qu(s,r,o){const u=o.baseDamage||0,m=s.buffDebuffs??mp,f=r.buffDebuffs??mp,h=A0(m);let b=1,p=!1;if(m.has("criticalUp")){const O=M0(m);if(p=Math.random()<O,p){b=a0;const j=m.get("criticalUp");b+=j.value/100}}const v=Math.floor(u*h*b),{vulnerabilityMod:g,damageReductionMod:N}=T0(f),k=Math.floor(v*g*N),M=w0(f,k),D=R0(m,k);return{finalDamage:k,isCritical:p,reflectDamage:M,lifestealAmount:D}}function qp(s,r,o=!1){let u=r,m=0,f=0,h=0;if(s.guard>0){if(s.guard>=u&&s.ap<=0)return m=u,h=Math.floor(u*t0),u=0,{guardDamage:m,apDamage:f,hpDamage:h};if(s.guard>=u)return m=u,u=0,{guardDamage:m,apDamage:0,hpDamage:0};m=s.guard,u-=s.guard}if(s.ap>0){if(s.ap>=u)return f=u,u=0,{guardDamage:m,apDamage:f,hpDamage:0};f=s.ap,u-=s.ap}return u>0&&(h=u),{guardDamage:m,apDamage:f,hpDamage:h}}function Xu(s,r){return r.has("bleed")?Math.floor(s*o0):0}const Lp={id:"depth1_hound",name:"Corrupted Hound",nameJa:"",description:"",baseMaxHp:40,baseMaxAp:0,baseSpeed:40,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:7,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"debuff",baseDamage:7,applyDebuffs:[{name:"poison",stacks:1,duration:2,value:3,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:7,displayIcon:"",priority:0,energyCost:1},probability:.5},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:7,applyDebuffs:[{name:"poison",stacks:1,duration:2,value:3,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.5}]},Gp={id:"depth1_crow",name:"Mutated Carrion Crow",nameJa:"",description:"",baseMaxHp:35,baseMaxAp:0,baseSpeed:55,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:0,action:{name:"",type:"attack",baseDamage:5,hitCount:2,displayIcon:"",priority:0,energyCost:1},probability:.8},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:3,applyDebuffs:[{name:"defDownMajor",stacks:1,duration:3,value:30,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.2}]},Op={id:"depth1_skeleton",name:"Bone Wanderer",nameJa:"",description:"",baseMaxHp:38,baseMaxAp:0,baseSpeed:35,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:6,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"attack",baseDamage:6,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:3,action:{name:"",type:"debuff",baseDamage:10,applyDebuffs:[{name:"slow",stacks:1,duration:1,value:10,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:6,displayIcon:"",priority:0,energyCost:1}}]},Up={id:"depth1_shadow",name:"Shadow Crawler",nameJa:"",description:"",baseMaxHp:25,baseMaxAp:0,baseSpeed:60,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"debuff",baseDamage:6,applyDebuffs:[{name:"atkDownMinor",stacks:1,duration:3,value:15,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1},probability:.5},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:6,applyDebuffs:[{name:"atkDownMinor",stacks:1,duration:3,value:15,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.5}]},zp={id:"depth1_flesh_eater",name:"Flesh Eater",nameJa:"",description:"",baseMaxHp:18,baseMaxAp:0,baseSpeed:45,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:0,condition:(s,r)=>s>r*.5,action:{name:"",type:"attack",baseDamage:5,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s<=r*.5,action:{name:"",type:"attack",baseDamage:7,displayIcon:"",priority:1,energyCost:1}}]},Bp={id:"depth1_rusty_swordsman",name:"Rusty Swordsman",nameJa:"",description:"",baseMaxHp:30,baseMaxAp:0,baseSpeed:50,startingGuard:!0,actEnergy:1,aiPatterns:[{phaseNumber:1,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:3,action:{name:"",type:"attack",baseDamage:6,hitCount:2,displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}}]},Hp={id:"depth1_poison_spider",name:"Poison Spider",nameJa:"",description:"",baseMaxHp:28,baseMaxAp:0,baseSpeed:48,startingGuard:!1,actEnergy:1,aiPatterns:[{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:4,applyDebuffs:[{name:"poison",stacks:1,duration:1,value:3,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1},probability:.8},{phaseNumber:0,action:{name:"",type:"debuff",baseDamage:2,applyDebuffs:[{name:"stun",stacks:1,duration:1,value:0,isPermanent:!1}],displayIcon:"",priority:2,energyCost:1},probability:.2}]},Ip={id:"depth1_boss",name:"Fallen Guardian",nameJa:"",description:"",baseMaxHp:120,baseMaxAp:0,baseSpeed:55,startingGuard:!0,actEnergy:1,aiPatterns:[{phaseNumber:1,condition:(s,r)=>s>r*.66,action:{name:"",type:"attack",baseDamage:12,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:2,condition:(s,r)=>s>r*.66,action:{name:"",type:"buff",baseDamage:0,guardGain:20,displayIcon:"",priority:1,energyCost:1}},{phaseNumber:3,condition:(s,r)=>s>r*.66,action:{name:"",type:"attack",baseDamage:15,displayIcon:"",priority:2,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s>r*.66,action:{name:"",type:"attack",baseDamage:12,displayIcon:"",priority:0,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s>r*.34&&s<=r*.65,action:{name:"",type:"debuff",baseDamage:12,applyDebuffs:[{name:"bleed",stacks:1,duration:2,value:5,isPermanent:!1}],displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,condition:(s,r)=>s<=r*.33,action:{name:"",type:"attack",baseDamage:18,displayIcon:"",priority:2,energyCost:1},probability:.5}]},bs={normal:[Lp,Gp,Op,Up],groups:[{enemy:zp,count:3},{enemy:Bp,count:2},{enemy:Hp,count:4}],boss:Ip},z0=[Lp,Gp,Op,Up,zp,Bp,Hp,Ip];function ac(s,r,o,u,m){const f=s.aiPatterns?.filter(g=>{const N=g.phaseNumber===0||g.phaseNumber===u,k=!g.condition||g.condition(r,o);return N&&k});if(f.length===0)return{name:"",type:"attack",baseDamage:5};let h=0;const b=f.map(g=>{const N=g.probability??1;return h+=N,{pattern:g,probability:N}}),p=Math.random()*h;let v=0;for(const{pattern:g,probability:N}of b)if(v+=N,p<=v)return g.action;return f[0].action}function B0(s){const r=s.baseDamage&&s.baseDamage>0?["attack"]:["skill"];return{id:`enemy_action_${s.name}`,cardTypeId:`enemy_action_${s.name}`,name:s.name,description:"",characterClass:"common",cost:0,category:"atk",baseDamage:s.baseDamage,tags:r,rarity:"common",useCount:0,masteryLevel:0,gemLevel:0,applyEnemyDebuff:s.applyDebuffs?.map(o=>({name:o.name,stacks:o.stacks,duration:o.duration,value:o.value,isPermanent:o.isPermanent}))}}function Yp(s,r="normal"){if(s!==1)throw new Error(`Depth ${s} enemies are not implemented yet`);switch(r){case"normal":return{enemies:[bs.normal[Math.floor(Math.random()*bs.normal.length)]],isBoss:!1};case"group":{const o=bs.groups[Math.floor(Math.random()*bs.groups.length)];return{enemies:Array(o.count).fill(o.enemy),isBoss:!1}}case"boss":return{enemies:[bs.boss],isBoss:!0};default:return{enemies:[bs.normal[0]],isBoss:!1}}}function H0(s){const{enemy:r,enemyBuffs:o}=s,u=kp(o,"enemy"),{hp:m,shield:f}=wp(o),h=r.startingGuard?Math.floor(r.baseMaxAp*Tp):0,b=r.actEnergy,p=k0(o);return{newBuffs:u,healAmount:m,shieldAmount:f,guardReset:h,energyReset:b,canPerformAction:p}}function I0(s){const{enemyBuffs:r}=s;return{dotDamage:Rp(r)}}function Pp(s,r,o){if(o.guardGain&&o.guardGain>0&&!o.baseDamage)return{totalDamage:0,guardDamage:0,apDamage:0,hpDamage:0,isCritical:!1,reflectDamage:0};const u=B0(o),m=qu(s,r,u),f=qp(r,m.finalDamage);return{totalDamage:m.finalDamage,guardDamage:f.guardDamage,apDamage:f.apDamage,hpDamage:f.hpDamage,isCritical:m.isCritical,reflectDamage:m.reflectDamage}}function Qp(s,r){if(r.length===0)return s;let o=s;return r.forEach(u=>{o=ku(o,u.name,u.duration,u.value,u.stacks,u.isPermanent,u.source,"enemy")}),o}const Qi=(s,r,o)=>Math.min(o,r+s);async function Xp(s,r,o,u,m,f,h){let b=m;const p=[];for(;b>0;){const v=ac(s,r,o,u),g=v.energyCost??1;if(g>b){const N=$p(b);N&&p.push(N);break}p.push(v),b-=g}for(let v=0;v<p.length&&!(h()||(await f(p[v]),v<p.length-1&&await Y0(800),h()));v++);}function $p(s){return s>=1?{name:"",type:"attack",baseDamage:5,displayIcon:"",priority:0,energyCost:1}:null}function Y0(s){return new Promise(r=>setTimeout(r,s))}function Lu(s,r,o,u){const m=s.actEnergy,f=[];let h=m;for(;h>0;){const b=ac(s,r,o,u),p=b.energyCost??1;if(p>h){const v=$p(h);v&&f.push(v);break}f.push(b),h-=p}return f}function P0(){const s=S.useCallback(async o=>{await new Promise(m=>o.showMessage("Player Phase",2500,m)),o.phaseState.setPlayerPhaseActive(),o.phaseState.incrementPhaseCount();const u=G0({playerBuffs:o.playerBuffs,drawPile:o.deckStateRef.current.drawPile,discardPile:o.deckStateRef.current.discardPile});o.setPlayerGuard(0),o.setPlayerEnergy(o.maxEnergy),o.setPlayerBuffs(u.newBuffs),u.healAmount>0&&(o.setPlayerHp(m=>U0(u.healAmount,m,o.playerMaxHp)),o.playerRef.current&&o.showHealEffect(o.playerRef.current,u.healAmount),await new Promise(m=>setTimeout(m,500))),u.shieldAmount>0&&(o.setPlayerGuard(m=>m+u.shieldAmount),o.playerRef.current&&o.showShieldEffect(o.playerRef.current,u.shieldAmount),await new Promise(m=>setTimeout(m,500))),o.drawnCardsRef.current=u.drawnCards,o.dispatch({type:"SET_PILES",newDrawPile:u.newDrawPile,newDiscardPile:u.newDiscardPile}),u.needsShuffle?o.setIsShuffling(!0):u.drawnCards.length>0&&o.setIsDrawingAnimation(!0)},[]),r=S.useCallback(async o=>{await new Promise(p=>o.showMessage("Enemy Phase",2500,p)),o.phaseState.setEnemyPhaseActive(),o.phaseState.incrementPhaseCount();const u=H0({enemy:o.currentEnemy,enemyBuffs:o.enemyBuffs});if(o.setEnemyGuard(u.guardReset),o.setEnemyEnergy(u.energyReset),o.setEnemyBuffs(u.newBuffs),u.healAmount>0&&(o.setEnemyHp(p=>Qi(u.healAmount,p,o.enemyMaxHp)),await new Promise(p=>setTimeout(p,500))),u.shieldAmount>0&&(o.setEnemyGuard(p=>p+u.shieldAmount),await new Promise(p=>setTimeout(p,500))),!u.canPerformAction){await new Promise(p=>setTimeout(p,1500)),o.phaseState.clearActivePhase();return}await new Promise(p=>setTimeout(p,800));const m=()=>o.playerHp<=0||o.enemyHp<=0,f=async p=>{if(p.guardGain&&p.guardGain>0&&!p.baseDamage){o.setEnemyGuard(N=>N+p.guardGain);return}const v=p.hitCount||1;for(let N=0;N<v;N++){const k=Pp(o.enemyStats,o.playerStats,p);if(o.setPlayerGuard(M=>Math.max(0,M-k.guardDamage)),o.setPlayerAp(M=>Math.max(0,M-k.apDamage)),o.setPlayerHp(M=>Math.max(0,M-k.hpDamage)),o.playerRef.current&&o.showDamageEffect(o.playerRef.current,k.totalDamage,!1),k.reflectDamage>0){o.setEnemyHp(D=>Math.max(0,D-k.reflectDamage));const M=o.getTargetEnemyRef();M&&o.showDamageEffect(M,k.reflectDamage,!1)}o.setBattleStats(M=>({...M,damageTaken:M.damageTaken+k.totalDamage})),N<v-1&&await new Promise(M=>setTimeout(M,500))}if(p.applyDebuffs&&p.applyDebuffs.length>0){const N=Qp(o.playerBuffs,p.applyDebuffs);o.setPlayerBuffs(N)}const g=Xu(o.enemyMaxHp,o.enemyBuffs);if(g>0){o.setEnemyHp(k=>Math.max(0,k-g));const N=o.getTargetEnemyRef();N&&o.showDamageEffect(N,g,!1),await new Promise(k=>setTimeout(k,300))}},h=o.enemies[0]?.turnCount??1;await Xp(o.currentEnemy,o.enemyHp,o.enemyMaxHp,h,o.enemyEnergy,f,m),await new Promise(p=>setTimeout(p,800));const b=I0({enemyBuffs:o.enemyBuffs});if(b.dotDamage>0){o.setEnemyHp(v=>Math.max(0,v-b.dotDamage));const p=o.getTargetEnemyRef();p&&o.showDamageEffect(p,b.dotDamage,!1),await new Promise(v=>setTimeout(v,500))}o.phaseState.clearActivePhase()},[]);return{executePlayerPhase:s,executeEnemyPhase:r}}function Q0(s){return""}function X0(s){return""}function $0(s){return""}const V0=()=>[{...rn.sw_001,id:"deck_sw_001_1"},{...rn.sw_001,id:"deck_sw_001_2"},{...rn.sw_002,id:"deck_sw_002_1"},{...rn.sw_002,id:"deck_sw_002_2"},{...rn.sw_003,id:"deck_sw_003_1"}],Ea={playerClass:"swordsman",classGrade:Q0(),level:1,hp:100,maxHp:110,ap:30,maxAp:30,guard:0,speed:50,cardActEnergy:3,gold:0,deck:V0(),equipment:[],buffDebuffs:new Map,equipmentAtkPercent:0,equipmentDefPercent:0},J0={playerClass:"mage",classGrade:X0(),level:1,hp:60,maxHp:60,ap:30,maxAp:30,guard:0,speed:50,cardActEnergy:3,gold:0,deck:[],equipment:[],buffDebuffs:new Map,equipmentAtkPercent:0,equipmentDefPercent:0},Z0={playerClass:"summoner",classGrade:$0(),level:1,hp:100,maxHp:100,ap:30,maxAp:30,guard:0,speed:50,cardActEnergy:3,gold:0,deck:[],equipment:[],equipmentAtkPercent:0,equipmentDefPercent:0,buffDebuffs:new Map};function K0(s){return`${s}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function F0(){return new Map}function Xi(s,r){const o=F0();return{instanceId:K0(s.id),definitionId:s.id,definition:s,hp:s.baseMaxHp,maxHp:s.baseMaxHp,ap:s.baseMaxAp,maxAp:s.baseMaxAp,guard:s.startingGuard?Math.floor(s.baseMaxAp*Tp):0,speed:s.baseSpeed,buffDebuffs:o,energy:s.actEnergy,phaseCount:0,turnCount:0,ref:r??S.createRef()}}function W0(s,r,o=Ea.speed,u){const[m]=S.useState(u?.name??""),[f]=S.useState(u?.playerClass??Ea.playerClass),[h]=S.useState(u?.classGrade??Ea.classGrade),[b,p]=S.useState(u?.currentHp??Ea.hp),[v]=S.useState(u?.maxHp??Ea.maxHp),[g,N]=S.useState(u?.currentAp??Ea.ap),[k]=S.useState(u?.maxAp??Ea.maxAp),[M,D]=S.useState(Ea.guard),[O,j]=S.useState(u?.cardActEnergy??Ea.cardActEnergy),[R]=S.useState(u?.cardActEnergy??Ea.cardActEnergy),[A,x]=S.useState(new Map),[I,G]=S.useState(()=>{if(r&&r.length>0)return r.map(fe=>Xi(fe));const{enemies:te}=Yp(s,"normal");return te.map(fe=>Xi(fe))}),[X,K]=S.useState(I[0]?.energy??1),ae=I[0]?.definition,le=I[0]?.hp??0,be=I[0]?.maxHp??0,T=I[0]?.ap??0,z=I[0]?.maxAp??0,F=I[0]?.guard??0,de=S.useMemo(()=>I[0]?.buffDebuffs??new Map,[I]),ce=S.useMemo(()=>I.filter(te=>te.hp>0),[I]),B=b>0,Z=S.useMemo(()=>I.every(te=>te.hp<=0),[I]),V=S.useMemo(()=>({hp:b,maxHp:v,ap:g,maxAp:k,guard:M,energy:O,maxEnergy:R,buffs:A,name:m??"",playerClass:f,classGrade:h}),[b,v,g,k,M,O,R,A,m,f,h]),W=S.useCallback(te=>{p(fe=>Math.max(0,Math.min(fe+te,v)))},[v]),re=S.useCallback(te=>{p(fe=>{const Re=typeof te=="function"?te(fe):te;return Math.max(0,Math.min(Re,v))})},[v]),_=S.useCallback(te=>{N(fe=>Math.max(0,Math.min(fe+te,k)))},[k]),Y=S.useCallback(te=>{N(fe=>{const Re=typeof te=="function"?te(fe):te;return Math.max(0,Re)})},[]),J=S.useCallback(te=>{D(fe=>{const Re=typeof te=="function"?te(fe):te;return Math.max(0,Re)})},[]),ee=S.useCallback(te=>{j(fe=>{const Re=typeof te=="function"?te(fe):te;return Math.max(0,Math.min(Re,R))})},[R]),oe=S.useCallback(te=>{x(fe=>typeof te=="function"?te(fe):te)},[]),me=S.useCallback(()=>{D(0)},[]),ge=S.useCallback(()=>{j(R)},[R]),Me=S.useCallback((te,fe)=>{G(Re=>Re.map((ya,Fa)=>Fa===te?{...ya,...fe}:ya))},[]),Se=S.useCallback((te,fe)=>{G(Re=>Re.map((ya,Fa)=>Fa===te?{...ya,...fe(ya)}:ya))},[]),Ua=S.useCallback(te=>{G(fe=>fe.map(Re=>({...Re,...te(Re)})))},[]),za=S.useCallback(te=>{G(fe=>fe.filter((Re,ya)=>ya!==te))},[]),Ka=S.useCallback(te=>{Se(0,fe=>({hp:typeof te=="function"?te(fe.hp):te}))},[Se]),wt=S.useCallback(te=>{Se(0,fe=>({ap:typeof te=="function"?te(fe.ap):te}))},[Se]),da=S.useCallback(te=>{Se(0,fe=>({guard:typeof te=="function"?te(fe.guard):te}))},[Se]),Ba=S.useCallback(te=>{Se(0,fe=>({buffDebuffs:typeof te=="function"?te(fe.buffDebuffs):te}))},[Se]),rt=S.useMemo(()=>({hp:b,maxHp:v,ap:g,maxAp:k,guard:M,speed:o,buffDebuffs:A}),[b,v,g,k,M,o,A]),ha=S.useMemo(()=>({hp:le,maxHp:be,ap:T,maxAp:z,guard:F,speed:ae?.baseSpeed??0,buffDebuffs:de}),[le,be,T,z,F,de,ae?.baseSpeed]),pa=S.useCallback(te=>{const fe=Array.isArray(te)?te:[te];G(fe.map(Re=>Xi(Re))),K(fe[0]?.actEnergy??1),D(0),x(new Map),j(R)},[R]);return{playerState:V,updatePlayerHp:W,setPlayerHp:re,updatePlayerAp:_,setPlayerAp:Y,setPlayerGuard:J,setPlayerEnergy:ee,setPlayerBuffs:oe,resetPlayerGuard:me,resetPlayerEnergy:ge,enemies:I,currentEnemy:ae,updateEnemyState:Me,updateEnemyByUpdater:Se,updateAllEnemies:Ua,setEnemies:G,removeEnemy:za,setEnemyHp:Ka,setEnemyAp:wt,setEnemyGuard:da,setEnemyBuffs:Ba,aliveEnemies:ce,isPlayerAlive:B,areAllEnemiesDead:Z,enemyHp:le,enemyMaxHp:be,enemyAp:T,enemyMaxAp:z,enemyGuard:F,enemyBuffs:de,enemyEnergy:X,setEnemyEnergy:K,playerBattleStats:rt,enemyBattleStats:ha,resetForNextEnemy:pa}}function ev(){return{success:!1,damageDealt:0,guardGained:0,healingDone:0,energyConsumed:0,swordEnergyChange:0,swordEnergyConsumed:0,buffsApplied:[],debuffsApplied:[],cardsDrawn:0,isCritical:!1,lifestealAmount:0,reflectDamage:0,bleedDamage:0}}function Vp(s){if(!s.baseDamage)return 0;let r=s.baseDamage;const o=1+s.masteryLevel*.1;return r*=o+s.gemLevel*.5,Math.round(r)}function av(s){return s>=Cs[3]?3:s>=Cs[2]?2:s>=Cs[1]?1:0}function tv(s){const r=s.useCount+1,o=av(r);return{...s,useCount:r,masteryLevel:o}}function nv(s,r,o){return o&&s.cost<=r}function fp(s){const r=Vp(s),o={};switch(s.category){case"atk":o.damageToEnemy=r;break;case"def":o.shieldGain=r;break;case"heal":o.hpGain=r;break}return s.applyEnemyDebuff&&s.applyEnemyDebuff.length>0&&(o.enemyDebuffs=s.applyEnemyDebuff.map(u=>dp(u,s.id))),s.applyPlayerBuff&&s.applyPlayerBuff.length>0&&(o.playerBuffs=s.applyPlayerBuff.map(u=>dp(u,s.id))),o}const xs={initialize(){return Ji()},onCardPlay(s,r){if(r.characterClass!=="swordsman"&&r.characterClass!=="common")return s;if(r.swordEnergyConsume!==void 0&&r.swordEnergyConsume>0){const u=Math.min(s.current,r.swordEnergyConsume);return{...s,current:s.current-u}}if(r.swordEnergyConsume===0&&r.swordEnergyMultiplier!==void 0)return{...s,current:0};const o=r.swordEnergyGain??sv(r.cost,r.category==="swordEnergy");return o>0?Jp(s,o):s},onTurnStart(s){return s},onTurnEnd(s){return s},getDamageModifier(s,r){const o=uv(s.current);return{flatBonus:s.current*2,percentMultiplier:1,critBonus:o.critBonus,penetration:o.penetration}},canPerformAction(s,r){switch(r){case"consume_3":return s.current>=3;case"consume_5":return s.current>=5;case"consume_all":return s.current>0;case"max_energy_attack":return s.current>=Vi;default:return!0}},getStateDescription(s){return s.current>=Vi?` MAX (${s.current}/${s.max}) - !`:s.current>=8?` ${s.current}/${s.max} - +30%`:s.current>=5?` ${s.current}/${s.max} - +20%`:` ${s.current}/${s.max}`}};function sv(s,r=!1,o){return r?4:s===0||s===1?1:s===2?2:3}function Jp(s,r){return{...s,current:Math.min(s.max,s.current+r)}}function lv(s,r){const o=Math.min(s.current,r);return{newState:{...s,current:s.current-o},consumed:o}}function iv(s){const r=s.current;return{newState:{...s,current:0},consumed:r}}function cv(s){return s>=10?1:s>=5?.2:0}function rv(s){return s>=10?.5:s>=8?.3:0}function uv(s){return{critBonus:cv(s),penetration:rv(s),isMaxEnergy:s>=Vi}}function pp(s,r,o=10){return s+r*o}function ov(s,r,o,u,m,f,h,b,p,v,g,N,k,M,D,O){const j=S.useCallback(x=>nv(x,o,v),[o,v]),R=S.useCallback(x=>{const I=fp(x);let G=!0,X;v?o<x.cost&&(G=!1,X="Not enough energy"):(G=!1,X="Not player phase");let K=0;if(x.swordEnergyConsume!==void 0&&x.swordEnergyMultiplier){const le=x.swordEnergyConsume===0?p.current:Math.min(p.current,x.swordEnergyConsume);K=pp(0,le,x.swordEnergyMultiplier)}let ae=0;if(I.damageToEnemy){const le={...x,baseDamage:(x.baseDamage||0)+K};ae=qu(s,r,le).finalDamage}return{estimatedDamage:ae,guardGain:I.shieldGain||x.guardAmount||0,healAmount:I.hpGain||x.healAmount||0,energyCost:x.cost,canPlay:G,cannotPlayReason:X,swordEnergyGain:x.swordEnergyGain||0,swordEnergyConsume:x.swordEnergyConsume!==void 0?x.swordEnergyConsume===0?p.current:x.swordEnergyConsume:0,cardDraw:x.drawCards||0,playerBuffs:I.playerBuffs?.map(le=>le.name)||[],enemyDebuffs:I.enemyDebuffs?.map(le=>le.name)||[]}},[o,v,p,s,r]);return{executeCard:S.useCallback(async(x,I)=>{const G=ev();if(!j(x))return G;G.success=!0,G.energyConsumed=x.cost,M.setPlayerEnergy(T=>T-x.cost);const X=fp(x);if(I){const z=X.shieldGain||X.hpGain||X.playerBuffs?.length?g.current:N();z&&await D.playCardWithAnimation(I,z,()=>{})}let K=0,ae=0;if(x.swordEnergyConsume!==void 0?(x.swordEnergyConsume===0?M.setSwordEnergy(T=>{const z=iv(T);return ae=z.consumed,G.swordEnergyConsumed=ae,G.swordEnergyChange=-ae,z.newState}):M.setSwordEnergy(T=>{const z=lv(T,x.swordEnergyConsume);return ae=z.consumed,G.swordEnergyConsumed=ae,G.swordEnergyChange=-ae,z.newState}),x.swordEnergyMultiplier&&(K=pp(0,ae,x.swordEnergyMultiplier))):x.swordEnergyGain&&M.setSwordEnergy(T=>{const z=Jp(T,x.swordEnergyGain);return G.swordEnergyChange=x.swordEnergyGain,z}),X.damageToEnemy){const T={...x,baseDamage:(x.baseDamage||0)+K},z=qu(s,r,T),F=qp(r,z.finalDamage);G.damageDealt=z.finalDamage,G.isCritical=z.isCritical,M.setEnemyGuard(ce=>Math.max(0,ce-F.guardDamage)),M.setEnemyAp(ce=>Math.max(0,ce-F.apDamage)),M.setEnemyHp(ce=>Math.max(0,ce-F.hpDamage));const de=N();if(de&&D.showDamageEffect(de,z.finalDamage,z.isCritical),z.lifestealAmount>0){const ce=Qi(z.lifestealAmount,m,f);M.setPlayerHp(ce),G.lifestealAmount=z.lifestealAmount,g.current&&D.showHealEffect(g.current,z.lifestealAmount)}z.reflectDamage>0&&(M.setPlayerHp(ce=>Math.max(0,ce-z.reflectDamage)),G.reflectDamage=z.reflectDamage,g.current&&D.showDamageEffect(g.current,z.reflectDamage,!1)),M.setBattleStats(ce=>({...ce,damageDealt:ce.damageDealt+z.finalDamage}))}if(X.shieldGain&&(M.setPlayerGuard(T=>T+X.shieldGain),G.guardGained+=X.shieldGain,g.current&&D.showShieldEffect(g.current,X.shieldGain)),x.guardAmount&&x.guardAmount>0&&(M.setPlayerGuard(T=>T+x.guardAmount),G.guardGained+=x.guardAmount,g.current&&D.showShieldEffect(g.current,x.guardAmount)),x.cardTypeId==="sw_037"){const T=p.current*8;M.setPlayerGuard(z=>z+T),G.guardGained+=T,g.current&&D.showShieldEffect(g.current,T)}if(x.cardTypeId==="sw_039"||x.cardTypeId==="sw_040"){const T=p.current*2;M.setPlayerGuard(z=>z+T),G.guardGained+=T,g.current&&D.showShieldEffect(g.current,T)}if(x.healAmount&&x.healAmount>0){const T=Qi(x.healAmount,m,f);M.setPlayerHp(T),G.healingDone+=x.healAmount,g.current&&D.showHealEffect(g.current,x.healAmount)}if(X.hpGain){const T=Qi(X.hpGain,m,f);M.setPlayerHp(T),G.healingDone+=X.hpGain,g.current&&D.showHealEffect(g.current,X.hpGain)}if(x.energyGain&&x.energyGain>0&&M.setPlayerEnergy(T=>Math.min(u,T+x.energyGain)),x.drawCards&&x.drawCards>0){const T=k.current,{drawnCards:z,newDrawPile:F,newDiscardPile:de}=Ep(x.drawCards,T.drawPile,T.discardPile);z.length>0&&(O({type:"SET_PILES",newDrawPile:F,newDiscardPile:de}),G.cardsDrawn=z.length,D.drawCardsWithAnimation(z,ce=>{O({type:"ADD_TO_HAND",cards:ce})},150))}if(X.enemyDebuffs?.length){let T=b;X.enemyDebuffs.forEach(z=>{T=ku(T,z.name,z.duration,z.value,z.stacks,!1,void 0,"player"),G.debuffsApplied.push(z)}),M.setEnemyBuffs(T)}if(X.playerBuffs?.length){let T=h;X.playerBuffs.forEach(z=>{T=ku(T,z.name,z.duration,z.value,z.stacks,!1,void 0,"player"),G.buffsApplied.push(z)}),M.setPlayerBuffs(T)}const le=tv(x);O({type:"CARD_PLAY",card:le});const be=Xu(f,h);return be>0&&(M.setPlayerHp(T=>Math.max(0,T-be)),G.bleedDamage=be,g.current&&D.showDamageEffect(g.current,be,!1),await new Promise(T=>setTimeout(T,300))),G},[j,s,r,m,f,h,b,p,u,g,N,k,M,D,O]),canPlayCard:j,getCardEffectPreview:R}}function dv(){const s=S.useCallback((m,f,h,b,p)=>ac(m,f,h,b),[]),r=S.useCallback(async(m,f,h,b,p,v)=>{const{enemy:g,enemyHp:N,enemyMaxHp:k,enemyEnergy:M,enemyBuffs:D,enemyTurnCount:O,playerStats:j,enemyStats:R}=m;await Xp(g,N,k,O,M,async x=>{if(x.guardGain&&x.guardGain>0&&!x.baseDamage){f.setEnemyGuard(X=>X+x.guardGain);return}const I=x.hitCount||1;for(let X=0;X<I;X++){const K=Pp(R,j,x);if(f.setPlayerGuard(ae=>Math.max(0,ae-K.guardDamage)),f.setPlayerAp(ae=>Math.max(0,ae-K.apDamage)),f.setPlayerHp(ae=>Math.max(0,ae-K.hpDamage)),b&&h.showDamageEffect(b,K.totalDamage,!1),K.reflectDamage>0){f.setEnemyHp(le=>Math.max(0,le-K.reflectDamage));const ae=p();ae&&h.showDamageEffect(ae,K.reflectDamage,!1)}f.setBattleStats(ae=>({...ae,damageTaken:ae.damageTaken+K.totalDamage})),X<I-1&&await new Promise(ae=>setTimeout(ae,500))}if(x.applyDebuffs&&x.applyDebuffs.length>0){const X=Qp(m.playerBuffs,x.applyDebuffs);f.setPlayerBuffs(X)}const G=Xu(k,D);if(G>0){f.setEnemyHp(K=>Math.max(0,K-G));const X=p();X&&h.showDamageEffect(X,G,!1),await new Promise(K=>setTimeout(K,300))}},v)},[]),o=S.useCallback((m,f,h,b)=>Lu(m,f,h,b),[]),u=S.useCallback(m=>m.hp<=0?null:Lu(m.definition,m.hp,m.maxHp,(m.turnCount??0)+1)[0]||null,[]);return{determineAction:s,executeAllActions:r,getNextActionsPreview:o,getActionPreview:u}}function mv(s,r){return s>=r?"MAX":s>=8?"HIGH":s>=5?"MID":s>=3?"LOW":"NONE"}function fv(){return""}function pv(){const[s,r]=S.useState(Ji()),o=S.useCallback(v=>{r(g=>xs.onCardPlay(g,v))},[]),u=S.useCallback(()=>{r(v=>xs.onTurnStart(v))},[]),m=S.useCallback(()=>{r(v=>xs.onTurnEnd(v))},[]),f=S.useCallback(v=>xs.getDamageModifier(s,v),[s]),h=S.useCallback(v=>xs.canPerformAction(s,v),[s]),b=S.useCallback(()=>({label:fv(),current:s.current,max:s.max,level:mv(s.current,s.max),description:xs.getStateDescription(s)}),[s]),p=S.useCallback(()=>{r(Ji())},[]);return{abilityState:s,setAbilityState:r,onCardPlayed:o,onTurnStart:u,onTurnEnd:m,getDamageModifier:f,canPerformAction:h,getAbilityUI:b,resetAbility:p}}function yv(s){switch(s){case"swordsman":return Su;case"mage":return Xh;case"summoner":return Su;default:return Su}}const Zp=(s,r,o)=>{const{drawCardsWithAnimation:u,discardCardsWithAnimation:m,playCardWithAnimation:f,showDamageEffect:h,showHealEffect:b,showShieldEffect:p,isNewCard:v,getDiscardingCards:g}=b0(),{turnMessage:N,showTurnMessage:k,showMessage:M}=x0(),D=o?.speed??50,O=E0(D),{executePlayerPhase:j,executeEnemyPhase:R}=P0(),A=S.useRef(null),x=S.useRef([]),I=W0(s,r,O.playerSpeed,o),{playerState:G,setPlayerHp:X,setPlayerAp:K,setPlayerGuard:ae,setPlayerEnergy:le,setPlayerBuffs:be,enemies:T,currentEnemy:z,setEnemies:F,setEnemyHp:de,setEnemyAp:ce,setEnemyGuard:B,setEnemyBuffs:Z,updateEnemyByUpdater:V,updateAllEnemies:W,aliveEnemies:re,isPlayerAlive:_,areAllEnemiesDead:Y,enemyHp:J,enemyMaxHp:ee,enemyAp:oe,enemyMaxAp:me,enemyGuard:ge,enemyBuffs:Me,enemyEnergy:Se,setEnemyEnergy:Ua,playerBattleStats:za,enemyBattleStats:Ka}=I,wt=pv(),{abilityState:da,setAbilityState:Ba}=wt,rt=S.useMemo(()=>{const ze=o?.deckConfig??Ap(o?.playerClass??"swordsman"),Qe=yv(o?.playerClass??"swordsman");let et=Ph(ze,Qe);return o?.cardMasteryStore&&o.cardMasteryStore.size>0&&(et=Jh(et,o.cardMasteryStore)),{hand:[],drawPile:et,discardPile:[]}},[o]),[ha,pa]=S.useReducer(Qh,rt),te=S.useRef(ha);S.useEffect(()=>{te.current=ha},[ha]);const[fe,Re]=S.useState(!1),[ya,Fa]=S.useState(!1),[sa,on]=S.useState(null),[Rt,xe]=S.useState("ongoing"),[we,la]=S.useState({damageDealt:0,damageTaken:0}),Pe=S.useCallback(()=>T.find(Qe=>Qe.hp>0)?.ref.current??null,[T]),Ta=S.useCallback((ze,Qe)=>{V(ze,Qe)},[V]),kt=S.useMemo(()=>({playCardWithAnimation:f,showDamageEffect:h,showHealEffect:b,showShieldEffect:p,drawCardsWithAnimation:u}),[f,h,b,p,u]),ut=S.useMemo(()=>({setPlayerEnergy:le,setPlayerGuard:ae,setPlayerHp:X,setPlayerBuffs:be,setEnemyHp:de,setEnemyAp:ce,setEnemyGuard:B,setEnemyBuffs:Z,setSwordEnergy:Ba,setBattleStats:la}),[le,ae,X,be,de,ce,B,Z,Ba]),aa=ov(za,Ka,G.energy,G.maxEnergy,G.hp,G.maxHp,G.buffs,Me,da,O.isPlayerPhase,A,Pe,te,ut,kt,pa);dv();const va=S.useCallback(async(ze,Qe)=>{await aa.executeCard(ze,Qe)},[aa]),ma=S.useCallback(async()=>{await j({playerBuffs:G.buffs,playerMaxHp:G.maxHp,maxEnergy:G.maxEnergy,deckStateRef:te,drawnCardsRef:x,playerRef:A,setPlayerGuard:ae,setPlayerEnergy:le,setPlayerBuffs:be,setPlayerHp:X,setIsShuffling:Re,setIsDrawingAnimation:Fa,showMessage:M,showHealEffect:b,showShieldEffect:p,phaseState:{setPlayerPhaseActive:O.setPlayerPhaseActive,setEnemyPhaseActive:O.setEnemyPhaseActive,incrementPhaseCount:O.incrementPhaseCount,clearActivePhase:O.clearActivePhase},dispatch:pa})},[j,G.buffs,G.maxHp,G.maxEnergy,ae,le,be,X,M,b,p,O]),_l=S.useCallback(async()=>{await R({currentEnemy:z,enemyBuffs:Me,enemyHp:J,enemyMaxHp:ee,enemyEnergy:Se,playerHp:G.hp,playerBuffs:G.buffs,enemies:T,enemyStats:Ka,playerStats:za,playerRef:A,setEnemyGuard:B,setEnemyEnergy:Ua,setEnemyBuffs:Z,setEnemyHp:de,setPlayerGuard:ae,setPlayerAp:K,setPlayerHp:X,setPlayerBuffs:be,setBattleStats:la,showMessage:M,showDamageEffect:h,getTargetEnemyRef:Pe,phaseState:{setPlayerPhaseActive:O.setPlayerPhaseActive,setEnemyPhaseActive:O.setEnemyPhaseActive,incrementPhaseCount:O.incrementPhaseCount,clearActivePhase:O.clearActivePhase}})},[R,z,Me,J,ee,Se,G.hp,G.buffs,T,Ka,za,B,Ua,Z,de,ae,K,X,be,M,h,Pe,O]),Rn=S.useRef(async()=>{}),El=S.useCallback(async(ze,Qe)=>{if(Y||!_)return;if(Qe>=ze.phases.length){const qt=O.generatePhaseQueueFromSpeeds(G.buffs,z??null,Me);await Rn.current(qt,0);return}O.setPhaseIndex(Qe),ze.phases[Qe]==="player"?await ma():(await _l(),await Rn.current(ze,Qe+1))},[Y,_,ma,_l,O,G.buffs,z,Me]);S.useEffect(()=>{Rn.current=El},[El]);const ot=S.useCallback(async(ze,Qe)=>{await Rn.current(ze,Qe)},[]),dt=S.useCallback(async()=>{const ze=O.generatePhaseQueueFromSpeeds(G.buffs,z??null,Me);await ot(ze,0)},[G.buffs,z,Me,O,ot]),kn=S.useCallback(()=>{if(!O.isPlayerPhase)return;O.clearActivePhase();const ze=O0({playerBuffs:G.buffs});ze.dotDamage>0&&(X(qt=>Math.max(0,qt-ze.dotDamage)),A.current&&h(A.current,ze.dotDamage,!1)),be(ze.newBuffs);const Qe=[...ha.hand],et=O.currentPhaseIndex+1;m(Qe,250,()=>{pa({type:"END_TURN",cardsToDiscard:Qe}),O.phaseQueue&&ot(O.phaseQueue,et)})},[O,G.buffs,h,X,be,ha.hand,m,ot]),Wa=S.useRef(!1);S.useEffect(()=>{!Wa.current&&z&&(Wa.current=!0,dt())},[z,dt]),S.useEffect(()=>{fe&&M("...",1500,()=>{setTimeout(()=>{Re(!1),Fa(!0)},1e3)})},[fe,M]),S.useEffect(()=>{ya&&x.current.length>0&&u(x.current,ze=>{pa({type:"ADD_TO_HAND",cards:ze}),x.current=[],Fa(!1)},250)},[ya,u]);const qn=S.useCallback(()=>on("draw"),[]),dn=S.useCallback(()=>on("discard"),[]),sc=S.useCallback(()=>on(null),[]),Dl=S.useCallback(ze=>{const Qe=Array.isArray(ze)?ze:[ze];F(Qe.map(Es=>Xi(Es))),ae(0),be(new Map),le(G.maxEnergy),Ba(Ji());const et=[...te.current.hand,...te.current.drawPile,...te.current.discardPile],qt=Qu(et);pa({type:"RESET_DECK",hand:[],drawPile:qt,discardPile:[]}),O.resetPhaseState(),la({damageDealt:0,damageTaken:0}),xe("ongoing"),Wa.current=!1},[F,ae,be,le,Ba,G.maxEnergy,O]),_s=S.useMemo(()=>Rt!=="ongoing"?Rt:Y?"victory":_?"ongoing":"defeat",[Rt,Y,_]),mn=S.useMemo(()=>!z||J<=0?[]:Lu(z,J,ee,O.phaseCount+1),[z,J,O.phaseCount]);return{playerRef:A,getTargetEnemyRef:Pe,currentEnemy:z,enemies:T,aliveEnemies:re,updateEnemy:Ta,updateAllEnemies:W,playerName:G.name,playerClass:G.playerClass,playerHp:G.hp,playerMaxHp:G.maxHp,playerAp:G.ap,playerMaxAp:G.maxAp,playerGuard:G.guard,playerBuffs:G.buffs,enemyHp:J,enemyMaxHp:ee,enemyAp:oe,enemyMaxAp:me,enemyGuard:ge,enemyBuffs:Me,playerEnergy:G.energy,cardEnergy:G.energy,maxEnergy:G.maxEnergy,phaseCount:O.phaseCount,isPlayerPhase:O.isPlayerPhase,turnMessage:N,showTurnMessage:k,playerNowSpeed:O.playerSpeed,enemyNowSpeed:O.enemySpeed,phaseQueue:O.phaseQueue,currentPhaseIndex:O.currentPhaseIndex,enemyEnergy:Se,nextEnemyActions:mn,swordEnergy:da,hand:ha.hand,drawPile:ha.drawPile,discardPile:ha.discardPile,isNewCard:v,getDiscardingCards:g,handleCardPlay:va,handleEndPhase:kn,resetForNextEnemy:Dl,initializeBattle:dt,startBattleRound:dt,onDepthChange:()=>{},openedPileType:sa,openDrawPile:qn,openDiscardPile:dn,closePileModal:sc,battleResult:_s,battleStats:we}},Cl=({card:s,isPlayable:r=!1})=>{const o=s.tags,u=s.baseDamage?Vp(s):null,m=["card",r?"playable":"unplayable",`tag-${o}`,`mastery-${s.masteryLevel}`].join(" ");return l.jsxs("div",{className:m,children:[l.jsx("div",{className:`card-cost ${o}-badge`,children:s.cost}),l.jsx("div",{className:`card-badge ${o}-badge`,children:o}),l.jsx("div",{className:`card-name mastery-${s.masteryLevel}`,children:s.name}),l.jsxs("div",{className:"card-desc-box",children:[l.jsx("div",{className:"card-desc-text",children:s.description}),u&&l.jsxs("div",{className:"card-power",children:["Damage: ",u]})]}),l.jsxs("div",{className:"mastery-info",children:[l.jsxs("div",{className:"mastery-labels",children:[l.jsxs("span",{children:[": Lv.",s.masteryLevel]}),l.jsx("span",{children:s.useCount})]}),l.jsx("div",{className:"mastery-bar-bg",children:l.jsx("div",{className:"mastery-bar-fill",style:{width:`${s.useCount/8*100}%`}})})]})]})},Kp=({isOpen:s,onClose:r,title:o,cards:u,depth:m})=>s?l.jsx("div",{className:"battle-modal-overlay",onClick:r,children:l.jsxs("div",{className:"battle-modal-content",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"battle-modal-header",children:[l.jsxs("h2",{children:[o," (",u.length,")"]}),l.jsx("button",{className:"battle-modal-close-btn",onClick:r,children:""})]}),l.jsx("div",{className:"battle-modal-body",children:u.length===0?l.jsx("div",{className:"battle-empty-message",children:""}):l.jsx("div",{className:"card-grid",children:u.map((f,h)=>l.jsx("div",{className:"modal-card-wrapper",children:l.jsx(Cl,{card:f,depth:m,isPlayable:!1})},`${f.id}-${h}`))})})]})}):null,gv=({isActive:s})=>l.jsx("div",{className:`phase-icon-diamond player ${s?"active":""}`,children:l.jsx("span",{className:"icon-letter",children:"P"})}),hv=({isActive:s})=>l.jsx("div",{className:`phase-icon-diamond enemy ${s?"active":""}`,children:l.jsx("span",{className:"icon-letter",children:"E"})}),Fp=({phaseQueue:s,currentPhaseIndex:r})=>{if(!s||s.phases.length===0)return null;const o=Math.min(f0,s.phases.length),u=[];for(let m=0;m<o;m++){const f=(r+m)%s.phases.length;u.push({actor:s.phases[f],index:f})}return l.jsx("div",{className:"turn-order-indicator",children:u.map((m,f)=>l.jsxs(qh.Fragment,{children:[m.actor==="player"?l.jsx(gv,{isActive:f===0}):l.jsx(hv,{isActive:f===0}),f<u.length-1&&l.jsx("span",{className:"phase-arrow",children:""})]},`${m.index}-${f}`))})},$u=({buffsDebuffs:s,theme:r})=>{const[o,u]=S.useState(null);return s.size===0?null:l.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginTop:"12px"},children:Array.from(s.entries()).map(([m,f])=>{const h=ye[m],b=D0[m];return l.jsxs("div",{style:{position:"relative",width:"48px",height:"48px",background:h.isDebuff?"linear-gradient(135deg, #5f1e1e, #9d2e2e)":`linear-gradient(135deg, ${r.primary}, ${r.secondary})`,border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:h.isDebuff?"0 4px 12px rgba(217, 74, 74, 0.5)":`0 4px 12px ${r.glow}`},onMouseEnter:()=>u(m),onMouseLeave:()=>u(null),children:[b,f.stacks>1&&l.jsx("div",{style:{position:"absolute",top:"-6px",right:"-6px",width:"20px",height:"20px",background:"#000",border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"50%",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.8)"},children:f.stacks}),!f.isPermanent&&l.jsx("div",{style:{position:"absolute",bottom:"-6px",right:"-6px",width:"24px",height:"24px",background:"#000",border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"50%",fontSize:"12px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.8)"},children:f.duration}),o===m&&l.jsxs("div",{style:{position:"absolute",bottom:"60px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.95)",border:`2px solid ${h.isDebuff?"#d94a4a":r.accent}`,borderRadius:"8px",padding:"10px 14px",whiteSpace:"nowrap",fontSize:"14px",zIndex:100,boxShadow:`0 4px 16px rgba(0, 0, 0, 0.8), 0 0 20px ${h.isDebuff?"rgba(217, 74, 74, 0.5)":r.glow}`,pointerEvents:"none"},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:"6px",color:h.isDebuff?"#ff8080":r.accent,fontSize:"15px"},children:[h.name,f.value>0&&` (${f.value})`,f.stacks>1&&` x${f.stacks}`]}),l.jsx("div",{style:{fontSize:"12px",color:"#ccc"},children:h.description()}),l.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.6)",marginTop:"4px",fontStyle:"italic"},children:f.isPermanent?"Permanent":`${f.duration} turn${f.duration!==1?"s":""} remaining`}),l.jsx("div",{style:{position:"absolute",bottom:"-8px",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:`8px solid ${h.isDebuff?"#d94a4a":r.accent}`}})]})]},m)})})},vv=s=>s.baseDamage>0?"attack":s.guardGain&&s.guardGain>0?"guard":s.applyDebuffs&&s.applyDebuffs.length>0?"debuff":"special",bv=({type:s})=>{const r={attack:"",guard:"",debuff:"",special:""};return l.jsx("span",{className:`action-icon action-icon-${s}`,children:r[s]})},_u=({state:s,enemyRef:r,theme:o,size:u="normal"})=>{const[m,f]=S.useState(!1),[h,b]=S.useState(!1),[p,v]=S.useState(s.actEnergy);s.actEnergy!==p&&(v(s.actEnergy),s.actEnergy<p&&b(!0)),S.useEffect(()=>{if(h){const M=setTimeout(()=>b(!1),v0.CONSUMPTION_TIMEOUT);return()=>clearTimeout(M)}},[h]);const g=ac(s.definition,s.hp,s.maxHp,s.turnCount+1,s.definition.actEnergy),N=u==="small"?"enemy-locate-small":"",k=vv(g);return l.jsxs("div",{className:`enemy-locate ${N}`,children:[l.jsxs("div",{className:"enemy-name-row",children:[l.jsx("span",{className:"enemy-name",children:s.definition.nameJa}),l.jsxs("div",{className:"action-icon-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[l.jsx(bv,{type:k}),m&&l.jsxs("div",{className:"next-action-tooltip",children:[l.jsx("div",{className:"tooltip-header",children:""}),l.jsx("div",{className:"tooltip-action-name",children:g.name}),l.jsxs("span",{className:"tooltip-energy",children:[s.actEnergy,""]}),g.baseDamage>0&&l.jsxs("div",{className:"tooltip-damage",children:[l.jsx("span",{className:"damage-icon",children:""}),l.jsx("span",{className:"damage-value",children:g.baseDamage}),g.hitCount&&g.hitCount>1&&l.jsxs("span",{className:"hit-count",children:["",g.hitCount]})]}),g.guardGain&&g.guardGain>0&&l.jsxs("div",{className:"tooltip-guard",children:[l.jsx("span",{className:"guard-icon",children:""}),l.jsxs("span",{className:"guard-value",children:["+",g.guardGain]})]}),g.applyDebuffs&&g.applyDebuffs.length>0&&l.jsx("div",{className:"tooltip-debuffs",children:g.applyDebuffs.map((M,D)=>l.jsx("span",{className:"debuff-tag",children:M.name},D))})]})]})]}),l.jsx("div",{className:"enemy-visual",ref:r,children:s.definition.imagePath?l.jsx("img",{className:"enemy-img",src:s.definition.imagePath,alt:s.definition.nameJa}):l.jsx("img",{className:"enemy-img",alt:"enemy-img",src:"../../../public/assets/images/depth_1_schelton.png"})}),l.jsxs("div",{className:"status-container enemy-status-container",children:[s.guard>0&&l.jsxs("div",{className:"status-bar-row guard-row",children:[l.jsx("div",{className:"value-badge guard-badge",children:s.guard}),l.jsx("div",{className:"unified-bar-container guard-bar",children:l.jsx("div",{className:"bar-fill guard-fill",style:{width:`${Math.min(100,s.guard/Mp*100)}%`}})})]}),l.jsxs("div",{className:"status-bar-row hp-row",children:[l.jsxs("div",{...s.ap===0?{className:"break-badge"}:{className:"value-badge ap-badge"},children:[s.ap>0&&`${s.ap}/${s.maxAp}`,s.ap===0&&"break!"]}),l.jsxs("div",{...s.ap>0?{className:"Armor-border"}:{className:"unified-bar-container hp-bar"},children:[s.ap>0&&l.jsx("div",{className:"bar-fill ap-overlay",style:{width:`${s.ap/s.maxAp*100}%`}}),l.jsx("div",{className:"bar-fill hp-fill",style:{width:`${s.hp/s.maxHp*100}%`}}),l.jsxs("span",{className:"hp-value",children:[s.hp,"/",s.maxHp]})]})]}),l.jsxs("div",{className:"status-bar-row energy-row",children:[l.jsxs("div",{className:"value-badge energy-badge",children:[s.actEnergy,"/",s.definition.actEnergy]}),l.jsx("div",{className:`unified-bar-container energy-bar ${h?"energy-consuming":""}`,children:l.jsx("div",{className:"bar-fill energy-fill",style:{width:`${s.actEnergy/s.definition.actEnergy*100}%`}})})]}),l.jsx($u,{buffsDebuffs:s.buffDebuffs,theme:o})]})]})},Wp=({enemies:s,enemyRefs:r,theme:o})=>{const u=s.length,m=()=>{switch(u){case 1:return"enemy-layout-single";case 2:return"enemy-layout-double";case 3:return"enemy-layout-triple";default:return"enemy-layout-single"}};return l.jsxs("div",{className:`enemy-section ${m()}`,children:[u===1&&l.jsx(_u,{state:s[0],enemyRef:r[0],theme:o,size:"normal"}),u===2&&l.jsx("div",{className:"enemy-row",children:s.map((f,h)=>l.jsx(_u,{state:f,enemyRef:r[h],theme:o,size:"small"},h))}),u===3&&l.jsx("div",{className:"enemy-row front-row",children:s.map((f,h)=>l.jsx(_u,{state:f,enemyRef:r[h],theme:o,size:"small"},h))})]})},xv=({playerName:s,playerClass:r,playerRef:o,playerHp:u,playerMaxHp:m,playerAp:f,playerMaxAp:h,playerGuard:b,playerBuffs:p,cardEnergy:v,maxEnergy:g,swordEnergy:N,theme:k})=>l.jsxs("div",{className:"player-section",children:[l.jsxs("div",{className:"player-field",children:[l.jsxs("div",{className:"character-name",children:[s," [",r,"]"]}),l.jsx("div",{className:"character-visual player",ref:o,children:""}),l.jsxs("div",{className:"status-container player-status-container",children:[b>0&&l.jsxs("div",{className:"status-bar-row guard-row",children:[l.jsx("div",{className:"value-badge guard-badge",children:b}),l.jsx("div",{className:"unified-bar-container guard-bar",children:l.jsx("div",{className:"bar-fill guard-fill",style:{width:`${Math.min(100,b/Mp*100)}%`}})})]}),l.jsxs("div",{className:"status-bar-row hp-row",children:[l.jsxs("div",{...f===0?{className:"break-badge"}:{className:"value-badge ap-badge"},children:[" ",f>0&&`${f}/${h}`,f===0&&"break!"]}),l.jsxs("div",{...f>0?{className:"Armor-border"}:{className:"unified-bar-container hp-bar"},children:[f>0&&l.jsx("div",{className:"bar-fill ap-overlay",style:{width:`${f/h*100}%`}}),l.jsx("div",{className:"bar-fill hp-fill",style:{width:`${u/m*100}%`}}),l.jsxs("span",{className:"hp-value",children:[u,"/",m]})]})]}),l.jsxs("div",{className:"status-bar-row energy-row",children:[l.jsxs("div",{className:"value-badge energy-badge",children:[v,"/",g]}),l.jsx("div",{className:"unified-bar-container energy-bar",children:l.jsx("div",{className:"bar-fill energy-fill",style:{width:`${v/g*100}%`}})})]}),l.jsx($u,{buffsDebuffs:p,theme:k})]})]}),l.jsx("div",{className:"energy-and-ability",children:l.jsxs("div",{className:"sword-energy-display",children:[l.jsx("div",{className:"sword-energy-label",children:":"}),l.jsx("div",{className:"sword-energy-bar-container",children:l.jsxs("div",{className:"sword-energy-bar",children:[l.jsx("div",{className:`sword-energy-fill ${N.current>=10?"level-max":N.current>=8?"level-high":N.current>=5?"level-mid":""}`,style:{width:`${N.current/N.max*100}%`}}),l.jsxs("span",{className:"sword-energy-text",children:[N.current,"/",N.max]})]})}),l.jsxs("div",{className:"sword-energy-effects",children:[l.jsxs("span",{className:`effect-badge crit ${N.current>=5?"active":"inactive"}`,children:[N.current>=5?"":""," Crit+20%"]}),l.jsxs("span",{className:`effect-badge pierce ${N.current>=8?"active":"inactive"}`,children:[N.current>=8?"":""," +30%"]}),l.jsxs("span",{className:`effect-badge max ${N.current>=10?"active":"inactive"}`,children:[N.current>=10?"":""," MAX"]})]})]})})]}),Sv={initialHpBonus:0,goldMultiplier:1,soulMultiplier:1,explorationLimitBonus:0,inventoryBonus:0,hpRecoveryPercent:0,hasAppraisal:!1,hasTrueAppraisal:!1,hasIndomitableWill:!1,classEnergy:{swordsman:0,mage:0,summoner:0}},js={SOUL_VALUES:{normal:5,elite:15,boss:50,returnRouteMultiplier:1.2},UNLOCK_HOLD_DURATION:1500},Vu=[{id:"blessing_life_1",name:"Blessing of Life I",description:"The light of the sanctuary strengthens your vitality. Gain +10 max HP at the start of each run.",icon:"",cost:20,category:"hp",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"initial_hp",value:10,description:"+10 Max HP"}],position:{angle:0,radius:1}},{id:"blessing_wealth_1",name:"Blessing of Wealth I",description:"Fortune favors the blessed. Gain +10% gold from all sources during exploration.",icon:"",cost:25,category:"gold",tier:1,prerequisites:[],effects:[{type:"gold_multiplier",target:"gold_acquisition",value:.1,description:"+10% Gold"}],position:{angle:90,radius:1}},{id:"swordsman_insight",name:"Swordsman's Insight",description:"Ancient warriors guide your blade. Start each battle with +1 Sword Energy.",icon:"",cost:30,category:"class",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"sword_energy",value:1,description:"+1 Sword Energy"}],classRestriction:"swordsman",position:{angle:240,radius:1}},{id:"mage_insight",name:"Mage's Insight",description:"Arcane echoes resonate within. Start each battle with +1 Resonance.",icon:"",cost:30,category:"class",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"resonance",value:1,description:"+1 Resonance"}],classRestriction:"mage",position:{angle:270,radius:1}},{id:"summoner_insight",name:"Summoner's Insight",description:"Spirits heed your call more readily. Start each battle with +1 Summon Slot.",icon:"",cost:30,category:"class",tier:1,prerequisites:[],effects:[{type:"stat_boost",target:"summon_slot",value:1,description:"+1 Summon Slot"}],classRestriction:"summoner",position:{angle:300,radius:1}},{id:"keen_eye",name:"Keen Eye",description:"Your perception sharpens. Identify basic item properties without appraisal.",icon:"",cost:25,category:"utility",tier:1,prerequisites:[],effects:[{type:"special_ability",target:"basic_appraisal",value:1,description:"Basic Appraisal"}],position:{angle:180,radius:1}},{id:"blessing_life_2",name:"Blessing of Life II",description:"The sanctuary's protection deepens. Gain +20 max HP at the start of each run.",icon:"",cost:50,category:"hp",tier:2,prerequisites:["blessing_life_1"],effects:[{type:"stat_boost",target:"initial_hp",value:20,description:"+20 Max HP"}],position:{angle:0,radius:2}},{id:"boon_recovery",name:"Boon of Recovery",description:"Healing energies linger upon you. Recover 5% HP when resting at camp.",icon:"",cost:40,category:"hp",tier:2,prerequisites:["blessing_life_1"],effects:[{type:"stat_boost",target:"hp_recovery",value:.05,description:"+5% HP Recovery"}],position:{angle:30,radius:2}},{id:"blessing_wealth_2",name:"Blessing of Wealth II",description:"Riches flow to you naturally. Gain +20% gold from all sources (cumulative).",icon:"",cost:60,category:"gold",tier:2,prerequisites:["blessing_wealth_1"],effects:[{type:"gold_multiplier",target:"gold_acquisition",value:.2,description:"+20% Gold"}],position:{angle:90,radius:2}},{id:"eye_appraisal",name:"Eye of Appraisal",description:"See beyond the surface. View detailed equipment stats and effects.",icon:"",cost:45,category:"utility",tier:2,prerequisites:["keen_eye"],effects:[{type:"special_ability",target:"appraisal",value:1,description:"Equipment Appraisal"}],position:{angle:180,radius:2}},{id:"expanded_bag",name:"Expanded Bag",description:"Your bag seems to hold more than before. +5 inventory capacity.",icon:"",cost:50,category:"utility",tier:2,prerequisites:["keen_eye"],effects:[{type:"resource_increase",target:"inventory_capacity",value:5,description:"+5 Inventory"}],position:{angle:150,radius:2}},{id:"extended_exploration_1",name:"Extended Exploration I",description:"Your endurance grows. +1 maximum exploration per day.",icon:"",cost:80,category:"exploration",tier:2,prerequisites:[],effects:[{type:"exploration_limit",target:"exploration_limit",value:1,description:"+1 Exploration"}],position:{angle:45,radius:2}},{id:"blessing_life_3",name:"Blessing of Life III",description:"You are one with the sanctuary's power. Gain +30 max HP at the start of each run.",icon:"",cost:100,category:"hp",tier:3,prerequisites:["blessing_life_2"],effects:[{type:"stat_boost",target:"initial_hp",value:30,description:"+30 Max HP"}],position:{angle:0,radius:3}},{id:"indomitable_will",name:"Indomitable Will",description:"Death cannot claim you so easily. Once per run, survive a killing blow with 1 HP.",icon:"",cost:120,category:"hp",tier:3,prerequisites:["blessing_life_2","boon_recovery"],effects:[{type:"special_ability",target:"death_defiance",value:1,description:"Survive with 1 HP (once)"}],position:{angle:15,radius:3}},{id:"blessing_wealth_3",name:"Blessing of Wealth III",description:"Fortune itself bends to your will. Gain +30% gold from all sources (cumulative).",icon:"",cost:100,category:"gold",tier:3,prerequisites:["blessing_wealth_2"],effects:[{type:"gold_multiplier",target:"gold_acquisition",value:.3,description:"+30% Gold"}],position:{angle:90,radius:3}},{id:"soul_resonance",name:"Soul Resonance",description:"Souls are drawn to you like moths to flame. +20% soul acquisition from all sources.",icon:"",cost:110,category:"gold",tier:3,prerequisites:["blessing_wealth_2"],effects:[{type:"soul_multiplier",target:"soul_acquisition",value:.2,description:"+20% Souls"}],position:{angle:75,radius:3}},{id:"true_appraisal",name:"True Appraisal",description:"Nothing is hidden from your sight. Reveal hidden effects and true values of items.",icon:"",cost:100,category:"utility",tier:3,prerequisites:["eye_appraisal"],effects:[{type:"special_ability",target:"true_appraisal",value:1,description:"True Appraisal"}],position:{angle:180,radius:3}},{id:"extended_exploration_2",name:"Extended Exploration II",description:"Your stamina seems limitless. +2 maximum exploration per day.",icon:"",cost:150,category:"exploration",tier:3,prerequisites:["extended_exploration_1"],effects:[{type:"exploration_limit",target:"exploration_limit",value:2,description:"+2 Exploration"}],position:{angle:45,radius:3}}];function jl(s){return Vu.find(r=>r.id===s)}const Nv={hp:{name:"Life",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.2)"},gold:{name:"Wealth",color:"#eab308",bgColor:"rgba(234, 179, 8, 0.2)"},combat:{name:"Combat",color:"#f97316",bgColor:"rgba(249, 115, 22, 0.2)"},utility:{name:"Utility",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.2)"},class:{name:"Class",color:"#a855f7",bgColor:"rgba(168, 85, 247, 0.2)"},exploration:{name:"Exploration",color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.2)"}};function xl(s,r,o){return r.unlockedNodes.includes(s.id)?"unlocked":s.classRestriction&&s.classRestriction!==o?"locked":s.prerequisites.every(m=>r.unlockedNodes.includes(m))?"available":"locked"}function Cv(s,r,o){return r.unlockedNodes.includes(s.id)?{canUnlock:!1,reason:"Already unlocked"}:s.classRestriction&&s.classRestriction!==o?{canUnlock:!1,reason:`Requires ${s.classRestriction} class`}:s.prerequisites.every(m=>r.unlockedNodes.includes(m))?r.totalSouls<s.cost?{canUnlock:!1,reason:`Insufficient souls (need ${s.cost}, have ${r.totalSouls})`}:{canUnlock:!0}:{canUnlock:!1,reason:`Requires: ${s.prerequisites.filter(h=>!r.unlockedNodes.includes(h)).map(h=>jl(h)?.name||h).join(", ")}`}}function jv(s,r,o){const{canUnlock:u,reason:m}=Cv(s,r,o);if(!u)return{success:!1,message:m||"Cannot unlock this node"};const f={...r,totalSouls:r.totalSouls-s.cost,unlockedNodes:[...r.unlockedNodes,s.id]};return{success:!0,message:`Unlocked ${s.name}!`,remainingSouls:f.totalSouls,newProgress:f}}function ey(s){const r={...Sv};for(const o of s.unlockedNodes){const u=jl(o);if(u)for(const m of u.effects)switch(m.type){case"stat_boost":switch(m.target){case"initial_hp":r.initialHpBonus+=m.value;break;case"hp_recovery":r.hpRecoveryPercent+=m.value;break;case"sword_energy":r.classEnergy.swordsman+=m.value;break;case"resonance":r.classEnergy.mage+=m.value;break;case"summon_slot":r.classEnergy.summoner+=m.value;break}break;case"gold_multiplier":r.goldMultiplier+=m.value;break;case"soul_multiplier":r.soulMultiplier+=m.value;break;case"exploration_limit":r.explorationLimitBonus+=m.value;break;case"resource_increase":m.target==="inventory_capacity"&&(r.inventoryBonus+=m.value);break;case"special_ability":switch(m.target){case"appraisal":case"basic_appraisal":r.hasAppraisal=!0;break;case"true_appraisal":r.hasTrueAppraisal=!0,r.hasAppraisal=!0;break;case"death_defiance":r.hasIndomitableWill=!0;break}break}}return r}function _v(s){return Vu.filter(r=>!r.classRestriction||r.classRestriction===s)}function Ev(s){return s.unlockedNodes.reduce((r,o)=>{const u=jl(o);return r+(u?.cost||0)},0)}function Dv(s,r){const o=_v(r),u=o.length;let m=0,f=0,h=0;for(const v of o)switch(xl(v,s,r)){case"unlocked":m++;break;case"available":f++;break;case"locked":h++;break}const b=Ev(s),p=u>0?Math.round(m/u*100):0;return{totalNodes:u,unlockedCount:m,availableCount:f,lockedCount:h,soulsSpent:b,completionPercent:p}}function Av(s,r){const o=ey(r);return Math.floor(s*o.soulMultiplier)}function ay(s){switch(s){case"normal":return js.SOUL_VALUES.normal;case"elite":return js.SOUL_VALUES.elite;case"boss":return js.SOUL_VALUES.boss;default:return 0}}function Tv(s,r,o=!1){let u=ay(r);o&&(u=Math.floor(u*js.SOUL_VALUES.returnRouteMultiplier));const m=Av(u,s),f={...s,currentRunSouls:s.currentRunSouls+m};return{baseSouls:u,multiplierApplied:o?js.SOUL_VALUES.returnRouteMultiplier:1,finalSouls:m,newProgress:f}}function Mv(s){return ay(s)}function wv(s){switch(s){case"boss":return{small:0,medium:1,large:1,huge:0};case"elite":return{small:2,medium:1,large:0,huge:0};default:return{small:1,medium:0,large:0,huge:0}}}function Rv(s){const r=[];return s.small>0&&r.push(`${s.small}`),s.medium>0&&r.push(`${s.medium}`),s.large>0&&r.push(`${s.large}`),s.huge>0&&r.push(`${s.huge}`),r.length>0?r.join(", "):""}const kv=({onContinue:s,rewards:r,battleStats:o,enemyType:u})=>{const[m,f]=S.useState(!1);return S.useEffect(()=>{const h=setTimeout(()=>{f(!0)},1e3);return()=>clearTimeout(h)},[]),l.jsxs("div",{className:"victory-screen",children:[l.jsxs("div",{className:"victory-bg",children:[l.jsx("div",{className:"victory-particles"}),l.jsx("div",{className:"victory-glow"})]}),l.jsxs("div",{className:"victory-content",children:[l.jsxs("div",{className:"victory-title",children:[l.jsx("h1",{className:"victory-text",children:"VICTORY!"}),l.jsx("div",{className:"victory-subtitle",children:"You have conquered the depths"})]}),l.jsxs("div",{className:`battle-stats ${m?"show":""}`,children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsx("div",{className:"stat-value",children:o.phaseCount}),l.jsx("div",{className:"stat-label",children:"Phases"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsx("div",{className:"stat-value",children:o.damageDealt}),l.jsx("div",{className:"stat-label",children:"Damage Dealt"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsx("div",{className:"stat-value",children:o.damageTaken}),l.jsx("div",{className:"stat-label",children:"Damage Taken"})]})]}),l.jsxs("div",{className:`rewards-section ${m?"show":""}`,children:[l.jsx("h2",{className:"rewards-title",children:"Rewards"}),l.jsxs("div",{className:"rewards-grid",children:[l.jsxs("div",{className:"reward-item souls",children:[l.jsx("div",{className:"reward-icon",children:""}),l.jsxs("div",{className:"reward-amount",children:["+",r.soulRemnants," "]}),l.jsxs("div",{className:"reward-detail",children:[u==="boss"?"":u==="elite"?"":"",""]})]}),l.jsxs("div",{className:"reward-item magic-stones",children:[l.jsx("div",{className:"reward-icon",children:""}),l.jsx("div",{className:"reward-amount",children:""}),l.jsx("div",{className:"reward-detail",children:Rv(r.magicStones)})]})]}),r.cards.length>0&&l.jsxs("div",{className:"card-rewards",children:[l.jsx("h3",{className:"card-rewards-title",children:"Card Rewards"}),l.jsx("div",{className:"card-rewards-list",children:r.cards.map((h,b)=>l.jsxs("div",{className:"reward-card",style:{animationDelay:`${b*.1}s`},children:[l.jsx("div",{className:"reward-card-name",children:h.name}),l.jsx("div",{className:"reward-card-rarity",children:h.rarity})]},b))})]})]}),l.jsx("button",{className:`continue-button ${m?"show":""}`,onClick:s,children:"Continue"})]})]})},qv=({onRetry:s,onReturnToCamp:r,battleStats:o,remainingLives:u=3,maxLives:m=3,soulsTransferred:f=0,isGameOver:h=!1})=>{const[b,p]=S.useState(!1);S.useEffect(()=>{const g=setTimeout(()=>{p(!0)},1500);return()=>clearTimeout(g)},[]);const v=()=>{const g=[];for(let N=0;N<m;N++){const k=N<u;g.push(l.jsx("span",{className:`life-heart ${k?"filled":"empty"}`,children:k?"":""},N))}return g};return l.jsxs("div",{className:"defeat-screen",children:[l.jsxs("div",{className:"defeat-bg",children:[l.jsx("div",{className:"defeat-particles"}),l.jsx("div",{className:"defeat-glow"})]}),l.jsxs("div",{className:"defeat-content",children:[l.jsxs("div",{className:"defeat-title",children:[l.jsx("h1",{className:"defeat-text",children:h?"GAME OVER":"DEFEAT"}),l.jsx("div",{className:"defeat-subtitle",children:h?"Your journey ends here...":"The darkness has claimed you..."})]}),l.jsxs("div",{className:`defeat-lives ${b?"show":""}`,children:[l.jsx("div",{className:"lives-label",children:" / Lives"}),l.jsx("div",{className:"lives-hearts",children:v()}),!h&&l.jsxs("div",{className:"lives-remaining",children:[" ",u," "]})]}),f>0&&l.jsxs("div",{className:`defeat-souls ${b?"show":""}`,children:[l.jsx("div",{className:"souls-icon",children:""}),l.jsxs("div",{className:"souls-text",children:[l.jsx("span",{className:"souls-label",children:""}),l.jsxs("span",{className:"souls-value",children:["+",f]})]}),l.jsx("div",{className:"souls-description",children:"100% of souls preserved"})]}),l.jsxs("div",{className:`defeat-stats ${b?"show":""}`,children:[l.jsxs("div",{className:"defeat-stat-card",children:[l.jsx("div",{className:"defeat-stat-icon",children:""}),l.jsx("div",{className:"defeat-stat-value",children:o.turnCount}),l.jsx("div",{className:"defeat-stat-label",children:"Turns Survived"})]}),l.jsxs("div",{className:"defeat-stat-card",children:[l.jsx("div",{className:"defeat-stat-icon",children:""}),l.jsx("div",{className:"defeat-stat-value",children:o.damageDealt}),l.jsx("div",{className:"defeat-stat-label",children:"Damage Dealt"})]}),l.jsxs("div",{className:"defeat-stat-card",children:[l.jsx("div",{className:"defeat-stat-icon",children:""}),l.jsx("div",{className:"defeat-stat-value",children:o.damageTaken}),l.jsx("div",{className:"defeat-stat-label",children:"Damage Taken"})]})]}),l.jsxs("div",{className:`defeat-options ${b?"show":""}`,children:[!h&&l.jsxs("button",{className:"defeat-button retry",onClick:s,children:[l.jsx("span",{className:"button-icon",children:""}),l.jsx("span",{className:"button-text",children:"Retry Battle"})]}),l.jsxs("button",{className:"defeat-button camp",onClick:r,children:[l.jsx("span",{className:"button-icon",children:""}),l.jsx("span",{className:"button-text",children:h?"New Game":"Return to Camp"})]})]}),l.jsx("div",{className:`defeat-message ${b?"show":""}`,children:l.jsx("p",{children:h?"Start anew with the wisdom you have gained...":"Learn from your mistakes and grow stronger..."})})]})]})},Lv=({isOpen:s,onClose:r,items:o,onUseItem:u,itemUsedThisPhase:m=!1})=>{if(!s)return null;const f=o.filter(p=>p.itemType==="consumable"&&(p.usableContext==="battle"||p.usableContext==="anywhere"||!p.usableContext)),h=p=>{m||(u(p),r())},b=p=>{p.target===p.currentTarget&&r()};return l.jsx("div",{className:"use-item-modal-backdrop",onClick:b,children:l.jsxs("div",{className:"use-item-modal-content",children:[l.jsxs("div",{className:"use-item-modal-header",children:[l.jsx("h2",{className:"use-item-modal-title",children:""}),l.jsx("button",{className:"use-item-close-btn",onClick:r,children:""})]}),m&&l.jsx("div",{className:"item-used-warning",children:""}),l.jsx("div",{className:"use-item-grid",children:f.length>0?f.map(p=>l.jsxs("div",{className:`use-item-card ${m?"disabled":""}`,onClick:()=>h(p),children:[l.jsx("div",{className:`item-icon-container rarity-${p.rarity}`,children:l.jsx("span",{className:"item-icon",children:p.type})}),l.jsx("div",{className:"item-name",children:p.name}),p.stackCount&&p.stackCount>1&&l.jsxs("div",{className:"item-quantity",children:["x",p.stackCount]})]},p.id)):l.jsx("div",{className:"no-items-message",children:""})})]})})},Ju={primary:"#1a1a24",secondary:"#2a2a3d",accent:"#8b7aa8",bg:"linear-gradient(135deg, #0a0a0f 0%, #151520 100%)",glow:"rgba(139, 122, 168, 0.25)",hover:"#a090b0"},Gv={easy:3,normal:3,hard:2};function ty(s){const r=Gv[s];return{maxLives:r,currentLives:r}}function Ov(s){return{...s,currentLives:Math.max(0,s.currentLives-1)}}function Uv(s){return s.currentLives<=0}function ny(s,r){const o=[];let u=1;for(const[m,f]of Object.entries(s)){const h=r[m];if(h)for(let b=0;b<f;b++)o.push({...h,id:`starter_${m}_${u++}`})}return o}function zv(){return ny(Zi.swordsman,rn)}function Bv(){return ny(Zi.mage,Dp)}const sy={swordsman:{class:"swordsman",name:"Swordsman",japaneseName:"",description:"",uniqueMechanic:"Sword Energy",mechanicDescription:"",stats:{hp:100,ap:30,speed:50,cardActEnergy:3},starterDeck:zv(),isAvailable:!0,themeColor:"#ef4444",icon:"sword"},mage:{class:"mage",name:"Mage",japaneseName:"",description:"HP",uniqueMechanic:"Elemental Resonance",mechanicDescription:"Lv2+30%",stats:{hp:60,ap:20,speed:60,cardActEnergy:3},starterDeck:Bv(),isAvailable:!0,themeColor:"#3b82f6",icon:"staff"},summoner:{class:"summoner",name:"Summoner",japaneseName:"",description:"",uniqueMechanic:"Summon System",mechanicDescription:"HP",stats:{hp:80,ap:25,speed:40,cardActEnergy:3},starterDeck:[],isAvailable:!1,themeColor:"#22c55e",icon:"summon"}};function Hv(s){return sy[s]}function Iv(){return Object.values(sy)}function bl(s){return s.small*30+s.medium*100+s.large*350+s.huge*1e3}function Da(s,r){return{...r,id:`${s}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const yp=[Da("steel_sword",{typeId:"steel_sword",name:"Steel Sword",description:"A sturdy sword made of steel. Reliable for basic combat.",itemType:"equipment",type:"SWORD",equipmentSlot:"weapon",durability:45,maxDurability:50,level:1,quality:"normal",effects:[{type:"stat",target:"attack",value:15,description:"ATK +15"}],rarity:"common",sellPrice:50,canSell:!0,canDiscard:!0}),Da("iron_armor",{typeId:"iron_armor",name:"Iron Armor",description:"Basic iron plating. Provides decent protection.",itemType:"equipment",type:"ARMOR",equipmentSlot:"armor",durability:60,maxDurability:60,level:0,quality:"normal",effects:[{type:"stat",target:"defense",value:10,description:"DEF +10"}],rarity:"common",sellPrice:40,canSell:!0,canDiscard:!0}),Da("healing_potion",{typeId:"healing_potion",name:"Healing Potion",description:"Restores HP when consumed.",itemType:"consumable",type:"POTION",stackable:!0,stackCount:3,maxStack:10,usableContext:"battle",rarity:"common",sellPrice:20,canSell:!0,canDiscard:!0}),Da("magic_scroll",{typeId:"magic_scroll",name:"Magic Scroll",description:"A scroll containing ancient magic. Single use.",itemType:"consumable",type:"SCROLL",stackable:!1,usableContext:"battle",rarity:"rare",sellPrice:100,canSell:!0,canDiscard:!0}),Da("dragon_shield",{typeId:"dragon_shield",name:"Dragon Shield",description:"A legendary shield crafted from dragon scales.",itemType:"equipment",type:"SHIELD",equipmentSlot:"armor",durability:95,maxDurability:100,level:2,quality:"good",effects:[{type:"stat",target:"defense",value:35,description:"DEF +35"},{type:"passive",target:"fire_resistance",value:20,description:"Fire Resistance +20%"}],rarity:"epic",sellPrice:500,canSell:!0,canDiscard:!1})],gp=[Da("bronze_sword",{typeId:"bronze_sword",name:"Bronze Sword",description:"An old bronze sword. Better than nothing.",itemType:"equipment",type:"SWORD",equipmentSlot:"weapon",durability:25,maxDurability:30,level:0,quality:"poor",effects:[{type:"stat",target:"attack",value:8,description:"ATK +8"}],rarity:"common",sellPrice:15,canSell:!0,canDiscard:!0}),Da("lesser_potion",{typeId:"lesser_potion",name:"Lesser Potion",description:"A weak healing potion. Restores minimal HP.",itemType:"consumable",type:"POTION",stackable:!0,stackCount:2,maxStack:10,usableContext:"anywhere",rarity:"common",sellPrice:10,canSell:!0,canDiscard:!0}),Da("teleport_stone",{typeId:"teleport_stone",name:"Teleport Stone",description:"Instantly return to base camp. Single use.",itemType:"consumable",type:"STONE",stackable:!1,usableContext:"map",rarity:"rare",sellPrice:150,canSell:!0,canDiscard:!1})],Yv={weapon:Da("beginner_sword",{typeId:"beginner_sword",name:"Beginner Sword",description:"A sword given to all new adventurers.",itemType:"equipment",type:"SWORD",equipmentSlot:"weapon",durability:40,maxDurability:40,level:0,quality:"normal",effects:[{type:"stat",target:"attack",value:10,description:"ATK +10"}],rarity:"common",sellPrice:25,canSell:!0,canDiscard:!0}),armor:Da("leather_armor",{typeId:"leather_armor",name:"Leather Armor",description:"Basic leather protection for beginners.",itemType:"equipment",type:"ARMOR",equipmentSlot:"armor",durability:30,maxDurability:30,level:0,quality:"normal",effects:[{type:"stat",target:"defense",value:5,description:"DEF +5"}],rarity:"common",sellPrice:20,canSell:!0,canDiscard:!0}),helmet:null,boots:null,accessory1:Da("power_ring",{typeId:"power_ring",name:"Power Ring",description:"A ring that slightly enhances physical strength.",itemType:"equipment",type:"RING",equipmentSlot:"accessory1",durability:999,maxDurability:999,level:1,quality:"normal",effects:[{type:"stat",target:"attack",value:5,description:"ATK +5"},{type:"stat",target:"hp",value:10,description:"HP +10"}],rarity:"uncommon",sellPrice:80,canSell:!0,canDiscard:!0}),accessory2:null},ly=S.createContext(void 0);function Pv(){return{gold:{baseCamp:1250,exploration:0},magicStones:{baseCamp:{small:5,medium:3,large:1,huge:0},exploration:{small:0,medium:0,large:0,huge:0}},explorationLimit:{current:0,max:10}}}const Qv=({children:s})=>{const[r,o]=S.useState(Pv()),u=S.useCallback((j,R=!1)=>{o(A=>({...A,gold:{...A.gold,baseCamp:R?A.gold.baseCamp+j:A.gold.baseCamp,exploration:R?A.gold.exploration:A.gold.exploration+j}}))},[]),m=S.useCallback(j=>r.gold.baseCamp+r.gold.exploration<j?!1:(o(A=>{let x=A.gold.baseCamp,I=A.gold.exploration;if(x>=j)x-=j;else{const G=j-x;x=0,I-=G}return{...A,gold:{baseCamp:Math.max(0,x),exploration:Math.max(0,I)}}}),!0),[r.gold.baseCamp,r.gold.exploration]),f=S.useCallback(()=>r.gold.baseCamp+r.gold.exploration,[r.gold.baseCamp,r.gold.exploration]),h=S.useCallback((j,R=!1)=>{o(A=>{const x=R?"baseCamp":"exploration";return{...A,magicStones:{...A.magicStones,[x]:{small:A.magicStones[x].small+(j.small||0),medium:A.magicStones[x].medium+(j.medium||0),large:A.magicStones[x].large+(j.large||0),huge:A.magicStones[x].huge+(j.huge||0)}}}})},[]),b=S.useCallback(j=>{const R=bl(r.magicStones.baseCamp),A=bl(r.magicStones.exploration);return!(R+A<j)},[r.magicStones.baseCamp,r.magicStones.exploration]),p=S.useCallback(()=>{const j=bl(r.magicStones.baseCamp),R=bl(r.magicStones.exploration);return j+R},[r.magicStones.baseCamp,r.magicStones.exploration]),v=S.useCallback(()=>r.magicStones.baseCamp,[r.magicStones.baseCamp]),g=S.useCallback(()=>r.magicStones.exploration,[r.magicStones.exploration]),N=S.useCallback(()=>r.explorationLimit.current>=r.explorationLimit.max?!1:(o(j=>({...j,explorationLimit:{...j.explorationLimit,current:j.explorationLimit.current+1}})),!0),[r.explorationLimit.current,r.explorationLimit.max]),k=S.useCallback(()=>{o(j=>({...j,explorationLimit:{...j.explorationLimit,current:0}}))},[]),M=S.useCallback(()=>r.explorationLimit,[r.explorationLimit]),D=S.useCallback(j=>{o(R=>{const A=Math.floor(R.gold.exploration*j);return{...R,gold:{baseCamp:R.gold.baseCamp+A,exploration:0},magicStones:{baseCamp:{small:R.magicStones.baseCamp.small+Math.floor(R.magicStones.exploration.small*j),medium:R.magicStones.baseCamp.medium+Math.floor(R.magicStones.exploration.medium*j),large:R.magicStones.baseCamp.large+Math.floor(R.magicStones.exploration.large*j),huge:R.magicStones.baseCamp.huge+Math.floor(R.magicStones.exploration.huge*j)},exploration:{small:0,medium:0,large:0,huge:0}}}})},[]),O=S.useCallback(()=>{o(j=>({...j,gold:{...j.gold,exploration:0},magicStones:{...j.magicStones,exploration:{small:0,medium:0,large:0,huge:0}}}))},[]);return l.jsx(ly.Provider,{value:{resources:r,addGold:u,useGold:m,getTotalGold:f,addMagicStones:h,useMagicStones:b,getTotalMagicStonesValue:p,getBaseCampMagicStones:v,getExplorationMagicStones:g,useExplorationPoint:N,resetExplorationLimit:k,getExplorationLimit:M,transferExplorationToBaseCamp:D,resetExplorationResources:O},children:s})},Zu=()=>{const s=S.useContext(ly);if(!s)throw new Error("useResources must be used within ResourceProvider");return s},iy=S.createContext(void 0);function Xv(s){switch(s){case"swordsman":return Ea;case"mage":return J0;case"summoner":return Z0;default:return Ea}}function hp(s){return{...s,gold:0,storage:{items:yp,maxCapacity:p0,currentCapacity:yp.length},inventory:{items:gp,maxCapacity:y0,currentCapacity:gp.length},equipmentInventory:{items:[],maxCapacity:g0,currentCapacity:0},equipmentSlots:Yv,explorationGold:0,baseCampGold:0,explorationMagicStones:{small:0,medium:0,large:0,huge:0},baseCampMagicStones:{small:0,medium:0,large:0,huge:0},explorationLimit:{current:0,max:h0},sanctuaryProgress:{currentRunSouls:25,totalSouls:150,unlockedNodes:[],explorationLimitBonus:0}}}function vp(s,r="normal"){return{currentHp:s.hp,currentAp:s.ap,cardMasteryStore:new Map,lives:ty(r),difficulty:r}}const $v=({children:s})=>{const r=Zu(),[o,u]=S.useState(()=>({...hp(Ea),gold:r.getTotalGold(),baseCampGold:r.resources.gold.baseCamp,explorationGold:r.resources.gold.exploration,baseCampMagicStones:r.resources.magicStones.baseCamp,explorationMagicStones:r.resources.magicStones.exploration,explorationLimit:r.resources.explorationLimit})),[m,f]=S.useState(()=>vp(Ea)),h=T=>{u(z=>({...z,classGrade:T}))},b=T=>{u(z=>({...z,hp:Math.max(0,Math.min(T,z.maxHp))}))},p=T=>{u(z=>({...z,ap:Math.max(0,Math.min(T,z.maxAp))}))},v=T=>{u(z=>({...z,sanctuaryProgress:{...z.sanctuaryProgress,currentRunSouls:z.sanctuaryProgress.currentRunSouls+T}}))},g=T=>{u(z=>{const F=Math.floor(z.sanctuaryProgress.currentRunSouls*T);return{...z,sanctuaryProgress:{...z.sanctuaryProgress,totalSouls:z.sanctuaryProgress.totalSouls+F,currentRunSouls:0}}})},N=()=>{u(T=>({...T,sanctuaryProgress:{...T.sanctuaryProgress,currentRunSouls:0}}))},k=T=>{const z=Xv(T),F=Hv(T),de={...z,deck:F.starterDeck},ce=hp(de);u({...ce,gold:r.getTotalGold(),baseCampGold:r.resources.gold.baseCamp,explorationGold:r.resources.gold.exploration,baseCampMagicStones:r.resources.magicStones.baseCamp,explorationMagicStones:r.resources.magicStones.exploration,explorationLimit:r.resources.explorationLimit,sanctuaryProgress:{currentRunSouls:0,totalSouls:0,unlockedNodes:[],explorationLimitBonus:0}})},M=(T,z=!1)=>{r.addGold(T,z),u(F=>({...F,gold:r.getTotalGold()+T,baseCampGold:z?F.baseCampGold+T:F.baseCampGold,explorationGold:z?F.explorationGold:F.explorationGold+T}))},D=T=>{const z=r.useGold(T);return z&&u(F=>{let de=F.baseCampGold,ce=F.explorationGold;if(de>=T)de-=T;else{const B=T-de;de=0,ce-=B}return{...F,gold:F.gold-T,baseCampGold:Math.max(0,de),explorationGold:Math.max(0,ce)}}),z},O=(T,z=!1)=>{r.addMagicStones(T,z),u(F=>z?{...F,baseCampMagicStones:{small:F.baseCampMagicStones.small+(T.small||0),medium:F.baseCampMagicStones.medium+(T.medium||0),large:F.baseCampMagicStones.large+(T.large||0),huge:F.baseCampMagicStones.huge+(T.huge||0)}}:{...F,explorationMagicStones:{small:F.explorationMagicStones.small+(T.small||0),medium:F.explorationMagicStones.medium+(T.medium||0),large:F.explorationMagicStones.large+(T.large||0),huge:F.explorationMagicStones.huge+(T.huge||0)}})},j=T=>r.useMagicStones(T),R=T=>{r.transferExplorationToBaseCamp(T),g(T),u(z=>({...z,baseCampGold:z.baseCampGold+Math.floor(z.explorationGold*T),explorationGold:0,baseCampMagicStones:{small:z.baseCampMagicStones.small+Math.floor(z.explorationMagicStones.small*T),medium:z.baseCampMagicStones.medium+Math.floor(z.explorationMagicStones.medium*T),large:z.baseCampMagicStones.large+Math.floor(z.explorationMagicStones.large*T),huge:z.baseCampMagicStones.huge+Math.floor(z.explorationMagicStones.huge*T)},explorationMagicStones:{small:0,medium:0,large:0,huge:0},gold:z.baseCampGold+Math.floor(z.explorationGold*T)}))},A=()=>{r.resetExplorationResources(),N(),u(T=>({...T,explorationGold:0,gold:T.baseCampGold,explorationMagicStones:{small:0,medium:0,large:0,huge:0}}))},x=T=>{f(z=>({...z,...T}))},I=(T,z)=>{f(F=>{const de=new Map(F.cardMasteryStore),ce=de.get(T)||0;return de.set(T,ce+z),{...F,cardMasteryStore:de}})},G=()=>{f(T=>({...vp(o,T.difficulty),lives:T.lives,difficulty:T.difficulty}))},X=()=>{f(T=>({...T,lives:Ov(T.lives)}))},K=()=>Uv(m.lives),ae=T=>{f(z=>({...z,difficulty:T,lives:ty(T)}))},le=S.useMemo(()=>({persistent:{id:`player_${Date.now()}`,name:o.name??"Adventurer",playerClass:o.playerClass,classGrade:o.classGrade,level:o.level,baseMaxHp:o.maxHp,baseMaxAp:o.maxAp,baseSpeed:o.speed,cardActEnergy:o.cardActEnergy,deckCardIds:o.deck.map(T=>T.id),titles:o.tittle??[]},resources:{baseCampGold:o.baseCampGold,explorationGold:o.explorationGold,baseCampMagicStones:o.baseCampMagicStones,explorationMagicStones:o.explorationMagicStones,explorationLimit:o.explorationLimit},inventory:{storage:o.storage,inventory:o.inventory,equipmentInventory:o.equipmentInventory,equipmentSlots:o.equipmentSlots},progression:{sanctuaryProgress:o.sanctuaryProgress,unlockedDepths:[1],completedAchievements:[]}}),[o]),be=T=>{u(z=>{let F={...z};return T.persistent&&(T.persistent.classGrade!==void 0&&(F.classGrade=T.persistent.classGrade),T.persistent.level!==void 0&&(F.level=T.persistent.level),T.persistent.name!==void 0&&(F.name=T.persistent.name),T.persistent.titles!==void 0&&(F.tittle=T.persistent.titles)),T.resources&&(T.resources.baseCampGold!==void 0&&(F.baseCampGold=T.resources.baseCampGold,F.gold=T.resources.baseCampGold+(T.resources.explorationGold??z.explorationGold)),T.resources.explorationGold!==void 0&&(F.explorationGold=T.resources.explorationGold,F.gold=(T.resources.baseCampGold??z.baseCampGold)+T.resources.explorationGold),T.resources.baseCampMagicStones!==void 0&&(F.baseCampMagicStones=T.resources.baseCampMagicStones),T.resources.explorationMagicStones!==void 0&&(F.explorationMagicStones=T.resources.explorationMagicStones),T.resources.explorationLimit!==void 0&&(F.explorationLimit=T.resources.explorationLimit)),T.inventory&&(T.inventory.storage!==void 0&&(F.storage=T.inventory.storage),T.inventory.inventory!==void 0&&(F.inventory=T.inventory.inventory),T.inventory.equipmentInventory!==void 0&&(F.equipmentInventory=T.inventory.equipmentInventory),T.inventory.equipmentSlots!==void 0&&(F.equipmentSlots=T.inventory.equipmentSlots)),T.progression&&T.progression.sanctuaryProgress!==void 0&&(F.sanctuaryProgress=T.progression.sanctuaryProgress),F})};return l.jsx(iy.Provider,{value:{playerData:le,updatePlayerData:be,runtimeState:m,updateRuntimeState:x,updateCardMastery:I,resetRuntimeState:G,decreaseLives:X,isGameOver:K,setDifficulty:ae,updateClassGrade:h,updateHp:b,updateAp:p,addSouls:v,transferSouls:g,resetCurrentRunSouls:N,initializeWithClass:k,addGold:M,useGold:D,addMagicStones:O,useMagicStones:j,transferExplorationResources:R,resetExplorationResources:A},children:s})},Aa=()=>{const s=S.useContext(iy);if(!s)throw new Error("usePlayer must be used within PlayerProvider");return s},Hi="1.0.0",Mn="roguelike_card_save",Ku={save(s){try{const r={...s,version:Hi,timestamp:Date.now()},o=JSON.stringify(r);return localStorage.setItem(Mn,o),{success:!0,message:"Game saved successfully",timestamp:r.timestamp}}catch(r){return console.error("Save failed:",r),{success:!1,message:`Save failed: ${r instanceof Error?r.message:"Unknown error"}`}}},load(){try{const s=localStorage.getItem(Mn);if(!s)return{success:!1,message:"No save data found"};const r=JSON.parse(s);return r.version!==Hi?{success:!0,message:`Save data version mismatch (${r.version} vs ${Hi}). Migration may be needed.`,data:r,needsMigration:!0}:{success:!0,message:"Game loaded successfully",data:r}}catch(s){return console.error("Load failed:",s),{success:!1,message:`Load failed: ${s instanceof Error?s.message:"Unknown error"}`}}},deleteSave(){localStorage.removeItem(Mn)},hasSave(){return localStorage.getItem(Mn)!==null},getMetadata(){try{const s=localStorage.getItem(Mn);if(!s)return{exists:!1};const r=JSON.parse(s);return{exists:!0,version:r.version,timestamp:r.timestamp,playerName:r.player?.name,playerClass:r.player?.playerClass,classGrade:r.player?.classGrade}}catch{return{exists:!1}}},exportSave(){return localStorage.getItem(Mn)||""},importSave(s){try{const r=JSON.parse(s);return!r.version||!r.player||!r.resources?(console.error("Invalid save data structure"),!1):(localStorage.setItem(Mn,s),!0)}catch(r){return console.error("Import failed:",r),!1}},migrate(s){return{...s,version:Hi}}},cy=S.createContext(void 0);function Vv(){return Ku.hasSave()?"camp":"character_select"}const Jv={currentScreen:Vv(),battleMode:null,depth:1},Zv=({children:s})=>{const[r,o]=S.useState(Jv),u=b=>{o(p=>({...p,currentScreen:b,...b!=="battle"&&{battleConfig:void 0,battleMode:null}}))},m=(b,p="normal")=>{o(v=>({...v,currentScreen:"battle",battleMode:p,battleConfig:b}))},f=()=>{o(b=>({...b,currentScreen:"camp",battleMode:null,battleConfig:void 0}))},h=b=>{o(p=>({...p,depth:b}))};return l.jsx(cy.Provider,{value:{gameState:r,setGameState:o,navigateTo:u,startBattle:m,returnToCamp:f,setDepth:h},children:s})},Oa=()=>{const s=S.useContext(cy);if(!s)throw new Error("useGameState must be used within GameStateProvider");return s};function Kv(s){const r=s.progression.sanctuaryProgress.currentRunSouls;return{updates:{inventory:{...s.inventory,storage:s.inventory.storage,inventory:{...s.inventory.inventory,items:[],currentCapacity:0},equipmentInventory:{...s.inventory.equipmentInventory,items:[],currentCapacity:0},equipmentSlots:{weapon:null,armor:null,helmet:null,boots:null,accessory1:null,accessory2:null}},resources:{...s.resources,explorationGold:0,explorationMagicStones:{small:0,medium:0,large:0,huge:0},explorationLimit:s.resources.explorationLimit},progression:{...s.progression,sanctuaryProgress:{...s.progression.sanctuaryProgress,totalSouls:s.progression.sanctuaryProgress.totalSouls+r,currentRunSouls:0}}},soulsTransferred:r}}const ry={healing_potion:{typeId:"healing_potion",name:"Healing Potion",nameJa:"",description:"Restores 30 HP when consumed.",descriptionJa:"HP30",effects:[{type:"heal",value:30}],usableContext:"battle",icon:"",rarity:"common",sellPrice:20,maxStack:10},greater_healing_potion:{typeId:"greater_healing_potion",name:"Greater Healing Potion",nameJa:"",description:"Restores 60 HP when consumed.",descriptionJa:"HP60",effects:[{type:"heal",value:60}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:50,maxStack:5},full_elixir:{typeId:"full_elixir",name:"Full Elixir",nameJa:"",description:"Fully restores HP to maximum.",descriptionJa:"HP",effects:[{type:"fullHeal"}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:200,maxStack:3},energy_potion:{typeId:"energy_potion",name:"Energy Potion",nameJa:"",description:"Restores 2 card energy.",descriptionJa:"2",effects:[{type:"energy",value:2}],usableContext:"battle",icon:"",rarity:"common",sellPrice:25,maxStack:10},shield_potion:{typeId:"shield_potion",name:"Shield Potion",nameJa:"",description:"Grants 15 guard points.",descriptionJa:"15",effects:[{type:"shield",value:15}],usableContext:"battle",icon:"",rarity:"common",sellPrice:30,maxStack:10},antidote:{typeId:"antidote",name:"Antidote",nameJa:"",description:"Removes all debuffs.",descriptionJa:"",effects:[{type:"debuffClear"}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:40,maxStack:5},strength_elixir:{typeId:"strength_elixir",name:"Strength Elixir",nameJa:"",description:"Grants Attack Up (Major) for 3 turns.",descriptionJa:"3",effects:[{type:"buff",buffType:"atkUpMajor",duration:3}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:100,maxStack:3},iron_skin_elixir:{typeId:"iron_skin_elixir",name:"Iron Skin Elixir",nameJa:"",description:"Grants Defense Up (Major) for 3 turns.",descriptionJa:"3",effects:[{type:"buff",buffType:"defUpMajor",duration:3}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:100,maxStack:3},haste_potion:{typeId:"haste_potion",name:"Haste Potion",nameJa:"",description:"Grants Haste for 2 turns.",descriptionJa:"2",effects:[{type:"buff",buffType:"haste",duration:2}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:60,maxStack:5},magic_burst_crystal:{typeId:"magic_burst_crystal",name:"Magic Burst Crystal",nameJa:"",description:"Deals 40 damage to all enemies.",descriptionJa:"40",effects:[{type:"damage",value:40,targetAll:!0}],usableContext:"battle",icon:"",rarity:"rare",sellPrice:150,maxStack:3},time_stop_hourglass:{typeId:"time_stop_hourglass",name:"Time Stop Hourglass",nameJa:"",description:"Skips the next enemy turn.",descriptionJa:"",effects:[{type:"skipEnemyTurn"}],usableContext:"battle",icon:"",rarity:"epic",sellPrice:300,maxStack:1},draw_scroll:{typeId:"draw_scroll",name:"Draw Scroll",nameJa:"",description:"Draw 2 additional cards.",descriptionJa:"2",effects:[{type:"draw",value:2}],usableContext:"battle",icon:"",rarity:"uncommon",sellPrice:45,maxStack:5},combo_elixir:{typeId:"combo_elixir",name:"Combo Elixir",nameJa:"",description:"Restores 30 HP, 2 energy, and grants 10 guard.",descriptionJa:"HP30210",effects:[{type:"heal",value:30},{type:"energy",value:2},{type:"shield",value:10}],usableContext:"battle",icon:"",rarity:"epic",sellPrice:250,maxStack:2},teleport_stone:{typeId:"teleport_stone",name:"Teleport Stone",nameJa:"",description:"Instantly return to base camp.",descriptionJa:"",effects:[],usableContext:"map",icon:"",rarity:"rare",sellPrice:150,maxStack:3},treasure_map:{typeId:"treasure_map",name:"Treasure Map",nameJa:"",description:"Reveals hidden treasure on the current floor.",descriptionJa:"",effects:[],usableContext:"map",icon:"",rarity:"uncommon",sellPrice:80,maxStack:3},repair_kit:{typeId:"repair_kit",name:"Repair Kit",nameJa:"",description:"Restores 20 durability to equipped weapon.",descriptionJa:"20",effects:[],usableContext:"map",icon:"",rarity:"common",sellPrice:30,maxStack:5},lucky_charm:{typeId:"lucky_charm",name:"Lucky Charm",nameJa:"",description:"Increases rare drop rate for next battle.",descriptionJa:"",effects:[],usableContext:"map",icon:"",rarity:"uncommon",sellPrice:60,maxStack:5},merchant_ticket:{typeId:"merchant_ticket",name:"Merchant Ticket",nameJa:"",description:"Refreshes the shop inventory.",descriptionJa:"",effects:[],usableContext:"camp",icon:"",rarity:"rare",sellPrice:200,maxStack:3},lesser_potion:{typeId:"lesser_potion",name:"Lesser Potion",nameJa:"",description:"Restores 15 HP when consumed.",descriptionJa:"HP15",effects:[{type:"heal",value:15}],usableContext:"anywhere",icon:"",rarity:"common",sellPrice:10,maxStack:10}};function Fv(s){return ry[s]}function Wv(s){const r=ry[s];return r?r.usableContext==="battle"||r.usableContext==="anywhere":!1}function eb(s,r,o,u,m,f){if(s.itemType!=="consumable")return{success:!1,message:`${s.name}`};if(!Wv(s.typeId))return{success:!1,message:`${s.name}`};const h=Fv(s.typeId);if(!h)return tb(s,r,o);const b={success:!0,message:"",buffsApplied:[]},p=[];for(const v of h.effects){const g=ab(v,r,o,u,m,f);g.hpChange&&(b.hpChange=(b.hpChange??0)+g.hpChange),g.guardChange&&(b.guardChange=(b.guardChange??0)+g.guardChange),g.energyChange&&(b.energyChange=(b.energyChange??0)+g.energyChange),g.cardsDrawn&&(b.cardsDrawn=(b.cardsDrawn??0)+g.cardsDrawn),g.buffsApplied&&b.buffsApplied.push(...g.buffsApplied),g.debuffsCleared&&(b.debuffsCleared=!0),g.damageDealt&&(b.damageDealt=(b.damageDealt??0)+g.damageDealt),g.skipEnemyTurn&&(b.skipEnemyTurn=!0),g.message&&p.push(g.message)}return b.message=`${h.nameJa} ${p.join(" ")}`,b}function ab(s,r,o,u,m,f){switch(s.type){case"heal":{const h=Math.min(s.value??0,o-r);return{hpChange:h,message:`HP${h}`}}case"fullHeal":return{hpChange:o-r,message:"HP"};case"shield":return{guardChange:s.value??0,message:`${s.value}`};case"energy":{const h=Math.min(s.value??0,f-m);return{energyChange:h,message:`${h}`}}case"buff":{if(!s.buffType)return{message:""};const h=ye[s.buffType];return{buffsApplied:[{type:s.buffType,duration:s.duration??3}],message:`${h?.nameJa??s.buffType}`}}case"debuffClear":return{debuffsCleared:!0,message:""};case"damage":return{damageDealt:s.value??0,message:s.targetAll?`${s.value}`:`${s.value}`};case"draw":return{cardsDrawn:s.value??1,message:`${s.value}`};case"skipEnemyTurn":return{skipEnemyTurn:!0,message:""};default:return{message:""}}}function tb(s,r,o){const u=s.name.toLowerCase(),m=s.typeId.toLowerCase();if(u.includes("potion")||u.includes("heal")||m.includes("potion")||m.includes("heal")){let f=30;u.includes("lesser")||m.includes("lesser")?f=15:(u.includes("greater")||m.includes("greater"))&&(f=60);const h=Math.min(f,o-r);return{success:!0,hpChange:h,message:`${s.name} HP${h}`}}return{success:!0,message:`${s.name}`}}function nb(s,r){const o=new Map(r);return s.forEach(u=>{const m=u.cardTypeId,f=o.get(m)??0;u.useCount>f&&o.set(m,u.useCount)}),o}const sb=({depth:s,onReturnToCamp:r,onWin:o,onLose:u})=>{const m=Ju,{playerData:f,updatePlayerData:h,runtimeState:b,updateRuntimeState:p,decreaseLives:v,isGameOver:g,setDifficulty:N}=Aa(),{addMagicStones:k}=Zu(),{navigateTo:M,gameState:D}=Oa(),O=D.battleConfig?.enemyType||"normal",[j,R]=S.useState(0),A=S.useRef(!1),[x,I]=S.useState(0),[G,X]=S.useState(!1),[K,ae]=S.useState(!1),le=S.useMemo(()=>({currentHp:b.currentHp,currentAp:b.currentAp,maxHp:f.persistent.baseMaxHp,maxAp:f.persistent.baseMaxAp,name:f.persistent.name,playerClass:f.persistent.playerClass,classGrade:f.persistent.classGrade,speed:f.persistent.baseSpeed,cardActEnergy:f.persistent.cardActEnergy,cardMasteryStore:b.cardMasteryStore,deckConfig:Ap(f.persistent.playerClass)}),[b.currentHp,b.currentAp,b.cardMasteryStore,f.persistent]),{playerRef:be,aliveEnemies:T,playerName:z,playerClass:F,playerHp:de,playerMaxHp:ce,playerAp:B,playerMaxAp:Z,playerGuard:V,playerBuffs:W,cardEnergy:re,maxEnergy:_,swordEnergy:Y,phaseCount:J,turnMessage:ee,showTurnMessage:oe,hand:me,drawPile:ge,discardPile:Me,isNewCard:Se,getDiscardingCards:Ua,handleCardPlay:za,handleEndPhase:Ka,resetForNextEnemy:wt,openedPileType:da,openDrawPile:Ba,openDiscardPile:rt,closePileModal:ha,battleResult:pa,battleStats:te,phaseQueue:fe,currentPhaseIndex:Re}=Zp(s,void 0,le);S.useEffect(()=>{if(pa==="defeat"&&!A.current){const xe=Kv(f);h(xe.updates),I(xe.soulsTransferred),v(),A.current=!0}},[pa,f,h,v]);const[ya,Fa]=S.useState(Re);Re!==ya&&(Fa(Re),ae(!1));const sa=()=>{const xe=j+1;R(xe);let we="normal";xe===d0?we="boss":xe%m0===0&&(we="group");const{enemies:la}=Yp(s,we);wt(la)},on=S.useCallback(xe=>{if(K){console.log("Item already used this phase");return}const we=eb(xe,de,ce,W,re,_);if(!we.success){console.log(`Item use failed: ${we.message}`);return}if(we.hpChange&&we.hpChange>0){const Pe=Math.min(de+we.hpChange,ce);p({currentHp:Pe})}we.buffsApplied&&we.buffsApplied.length>0&&console.log("Buffs applied:",we.buffsApplied),we.debuffsCleared&&console.log("Debuffs cleared");const la=f.inventory.inventory.items.findIndex(Pe=>Pe.id===xe.id);if(la!==-1){const Pe=[...f.inventory.inventory.items],Ta=Pe[la];Ta.stackable&&Ta.stackCount&&Ta.stackCount>1?Pe[la]={...Ta,stackCount:Ta.stackCount-1}:Pe.splice(la,1),h({inventory:{...f.inventory,inventory:{...f.inventory.inventory,items:Pe,currentCapacity:Pe.length}}})}ae(!0),console.log(`Used item: ${xe.name} - ${we.message}`)},[K,de,ce,W,re,_,f.inventory,p,h]),Rt=f.inventory.inventory.items;if(pa==="victory"){const xe=Mv(O),we=wv(O),la=()=>{const Pe=[...me,...ge,...Me],Ta=nb(Pe,b.cardMasteryStore),kt=Tv(f.progression.sanctuaryProgress,O,!1);h({progression:{...f.progression,sanctuaryProgress:kt.newProgress}}),k(we,!1),p({currentHp:de,currentAp:B,cardMasteryStore:Ta}),o?o():sa()};return l.jsx(kv,{onContinue:la,rewards:{soulRemnants:xe,magicStones:we,cards:[]},battleStats:{phaseCount:J,damageDealt:te.damageDealt,damageTaken:te.damageTaken},enemyType:O})}if(pa==="defeat"){const xe=g(),we=()=>{xe?(Ku.deleteSave(),N("normal"),M("character_select")):u?u():r&&r()};return l.jsx(qv,{onRetry:()=>window.location.reload(),onReturnToCamp:we,battleStats:{turnCount:J,damageDealt:te.damageDealt,damageTaken:te.damageTaken},remainingLives:b.lives.currentLives,maxLives:b.lives.maxLives,soulsTransferred:x,isGameOver:xe})}return l.jsxs("div",{className:"battle-screen",children:[oe&&l.jsx("div",{className:"turn-message-slide",children:l.jsx("div",{className:"turn-message-text",children:ee})}),l.jsxs("div",{className:"battle-header",children:[l.jsxs("div",{className:"depth-info",children:[s,"-",j===6?"BOSS":j+1," | Phase"," ",J]}),l.jsx(Fp,{phaseQueue:fe,currentPhaseIndex:Re})]}),l.jsxs("div",{className:"battle-field",children:[l.jsx(Wp,{enemies:T.map(xe=>({definition:xe.definition,hp:xe.hp,maxHp:xe.maxHp,ap:xe.ap,maxAp:xe.maxAp,guard:xe.guard,actEnergy:xe.energy,buffDebuffs:xe.buffDebuffs,turnCount:J})),enemyRefs:T.map(xe=>xe.ref),theme:m}),l.jsx(xv,{playerName:z,playerClass:F,playerRef:be,playerHp:de,playerMaxHp:ce,playerAp:B,playerMaxAp:Z,playerGuard:V,playerBuffs:W,cardEnergy:re,maxEnergy:_,swordEnergy:Y,theme:m})]}),l.jsxs("div",{className:"hand-container",children:[l.jsxs("div",{className:"pile-section",children:[l.jsxs("div",{className:"pile-icon draw",title:"Draw Pile",onClick:Ba,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",ge.length]})]}),l.jsxs("div",{className:"pile-icon discard",title:"Discard Pile",onClick:rt,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",Me.length]})]})]}),l.jsx("div",{className:"card-container",children:me.map((xe,we)=>{const la=Se(xe.id),Pe=Ua().some(va=>va.id===xe.id),Ta=me.length,kt=we-(Ta-1)/2,ut=Math.abs(kt)*1.5-1.8,aa=kt*4.2;return l.jsx("div",{className:`card-wrapper ${la?"drawing":""} ${Pe?"discarding":""}`,style:{"--rot":`${aa}deg`,"--y":`${ut*.5}vh`,animationDelay:la?`${we*.1}s`:Pe?`${we*.05}s`:"0s"},onClick:va=>za(xe,va.currentTarget),children:l.jsx(Cl,{card:xe,depth:s,isPlayable:xe.cost<=re&&!Pe})},xe.id)})}),l.jsxs("div",{className:"button-frame",children:[l.jsx("button",{className:"action-btn end-phase-btn",onClick:Ka,children:"End Phase"}),l.jsx("button",{className:"action-btn use-item-btn",onClick:()=>X(!0),children:"Use Item"}),l.jsx("button",{className:"action-btn flee-btn",onClick:()=>console.log("Fleeing Combat: "),children:"Fleeing Combat"})]})]}),l.jsx(Kp,{isOpen:da!==null,onClose:ha,title:da==="draw"?"":"",cards:da==="draw"?ge:Me,depth:s}),l.jsx(Lv,{isOpen:G,onClose:()=>X(!1),items:Rt,onUseItem:on,itemUsedThisPhase:K})]})},lb=({examEnemy:s,onWin:r,onLose:o})=>{const u={primary:"#8B4513",secondary:"#CD853F",accent:"#DAA520",bg:"#2C1810",glow:"#FFD700",hover:"#FFEC8B"},{playerRef:m,aliveEnemies:f,playerName:h,playerClass:b,playerHp:p,playerMaxHp:v,playerAp:g,playerMaxAp:N,playerGuard:k,playerBuffs:M,cardEnergy:D,maxEnergy:O,swordEnergy:j,phaseCount:R,turnMessage:A,showTurnMessage:x,hand:I,drawPile:G,discardPile:X,isNewCard:K,getDiscardingCards:ae,handleCardPlay:le,handleEndPhase:be,openedPileType:T,openDrawPile:z,openDiscardPile:F,closePileModal:de,battleResult:ce,phaseQueue:B,currentPhaseIndex:Z}=Zp(1,[s]);if(S.useEffect(()=>{ce==="victory"?r():ce==="defeat"&&o()},[ce,r,o]),ce==="victory"||ce==="defeat")return null;const V={"--theme-primary":u.primary,"--theme-secondary":u.secondary,"--theme-accent":u.accent,"--theme-bg":u.bg,"--theme-glow":u.glow,"--theme-hover":u.accent};return l.jsxs("div",{className:"battle-screen",style:V,children:[x&&l.jsx("div",{className:"turn-message-slide",children:l.jsx("div",{className:"turn-message-text",children:A})}),l.jsxs("div",{className:"battle-header",children:[l.jsxs("div",{className:"depth-info",children:["Promotion Exam | Phase ",R]}),l.jsxs("div",{className:"exam-enemy-name",children:["vs ",s.nameJa||s.name]})]}),l.jsx(Fp,{phaseQueue:B,currentPhaseIndex:Z}),l.jsxs("div",{className:"battle-field",children:[l.jsx(Wp,{enemies:f.map(W=>({definition:W.definition,hp:W.hp,maxHp:W.maxHp,ap:W.ap,maxAp:W.maxAp,guard:W.guard,actEnergy:W.energy,buffDebuffs:W.buffDebuffs,turnCount:R})),enemyRefs:f.map(W=>W.ref),theme:u}),l.jsxs("div",{className:"player-section",children:[l.jsxs("div",{className:"player-field",children:[l.jsxs("div",{className:"character-name",children:[h," [",b,"]"]}),l.jsx("div",{className:"character-visual player",ref:m,children:""}),l.jsxs("div",{className:"status-container player-status-container",children:[k>0&&l.jsxs("div",{className:"status-bar-row guard-row",children:[l.jsx("div",{className:"value-badge guard-badge",children:k}),l.jsx("div",{className:"unified-bar-container guard-bar",children:l.jsx("div",{className:"bar-fill guard-fill",style:{width:`${Math.min(100,k/30*100)}%`}})})]}),l.jsxs("div",{className:"status-bar-row hp-row",children:[l.jsxs("div",{...g===0?{className:"break-badge"}:{className:"value-badge ap-badge"},children:[g>0&&`${g}/${N}`,g===0&&"break!"]}),l.jsxs("div",{...g>0?{className:"Armor-border"}:{className:"unified-bar-container hp-bar"},children:[g>0&&l.jsx("div",{className:"bar-fill ap-overlay",style:{width:`${g/N*100}%`}}),l.jsx("div",{className:"bar-fill hp-fill",style:{width:`${p/v*100}%`}}),l.jsxs("span",{className:"hp-value",children:[p,"/",v]})]})]}),l.jsxs("div",{className:"status-bar-row energy-row",children:[l.jsxs("div",{className:"value-badge energy-badge",children:[D,"/",O]}),l.jsx("div",{className:"unified-bar-container energy-bar",children:l.jsx("div",{className:"bar-fill energy-fill",style:{width:`${D/O*100}%`}})})]}),l.jsx($u,{buffsDebuffs:M,theme:u})]})]}),l.jsx("div",{className:"energy-and-ability",children:l.jsxs("div",{className:"sword-energy-display",children:[l.jsx("div",{className:"sword-energy-label",children:":"}),l.jsx("div",{className:"sword-energy-bar-container",children:l.jsxs("div",{className:"sword-energy-bar",children:[l.jsx("div",{className:`sword-energy-fill ${j.current>=10?"level-max":j.current>=8?"level-high":j.current>=5?"level-mid":""}`,style:{width:`${j.current/j.max*100}%`}}),l.jsxs("span",{className:"sword-energy-text",children:[j.current,"/",j.max]})]})}),l.jsxs("div",{className:"sword-energy-effects",children:[l.jsxs("span",{className:`effect-badge crit ${j.current>=5?"active":"inactive"}`,children:[j.current>=5?"":""," Crit+20%"]}),l.jsxs("span",{className:`effect-badge pierce ${j.current>=8?"active":"inactive"}`,children:[j.current>=8?"":""," +30%"]}),l.jsxs("span",{className:`effect-badge max ${j.current>=10?"active":"inactive"}`,children:[j.current>=10?"":""," MAX"]})]})]})})]})]}),l.jsxs("div",{className:"pile-icon draw",title:"Draw Pile",onClick:z,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",G.length]})]}),l.jsxs("div",{className:"pile-icon discard",title:"Discard Pile",onClick:F,children:[l.jsx("div",{className:"pile-visual",children:""}),l.jsxs("div",{className:"pile-count",children:[": ",X.length]})]}),l.jsx("button",{className:"end-turn-btn",onClick:be,children:"End Phase"}),l.jsx("div",{className:"hand-container",children:I.map((W,re)=>{const _=K(W.id),Y=ae().some(ge=>ge.id===W.id),J=I.length,ee=re-(J-1)/2,oe=Math.abs(ee)*1.5-1.8,me=ee*4.2;return l.jsx("div",{className:`card-wrapper ${_?"drawing":""} ${Y?"discarding":""}`,style:{"--rot":`${me}deg`,"--y":`${oe*.5}vh`,animationDelay:_?`${re*.1}s`:Y?`${re*.05}s`:"0s"},onClick:ge=>le(W,ge.currentTarget),children:l.jsx(Cl,{card:W,depth:1,isPlayable:W.cost<=D&&!Y})},W.id)})}),l.jsx(Kp,{isOpen:T!==null,onClose:de,title:T==="draw"?"":"",cards:T==="draw"?G:X,depth:1})]})},Ss={heart:"/assets/pencil/images/generated-1769314219918.png",gold:"/assets/pencil/images/gold-icon.png",stoneSmall:"/assets/pencil/images/magic-stone-small.png",stoneMedium:"/assets/pencil/images/magic-stone-medium.png",stoneLarge:"/assets/pencil/images/magic-stone-large.png",stoneHuge:"/assets/pencil/images/magic-stone-huge.png"},un=({title:s,variant:r="default"})=>{const{runtimeState:o}=Aa(),{getTotalGold:u,resources:m}=Zu(),f={small:m.magicStones.baseCamp.small+m.magicStones.exploration.small,medium:m.magicStones.baseCamp.medium+m.magicStones.exploration.medium,large:m.magicStones.baseCamp.large+m.magicStones.exploration.large,huge:m.magicStones.baseCamp.huge+m.magicStones.exploration.huge},h=o.lives.currentLives;return l.jsxs("header",{className:"facility-header basecamp-variant",children:[l.jsx("div",{className:"page-title",children:l.jsx("span",{className:"basecamp-title-text",children:s})}),l.jsxs("div",{className:"resource-frame",children:[r==="basecamp"&&l.jsx("div",{className:"remaining-life",children:Array.from({length:h}).map((b,p)=>l.jsx("img",{src:Ss.heart,alt:"life",className:"heart-icon"},p))}),l.jsxs("div",{className:"gold-frame",children:[l.jsx("img",{src:Ss.gold,alt:"gold",className:"gold-icon"}),l.jsxs("span",{className:"gold-amount",children:[u()," G"]})]}),l.jsxs("div",{className:"magic-stone-frame",children:[l.jsxs("div",{className:"stone-item",title:" (30G)",children:[l.jsx("img",{src:Ss.stoneSmall,alt:"small stone",className:"stone-icon small"}),l.jsx("span",{className:"stone-count-value",children:f.small})]}),l.jsxs("div",{className:"stone-item",title:" (100G)",children:[l.jsx("img",{src:Ss.stoneMedium,alt:"medium stone",className:"stone-icon medium"}),l.jsx("span",{className:"stone-count-value",children:f.medium})]}),l.jsxs("div",{className:"stone-item",title:" (350G)",children:[l.jsx("img",{src:Ss.stoneLarge,alt:"large stone",className:"stone-icon large"}),l.jsx("span",{className:"stone-count-value",children:f.large})]}),l.jsxs("div",{className:"stone-item",title:" (1000G)",children:[l.jsx("img",{src:Ss.stoneHuge,alt:"huge stone",className:"stone-icon huge"}),l.jsx("span",{className:"stone-count-value",children:f.huge})]})]})]})]})},ib=({type:s,name:r,description:o,icon:u,isUnlocked:m,onEnter:f})=>{const[h,b]=S.useState(!1);return l.jsxs("div",{className:`facility-card ${s} ${m?"unlocked":"locked"} ${h?"hovered":""}`,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:m?f:void 0,children:[l.jsx("div",{className:"facility-bg-pattern"}),l.jsx("div",{className:"facility-glow"}),l.jsx("div",{className:"facility-icon",children:u}),l.jsx("div",{className:"facility-name",children:r}),l.jsx("div",{className:"facility-description",children:o}),!m&&l.jsxs("div",{className:"facility-lock",children:[l.jsx("div",{className:"lock-icon",children:""}),l.jsx("div",{className:"lock-text",children:"Locked"})]}),h&&m&&l.jsx("div",{className:"facility-hover-effect",children:l.jsx("div",{className:"hover-text enter",children:"Enter "})})]})},cb=()=>{const{navigateTo:s}=Oa(),r=[{type:"dungeon",name:"",description:"Descend into the depths and face your destiny",icon:"",isUnlocked:!0,onEnter:()=>s("dungeon")},{type:"shop",name:"",description:"Buy and sell cards, items, and relics",icon:"",isUnlocked:!0,onEnter:()=>s("shop")},{type:"blacksmith",name:"",description:"Forge and upgrade your equipment",icon:"",isUnlocked:!0,onEnter:()=>s("blacksmith")},{type:"sanctuary",name:"",description:"Strengthen your soul with permanent upgrades",icon:"",isUnlocked:!0,onEnter:()=>s("sanctuary")},{type:"library",name:"",description:"Build your deck and browse the encyclopedia",icon:"",isUnlocked:!0,onEnter:()=>s("library")},{type:"guild",name:"",description:"Rest, recruit companions, and hear rumors",icon:"",isUnlocked:!0,onEnter:()=>s("guild")},{type:"storage",name:"",description:"Store and manage your items safely",icon:"",isUnlocked:!0,onEnter:()=>s("storage")}];return l.jsxs("div",{className:"base-camp",children:[l.jsx(un,{title:"basecamp",variant:"basecamp"}),l.jsxs("div",{className:"camp-background",children:[l.jsx("div",{className:"bg-stars"}),l.jsx("div",{className:"bg-ground"})]}),l.jsx("div",{className:"facilities-grid",children:r.map(o=>l.jsx(ib,{...o},o.type))})]})},rb=[{currentGrade:"",nextGrade:"",requiredCardCount:5,enemyId:"exam_training_dummy",description:"Defeat the Training Dummy to prove your basic swordsmanship skills.",recommendations:{hp:60,ap:40},rewards:{statBonus:"maxHP+10, Quest Slot+1"}},{currentGrade:"",nextGrade:"",requiredCardCount:15,requiredGold:100,enemyId:"exam_guild_instructor",description:"Demonstrate your martial prowess in a mock battle with the Guild Instructor.",recommendations:{hp:80,ap:60},rewards:{statBonus:"ATK+5%, Reward Bonus"}},{currentGrade:"",nextGrade:"",requiredCardCount:30,requiredGold:500,enemyId:"exam_veteran_warrior",description:"Defeat the Veteran Warrior to master the ultimate path of the sword.",recommendations:{hp:120,ap:80},rewards:{statBonus:"All Stats+5%, Critical Rate+10%"}},{currentGrade:"",nextGrade:"",requiredCardCount:50,requiredGold:1e3,enemyId:"exam_sword_saint_phantom",description:"Win the death match against the Phantom of the Sword Saint to reach the realm of gods.",recommendations:{hp:150,ap:100},rewards:{statBonus:"Unlock Unique Legend Skill, All Stats+10%"}}],ub=[{currentGrade:"Apprentice Mage",nextGrade:"Mage",requiredCardCount:5,enemyId:"exam_magic_golem",description:"Control the Magic Golem to prove your mastery of mana manipulation.",recommendations:{hp:50,ap:35},rewards:{statBonus:"maxHP+8, maxAP+5"}},{currentGrade:"Mage",nextGrade:"Archmage",requiredCardCount:15,requiredGold:100,enemyId:"exam_guild_instructor",description:"Demonstrate your magical prowess to the Guild Instructor.",recommendations:{hp:70,ap:55},rewards:{statBonus:"Magic Power+10%, Spell Cost-5%"}},{currentGrade:"Archmage",nextGrade:"Sage",requiredCardCount:30,requiredGold:500,enemyId:"exam_veteran_warrior",description:"Overcome the Veteran Warrior with your magical might.",recommendations:{hp:100,ap:75},rewards:{statBonus:"All Stats+5%, Mana Regeneration+1"}},{currentGrade:"Sage",nextGrade:"Grand Magus",requiredCardCount:50,requiredGold:1e3,enemyId:"exam_sword_saint_phantom",description:"Face the ultimate test to become a legendary master of arcane arts.",recommendations:{hp:130,ap:95},rewards:{statBonus:"Unlock Unique Legend Spell, All Stats+10%"}}],ob=[{currentGrade:"Apprentice Summoner",nextGrade:"Summoner",requiredCardCount:5,enemyId:"exam_wild_spirit",description:"Tame the Wild Spirit to prove your ability to command creatures.",recommendations:{hp:55,ap:38},rewards:{statBonus:"maxHP+9, Summon Slot+1"}},{currentGrade:"Summoner",nextGrade:"Beast Master",requiredCardCount:15,requiredGold:100,enemyId:"exam_guild_instructor",description:"Show the Guild Instructor your mastery over summoned creatures.",recommendations:{hp:75,ap:58},rewards:{statBonus:"Summon Power+8%, Beast Bond+1"}},{currentGrade:"Beast Master",nextGrade:"Spirit Caller",requiredCardCount:30,requiredGold:500,enemyId:"exam_veteran_warrior",description:"Defeat the Veteran Warrior with your loyal summons by your side.",recommendations:{hp:110,ap:78},rewards:{statBonus:"All Stats+5%, Summon Duration+2"}},{currentGrade:"Spirit Caller",nextGrade:"Mythic Summoner",requiredCardCount:50,requiredGold:1e3,enemyId:"exam_sword_saint_phantom",description:"Prove you can command even the mightiest of legendary creatures.",recommendations:{hp:140,ap:98},rewards:{statBonus:"Unlock Unique Legend Summon, All Stats+10%"}}];function db(s){switch(s){case"swordsman":return rb;case"mage":return ub;case"summoner":return ob;default:return[]}}function mb(s,r){return db(s).find(u=>u.currentGrade===r)||null}function fb(s,r,o){const u=r>=s.requiredCardCount,m=s.requiredGold?o>=s.requiredGold:!0;return u&&m}const pb=()=>{const{playerData:s,updateClassGrade:r}=Aa(),{startBattle:o,navigateTo:u}=Oa(),m=s.resources.baseCampGold+s.resources.explorationGold,f=mb(s.persistent.playerClass,s.persistent.classGrade);if(!f)return l.jsxs("div",{className:"promotion-unavailable",children:[l.jsx("h2",{children:" Congratulations!"}),l.jsx("p",{children:"You have achieved the highest rank."}),l.jsxs("div",{className:"current-grade-display",children:[l.jsx("span",{className:"grade-label",children:"Current Rank:"}),l.jsx("span",{className:"grade-value",children:s.persistent.classGrade})]}),l.jsx("p",{className:"flavor-text",children:"You stand at the pinnacle of your class. There are no more exams to take."})]});const h=s.persistent.deckCardIds.length,b=fb(f,h,m),p=h>=f.requiredCardCount,v=f.requiredGold?m>=f.requiredGold:!0,g=()=>{b&&o({enemyIds:[f.enemyId],backgroundType:"arena",onWin:N,onLose:k},"exam")},N=()=>{r(f.nextGrade),u("guild"),setTimeout(()=>{alert(` Promotion Exam Passed!

Congratulations! You have been promoted to:
${f.nextGrade}

Rewards:
${f.rewards.statBonus}

Your achievements will be recorded in the guild records.`)},100)},k=()=>{u("guild"),setTimeout(()=>{alert(` Promotion Exam Failed

You have been defeated in the exam and returned to the guild.

Don't give up! Train harder and try again.
The exam can be retaken at any time when you meet the requirements.

Tip: Make sure your HP and AP meet the recommended values before challenging.`)},100)};return l.jsxs("div",{className:"promotion-tab",children:[l.jsxs("div",{className:"promotion-tab-left",children:[l.jsxs("div",{className:"grade-progression",children:[l.jsxs("div",{className:"grade-box current",children:[l.jsx("span",{className:"grade-label",children:"Current Rank"}),l.jsx("span",{className:"grade-name",children:f.currentGrade})]}),l.jsx("div",{className:"arrow",children:""}),l.jsxs("div",{className:"grade-box next",children:[l.jsx("span",{className:"grade-label",children:"Next Rank"}),l.jsx("span",{className:"grade-name",children:f.nextGrade})]})]}),l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Requirements"}),l.jsxs("div",{className:"requirements-list",children:[l.jsxs("div",{className:`requirement ${p?"met":"unmet"}`,children:[l.jsx("span",{className:"requirement-icon",children:p?"":""}),l.jsxs("span",{className:"requirement-text",children:["Cards Owned: ",h," / ",f.requiredCardCount]})]}),f.requiredGold&&l.jsxs("div",{className:`requirement ${v?"met":"unmet"}`,children:[l.jsx("span",{className:"requirement-icon",children:v?"":""}),l.jsxs("span",{className:"requirement-text",children:["Gold: ",m," / ",f.requiredGold,"G"]})]})]})]}),l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Exam Details"}),l.jsx("p",{className:"exam-description",children:f.description})]})]}),l.jsxs("div",{className:"promotion-tab-right",children:[l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Recommendations"}),l.jsxs("div",{className:"recommendations",children:[l.jsxs("div",{className:"recommendation-item",children:[l.jsx("span",{className:"stat-label",children:"HP:"}),l.jsxs("span",{className:"stat-value",children:[f.recommendations.hp,"+"]})]}),l.jsxs("div",{className:"recommendation-item",children:[l.jsx("span",{className:"stat-label",children:"AP:"}),l.jsxs("span",{className:"stat-value",children:[f.recommendations.ap,"+"]})]})]}),l.jsx("p",{className:"recommendation-note",children:"These are suggested minimum stats. Higher stats increase your chances."})]}),l.jsxs("section",{className:"exam-section",children:[l.jsx("h3",{className:"guild-section-title",children:" Rewards"}),l.jsxs("ul",{className:"rewards-list",children:[l.jsxs("li",{children:["Promotion to ",f.nextGrade]}),l.jsx("li",{children:f.rewards.statBonus})]})]}),l.jsxs("div",{className:"exam-warnings",children:[l.jsxs("div",{className:"warning-item",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"Starting the exam will begin a battle immediately."})]}),l.jsxs("div",{className:"warning-item",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"Promotion exams do not consume exploration count."})]}),l.jsxs("div",{className:"warning-item",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"You will return to camp with 1 HP if defeated."})]}),l.jsx("button",{className:`start-exam-button ${b?"enabled":"disabled"}`,onClick:g,disabled:!b,children:b?"Start Promotion Exam":"Requirements Not Met"})]})]})]})},yb=()=>l.jsx("div",{className:"rumors-tab placeholder-tab",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("h2",{className:"placeholder-title",children:" Rumors"}),l.jsx("p",{className:"placeholder-description",children:"Hear whispers from other adventurers and gain temporary buffs for your explorations."}),l.jsx("div",{className:"coming-soon-badge",children:"Coming Soon in Phase 3"}),l.jsxs("div",{className:"feature-preview",children:[l.jsx("h3",{children:"Planned Features:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Purchase temporary exploration buffs with magic stones"}),l.jsx("li",{children:"Increased elite spawn rate"}),l.jsx("li",{children:"Shop discounts"}),l.jsx("li",{children:"Treasure find rate bonuses"}),l.jsx("li",{children:"Starting bonuses for runs"})]})]})]})}),gb=()=>l.jsx("div",{className:"quests-tab placeholder-tab",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("h2",{className:"placeholder-title",children:" Quests"}),l.jsx("p",{className:"placeholder-description",children:"Accept daily and weekly quests to earn extra rewards and soul remnants."}),l.jsx("div",{className:"coming-soon-badge",children:"Coming Soon in Phase 3"}),l.jsxs("div",{className:"feature-preview",children:[l.jsx("h3",{children:"Planned Features:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Daily quests (refresh every 24 hours)"}),l.jsx("li",{children:"Weekly quests (refresh every 7 days)"}),l.jsx("li",{children:"Story quests (unlock new content)"}),l.jsx("li",{children:"Rewards: Gold, Magic Stones, Soul Remnants, Items"}),l.jsx("li",{children:"Progress tracking for objectives"})]})]})]})}),hb=()=>{const[s,r]=S.useState("promotion"),{returnToCamp:o}=Oa();return l.jsxs(l.Fragment,{children:[l.jsx("img",{className:"guild-background",alt:"Guild Background",src:"../../../../public/assets/images/Guild-background.png"}),l.jsxs("div",{className:"guild-screen",children:[l.jsx(un,{title:""}),l.jsxs("nav",{className:"guild-tabs",children:[l.jsxs("button",{className:`guild-tab ${s==="promotion"?"active":""}`,onClick:()=>r("promotion"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Exams"})]}),l.jsxs("button",{className:`guild-tab ${s==="rumors"?"active":""}`,onClick:()=>r("rumors"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Rumors"})]}),l.jsxs("button",{className:`guild-tab ${s==="quests"?"active":""}`,onClick:()=>r("quests"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Quests"})]})]}),l.jsxs("div",{className:"guild-content",children:[s==="promotion"&&l.jsx(pb,{}),s==="rumors"&&l.jsx(yb,{}),s==="quests"&&l.jsx(gb,{})]}),l.jsx("button",{className:"guild-back-button",onClick:o,children:" Back to Camp"})]})]})},uy=S.createContext(void 0),vb=({children:s})=>{const{playerData:r,updatePlayerData:o}=Aa(),u=j=>r.inventory.inventory.currentCapacity>=r.inventory.inventory.maxCapacity?!1:(o({inventory:{...r.inventory,inventory:{...r.inventory.inventory,items:[...r.inventory.inventory.items,j],currentCapacity:r.inventory.inventory.currentCapacity+1}}}),!0),m=j=>r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?!1:(o({inventory:{...r.inventory,storage:{...r.inventory.storage,items:[...r.inventory.storage.items,j],currentCapacity:r.inventory.storage.currentCapacity+1}}}),!0),f=j=>{const R=r.inventory.inventory.items.findIndex(x=>x.id===j);if(R===-1)return!1;const A=[...r.inventory.inventory.items];return A.splice(R,1),o({inventory:{...r.inventory,inventory:{...r.inventory.inventory,items:A,currentCapacity:r.inventory.inventory.currentCapacity-1}}}),!0},h=j=>{const R=r.inventory.storage.items.findIndex(x=>x.id===j);if(R===-1)return!1;const A=[...r.inventory.storage.items];return A.splice(R,1),o({inventory:{...r.inventory,storage:{...r.inventory.storage,items:A,currentCapacity:r.inventory.storage.currentCapacity-1}}}),!0},b=j=>j.itemType!=="equipment"||r.inventory.equipmentInventory.currentCapacity>=r.inventory.equipmentInventory.maxCapacity?!1:(o({inventory:{...r.inventory,equipmentInventory:{...r.inventory.equipmentInventory,items:[...r.inventory.equipmentInventory.items,j],currentCapacity:r.inventory.equipmentInventory.currentCapacity+1}}}),!0),p=j=>{const R=r.inventory.equipmentInventory.items.findIndex(x=>x.id===j);if(R===-1)return!1;const A=[...r.inventory.equipmentInventory.items];return A.splice(R,1),o({inventory:{...r.inventory,equipmentInventory:{...r.inventory.equipmentInventory,items:A,currentCapacity:r.inventory.equipmentInventory.currentCapacity-1}}}),!0},v=(j,R)=>{const A=r.inventory.storage.items.find(X=>X.id===j)||r.inventory.equipmentInventory.items.find(X=>X.id===j);if(!A)return{success:!1,message:"Item not found in Equipment's Inventory or storage"};if(A.equipmentSlot!==R)return{success:!1,message:`Cannot equip ${A.name} in ${R} slot`};const x=r.inventory.equipmentSlots[R],I=r.inventory.storage.items.filter(X=>X.id!==j),G=x?[...I,x]:I;return o({inventory:{...r.inventory,equipmentSlots:{...r.inventory.equipmentSlots,[R]:A},storage:{...r.inventory.storage,items:G,currentCapacity:G.length}}}),{success:!0,message:`Equipped ${A.name}, replaced ${x?.name||"nothing"}`,movedItem:A,replacedItem:x||void 0}},g=j=>{const R=r.inventory.equipmentSlots[j];if(!R)return{success:!1,message:`No item equipped in ${j} slot`};if(r.inventory.inventory.currentCapacity>=r.inventory.inventory.maxCapacity)return{success:!1,message:"Inventory is full"};const A={...r.inventory.equipmentSlots,[j]:null};return o({inventory:{...r.inventory,equipmentSlots:A}}),m(R),{success:!0,message:`Unequipped ${R.name}`,movedItem:R}},N=(j,R)=>{switch(R){case"storage_to_inventory":{const A=r.inventory.storage.items.find(x=>x.id===j);return A?r.inventory.inventory.currentCapacity>=r.inventory.inventory.maxCapacity?{success:!1,message:"Inventory is full"}:(h(j),u(A),{success:!0,message:`Moved ${A.name} to inventory`,movedItem:A}):{success:!1,message:"Item not found in storage"}}case"inventory_to_storage":{const A=r.inventory.inventory.items.find(x=>x.id===j);return A?r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?{success:!1,message:"Storage is full"}:(f(j),m(A),{success:!0,message:`Moved ${A.name} to storage`,movedItem:A}):{success:!1,message:"Item not found in inventory"}}case"storage_to_equipment":{const A=R==="storage_to_equipment"?r.inventory.storage.items.find(x=>x.id===j):r.inventory.inventory.items.find(x=>x.id===j);return!A||!A.equipmentSlot?{success:!1,message:"Item not found or is not equipment"}:v(j,A.equipmentSlot)}case"equipment_to_storage":{const A=Object.entries(r.inventory.equipmentSlots).find(([,G])=>G?.id===j)?.[0];if(!A)return{success:!1,message:"Item not found in equipment"};const x=r.inventory.equipmentSlots[A];if(!x)return{success:!1,message:"Item not found"};const I={...r.inventory.equipmentSlots,[A]:null};return o({inventory:{...r.inventory,equipmentSlots:I}}),R==="equipment_to_storage"?m(x)?{success:!0,message:`Moved ${x.name} to storage`,movedItem:x}:{success:!1,message:"Storage is full"}:u(x)?{success:!0,message:`Moved ${x.name} to inventory`,movedItem:x}:{success:!1,message:"Inventory is full"}}case"equipSlotItem_to_storage":{const A=Object.entries(r.inventory.equipmentSlots).find(([,I])=>I?.id===j)?.[0],x=r.inventory.equipmentSlots[A];return x?r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?{success:!1,message:"Storage is full"}:(g(x.equipmentSlot),m(x),{success:!0,message:`Moved ${x.name} to storage`,movedItem:x}):{success:!1,message:"Unequip error"}}case"storage_to_equipment_inventory":{const A=r.inventory.storage.items.find(x=>x.id===j);return A?A.itemType!=="equipment"?{success:!1,message:"Only equipment items can be added to equipment inventory"}:r.inventory.equipmentInventory.currentCapacity>=r.inventory.equipmentInventory.maxCapacity?{success:!1,message:"Equipment inventory is full"}:(h(j),b(A),{success:!0,message:`Moved ${A.name} to equipment inventory`,movedItem:A}):{success:!1,message:"Item not found in storage"}}case"equipment_inventory_to_storage":{const A=r.inventory.equipmentInventory.items.find(x=>x.id===j);return A?r.inventory.storage.currentCapacity>=r.inventory.storage.maxCapacity?{success:!1,message:"Storage is full"}:(p(j),m(A),{success:!0,message:`Moved ${A.name} to storage`,movedItem:A}):{success:!1,message:"Item not found in equipment inventory"}}case"equipment_inventory_to_equipment":{const A=r.inventory.equipmentInventory.items.find(X=>X.id===j);if(!A||!A.equipmentSlot)return{success:!1,message:"Item not found or is not equipment"};const x=A.equipmentSlot,I=r.inventory.equipmentSlots[x],G=r.inventory.equipmentInventory.items.filter(X=>X.id!==j);return o({inventory:{...r.inventory,equipmentSlots:{...r.inventory.equipmentSlots,[x]:A},equipmentInventory:{...r.inventory.equipmentInventory,items:I?[...G,I]:G,currentCapacity:I?r.inventory.equipmentInventory.currentCapacity:r.inventory.equipmentInventory.currentCapacity-1}}}),{success:!0,message:`Equipped ${A.name}`,movedItem:A,replacedItem:I||void 0}}case"equipment_to_equipment_inventory":{const A=Object.entries(r.inventory.equipmentSlots).find(([,G])=>G?.id===j)?.[0];if(!A)return{success:!1,message:"Item not found in equipment"};const x=r.inventory.equipmentSlots[A];if(!x)return{success:!1,message:"Item not found"};if(r.inventory.equipmentInventory.currentCapacity>=r.inventory.equipmentInventory.maxCapacity)return{success:!1,message:"Equipment inventory is full"};const I={...r.inventory.equipmentSlots,[A]:null};return o({inventory:{...r.inventory,equipmentSlots:I}}),b(x),{success:!0,message:`Moved ${x.name} to equipment inventory`,movedItem:x}}default:return{success:!1,message:"Unknown move direction"}}},k=j=>r.inventory.inventory.items.find(R=>R.id===j),M=j=>r.inventory.storage.items.find(R=>R.id===j),D=j=>r.inventory.equipmentSlots[j],O=j=>r.inventory.equipmentInventory.items.find(R=>R.id===j);return l.jsx(uy.Provider,{value:{addItemToInventory:u,addItemToStorage:m,addItemToEquipmentInventory:b,removeItemFromInventory:f,removeItemFromStorage:h,removeItemFromEquipmentInventory:p,equipItem:v,unequipItem:g,moveItem:N,getInventoryItem:k,getStorageItem:M,getEquippedItem:D,getEquipmentInventoryItem:O},children:s})},tc=()=>{const s=S.useContext(uy);if(!s)throw new Error("useInventory must be used within InventoryProvider");return s},oy=[{id:"potion_small",name:"Small Healing Potion",description:"Recovers 30 HP. A basic remedy for minor wounds.",icon:"",category:"consumable",price:50,healAmount:30},{id:"potion_medium",name:"Medium Healing Potion",description:"Recovers 70 HP. A reliable restorative draught.",icon:"",category:"consumable",price:120,healAmount:70},{id:"potion_large",name:"Large Healing Potion",description:"Recovers 150 HP. A potent elixir brewed by master alchemists.",icon:"",category:"consumable",price:240,healAmount:150}],dy=[{id:"teleport_emergency",name:"Emergency Teleport Stone",description:"60% chance to return safely. Unreliable but cheap.",icon:"",category:"teleport",price:100,returnChance:.6},{id:"teleport_normal",name:"Teleport Stone",description:"70% chance to return safely. Standard issue for adventurers.",icon:"",category:"teleport",price:150,returnChance:.7},{id:"teleport_blessed",name:"Blessed Teleport Stone",description:"80% chance to return safely. Imbued with divine protection.",icon:"",category:"teleport",price:300,returnChance:.8}],bb={common:1,uncommon:0,rare:0,epic:0,legendary:0},xb={common:.6,uncommon:0,rare:.35,epic:.05,legendary:0},Sb={common:.3,uncommon:0,rare:.45,epic:.2,legendary:.05},my=[{id:"pack_common",name:"Common Equipment Pack",description:"Contains 6 common equipment pieces. One for each slot.",icon:"",price:300,packType:"common",guaranteedRarity:"common",itemCount:6,rarityProbabilities:bb},{id:"pack_rare",name:"Rare Equipment Pack",description:"Contains 6 equipment pieces. Guaranteed Rare or better quality.",icon:"",price:500,packType:"rare",guaranteedRarity:"rare",itemCount:6,rarityProbabilities:xb},{id:"pack_epic",name:"Epic Equipment Pack",description:"Contains 6 equipment pieces. Guaranteed Epic or better quality. May contain Legendary items!",icon:"",price:1e3,packType:"epic",guaranteedRarity:"epic",itemCount:6,rarityProbabilities:Sb}];function Nb(s){return[...oy,...dy].find(r=>r.id===s)}function Cb(s){return my.find(r=>r.id===s)}const jb={weapon:{common:{name:"Iron Sword",icon:""},uncommon:{name:"Steel Blade",icon:""},rare:{name:"Enchanted Sword",icon:""},epic:{name:"Demon Slayer",icon:""},legendary:{name:"Excalibur",icon:""}},armor:{common:{name:"Leather Armor",icon:""},uncommon:{name:"Chain Mail",icon:""},rare:{name:"Plate Armor",icon:""},epic:{name:"Dragon Scale Armor",icon:""},legendary:{name:"Celestial Plate",icon:""}},helmet:{common:{name:"Leather Cap",icon:""},uncommon:{name:"Iron Helm",icon:""},rare:{name:"Enchanted Helm",icon:""},epic:{name:"Crown of Thorns",icon:""},legendary:{name:"Crown of the Ancients",icon:""}},boots:{common:{name:"Leather Boots",icon:""},uncommon:{name:"Iron Greaves",icon:""},rare:{name:"Swift Boots",icon:""},epic:{name:"Shadow Steps",icon:""},legendary:{name:"Wings of Mercury",icon:""}},accessory1:{common:{name:"Copper Ring",icon:""},uncommon:{name:"Silver Ring",icon:""},rare:{name:"Enchanted Ring",icon:""},epic:{name:"Ring of Power",icon:""},legendary:{name:"Ring of the Void",icon:""}},accessory2:{common:{name:"Bone Amulet",icon:""},uncommon:{name:"Silver Amulet",icon:""},rare:{name:"Enchanted Amulet",icon:""},epic:{name:"Dragon Heart Amulet",icon:""},legendary:{name:"Amulet of Eternity",icon:""}}},_b=["weapon","armor","helmet","boots","accessory1","accessory2"],Eb={common:50,uncommon:100,rare:150,epic:400,legendary:1e3};function Ii(s,r){return s>=r}function Yi(s,r,o=1){return s+o<=r}function Db(s){const r=s.healAmount?`${s.description} (Heals ${s.healAmount} HP)`:s.description;return Da(s.id,{typeId:s.id,name:s.name,description:r,itemType:"consumable",type:s.icon,rarity:"common",sellPrice:Math.floor(s.price*.5),canSell:!0,canDiscard:!0,stackable:!0,stackCount:1,maxStack:99})}function Ab(s){return Da(s.id,{typeId:s.id,name:s.name,description:s.description,itemType:"key",type:s.icon,rarity:"uncommon",sellPrice:Math.floor(s.price*.5),canSell:!0,canDiscard:!0,stackable:!0,stackCount:1,maxStack:10})}function Tb(s){const r=Math.random(),o=s.rarityProbabilities;let u=0;return(u+=o.common)>r?"common":(u+=o.uncommon)>r?"uncommon":(u+=o.rare)>r?"rare":(u+=o.epic)>r?"epic":"legendary"}function Mb(s,r){const o=jb[s][r];return Da(`${s}_${r}`,{typeId:`${s}_${r}`,name:o.name,description:`A ${r} ${s} piece of equipment.`,itemType:"equipment",type:o.icon,equipmentSlot:s,rarity:r,quality:"normal",level:0,durability:100,maxDurability:100,sellPrice:Eb[r],canSell:!0,canDiscard:!0,effects:[]})}function wb(s){const r=Cb(s);if(!r)return[];const o=[];for(const u of _b){const m=Tb(r),f=Mb(u,m);o.push(f)}return o}function Eu(s){return s.sellPrice}function $i(s){return s.small*30+s.medium*100+s.large*350}function bp(s,r){if($i(s)<r)return null;let u=r;const m={...s};for(;u>0&&m.small>0;)m.small--,u-=30;for(;u>0&&m.medium>0;)m.medium--,u-=100;for(;u>0&&m.large>0;)m.large--,u-=350;const f=$i(s)-$i(m);return{newStones:m,actualValue:f}}function Rb(s){const r=Nb(s);return r?r.category==="consumable"?Db(r):r.category==="teleport"?Ab(r):null:null}const kb=()=>{const{playerData:s,useGold:r}=Aa(),{addItemToInventory:o}=tc(),u=s.inventory.inventory,[m,f]=S.useState(null),[h,b]=S.useState(null),p=M=>{f(M),setTimeout(()=>f(null),2e3)},v=M=>{const D=s.resources.baseCampGold+s.resources.explorationGold;if(!Ii(D,M.price)){p("Not enough gold!");return}if(!Yi(u.currentCapacity,u.maxCapacity)){p("Inventory full!");return}const O=Rb(M.id);if(!O){p("Purchase failed!");return}r(M.price)&&(o(O),p(`Purchased ${M.name}!`))},g=M=>{const D=s.resources.baseCampGold+s.resources.explorationGold;if(!Ii(D,M.price)){p("Not enough gold!");return}if(!Yi(u.currentCapacity,u.maxCapacity,6)){p("Need 6 inventory slots!");return}if(r(M.price)){const O=wb(M.id);O.forEach(j=>o(j)),b(O.map(j=>`${j.type} ${j.name} (${j.rarity})`)),setTimeout(()=>b(null),4e3)}},N=M=>{const D=s.resources.baseCampGold+s.resources.explorationGold,O=Ii(D,M.price),j=Yi(u.currentCapacity,u.maxCapacity);return l.jsxs("div",{className:`shop-item ${O?"":"unaffordable"}`,children:[l.jsx("div",{className:"item-icon",children:M.icon}),l.jsxs("div",{className:"item-info",children:[l.jsx("div",{className:"item-name",children:M.name}),l.jsx("div",{className:"item-description",children:M.description})]}),l.jsxs("div",{className:"item-price",children:[M.price," G"]}),l.jsx("button",{className:"buy-button",onClick:()=>v(M),disabled:!O||!j,children:"Buy"})]},M.id)},k=M=>{const D=s.resources.baseCampGold+s.resources.explorationGold,O=Ii(D,M.price),j=Yi(u.currentCapacity,u.maxCapacity,6);return l.jsxs("div",{className:`shop-item pack ${O?"":"unaffordable"}`,children:[l.jsx("div",{className:"item-icon",children:M.icon}),l.jsxs("div",{className:"item-info",children:[l.jsx("div",{className:"item-name",children:M.name}),l.jsx("div",{className:"item-description",children:M.description}),l.jsx("div",{className:"pack-badge",children:"6 Items"})]}),l.jsxs("div",{className:"item-price",children:[M.price," G"]}),l.jsx("button",{className:"buy-button pack-buy",onClick:()=>g(M),disabled:!O||!j,children:"Open"})]},M.id)};return l.jsxs("div",{className:"buy-tab",children:[m&&l.jsx("div",{className:"shop-notification",children:m}),h&&l.jsxs("div",{className:"pack-result",children:[l.jsx("h3",{children:"Pack Opened!"}),l.jsx("div",{className:"pack-items",children:h.map((M,D)=>l.jsx("div",{className:"pack-item-result",children:M},D))})]}),l.jsxs("section",{className:"shop-section",children:[l.jsx("h2",{className:"section-title",children:"Consumables"}),l.jsx("div",{className:"shop-items-grid",children:oy.map(N)})]}),l.jsxs("section",{className:"shop-section",children:[l.jsx("h2",{className:"section-title",children:"Teleport Stones"}),l.jsx("div",{className:"shop-items-grid",children:dy.map(N)})]}),l.jsxs("section",{className:"shop-section",children:[l.jsx("h2",{className:"section-title",children:"Equipment Packs"}),l.jsx("div",{className:"shop-items-grid",children:my.map(k)})]})]})},qb=()=>{const{playerData:s,addGold:r}=Aa(),{removeItemFromInventory:o,getEquippedItem:u}=tc(),m=s.inventory.inventory,[f,h]=S.useState(null),[b,p]=S.useState(null),v=M=>{p(M),setTimeout(()=>p(null),2e3)},g=m.items.filter(M=>{if(!M.canSell)return!1;if(M.itemType==="equipment"&&M.equipmentSlot){const D=u(M.equipmentSlot);if(D&&D.id===M.id)return!1}return!0}),N=M=>{const D=Eu(M);o(M.id)?(r(D,!0),v(`Sold ${M.name} for ${D} G!`),h(null)):v("Failed to sell item!")},k=M=>`rarity-${M}`;return l.jsxs("div",{className:"sell-tab",children:[b&&l.jsx("div",{className:"shop-notification",children:b}),l.jsxs("div",{className:"sell-layout",children:[l.jsxs("div",{className:"sell-items-section",children:[l.jsxs("h2",{className:"section-title",children:["Inventory (",g.length," sellable items)"]}),g.length===0?l.jsx("div",{className:"empty-inventory",children:l.jsx("p",{children:"No items to sell"})}):l.jsx("div",{className:"sell-items-grid",children:g.map(M=>l.jsxs("div",{className:`sell-item ${k(M.rarity)} ${f?.id===M.id?"selected":""}`,onClick:()=>h(M),children:[l.jsx("div",{className:"item-icon",children:M.type}),l.jsx("div",{className:"item-name",children:M.name}),l.jsxs("div",{className:"item-sell-price",children:[Eu(M)," G"]})]},M.id))})]}),l.jsx("div",{className:"sell-detail-panel",children:f?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:f.type}),l.jsx("h3",{className:`detail-name ${k(f.rarity)}`,children:f.name})]}),l.jsx("p",{className:"detail-description",children:f.description}),l.jsxs("div",{className:"detail-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Type:"}),l.jsx("span",{children:f.itemType})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Rarity:"}),l.jsx("span",{className:k(f.rarity),children:f.rarity})]}),f.equipmentSlot&&l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Slot:"}),l.jsx("span",{children:f.equipmentSlot})]})]}),l.jsxs("div",{className:"sell-action",children:[l.jsxs("div",{className:"sell-price",children:["Sell Price:"," ",l.jsxs("strong",{children:[Eu(f)," G"]})]}),l.jsx("button",{className:"sell-button",onClick:()=>N(f),children:"Sell Item"})]})]}):l.jsx("div",{className:"no-selection",children:l.jsx("p",{children:"Select an item to sell"})})})]})]})},Lb=()=>{const{playerData:s,addGold:r,updatePlayerData:o}=Aa(),[u,m]=S.useState(0),[f,h]=S.useState(null),b=s.resources.baseCampMagicStones,p=$i(b),v=D=>{h(D),setTimeout(()=>h(null),2e3)},g=()=>{if(u<=0){v("Enter an amount to exchange!");return}if(u>p){v("Not enough magic stones!");return}const D=bp(b,u);if(!D){v("Exchange failed!");return}o({resources:{...s.resources,baseCampMagicStones:D.newStones}}),r(D.actualValue,!0),v(`Exchanged for ${D.actualValue} G!`),m(0)},N=D=>{if(D>p){v("Not enough magic stones!");return}const O=bp(b,D);if(!O){v("Exchange failed!");return}o({resources:{...s.resources,baseCampMagicStones:O.newStones}}),r(O.actualValue,!0),v(`Exchanged for ${O.actualValue} G!`)},k=(D,O)=>{if(b[D]<=0){v("No stones of this type!");return}const j={...b,[D]:b[D]-1};o({resources:{...s.resources,baseCampMagicStones:j}}),r(O,!0),v(`Exchanged for ${O} G!`)},M=(D,O,j,R)=>{const A=b[D];return l.jsx(l.Fragment,{children:A>0&&l.jsxs("div",{className:"stone-row",children:[l.jsx("div",{className:"stone-icon",children:R}),l.jsx("div",{className:"stone-label",children:O}),l.jsxs("div",{className:"stone-count",children:["x ",A]}),l.jsxs("div",{className:"stone-value",children:[j," G"]}),l.jsx("button",{className:"stone-exchange-btn",onClick:()=>k(D,j),disabled:A<=0,children:"Exchange"})]},D)})};return l.jsxs("div",{className:"exchange-tab",children:[f&&l.jsx("div",{className:"shop-notification",children:f}),l.jsxs("section",{className:"exchange-section",children:[l.jsx("h2",{className:"section-title",children:"Magic Stone Inventory"}),l.jsxs("div",{className:"stone-list",children:[M("small","Small Magic Stone",30,""),M("medium","Medium Magic Stone",100,""),M("large","Large Magic Stone",350,""),M("huge","Huge Magic Stone",1e3,""),l.jsxs("div",{className:"quick-exchange",children:[l.jsx("span",{className:"quick-exchange-tittle",children:"Quick Exchange "}),l.jsxs("span",{className:"quick-exchange-value",children:["(",p,"G)"]}),l.jsx("button",{className:"stone-exchange-btn",onClick:()=>N(p),disabled:p<=0,children:"All exchange"})]})]})]}),l.jsxs("section",{className:"exchange-section",children:[l.jsx("h2",{className:"section-title",children:"Exchange Stones for Gold"}),l.jsxs("div",{className:"exchange-controls",children:[l.jsxs("div",{className:"exchange-input-group",children:[l.jsx("label",{children:"Amount to exchange:"}),l.jsx("input",{type:"number",className:"exchange-input",value:u,onChange:D=>m(Math.max(0,parseInt(D.target.value)||0)),min:0,max:p}),l.jsx("span",{className:"input-suffix",children:"G"})]}),l.jsx("button",{className:"exchange-button",onClick:g,disabled:u<=0||u>p,children:"Exchange"})]}),l.jsx("p",{className:"exchange-note",children:"Note: Smallest stones are consumed first. Due to stone denominations, actual gold received may be slightly more than requested."})]})]})},Gb=()=>{const[s,r]=S.useState("buy"),{returnToCamp:o}=Oa();return l.jsxs("div",{className:"shop-screen",children:[l.jsx(un,{title:""}),l.jsxs("nav",{className:"shop-tabs",children:[l.jsxs("button",{className:`shop-tab ${s==="buy"?"active":""}`,onClick:()=>r("buy"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Buy"})]}),l.jsxs("button",{className:`shop-tab ${s==="sell"?"active":""}`,onClick:()=>r("sell"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Sell"})]}),l.jsxs("button",{className:`shop-tab ${s==="exchange"?"active":""}`,onClick:()=>r("exchange"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Exchange"})]})]}),l.jsxs("div",{className:"shop-content",children:[s==="buy"&&l.jsx(kb,{}),s==="sell"&&l.jsx(qb,{}),s==="exchange"&&l.jsx(Lb,{})]}),l.jsx("button",{className:"shop-back-button",onClick:o,children:" Back to Camp"})]})},Du=({item:s,isSelected:r,onClick:o,compact:u=!1})=>{const m=()=>{switch(s.rarity){case"common":return"rarity-common";case"uncommon":return"rarity-uncommon";case"rare":return"rarity-rare";case"epic":return"rarity-epic";case"legendary":return"rarity-legendary";default:return"rarity-common"}},f=()=>s.itemType!=="equipment"||!s.quality?"":`quality-${s.quality}`,h=(p,v=15)=>p.length<=v?p:l.jsx(l.Fragment,{children:p.split(" ").map((g,N)=>l.jsx("span",{children:" "+g},N))}),b=u?"item-card-compact":"item-card";return l.jsxs("div",{className:`${b} ${m()} ${f()} ${r?"item-card-selected":""}`,onClick:o,title:s.name,children:[u&&l.jsx("div",{className:"item-card-name",children:h(s.name)}),s.itemType==="equipment"&&s.level!==void 0&&s.level>0&&l.jsx("div",{className:u?"item-level-compact":"item-card-level",children:u?s.level:`Lv${s.level}`}),s.stackable&&s.stackCount!==void 0&&s.stackCount>1&&l.jsx("div",{className:u?"item-stack-compact":"item-card-stack",children:u?s.stackCount:`x${s.stackCount}`})]})},Ob=({item:s,source:r,onMoveToStorage:o,onMoveToInventory:u,onMoveToEquipmentInventory:m,onEquip:f,onUnequip:h,onDelete:b})=>{if(!s)return l.jsx("div",{className:"item-detail-panel",children:l.jsx("div",{className:"item-detail-placeholder",children:"Select an item to view details"})});const p=()=>{switch(s.rarity){case"common":return"#9e9e9e";case"uncommon":return"#4caf50";case"rare":return"#2196f3";case"epic":return"#9c27b0";case"legendary":return"#ffc107";default:return"#ffffff"}},v=()=>{if(s.itemType!=="equipment"||!s.quality)return"#ffffff";switch(s.quality){case"poor":return"#8f8e8e";case"normal":return"#82e779";case"good":return"#f1f664";case"master":return"#ff2d2d";default:return"#ffffff"}},g=s.itemType==="equipment";return l.jsxs("div",{className:"item-detail-panel",children:[l.jsx("h3",{className:"item-detail-name",style:{color:p()},children:s.name}),l.jsx("div",{className:"item-detail-icon",children:s.type}),l.jsxs("div",{className:"item-detail-rarity",children:["Rarity:",l.jsx("span",{style:{color:p()},children:" "+s.rarity.charAt(0).toUpperCase()+s.rarity.slice(1)}),g&&s.quality&&l.jsxs("span",{style:{color:v(),marginLeft:"1vw"},children:[" | ",s.quality.charAt(0).toUpperCase()+s.quality.slice(1)]})]}),g&&l.jsxs("div",{className:"item-detail-stats",children:[s.level!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Level: ",s.level]}),s.durability!==void 0&&s.maxDurability!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Durability: ",s.durability,"/",s.maxDurability]}),s.equipmentSlot&&l.jsxs("div",{className:"item-detail-stat",children:["Slot: ",s.equipmentSlot]})]}),g&&s.effects&&s.effects.length>0&&l.jsxs("div",{className:"item-detail-effects",children:[l.jsx("h4",{children:"Effects:"}),s.effects.map((N,k)=>l.jsxs("div",{className:"item-detail-effect",children:["- ",N.description]},k))]}),s.stackable&&l.jsx("div",{className:"item-detail-stats",children:l.jsxs("div",{className:"item-detail-stat",children:["Stack: ",s.stackCount||1,"/",s.maxStack||99]})}),l.jsx("div",{className:"item-detail-description",children:s.description}),l.jsxs("div",{className:"item-detail-type",children:["Type: ",s.itemType.charAt(0).toUpperCase()+s.itemType.slice(1)]}),s.canSell&&l.jsxs("div",{className:"item-detail-sell-price",children:["Sell Price: ",s.sellPrice," G"]}),l.jsxs("div",{className:"item-detail-actions",children:[r==="inventory"&&l.jsx("button",{className:"item-action-button",onClick:o,children:"Move to Storage"}),r==="storage"&&!g&&l.jsx("button",{className:"item-action-button",onClick:u,children:"Move to Inventory"}),g&&r==="storage"&&s.equipmentSlot&&l.jsxs("button",{className:"item-action-button equip",onClick:f,children:["Equip (",s.equipmentSlot,")"]}),g&&r==="storage"&&l.jsx("button",{className:"item-action-button equip",onClick:m,children:"Move to Equipment inventory"}),r==="equipment"&&l.jsx(l.Fragment,{children:l.jsx("button",{className:"item-action-button",onClick:()=>{h?.()},children:"Unequip to Storage"})}),(r==="storage"||r==="inventory")&&l.jsx("button",{className:"item-action-button delete",onClick:b,children:"Delete"})]})]})},Ub=({item:s,source:r,onMoveToStorage:o,onMoveToEquipmentInventory:u,onEquip:m,onDelete:f})=>{if(!s)return l.jsx("div",{className:"item-detail-panel",children:l.jsx("div",{className:"item-detail-placeholder",children:"Select an equipment to view details"})});const h=()=>{switch(s.rarity){case"common":return"#9e9e9e";case"uncommon":return"#4caf50";case"rare":return"#2196f3";case"epic":return"#9c27b0";case"legendary":return"#ffc107";default:return"#ffffff"}},b=()=>{if(s.itemType!=="equipment"||!s.quality)return"#ffffff";switch(s.quality){case"poor":return"#8f8e8e";case"normal":return"#82e779";case"good":return"#f1f664";case"master":return"#ff2d2d";default:return"#ffffff"}},p=s.itemType==="equipment";return l.jsxs("div",{className:"item-detail-panel",children:[l.jsx("h3",{className:"item-detail-name",style:{color:h()},children:s.name}),l.jsx("div",{className:"item-detail-icon",children:s.type}),l.jsxs("div",{className:"item-detail-rarity",children:[l.jsx("span",{style:{color:h()},children:s.rarity.charAt(0).toUpperCase()+s.rarity.slice(1)}),p&&s.quality&&l.jsxs("span",{style:{color:b(),marginLeft:"1vw"},children:[" | ",s.quality.charAt(0).toUpperCase()+s.quality.slice(1)]})]}),p&&l.jsxs("div",{className:"item-detail-stats",children:[s.level!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Level: ",s.level]}),s.durability!==void 0&&s.maxDurability!==void 0&&l.jsxs("div",{className:"item-detail-stat",children:["Durability: ",s.durability,"/",s.maxDurability]}),s.equipmentSlot&&l.jsxs("div",{className:"item-detail-stat",children:["Slot: ",s.equipmentSlot]})]}),p&&s.effects&&s.effects.length>0&&l.jsxs("div",{className:"item-detail-effects",children:[l.jsx("h4",{children:"Effects:"}),s.effects.map((v,g)=>l.jsxs("div",{className:"item-detail-effect",children:["- ",v.description]},g))]}),s.stackable&&l.jsx("div",{className:"item-detail-stats",children:l.jsxs("div",{className:"item-detail-stat",children:["Stack: ",s.stackCount||1,"/",s.maxStack||99]})}),l.jsx("div",{className:"item-detail-description",children:s.description}),l.jsxs("div",{className:"item-detail-type",children:["Type: ",s.itemType.charAt(0).toUpperCase()+s.itemType.slice(1)]}),s.canSell&&l.jsxs("div",{className:"item-detail-sell-price",children:["Sell Price: ",s.sellPrice," G"]}),l.jsxs("div",{className:"item-detail-actions",children:[p&&r==="storage"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"item-action-button equip",onClick:m,children:"Equip"}),l.jsx("button",{className:"item-action-button",onClick:u,children:"To Equipment Inventory"}),l.jsx("button",{className:"item-action-button delete",onClick:f,children:"Delete"})]}),r==="equipmentInventory"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"item-action-button equip",onClick:m,children:"Equip"}),l.jsx("button",{className:"item-action-button",onClick:o,children:"To Storage"}),l.jsx("button",{className:"item-action-button delete",onClick:f,children:"Delete"})]})]})]})},zb=({item:s,isOpen:r,onConfirm:o,onCancel:u})=>{if(!r)return null;const m=()=>{switch(s.rarity){case"common":return"#9e9e9e";case"uncommon":return"#4caf50";case"rare":return"#2196f3";case"epic":return"#9c27b0";case"legendary":return"#ffc107";default:return"#ffffff"}},f=h=>{h.target===h.currentTarget&&u()};return l.jsx("div",{className:"delete-modal-backdrop",onClick:f,children:l.jsxs("div",{className:"delete-modal",children:[l.jsx("div",{className:"delete-modal-header",children:l.jsx("h2",{className:"delete-modal-title",children:"Delete Item"})}),l.jsxs("div",{className:"delete-modal-content",children:[l.jsx("p",{className:"delete-modal-message",children:"Are you sure you want to delete this item?"}),l.jsxs("div",{className:"delete-modal-item-info",children:[l.jsx("span",{className:"delete-modal-item-icon",children:s.type}),l.jsx("span",{className:"delete-modal-item-name",style:{color:m()},children:s.name})]}),l.jsx("p",{className:"delete-modal-warning",children:"This action cannot be undone."})]}),l.jsxs("div",{className:"delete-modal-actions",children:[l.jsx("button",{className:"delete-modal-button delete-modal-cancel",onClick:u,children:"Cancel"}),l.jsx("button",{className:"delete-modal-button delete-modal-confirm",onClick:o,children:"Delete"})]})]})})},Bb=()=>{const{returnToCamp:s}=Oa(),{playerData:r}=Aa(),{moveItem:o,equipItem:u,unequipItem:m,removeItemFromInventory:f,removeItemFromStorage:h,removeItemFromEquipmentInventory:b}=tc(),[p,v]=S.useState("items"),[g,N]=S.useState(null),[k,M]=S.useState("storage"),[D,O]=S.useState(""),[j,R]=S.useState(!1),A=(V,W)=>{N(V),M(W)},x=(V,W=2e3)=>{O(V),setTimeout(()=>O(""),W)},I=()=>{if(!g)return;const V=o(g.id,"inventory_to_storage");x(V.message),V.success&&N(null)},G=()=>{if(!g)return;const V=o(g.id,"storage_to_inventory");x(V.message),V.success&&N(null)},X=()=>{if(!g||!g.equipmentSlot)return;const V=u(g.id,g.equipmentSlot);x(V.message),V.success&&N(null)},K=()=>{if(!g||!g.equipmentSlot)return;const V=m(g.equipmentSlot);x(V.message),V.success&&N(null)},ae=()=>{g&&R(!0)},le=()=>{if(!g)return;let V=!1;k==="storage"?V=h(g.id):k==="inventory"?V=f(g.id):k==="equipmentInventory"&&(V=b(g.id)),V?(x(`Deleted ${g.name}`),N(null)):x("Failed to delete item"),R(!1)},be=()=>{if(!g)return;const V=o(g.id,"storage_to_equipment_inventory");x(V.message),V.success&&N(null)},T=()=>{if(!g)return;const V=o(g.id,"equipment_inventory_to_storage");x(V.message),V.success&&N(null)},z=()=>{R(!1)},F=(V,W,re)=>{const _=[];for(let Y=0;Y<re;Y++)if(Y<V.length){const J=V[Y];_.push(l.jsx(Du,{item:J,isSelected:g?.id===J.id,onClick:()=>A(J,W),compact:!0},J.id))}else _.push(l.jsx("div",{className:"item-card-compact item-card-empty",children:l.jsx("span",{className:"empty-placeholder",children:"empty"})},`empty-${W}-${Y}`));return _},de=()=>[{key:"weapon",label:"Weapon",item:r.inventory.equipmentSlots.weapon},{key:"armor",label:"Armor",item:r.inventory.equipmentSlots.armor},{key:"helmet",label:"Helmet",item:r.inventory.equipmentSlots.helmet},{key:"boots",label:"Boots",item:r.inventory.equipmentSlots.boots},{key:"accessory1",label:"Acc 1",item:r.inventory.equipmentSlots.accessory1},{key:"accessory2",label:"Acc 2",item:r.inventory.equipmentSlots.accessory2}].map(W=>l.jsxs("div",{className:`equip-slot-compact ${g?.id===W.item?.id?"equip-slot-selected":""} ${W.item?"equip-slot-filled":""}`,onClick:()=>W.item&&A(W.item,"equipment"),children:[l.jsx("div",{className:"equip-slot-label-compact",children:W.label}),W.item?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"equip-slot-icon-compact",children:W.item.type}),l.jsx("div",{className:"equip-slot-name-compact",children:W.item.name})]}):l.jsx("div",{className:"equip-slot-empty-compact",children:"-"})]},W.key)),ce=()=>{const V=r.inventory.equipmentInventory.maxCapacity,W=[];for(let re=0;re<V;re++)if(re<r.inventory.equipmentInventory.items.length){const _=r.inventory.equipmentInventory.items[re];W.push(l.jsx(Du,{item:_,isSelected:g?.id===_.id,onClick:()=>A(_,"equipmentInventory"),compact:!0},_.id))}else W.push(l.jsx("div",{className:"item-card-compact item-card-empty",children:l.jsx("span",{className:"empty-placeholder",children:"empty"})},`empty-equip-inv-${re}`));return W},B=r.inventory.storage.items.filter(V=>V.itemType==="equipment"),Z=r.inventory.inventory.items.filter(V=>V.itemType!=="equipment");return l.jsxs("div",{className:"storage-container",children:[l.jsx(un,{title:""}),l.jsxs("nav",{className:"nav",children:[l.jsxs("div",{className:"storage-tabs",children:[l.jsx("button",{className:`storage-tab ${p==="items"?"storage-tab-active":""}`,onClick:()=>{v("items"),N(null)},children:"Items"}),l.jsx("button",{className:`storage-tab ${p==="equipment"?"storage-tab-active":""}`,onClick:()=>{v("equipment"),N(null)},children:"Equipment"})]}),l.jsx("div",{className:"back-content",children:l.jsx("button",{className:"storage-back-button",onClick:s,children:" baseCamp Back"})})]}),l.jsx("div",{className:"storage-content",children:p==="items"?l.jsxs("div",{className:"items-tab-content",children:[l.jsxs("div",{className:"dual-grid-panel",children:[l.jsxs("div",{className:"storage-grid-section",children:[l.jsxs("div",{className:"storage-grid-header",children:[l.jsx("span",{className:"storage-grid-title",children:"Storage"}),l.jsxs("span",{className:"storage-grid-count",children:[r.inventory.storage.currentCapacity,"/",r.inventory.storage.maxCapacity]})]}),l.jsx("div",{className:"compact-grid storage-grid",children:F(r.inventory.storage.items,"storage",r.inventory.storage.maxCapacity)})]}),l.jsxs("div",{className:"transfer-buttons",children:[l.jsx("button",{className:"transfer-btn",onClick:G,disabled:!g||k!=="storage",title:"Move to Inventory",children:""}),l.jsx("button",{className:"transfer-btn",onClick:I,disabled:!g||k!=="inventory",title:"Move to Storage",children:""})]}),l.jsxs("div",{className:"storage-grid-section",children:[l.jsxs("div",{className:"storage-grid-header",children:[l.jsx("span",{className:"storage-grid-title",children:"Inventory"}),l.jsxs("span",{className:"storage-grid-count",children:[Z.length,"/",r.inventory.inventory.maxCapacity]})]}),l.jsx("div",{className:"compact-grid inventory-grid",children:F(Z,"inventory",r.inventory.inventory.maxCapacity)})]})]}),l.jsx("div",{className:"storage-detail-panel",children:l.jsx(Ob,{item:g,source:k,onMoveToStorage:I,onMoveToInventory:G,onMoveToEquipmentInventory:be,onEquip:X,onUnequip:K,onDelete:ae})})]}):l.jsxs("div",{className:"equipment-tab-content",children:[l.jsxs("div",{className:"equipment-list-panel",children:[l.jsxs("div",{className:"storage-grid-header",children:[l.jsx("span",{className:"storage-grid-title",children:"Equipment List"}),l.jsxs("span",{className:"storage-grid-count",children:[B.length," items"]})]}),l.jsx("div",{className:"compact-grid equipment-list-grid",children:B.length>0?B.map(V=>l.jsx(Du,{item:V,isSelected:g?.id===V.id,onClick:()=>A(V,"storage"),compact:!0},V.id)):l.jsx("div",{className:"empty-list-message",children:"No equipment in storage"})})]}),l.jsxs("div",{className:"transfer-buttons",children:[l.jsx("button",{className:"transfer-btn",onClick:be,disabled:!g||k!=="storage",title:"Move to Inventory",children:""}),l.jsx("button",{className:"transfer-btn",onClick:T,disabled:!g||k!=="equipmentInventory",title:"Move to Storage",children:""})]}),l.jsxs("div",{className:"equipment-right-panel",children:[l.jsxs("div",{className:"equipment-slots-section",children:[l.jsx("div",{className:"storage-section-header",children:l.jsx("span",{className:"storage-section-title",children:"Equipped Item"})}),l.jsx("div",{className:"equip-slots-grid-compact",children:de()})]}),l.jsxs("div",{className:"transfer-buttons-equip",children:[l.jsx("button",{className:"transfer-btn",onClick:()=>o(g.id,"equipment_inventory_to_equipment"),disabled:!g||k!=="equipmentInventory",title:"Move to Equipment Slots",children:""}),l.jsx("button",{className:"transfer-btn",onClick:()=>o(g.id,"equipment_to_equipment_inventory"),disabled:!g||k!=="equipment",title:"Move to Equipment Inventory",children:""})]}),l.jsxs("div",{className:"equipment-inventory-section",children:[l.jsxs("div",{className:"storage-section-header",children:[l.jsx("span",{className:"storage-section-title",children:"Equipment's Inventory"}),l.jsxs("span",{className:"storage-section-count",children:[r.inventory.equipmentInventory.currentCapacity,"/",r.inventory.equipmentInventory.maxCapacity]})]}),l.jsx("div",{className:"equipment-inventory-grid",children:ce()})]})]}),l.jsx("div",{className:"equip-detail-panel",children:l.jsx(Ub,{item:g,source:k,onMoveToStorage:I,onMoveToEquipmentInventory:be,onEquip:X,onUnequipToEquipmentInventory:K,onDelete:ae})})]})}),g&&l.jsx(zb,{item:g,isOpen:j,onConfirm:le,onCancel:z}),D&&l.jsx("div",{className:"storage-message",children:D}),l.jsx("div",{className:"storage-footer",children:" "})]})},Ki={0:1,1:1.1,2:1.2,3:1.3},Fi={0:1,1:1.2,2:1.4,3:1.6},xp={poor:.95,normal:1,good:1.03,master:1.05},Sl={poor:"#888888",normal:"#ffffff",good:"#4ade80",master:"#fbbf24"},wn={poor:"",normal:"",good:"",master:""},Au=["poor","normal","good","master"],Fu=3;function Gu(s){const r=Au.indexOf(s);return r===-1||r===Au.length-1?null:Au[r+1]}function nc(s){return s.itemType==="equipment"}function Hb(s){return nc(s)&&(s.level??0)<Fu}function Ib(s){return nc(s)&&s.quality!==void 0&&s.quality!=="master"}function Yb(s){return nc(s)&&s.durability!==void 0&&s.maxDurability!==void 0&&s.durability<s.maxDurability}function Pb(s){return nc(s)&&s.canDiscard}const Qb={common:[{gold:200,magicStones:150},{gold:400,magicStones:300},{gold:800,magicStones:600}],uncommon:[{gold:200,magicStones:150},{gold:400,magicStones:300},{gold:800,magicStones:600}],rare:[{gold:400,magicStones:300},{gold:800,magicStones:600},{gold:1600,magicStones:1200}],epic:[{gold:800,magicStones:600},{gold:1600,magicStones:1200},{gold:3200,magicStones:2400}],legendary:[{gold:1600,magicStones:1200},{gold:3200,magicStones:2400},{gold:6400,magicStones:4800}]},Sp={gold:500,magicStones:300},Wi={normal:{option:"normal",label:"",description:"",costMultiplier:1,successRates:{poorToNormal:.4,normalToGood:.2,goodToMaster:.1}},qualityFocused:{option:"qualityFocused",label:"",description:"1.5",costMultiplier:1.5,successRates:{poorToNormal:.8,normalToGood:.4,goodToMaster:.15}},maxQuality:{option:"maxQuality",label:"",description:"2",costMultiplier:2,successRates:{poorToNormal:1,normalToGood:.6,goodToMaster:.25}}},Xb=.5,$b={common:1,uncommon:1.2,rare:1.5,epic:2,legendary:3},ec={sellPriceReturnRate:{common:.1,uncommon:.12,rare:.15,epic:.2,legendary:.25},bonusChances:{common:0,uncommon:0,rare:.1,epic:.3,legendary:.5},levelBonusChance:{0:0,1:.05,2:.1,3:.15},bonusMagicStoneValue:100};function Vb(s,r){const o=Qb[s];return r<0||r>=o.length?null:o[r]}function Jb(s){const r=Wi[s];return{gold:Math.floor(Sp.gold*r.costMultiplier),magicStones:Math.floor(Sp.magicStones*r.costMultiplier)}}function Zb(s,r,o){const u=r-s,m=$b[o];return Math.ceil(u*Xb*m)}function Kb(s,r){const o=ec.sellPriceReturnRate[r];return Math.floor(s*o)}function Fb(s,r){const o=ec.bonusChances[s],u=ec.levelBonusChance[r]??0;return o+u}function Nl(s){return Hb(s)}function fy(s){if(!Nl(s))return null;const r=s.level??0;return Vb(s.rarity,r)}function Wb(s,r,o){if(!Nl(s))return null;const u=s.level??0,m=u+1,f=fy(s);if(!f)return null;const h=[];if(s.effects){for(const b of s.effects)if(b.type==="stat"&&typeof b.value=="number"){const p=Ki[u],v=Ki[m],g=b.value/p;h.push({stat:b.target,before:Math.floor(b.value),after:Math.floor(g*v)})}}if(s.maxDurability){const b=Fi[u],p=Fi[m],v=s.maxDurability/b;h.push({stat:"maxAP",before:Math.floor(s.maxDurability),after:Math.floor(v*p)})}return{currentLevel:u,nextLevel:m,statChanges:h,cost:f,canAfford:r>=f.gold&&o>=f.magicStones}}function ex(s){if(!Nl(s))return s;const r=s.level??0,o=r+1,u=Ki[r],m=Ki[o],f=Fi[r],h=Fi[o],b=s.effects?.map(g=>{if(g.type==="stat"&&typeof g.value=="number"){const N=g.value/u;return{...g,value:Math.floor(N*m)}}return g});let p=s.maxDurability,v=s.durability;if(s.maxDurability){const g=s.maxDurability/f;if(p=Math.floor(g*h),s.durability){const N=s.durability/s.maxDurability;v=Math.floor(p*N)}}return{...s,level:o,effects:b,maxDurability:p,durability:v}}function Ou(s){return Ib(s)}function Tu(s){return Jb(s)}function Uu(s,r){const o=Wi[r];switch(s){case"poor":return o.successRates.poorToNormal;case"normal":return o.successRates.normalToGood;case"good":return o.successRates.goodToMaster;default:return 0}}function ax(s,r){if(!Ou(s)||!s.quality)return{success:!1,message:"",qualityChanged:!1};const o=Gu(s.quality);if(!o)return{success:!1,message:"",qualityChanged:!1};const u=Uu(s.quality,r);if(Math.random()<u){const h=xp[s.quality],b=xp[o],p=s.effects?.map(g=>{if(g.type==="stat"&&typeof g.value=="number"){const N=g.value/h;return{...g,value:Math.floor(N*b)}}return g}),v={...s,quality:o,effects:p};return{success:!0,message:`! ${s.quality}  ${o}`,item:v,qualityChanged:!0}}else return{success:!1,message:`... (${Math.floor(u*100)}%)`,item:s,qualityChanged:!1}}function Wu(s){return Yb(s)}function zu(s){if(!Wu(s))return null;const r=s.durability??0,o=s.maxDurability??100,u=o-r;return{gold:Zb(r,o,s.rarity),durabilityRestored:u}}function Np(s){return Wu(s)?{...s,durability:s.maxDurability}:s}function eo(s){return Pb(s)}function py(s){if(!eo(s))return null;const r=Kb(s.sellPrice,s.rarity),o=s.level??0,u=Fb(s.rarity,o),m=ec.bonusMagicStoneValue;let f="";return u>0?f=`${Math.floor(u*100)}%`:f="",{goldReturn:r,magicStoneChance:u,magicStoneReturn:m,bonusDescription:f}}function tx(s){if(!eo(s))return{success:!1,message:""};const r=py(s);if(!r)return{success:!1,message:""};const o=Math.random()<r.magicStoneChance,u=o?r.magicStoneReturn:0;let m=`${s.name}${r.goldReturn}G `;return o&&(m+=`${u}!`),{success:!0,message:m,goldChange:r.goldReturn,magicStoneChange:u}}function Pi(s,r,o){return s>=o.gold&&r>=o.magicStones}function Cp(s,r){return s>=r.gold}function jp(s){const r=s.rarity==="rare"||s.rarity==="epic"||s.rarity==="legendary",o=(s.level??0)>=1,u=s.quality==="good"||s.quality==="master";return r&&o&&u}function nx(s){return s.reduce((r,o)=>{const u=zu(o);return r+(u?.gold??0)},0)}function sx(s){return s.filter(r=>Wu(r))}function lx(s){return s.filter(r=>eo(r))}const ao=({item:s,isSelected:r,onClick:o,showDurability:u=!1})=>{const m=s.level??0,f=s.quality??"normal",h=s.durability??100,b=s.maxDurability??100,p=h/b*100,v=()=>p<=20?"critical":p<=50?"low":"";return l.jsxs("div",{className:`equipment-card rarity-${s.rarity} ${r?"selected":""}`,onClick:o,children:[l.jsxs("span",{className:`level-badge ${m>=Fu?"max":""}`,children:["Lv.",m]}),l.jsx("span",{className:`quality-badge ${f}`,children:wn[f]}),l.jsx("span",{className:"item-icon",children:s.type}),l.jsx("span",{className:"item-name",children:s.name}),u&&l.jsx("div",{className:"durability-bar",children:l.jsx("div",{className:`durability-fill ${v()}`,style:{width:`${p}%`}})})]})},ix=()=>{const{playerData:s,updatePlayerData:r,useGold:o}=Aa(),[u,m]=S.useState(null),[f,h]=S.useState("normal"),[b,p]=S.useState(null),v=s.inventory.storage.items.filter(x=>x.itemType==="equipment"),g=bl(s.resources.baseCampMagicStones),N=(x,I)=>{p({message:x,type:I}),setTimeout(()=>p(null),2e3)},k=x=>{const I=s.inventory.storage.items.map(G=>G.id===x.id?x:G);r({inventory:{...s.inventory,storage:{...s.inventory.storage,items:I}}}),m(x)},M=()=>{if(!u)return;const x=fy(u);if(!x){N("This item cannot be upgraded further","error");return}if(!Pi(s.resources.baseCampGold,g,x)){N("Not enough resources","error");return}if(!o(x.gold)){N("Failed to deduct gold","error");return}const I=ex(u);k(I),N(`Level upgraded! ${u.name} is now Lv.${I.level}`,"success")},D=()=>{if(!u)return;const x=Tu(f);if(!Pi(s.resources.baseCampGold,g,x)){N("Not enough resources","error");return}if(!o(x.gold)){N("Failed to deduct gold","error");return}const I=ax(u,f);I.success&&I.item?(k(I.item),N(I.message,"success")):N(I.message,"error")},O=u?Wb(u,s.resources.baseCampGold,g):null,j=u?.quality?Uu(u.quality,f):0,R=Tu(f),A=Pi(s.resources.baseCampGold,g,R);return l.jsxs("div",{className:"tab-layout",children:[b&&l.jsx("div",{className:`blacksmith-notification ${b.type}`,children:b.message}),l.jsxs("div",{className:"equipment-list-section",children:[l.jsxs("h3",{className:"blacksmith-section-title",children:["Equipment (",v.length,")"]}),v.length===0?l.jsx("div",{className:"empty-message",children:"No equipment in storage"}):l.jsx("div",{className:"equipment-grid",children:v.map(x=>l.jsx(ao,{item:x,isSelected:u?.id===x.id,onClick:()=>m(x)},x.id))})]}),l.jsx("div",{className:"detail-panel",children:u?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:u.type}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h4",{className:"detail-name",children:u.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge level",children:["Lv.",u.level??0]}),l.jsx("span",{className:`badge quality-${u.quality??"normal"}`,style:{color:Sl[u.quality??"normal"]},children:wn[u.quality??"normal"]})]})]})]}),l.jsxs("div",{className:"stats-section",children:[u.effects?.map((x,I)=>l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:x.target.toUpperCase()}),l.jsxs("span",{className:"value",children:["+",x.value]})]},I)),u.maxDurability&&l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"MAX AP"}),l.jsx("span",{className:"value",children:u.maxDurability})]})]}),Nl(u)&&O&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Level Upgrade"}),l.jsx("div",{className:"stats-section",children:O.statChanges.map((x,I)=>l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:x.stat.toUpperCase()}),l.jsxs("span",{className:"value",children:[x.before,"  ",l.jsx("span",{className:"improved",children:x.after})]})]},I))}),l.jsxs("div",{className:"cost-display",children:[l.jsxs("span",{className:`cost-item gold ${s.resources.baseCampGold<O.cost.gold?"insufficient":""}`,children:[" ",O.cost.gold," G"]}),l.jsxs("span",{className:`cost-item stones ${g<O.cost.magicStones?"insufficient":""}`,children:[" ",O.cost.magicStones," G"]})]}),l.jsxs("button",{className:"action-button",onClick:M,disabled:!O.canAfford,children:["Upgrade to Lv.",O.nextLevel]})]}),!Nl(u)&&l.jsx("div",{className:"action-section",children:l.jsxs("div",{className:"empty-message",style:{height:"auto",padding:"1vh 0"},children:["Maximum level reached (Lv.",Fu,")"]})}),Ou(u)&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Quality Upgrade"}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Quality"}),l.jsxs("span",{className:"value",children:[l.jsx("span",{style:{color:Sl[u.quality??"normal"]},children:wn[u.quality??"normal"]}),"  ",l.jsx("span",{style:{color:Sl[Gu(u.quality??"normal")??"normal"]},children:wn[Gu(u.quality??"normal")??"normal"]})]})]}),l.jsx("div",{className:"quality-options",children:Object.keys(Wi).map(x=>{const I=Wi[x],G=Tu(x),X=Uu(u.quality??"normal",x),K=Pi(s.resources.baseCampGold,g,G);return l.jsxs("div",{className:`quality-option ${f===x?"selected":""} ${K?"":"disabled"}`,onClick:()=>K&&h(x),children:[l.jsxs("div",{className:"quality-option-header",children:[l.jsx("span",{className:"quality-option-name",children:I.label}),l.jsxs("span",{className:"quality-option-chance",children:[Math.floor(X*100),"%"]})]}),l.jsx("div",{className:"quality-option-desc",children:I.description}),l.jsxs("div",{className:"quality-option-cost",children:[l.jsxs("span",{className:`cost-item gold ${s.resources.baseCampGold<G.gold?"insufficient":""}`,children:[" ",G.gold," G"]}),l.jsxs("span",{className:`cost-item stones ${g<G.magicStones?"insufficient":""}`,children:[" ",G.magicStones," G"]})]})]},x)})}),l.jsxs("button",{className:"action-button secondary",onClick:D,disabled:!A,children:["Attempt Quality Upgrade (",Math.floor(j*100),"%)"]})]}),!Ou(u)&&l.jsx("div",{className:"action-section",children:l.jsx("div",{className:"empty-message",style:{height:"auto",padding:"1vh 0"},children:"Maximum quality reached (Master)"})})]}):l.jsx("div",{className:"no-selection",children:"Select equipment to upgrade"})})]})},cx=()=>{const{playerData:s,updatePlayerData:r,useGold:o}=Aa(),[u,m]=S.useState(null),[f,h]=S.useState(null),b=sx(s.inventory.storage.items),p=nx(b),v=(j,R)=>{h({message:j,type:R}),setTimeout(()=>h(null),2e3)},g=j=>{const R=s.inventory.storage.items.map(A=>A.id===j.id?j:A);r({inventory:{...s.inventory,storage:{...s.inventory.storage,items:R}}}),m(j)},N=j=>{const R=new Set(j.map(x=>x.id)),A=s.inventory.storage.items.map(x=>R.has(x.id)?j.find(I=>I.id===x.id)??x:x);r({inventory:{...s.inventory,storage:{...s.inventory.storage,items:A}}})},k=()=>{if(!u)return;const j=zu(u);if(!j){v("This item doesn't need repair","error");return}if(!Cp(s.resources.baseCampGold,j)){v("Not enough gold","error");return}if(!o(j.gold)){v("Failed to deduct gold","error");return}const R=Np(u);g(R),v(`${u.name} has been fully repaired!`,"success")},M=()=>{if(b.length===0){v("No items need repair","error");return}if(s.resources.baseCampGold<p){v("Not enough gold for all repairs","error");return}if(!o(p)){v("Failed to deduct gold","error");return}const j=b.map(R=>Np(R));if(N(j),u&&b.some(R=>R.id===u.id)){const R=j.find(A=>A.id===u.id);R&&m(R)}v(`Repaired ${b.length} items!`,"success")},D=u?zu(u):null,O=D?Cp(s.resources.baseCampGold,D):!1;return l.jsxs("div",{className:"tab-layout",children:[f&&l.jsx("div",{className:`blacksmith-notification ${f.type}`,children:f.message}),l.jsxs("div",{className:"equipment-list-section",children:[b.length>0&&l.jsxs("div",{className:"repair-all-section",children:[l.jsxs("div",{className:"repair-all-info",children:[l.jsxs("span",{className:"repair-all-title",children:["Repair All (",b.length," items)"]}),l.jsxs("span",{className:"repair-all-cost",children:["Total Cost: ",p," G"]})]}),l.jsx("button",{className:"repair-all-button",onClick:M,disabled:s.resources.baseCampGold<p,children:"Repair All"})]}),l.jsxs("h3",{className:"blacksmith-section-title",children:["Damaged Equipment (",b.length,")"]}),b.length===0?l.jsx("div",{className:"empty-message",children:"All equipment is fully repaired"}):l.jsx("div",{className:"equipment-grid",children:b.map(j=>l.jsx(ao,{item:j,isSelected:u?.id===j.id,onClick:()=>m(j),showDurability:!0},j.id))})]}),l.jsx("div",{className:"detail-panel",children:u?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:u.type}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h4",{className:"detail-name",children:u.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge level",children:["Lv.",u.level??0]}),l.jsx("span",{className:`badge quality-${u.quality??"normal"}`,style:{color:Sl[u.quality??"normal"]},children:wn[u.quality??"normal"]})]})]})]}),l.jsxs("div",{className:"durability-display",children:[l.jsx("span",{className:"label",children:"Durability"}),l.jsx("div",{className:"bar",children:l.jsx("div",{className:"fill",style:{width:`${(u.durability??0)/(u.maxDurability??100)*100}%`}})}),l.jsxs("span",{className:"text",children:[u.durability??0," / ",u.maxDurability??100]})]}),D&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Repair"}),l.jsxs("div",{className:"stats-section",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Durability to Restore"}),l.jsxs("span",{className:"value improved",children:["+",D.durabilityRestored]})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"After Repair"}),l.jsxs("span",{className:"value",children:[u.maxDurability??100," / ",u.maxDurability??100]})]})]}),l.jsx("div",{className:"cost-display",children:l.jsxs("span",{className:`cost-item gold ${O?"":"insufficient"}`,children:[" ",D.gold," G"]})}),l.jsx("button",{className:"action-button",onClick:k,disabled:!O,children:"Repair Equipment"})]}),!D&&l.jsx("div",{className:"action-section",children:l.jsx("div",{className:"empty-message",style:{height:"auto",padding:"1vh 0"},children:"This equipment is fully repaired"})})]}):l.jsx("div",{className:"no-selection",children:"Select equipment to repair"})})]})},rx=()=>{const{playerData:s,addGold:r,addMagicStones:o}=Aa(),{removeItemFromStorage:u}=tc(),[m,f]=S.useState(null),[h,b]=S.useState(!1),[p,v]=S.useState(null),g=lx(s.inventory.storage.items),N=(D,O)=>{v({message:D,type:O}),setTimeout(()=>v(null),2500)},k=()=>{if(!m)return;if(jp(m)&&!h){b(!0);return}const D=tx(m);D.success?(u(m.id),D.goldChange&&r(D.goldChange,!0),D.magicStoneChange&&D.magicStoneChange>0&&o({medium:1},!0),f(null),b(!1),N(D.message,"success")):N(D.message,"error")},M=m?py(m):null;return l.jsxs("div",{className:"tab-layout",children:[p&&l.jsx("div",{className:`blacksmith-notification ${p.type}`,children:p.message}),h&&m&&l.jsx("div",{className:"confirm-modal-overlay",onClick:()=>b(!1),children:l.jsxs("div",{className:"confirm-modal",onClick:D=>D.stopPropagation(),children:[l.jsx("h3",{children:"Dismantle Valuable Item?"}),l.jsxs("p",{children:['"',m.name,'" is a valuable item (',m.rarity," / Lv.",m.level??0," /"," ",wn[m.quality??"normal"],"). This action cannot be undone."]}),l.jsxs("div",{className:"confirm-buttons",children:[l.jsx("button",{className:"confirm-button cancel",onClick:()=>b(!1),children:"Cancel"}),l.jsx("button",{className:"confirm-button confirm",onClick:k,children:"Dismantle"})]})]})}),l.jsxs("div",{className:"equipment-list-section",children:[l.jsxs("h3",{className:"blacksmith-section-title",children:["Dismantleable Equipment (",g.length,")"]}),g.length===0?l.jsx("div",{className:"empty-message",children:"No equipment available for dismantle"}):l.jsx("div",{className:"equipment-grid",children:g.map(D=>l.jsx(ao,{item:D,isSelected:m?.id===D.id,onClick:()=>f(D)},D.id))})]}),l.jsx("div",{className:"detail-panel",children:m?l.jsxs("div",{className:"item-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:m.type}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h4",{className:"detail-name",children:m.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge level",children:["Lv.",m.level??0]}),l.jsx("span",{className:`badge quality-${m.quality??"normal"}`,style:{color:Sl[m.quality??"normal"]},children:wn[m.quality??"normal"]})]})]})]}),jp(m)&&l.jsxs("div",{className:"dismantle-warning",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{className:"warning-text",children:"This is a valuable item! Consider carefully before dismantling."})]}),l.jsxs("div",{className:"stats-section",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Rarity"}),l.jsx("span",{className:`value rarity-${m.rarity}`,children:m.rarity.charAt(0).toUpperCase()+m.rarity.slice(1)})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:"Sell Price"}),l.jsxs("span",{className:"value",children:[m.sellPrice," G"]})]}),m.effects?.map((D,O)=>l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"label",children:D.target.toUpperCase()}),l.jsxs("span",{className:"value",children:["+",D.value]})]},O))]}),M&&l.jsxs("div",{className:"action-section",children:[l.jsx("h5",{className:"blacksmith-section-title",children:"Dismantle Result"}),l.jsxs("div",{className:"dismantle-preview",children:[l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Gold Return"}),l.jsxs("span",{className:"value gold",children:["+",M.goldReturn," G"]})]}),M.magicStoneChance>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Bonus Chance"}),l.jsxs("span",{className:"value bonus",children:[Math.floor(M.magicStoneChance*100),"%"]})]}),l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Bonus Reward"}),l.jsx("span",{className:"value",children:"Magic Stone (Medium)"})]})]}),M.magicStoneChance===0&&l.jsxs("div",{className:"preview-row",children:[l.jsx("span",{className:"label",children:"Bonus"}),l.jsx("span",{className:"value",children:"None (Rare+ items only)"})]})]}),l.jsx("button",{className:"action-button danger",onClick:k,children:"Dismantle Equipment"})]})]}):l.jsx("div",{className:"no-selection",children:"Select equipment to dismantle"})})]})},ux=()=>{const[s,r]=S.useState("upgrade"),{returnToCamp:o}=Oa();return l.jsxs(l.Fragment,{children:[l.jsx("img",{className:"blacksmith-background",alt:"Blacksmith Background",src:"/assets/images/Blacksmith-background.png"}),l.jsxs("div",{className:"blacksmith-screen",children:[l.jsx(un,{title:""}),l.jsxs("nav",{className:"blacksmith-tabs",children:[l.jsxs("button",{className:`blacksmith-tab ${s==="upgrade"?"active":""}`,onClick:()=>r("upgrade"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Upgrade"})]}),l.jsxs("button",{className:`blacksmith-tab ${s==="repair"?"active":""}`,onClick:()=>r("repair"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Repair"})]}),l.jsxs("button",{className:`blacksmith-tab ${s==="dismantle"?"active":""}`,onClick:()=>r("dismantle"),children:[l.jsx("span",{className:"tab-icon",children:""}),l.jsx("span",{className:"tab-label",children:"Dismantle"})]})]}),l.jsxs("div",{className:"blacksmith-content",children:[s==="upgrade"&&l.jsx(ix,{}),s==="repair"&&l.jsx(cx,{}),s==="dismantle"&&l.jsx(rx,{})]}),l.jsx("button",{className:"blacksmith-back-button",onClick:o,children:" Back to Camp"})]})]})};function ox(s,r,o){const u=(s-90)*Math.PI/180,m=(r*6+4)*(o/50),f=Math.cos(u)*m,h=Math.sin(u)*m,b=`calc(50% + ${f}vh)`,p=`calc(50% + ${h}vh)`;return{left:b,top:p}}const dx=({node:s,status:r,isSelected:o,justUnlocked:u,treeSize:m,onClick:f})=>{const h=ox(s.position.angle,s.position.radius,m),b=["skill-node",r,o?"selected":"",u?"just-unlocked":""].filter(Boolean).join(" "),p=S.useCallback(N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),f())},[f]),v=()=>{switch(r){case"unlocked":return"";case"available":return"";case"locked":return""}},g=`${s.name} - ${v()}${r!=="unlocked"?` (${s.cost})`:""}`;return l.jsx("div",{className:b,style:{left:h.left,top:h.top},onClick:f,onKeyDown:p,title:s.name,tabIndex:0,role:"button","aria-label":g,"aria-pressed":o,children:l.jsxs("div",{className:"skill-node-inner",children:[l.jsx("span",{className:"node-icon",children:s.icon}),r!=="unlocked"&&l.jsx("span",{className:"node-cost",children:s.cost})]})})};function mx(s,r,o){const u=(s.position.angle-90)*Math.PI/180,m=(r.position.angle-90)*Math.PI/180,f=(s.position.radius*6+4)*(o/50),h=(r.position.radius*6+4)*(o/50),b=Math.cos(u)*f,p=Math.sin(u)*f,v=Math.cos(m)*h,g=Math.sin(m)*h,N=Math.sqrt(Math.pow(v-b,2)+Math.pow(g-p,2)),k=Math.atan2(g-p,v-b)*(180/Math.PI);return{left:`calc(50% + ${b}vh)`,top:`calc(50% + ${p}vh)`,width:`${N}vh`,transform:`rotate(${k}deg)`}}const fx=({progress:s,playerClass:r,selectedNodeId:o,justUnlockedId:u,onNodeSelect:m})=>{const h=Vu.filter(p=>!p.classRestriction||p.classRestriction===r),b=[];for(const p of h)for(const v of p.prerequisites){const g=jl(v);g&&b.push({from:g,to:p,fromStatus:xl(g,s,r),toStatus:xl(p,s,r)})}return l.jsx("div",{className:"skill-tree-container",children:l.jsxs("div",{className:"skill-tree",style:{width:"60vh",height:"60vh"},children:[l.jsx("div",{className:"tier-ring tier-1"}),l.jsx("div",{className:"tier-ring tier-2"}),l.jsx("div",{className:"tier-ring tier-3"}),b.map((p,v)=>{const g=p.fromStatus==="unlocked"&&p.toStatus==="unlocked",N=p.fromStatus==="unlocked"&&p.toStatus==="available";return l.jsx("div",{className:`connection-line ${g?"unlocked":""} ${N?"available":""}`,style:mx(p.from,p.to,60)},`conn-${v}`)}),l.jsxs("div",{className:"center-orb",children:[l.jsx("span",{className:"center-orb-icon",children:""}),l.jsx("span",{className:"center-orb-value",children:s.totalSouls})]}),h.map(p=>{const v=xl(p,s,r);return l.jsx(dx,{node:p,status:v,isSelected:o===p.id,justUnlocked:u===p.id,treeSize:60,onClick:()=>m(p)},p.id)})]})})},px={unlocked:"",available:"",locked:""},yx=({node:s,status:r,totalSouls:o,unlockedNodes:u,playerClass:m,onUnlock:f})=>{const[h,b]=S.useState(0),[p,v]=S.useState(!1),g=S.useRef(null),N=S.useRef(null),k=s?o>=s.cost:!1,M=r==="available"&&k,D=S.useCallback(()=>{g.current&&(clearTimeout(g.current),g.current=null),N.current&&(clearInterval(N.current),N.current=null),v(!1),b(0)},[]),O=S.useCallback(()=>{if(!s||!M)return;v(!0);const X=Date.now(),K=js.UNLOCK_HOLD_DURATION;N.current=window.setInterval(()=>{const ae=Date.now()-X,le=Math.min(ae/K*100,100);b(le),le>=100&&(D(),f(s))},16)},[s,M,D,f]),j=S.useCallback(()=>{M&&O()},[M,O]),R=S.useCallback(()=>{D()},[D]),A=S.useCallback(()=>{D()},[D]);if(!s)return l.jsx("div",{className:"detail-panel",children:l.jsxs("div",{className:"no-selection",children:[l.jsx("span",{className:"no-selection-icon",children:""}),l.jsx("span",{className:"no-selection-text",children:""})]})});const x=Nv[s.category],I=s.prerequisites.map(X=>{const K=jl(X),ae=u.includes(X);return{id:X,name:K?.name||X,isMet:ae}}),G=s.classRestriction&&s.classRestriction!==m;return l.jsx("div",{className:"detail-panel",children:l.jsxs("div",{className:"node-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("span",{className:"detail-icon",children:s.icon}),l.jsxs("div",{className:"detail-title",children:[l.jsx("h3",{className:"detail-name",children:s.name}),l.jsxs("div",{className:"detail-badges",children:[l.jsxs("span",{className:"badge tier",children:["Tier ",s.tier]}),l.jsx("span",{className:`badge category ${s.category}`,style:{backgroundColor:x.bgColor},children:x.name}),l.jsx("span",{className:`badge status ${r}`,children:px[r]})]})]})]}),s.classRestriction&&l.jsxs("div",{className:`class-restriction ${s.classRestriction}`,children:[l.jsxs("span",{children:[s.classRestriction==="swordsman"&&"",s.classRestriction==="mage"&&"",s.classRestriction==="summoner"&&""]}),l.jsxs("span",{children:[s.classRestriction==="swordsman"&&"",s.classRestriction==="mage"&&"",s.classRestriction==="summoner"&&"",""]})]}),l.jsx("p",{className:"detail-description",children:s.description}),l.jsxs("div",{className:"effects-section",children:[l.jsx("div",{className:"effects-title",children:""}),s.effects.map((X,K)=>l.jsxs("div",{className:"effect-item",children:[l.jsx("span",{className:"effect-bullet"}),l.jsx("span",{className:"effect-text",children:X.description})]},K))]}),I.length>0&&l.jsxs("div",{className:"prerequisites-section",children:[l.jsx("div",{className:"prerequisites-title",children:""}),I.map(X=>l.jsxs("div",{className:"prerequisite-item",children:[l.jsx("span",{className:"prerequisite-status",children:X.isMet?"":""}),l.jsx("span",{className:`prerequisite-name ${X.isMet?"met":"unmet"}`,children:X.name})]},X.id))]}),r!=="unlocked"&&l.jsxs("div",{className:`cost-section ${k?"affordable":"insufficient"}`,children:[l.jsx("span",{className:"cost-icon",children:""}),l.jsx("span",{className:"cost-amount",children:s.cost}),l.jsxs("span",{className:"cost-label",children:[" (",k?"":` ${s.cost-o} `,")"]})]}),l.jsx("div",{className:"unlock-button-container",children:r==="unlocked"?l.jsxs("div",{className:"unlocked-message",children:[l.jsx("span",{className:"unlocked-icon",children:""}),l.jsx("span",{children:""})]}):r==="available"?l.jsxs("button",{className:`unlock-button ${p?"unlocking":""}`,disabled:!M,onMouseDown:j,onMouseUp:R,onMouseLeave:A,onTouchStart:j,onTouchEnd:R,children:[l.jsx("div",{className:"unlock-progress",style:{width:`${h}%`}}),l.jsx("span",{className:"button-text",children:p?"...":k?"":""})]}):l.jsx("div",{className:"locked-message",children:G?`${s.classRestriction==="swordsman"?"":s.classRestriction==="mage"?"":""}`:""})})]})})},gx=()=>{const{returnToCamp:s}=Oa(),{playerData:r,updatePlayerData:o}=Aa(),[u,m]=S.useState(null),[f,h]=S.useState(null),[b,p]=S.useState(null),v=r.persistent.playerClass,g=r.progression.sanctuaryProgress,N=ey(g),k=Dv(g,v),M=S.useCallback(j=>{m(j),h(null)},[]),D=S.useCallback(j=>{const R=jv(j,g,v);R.success&&R.newProgress?(o({progression:{...r.progression,sanctuaryProgress:R.newProgress}}),p({message:R.message,type:"success"}),h(j.id),setTimeout(()=>{p(null)},3e3)):(p({message:R.message,type:"error"}),setTimeout(()=>{p(null)},3e3))},[g,v,o]),O=u?xl(u,g,v):"locked";return l.jsxs(l.Fragment,{children:[l.jsx("img",{className:"sanctuary-background",alt:"Sanctuary Background",src:"/assets/images/Sanctuary-background.png"}),l.jsxs("div",{className:"sanctuary-screen",children:[b&&l.jsx("div",{className:`sanctuary-notification ${b.type}`,children:b.message}),l.jsx(un,{title:""}),l.jsxs("div",{className:"sanctuary-soul-section",children:[l.jsxs("div",{className:"sanctuary-resources",children:[l.jsxs("div",{className:"soul-display total",children:[l.jsx("span",{className:"soul-icon",children:""}),l.jsxs("div",{className:"soul-info",children:[l.jsx("span",{className:"soul-label",children:""}),l.jsx("span",{className:"soul-value",children:g.totalSouls})]})]}),l.jsxs("div",{className:"soul-display current-run",children:[l.jsx("span",{className:"soul-icon",children:""}),l.jsxs("div",{className:"soul-info",children:[l.jsx("span",{className:"soul-label",children:""}),l.jsx("span",{className:"soul-value",children:g.currentRunSouls})]})]}),l.jsxs("div",{className:"exploration-display",children:[l.jsx("span",{className:"exploration-icon",children:""}),l.jsxs("span",{className:"exploration-value",children:[r.resources.explorationLimit.current," /"," ",r.resources.explorationLimit.max+N.explorationLimitBonus]})]})]}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:k.unlockedCount}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:k.availableCount}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("span",{className:"stat-value",children:[k.completionPercent,"%"]}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:k.soulsSpent}),l.jsx("span",{className:"stat-label",children:""})]})]})]}),l.jsxs("div",{className:"sanctuary-content",children:[l.jsx(fx,{progress:g,playerClass:v,selectedNodeId:u?.id||null,justUnlockedId:f,onNodeSelect:M}),l.jsx(yx,{node:u,status:O,totalSouls:g.totalSouls,unlockedNodes:g.unlockedNodes,playerClass:v,onUnlock:D})]}),l.jsx("button",{className:"sanctuary-back-button",onClick:s,children:" "})]})]})};function yy(){const s=Object.values(rn),r={common:0,rare:1,epic:2,legend:3};return s.sort((o,u)=>o.cost!==u.cost?o.cost-u.cost:r[o.rarity]-r[u.rarity])}function hx(){return yy().map(r=>({card:r,isUnlocked:!0,timesUsed:0,firstObtainedDate:void 0}))}function vx(){const s=yy(),r={},o={};return s.forEach(u=>{r[u.rarity]=(r[u.rarity]||0)+1,o[u.category]=(o[u.category]||0)+1}),{total:s.length,byRarity:r,byCategory:o}}const bx=()=>{const[s,r]=S.useState({rarity:null,category:null,characterClass:null,searchText:""}),o=S.useMemo(()=>hx(),[]),u=S.useMemo(()=>vx(),[]),m=S.useMemo(()=>o.filter(f=>{const{card:h}=f;if(s.rarity&&h.rarity!==s.rarity||s.category&&h.category!==s.category||s.characterClass&&h.characterClass!==s.characterClass&&h.characterClass!=="common")return!1;if(s.searchText){const b=s.searchText.toLowerCase();if(!h.name.toLowerCase().includes(b)&&!h.description.toLowerCase().includes(b))return!1}return!0}),[o,s]);return l.jsxs("div",{className:"library-content",children:[l.jsxs("div",{className:"library-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.total}),l.jsx("span",{className:"stat-label",children:"Total Cards"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.common||0}),l.jsx("span",{className:"stat-label",children:"Common"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.rare||0}),l.jsx("span",{className:"stat-label",children:"Rare"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.epic||0}),l.jsx("span",{className:"stat-label",children:"Epic"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.byRarity.legend||0}),l.jsx("span",{className:"stat-label",children:"Legend"})]})]}),l.jsxs("div",{className:"library-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("span",{className:"filter-label",children:"Rarity:"}),l.jsxs("select",{className:"filter-select",value:s.rarity||"",onChange:f=>r({...s,rarity:f.target.value||null}),children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"common",children:"Common"}),l.jsx("option",{value:"rare",children:"Rare"}),l.jsx("option",{value:"epic",children:"Epic"}),l.jsx("option",{value:"legend",children:"Legend"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("span",{className:"filter-label",children:"Category:"}),l.jsxs("select",{className:"filter-select",value:s.category||"",onChange:f=>r({...s,category:f.target.value||null}),children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"atk",children:"Attack"}),l.jsx("option",{value:"def",children:"Defense"}),l.jsx("option",{value:"buff",children:"Buff"}),l.jsx("option",{value:"debuff",children:"Debuff"}),l.jsx("option",{value:"heal",children:"Heal"}),l.jsx("option",{value:"swordEnergy",children:"Sword Energy"})]})]}),l.jsx("div",{className:"filter-group",children:l.jsx("input",{type:"text",className:"search-input",placeholder:"Search cards...",value:s.searchText,onChange:f=>r({...s,searchText:f.target.value})})})]}),m.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-state-icon",children:""}),l.jsx("span",{className:"empty-state-text",children:"No cards found"})]}):l.jsx("div",{className:"card-grid",children:m.map(f=>l.jsx("div",{className:"encyclopedia-card-wrapper",children:l.jsx(Cl,{card:f.card,depth:1,isPlayable:!0})},f.card.id))})]})};function gy(){return[...z0].sort((s,r)=>s.baseMaxHp-r.baseMaxHp)}function xx(){return gy().map(r=>({enemy:r,isEncountered:!0,timesDefeated:0,firstEncounteredDate:void 0}))}function Bu(s){return s.id.includes("boss")||s.baseMaxHp>100}function Sx(){const s=gy(),r=s.filter(Bu),o=s.reduce((u,m)=>u+m.baseMaxHp,0);return{total:s.length,normalCount:s.length-r.length,bossCount:r.length,avgHp:Math.round(o/s.length)}}const Nx=()=>{const[s,r]=S.useState({depth:null,isBoss:null,searchText:""}),o=S.useMemo(()=>xx(),[]),u=S.useMemo(()=>Sx(),[]),m=S.useMemo(()=>o.filter(f=>{const{enemy:h}=f;if(s.isBoss!==null&&Bu(h)!==s.isBoss)return!1;if(s.searchText){const b=s.searchText.toLowerCase();if(!h.name.toLowerCase().includes(b)&&!(h.nameJa?.toLowerCase().includes(b)??!1)&&!h.description.toLowerCase().includes(b))return!1}return!0}),[o,s]);return l.jsxs("div",{className:"library-content",children:[l.jsxs("div",{className:"library-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.total}),l.jsx("span",{className:"stat-label",children:"Total Enemies"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.normalCount}),l.jsx("span",{className:"stat-label",children:"Normal"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.bossCount}),l.jsx("span",{className:"stat-label",children:"Boss"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:u.avgHp}),l.jsx("span",{className:"stat-label",children:"Avg HP"})]})]}),l.jsxs("div",{className:"library-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("span",{className:"filter-label",children:"Type:"}),l.jsxs("select",{className:"filter-select",value:s.isBoss===null?"":s.isBoss?"boss":"normal",onChange:f=>{const h=f.target.value;r({...s,isBoss:h===""?null:h==="boss"})},children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"normal",children:"Normal"}),l.jsx("option",{value:"boss",children:"Boss"})]})]}),l.jsx("div",{className:"filter-group",children:l.jsx("input",{type:"text",className:"search-input",placeholder:"Search enemies...",value:s.searchText,onChange:f=>r({...s,searchText:f.target.value})})})]}),m.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-state-icon",children:""}),l.jsx("span",{className:"empty-state-text",children:"No enemies found"})]}):l.jsx("div",{className:"enemy-grid",children:m.map(f=>{const{enemy:h}=f,b=Bu(h);return l.jsxs("div",{className:`enemy-card ${b?"boss":""}`,children:[l.jsxs("div",{className:"enemy-card-header",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"enemy-name",children:h.name}),h.nameJa&&l.jsx("p",{className:"enemy-name-ja",children:h.nameJa})]}),l.jsx("span",{className:`enemy-badge ${b?"boss":"normal"}`,children:b?"BOSS":"Normal"})]}),l.jsxs("div",{className:"enemy-stats",children:[l.jsxs("div",{className:"enemy-stat",children:[l.jsx("span",{className:"enemy-stat-label",children:"HP"}),l.jsx("span",{className:"enemy-stat-value",children:h.baseMaxHp})]}),l.jsxs("div",{className:"enemy-stat",children:[l.jsx("span",{className:"enemy-stat-label",children:"Speed"}),l.jsx("span",{className:"enemy-stat-value",children:h.baseSpeed})]}),l.jsxs("div",{className:"enemy-stat",children:[l.jsx("span",{className:"enemy-stat-label",children:"Guard"}),l.jsx("span",{className:"enemy-stat-value",children:h.startingGuard?Math.floor(h.baseMaxAp*.5):0})]})]}),l.jsx("p",{className:"enemy-description",children:h.description})]},h.id)})})]})},Hu=[{id:"tip_battle_001",category:"battle",title:"Energy Management",content:"Each turn you receive 3 energy to play cards. Plan your card plays carefully to maximize damage while maintaining defense. Unused energy does not carry over to the next turn.",isUnlocked:!0},{id:"tip_battle_002",category:"battle",title:"Guard Mechanics",content:"Guard blocks incoming damage before HP. Guard does not stack between turns - any remaining guard is lost at the start of your turn. Prioritize guard when expecting heavy enemy attacks.",isUnlocked:!0},{id:"tip_battle_003",category:"battle",title:"Speed and Turn Order",content:"Higher speed means you act first. If your speed is higher than the enemy, you can attack before they do. Use preemptive cards to attack even earlier in the turn.",isUnlocked:!0},{id:"tip_battle_004",category:"battle",title:"Armor Points (AP)",content:"AP provides permanent damage reduction. When HP damage occurs, AP absorbs some damage. Unlike guard, AP persists across turns but is harder to recover.",isUnlocked:!0},{id:"tip_cards_001",category:"cards",title:"Card Mastery System",content:"Using a card increases its mastery level. Higher mastery provides damage bonuses: Lv1 = +20%, Lv2 = +40%, Lv3 = +100%. Build your deck around cards you use frequently.",isUnlocked:!0},{id:"tip_cards_002",category:"cards",title:"Card Cost Reduction",content:"Some cards reduce the cost of the next card played. Chaining these cards together allows you to play more cards per turn. Look for cards with 'cost reduction' effects.",isUnlocked:!0},{id:"tip_cards_003",category:"cards",title:"Multi-Hit Attacks",content:"Multi-hit cards deal damage multiple times. Each hit can trigger on-hit effects and is calculated separately against enemy defense. Great for breaking through guard.",isUnlocked:!0},{id:"tip_explore_001",category:"exploration",title:"Dungeon Node Types",content:"The dungeon map contains different node types: Battle nodes for combat, Rest nodes for healing, Event nodes for random encounters, and Treasure nodes for loot.",isUnlocked:!0},{id:"tip_explore_002",category:"exploration",title:"Exploration Limit",content:"You have a limited number of explorations before needing to rest. Plan your dungeon runs carefully and return to camp before running out of explorations.",isUnlocked:!0},{id:"tip_explore_003",category:"exploration",title:"Resource Management",content:"Gold and magic stones gained during exploration are temporary until you return to camp. If you die, you lose all exploration resources. Return safely to keep your loot.",isUnlocked:!0},{id:"tip_class_001",category:"class",title:"Sword Energy (Swordsman)",content:"The Swordsman builds Sword Energy by playing attack cards. Spend accumulated energy to unleash powerful finisher moves. Balance energy building and spending for optimal damage.",isUnlocked:!0},{id:"tip_class_002",category:"class",title:"Guild Promotions",content:"Complete guild exams to increase your rank. Higher ranks unlock better rewards, new cards, and access to deeper dungeon levels. Check the guild for available promotions.",isUnlocked:!0},{id:"tip_general_001",category:"general",title:"Sanctuary Upgrades",content:"The Sanctuary offers permanent upgrades using souls. Souls are gained from defeating enemies and are transferred to your total when you return safely. Unlock nodes to grow stronger.",isUnlocked:!0},{id:"tip_general_002",category:"general",title:"Blacksmith Services",content:"The Blacksmith can upgrade, repair, and dismantle equipment. Upgrading improves stats, repairing restores durability, and dismantling recovers materials from unwanted items.",isUnlocked:!0},{id:"tip_general_003",category:"general",title:"Shop Inventory",content:"The shop sells consumables, equipment, and cards. Inventory refreshes periodically. Check back regularly for new items and stock up on healing items before difficult runs.",isUnlocked:!0}];function Cx(){return Hu}function jx(){const s={};return Hu.forEach(r=>{s[r.category]=(s[r.category]||0)+1}),{total:Hu.length,byCategory:s}}const _p={battle:"Battle",cards:"Cards",exploration:"Exploration",class:"Class",general:"General"},_x={battle:"",cards:"",exploration:"",class:"",general:""},Ex=()=>{const[s,r]=S.useState(null),[o,u]=S.useState(new Set(["battle","cards","exploration","class","general"])),m=S.useMemo(()=>Cx(),[]),f=S.useMemo(()=>jx(),[]),h=S.useMemo(()=>{const g={battle:[],cards:[],exploration:[],class:[],general:[]};return m.forEach(N=>{g[N.category].push(N)}),g},[m]),b=g=>{const N=new Set(o);N.has(g)?N.delete(g):N.add(g),u(N)},p=g=>{r(s===g?null:g)},v=["battle","cards","exploration","class","general"];return l.jsxs("div",{className:"library-content",children:[l.jsxs("div",{className:"library-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:f.total}),l.jsx("span",{className:"stat-label",children:"Total Tips"})]}),v.map(g=>l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:f.byCategory[g]||0}),l.jsx("span",{className:"stat-label",children:_p[g]})]},g))]}),l.jsx("div",{className:"tips-container",children:v.map(g=>{const N=h[g],k=o.has(g);return N.length===0?null:l.jsxs("div",{className:"tips-category",children:[l.jsxs("div",{className:"tips-category-header",onClick:()=>b(g),children:[l.jsx("span",{className:"tips-category-icon",children:_x[g]}),l.jsx("span",{className:"tips-category-title",children:_p[g]}),l.jsxs("span",{className:"tips-category-count",children:[N.length," tips"]}),l.jsx("span",{children:k?"":""})]}),k&&l.jsx("div",{className:"tips-list",children:N.map(M=>l.jsxs("div",{className:`tip-card ${s===M.id?"expanded":""}`,onClick:()=>p(M.id),children:[l.jsx("div",{className:"tip-title",children:M.title}),l.jsx("div",{className:"tip-content",children:M.content})]},M.id))})]},g)})})]})},Dx=()=>{const[s,r]=S.useState("cards"),{returnToCamp:o}=Oa(),u=[{id:"cards",label:"Card Encyclopedia"},{id:"enemies",label:"Enemy Bestiary"},{id:"tips",label:"Game Tips"}],m=()=>{switch(s){case"cards":return l.jsx(bx,{});case"enemies":return l.jsx(Nx,{});case"tips":return l.jsx(Ex,{});default:return null}};return l.jsxs("div",{className:"library-screen",children:[l.jsx(un,{title:""}),l.jsx("nav",{className:"library-tabs",children:u.map(f=>l.jsx("button",{className:`library-tab ${s===f.id?"active":""}`,onClick:()=>r(f.id),children:f.label},f.id))}),m(),l.jsx("button",{className:"library-back-button",onClick:o,children:"Return to Camp"})]})},Ax={battle:{icon:"",label:"Battle",description:"Encounter enemies"},elite:{icon:"",label:"Elite",description:"Powerful enemy with better rewards"},boss:{icon:"",label:"Boss",description:"Floor boss - defeat to progress"},event:{icon:"",label:"Event",description:"Unknown encounter"},rest:{icon:"",label:"Rest",description:"Restore health"},treasure:{icon:"",label:"Treasure",description:"Find rewards"}},Iu={1:{depth:1,name:"Corruption",japaneseName:"",description:"Where decay begins its embrace",recommendedLevel:1},2:{depth:2,name:"Frenzy",japaneseName:"",description:"Madness lurks in every shadow",recommendedLevel:5},3:{depth:3,name:"Chaos",japaneseName:"",description:"Order loses all meaning",recommendedLevel:10},4:{depth:4,name:"Void",japaneseName:"",description:"Where existence fades",recommendedLevel:15},5:{depth:5,name:"Abyss",japaneseName:"",description:"The endless darkness awaits",recommendedLevel:20}},hy={totalRows:7,nodesPerRow:[1,2,2,2,2,2,1],eliteChance:.15,eventChance:.1,restChance:.1,treasureChance:.05};function Tx(){const{returnToCamp:s,navigateTo:r,setDepth:o}=Oa(),{resetRuntimeState:u}=Aa(),[m,f]=S.useState(null),h=S.useCallback(v=>{f(v)},[]),b=S.useCallback(()=>{m!==null&&(u(),o(m),r("dungeon_map"))},[m,o,r,u]),p=v=>Ju;return l.jsxs("div",{className:"dungeon-gate-screen",children:[l.jsx(un,{title:""}),l.jsxs("div",{className:"depth-selection-container",children:[l.jsx("h2",{className:"depth-selection-title",children:"Select Depth"}),l.jsx("div",{className:"depth-cards-grid",children:[1,2,3,4,5].map(v=>{const g=p(),N=Iu[v],k=m===v;return l.jsxs("button",{className:`depth-card ${k?"selected":""}`,onClick:()=>h(v),style:{"--depth-primary":g.primary,"--depth-secondary":g.secondary,"--depth-accent":g.accent,"--depth-glow":g.glow,"--depth-hover":g.hover},children:[l.jsxs("div",{className:"depth-card-inner",children:[l.jsx("div",{className:"depth-number",children:v}),l.jsxs("div",{className:"depth-name-container",children:[l.jsx("span",{className:"depth-name-jp",children:N.japaneseName}),l.jsx("span",{className:"depth-name-en",children:N.name})]}),l.jsx("p",{className:"depth-description",children:N.description}),l.jsxs("div",{className:"depth-level",children:["Lv. ",N.recommendedLevel,"+"]})]}),k&&l.jsx("div",{className:"depth-selected-indicator"})]},v)})})]}),l.jsx("div",{className:"dungeon-gate-actions",children:l.jsx("button",{className:"start-exploration-button",onClick:b,disabled:m===null,children:m!==null?`Enter ${Iu[m].japaneseName}`:"Select a Depth"})}),l.jsx("button",{className:"dungeon-gate-back-button",onClick:s,children:" Back to Camp"})]})}function Mx(s,r){return`node-${s}-${r}`}function wx(){return`run-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function Rx(s,r,o=hy){if(s===0)return"battle";if(s===r-1)return"boss";const u=Math.random();let m=0;return m+=o.eliteChance,u<m?"elite":(m+=o.eventChance,u<m?"event":(m+=o.restChance,u<m?"rest":(m+=o.treasureChance,u<m?"treasure":"battle")))}function kx(s,r){s.forEach((o,u)=>{const m=r.length;if(m===1)o.connections.push(r[0].id);else if(s.length===1)r.forEach(f=>{o.connections.push(f.id)});else{const f=Math.min(u,m-1);if(o.connections.push(r[f].id),Math.random()>.5){const h=u<s.length/2?f+1:f-1;if(h>=0&&h<m){const b=r[h].id;o.connections.includes(b)||o.connections.push(b)}}}})}function qx(s,r=hy){const{totalRows:o,nodesPerRow:u}=r,m=[],f=[];for(let h=0;h<o;h++){const b=u[h]||1,p=[];for(let v=0;v<b;v++){const g={id:Mx(h,v),type:Rx(h,o,r),row:h,column:v,connections:[],status:h===0?"available":"locked"};p.push(g),m.push(g)}f.push(p)}for(let h=0;h<o-1;h++)kx(f[h],f[h+1]);return{depth:s,nodes:m,currentNodeId:null,isCompleted:!1,totalRows:o}}function to(s,r){return s.nodes.find(o=>o.id===r)}function Yu(s,r,o){return s.map(u=>u.id===r?{...u,status:o}:u)}function Lx(s,r){const o=to(s,r);if(!o||o.status!=="available")return s;let u=s.nodes.map(m=>m.status==="available"&&m.id!==r?{...m,status:"skipped"}:m);return u=Yu(u,r,"current"),{...s,nodes:u,currentNodeId:r}}function Gx(s,r,o){const u=to(s,r);if(!u||u.status!=="current")return s;if(o==="defeat"||o==="retreat")return{...s,isCompleted:!1};let m=Yu(s.nodes,r,"completed");return u.row===s.totalRows-1?{...s,nodes:m,currentNodeId:null,isCompleted:!0}:(u.connections.forEach(h=>{const b=s.nodes.find(p=>p.id===h);b&&b.status==="locked"&&(m=Yu(m,h,"available"))}),{...s,nodes:m,currentNodeId:null})}function Ox(s){return{runId:wx(),selectedDepth:s,currentFloor:qx(s),encounterCount:0,isActive:!0,startedAt:Date.now()}}function Ux(s){const r=s.nodes.filter(u=>u.status==="completed").length,o=s.nodes.length;return Math.round(r/o*100)}function zx(s){const r=new Map;s.nodes.forEach(u=>{const m=r.get(u.row)||[];m.push(u),r.set(u.row,m)});const o=[];for(let u=0;u<s.totalRows;u++)o.push(r.get(u)||[]);return o}function Bx(s){const r=[],o=new Set(s.nodes.filter(u=>u.status==="completed").map(u=>u.id));return s.nodes.forEach(u=>{u.connections.forEach(m=>{r.push({fromId:u.id,toId:m,isUnlocked:o.has(u.id)})})}),r}const vy=S.createContext(null);function Hx({children:s,initialRun:r=null}){const[o,u]=S.useState(r),m=S.useCallback(N=>{const k=Ox(N);u(k)},[]),f=S.useCallback(N=>{u(k=>{if(!k)return k;const M=Lx(k.currentFloor,N);return{...k,currentFloor:M}})},[]),h=S.useCallback(N=>{u(k=>{if(!k||!k.currentFloor.currentNodeId)return k;const M=Gx(k.currentFloor,k.currentFloor.currentNodeId,N);return N==="defeat"?{...k,currentFloor:M,isActive:!1}:{...k,currentFloor:M,encounterCount:k.encounterCount+1}})},[]),b=S.useCallback(()=>{u(N=>N&&{...N,isActive:!1})},[]),p=S.useCallback(()=>!o||!o.currentFloor.currentNodeId?null:to(o.currentFloor,o.currentFloor.currentNodeId)||null,[o]),v=S.useCallback(()=>{u(N=>N&&{...N,encounterCount:N.encounterCount+1})},[]),g={dungeonRun:o,initializeRun:m,selectNodeToVisit:f,completeCurrentNode:h,retreatFromDungeon:b,getCurrentNode:p,incrementEncounter:v};return l.jsx(vy.Provider,{value:g,children:s})}function Ix(){const s=S.useContext(vy);if(!s)throw new Error("useDungeonRun must be used within a DungeonRunProvider");return s}function Yx({node:s,onClick:r,isHighlighted:o=!1}){const{id:u,type:m,status:f}=s,h=Ax[m],b=f==="available",p=S.useMemo(()=>{const N=["map-node",`map-node-${f}`,`map-node-type-${m}`];return b&&N.push("map-node-clickable"),o&&N.push("map-node-highlighted"),N.join(" ")},[f,m,b,o]),v=()=>{b&&r(u)},g=N=>{(N.key==="Enter"||N.key===" ")&&b&&(N.preventDefault(),r(u))};return l.jsxs("div",{className:p,onClick:v,onKeyDown:g,role:b?"button":"presentation",tabIndex:b?0:-1,"aria-label":`${h.label} node - ${f}`,"aria-disabled":!b,children:[l.jsxs("div",{className:"map-node-inner",children:[l.jsx("span",{className:"map-node-icon",children:h.icon}),f==="current"&&l.jsx("div",{className:"map-node-current-indicator"})]}),f==="available"&&l.jsx("div",{className:"map-node-available-pulse"})]})}function Px(){const{returnToCamp:s,navigateTo:r,startBattle:o,gameState:u}=Oa(),{dungeonRun:m,initializeRun:f,selectNodeToVisit:h,completeCurrentNode:b,retreatFromDungeon:p,getCurrentNode:v}=Ix();S.useEffect(()=>{!m&&u.depth&&f(u.depth)},[m,u.depth,f]);const g=S.useMemo(()=>Ju,[]),N=S.useMemo(()=>{const A=m?.selectedDepth||u.depth||1;return Iu[A]},[m,u.depth]),k=S.useMemo(()=>m?zx(m.currentFloor):[],[m]),M=S.useMemo(()=>m?Bx(m.currentFloor):[],[m]),D=S.useMemo(()=>m?Ux(m.currentFloor):0,[m]),O=S.useCallback(A=>{if(!m)return;const x=m.currentFloor.nodes.find(I=>I.id===A);if(!(!x||x.status!=="available"))if(h(A),x.type==="battle"||x.type==="elite"||x.type==="boss"){const I=x.type==="battle"?"normal":x.type;o({enemyIds:[],backgroundType:"dungeon",enemyType:I,onWin:()=>{b("victory"),r("dungeon_map")},onLose:()=>{b("defeat"),s()}},"normal")}else b("victory")},[m,h,o,b,r,s]),j=S.useCallback(()=>{p(),s()},[p,s]);if(S.useEffect(()=>{m?.currentFloor.isCompleted&&s()},[m?.currentFloor.isCompleted,s]),!m)return l.jsx("div",{className:"node-map-screen node-map-loading",children:l.jsx("p",{children:"Entering the depths..."})});const R=v();return l.jsxs("div",{className:"node-map-screen",style:{"--map-primary":g.primary,"--map-secondary":g.secondary,"--map-accent":g.accent,"--map-glow":g.glow},children:[l.jsxs("header",{className:"node-map-header",children:[l.jsxs("div",{className:"node-map-title-row",children:[l.jsx("span",{className:"node-map-depth-badge",children:N.japaneseName}),l.jsx("h1",{className:"node-map-title",children:"Floor Map"})]}),l.jsxs("div",{className:"node-map-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Progress"}),l.jsxs("span",{className:"stat-value",children:[D,"%"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Encounters"}),l.jsx("span",{className:"stat-value",children:m.encounterCount})]})]})]}),l.jsx("div",{className:"node-map-container",children:l.jsxs("div",{className:"node-map-grid",children:[l.jsx("svg",{className:"connection-lines-layer",preserveAspectRatio:"none",children:M.map(A=>{const x=m.currentFloor.nodes.find(le=>le.id===A.fromId),I=m.currentFloor.nodes.find(le=>le.id===A.toId);if(!x||!I)return null;const G=Mu(x.column,k[x.row]?.length||1),X=wu(x.row,m.currentFloor.totalRows),K=Mu(I.column,k[I.row]?.length||1),ae=wu(I.row,m.currentFloor.totalRows);return l.jsx("line",{className:`connection-line ${A.isUnlocked?"unlocked":""}`,x1:`${G}%`,y1:`${X}%`,x2:`${K}%`,y2:`${ae}%`},`${A.fromId}-${A.toId}`)})}),l.jsx("div",{className:"nodes-layer",children:k.map((A,x)=>l.jsx("div",{className:"node-row",style:{top:`${wu(x,m.currentFloor.totalRows)}%`},children:A.map(I=>l.jsx("div",{className:"node-wrapper",style:{left:`${Mu(I.column,A.length)}%`},children:l.jsx(Yx,{node:I,onClick:O,isHighlighted:R?.id===I.id})},I.id))},x))})]})}),R&&l.jsxs("div",{className:"current-node-info",children:[l.jsx("span",{className:"current-node-label",children:"Current:"}),l.jsx("span",{className:"current-node-type",children:R.type.charAt(0).toUpperCase()+R.type.slice(1)})]}),l.jsx("div",{className:"node-map-actions",children:l.jsx("button",{className:"retreat-button",onClick:j,children:"Retreat"})}),l.jsx("button",{className:"node-map-back-button",onClick:s,children:" Back to Camp"})]})}function Mu(s,r){if(r===1)return 50;const o=60/(r-1);return 20+s*o}function wu(s,r){const m=84/(r-1);return 8+(r-1-s)*m}function Qx(s){switch(s){case"sword":return"";case"staff":return"";case"summon":return"";default:return""}}const Xx=({classInfo:s,isSelected:r,onSelect:o})=>{const{name:u,japaneseName:m,description:f,uniqueMechanic:h,mechanicDescription:b,stats:p,isAvailable:v,themeColor:g,icon:N}=s,k=["character-card",r&&"selected",!v&&"disabled"].filter(Boolean).join(" "),M=()=>{v&&o()};return l.jsxs("div",{className:k,style:{"--theme-color":g},onClick:M,children:[!v&&l.jsxs("div",{className:"coming-soon-overlay",children:[l.jsx("span",{className:"coming-soon-text",children:"Coming Soon"}),l.jsx("span",{className:"coming-soon-subtext",children:"Under Development"})]}),l.jsx("div",{className:"selection-indicator",children:l.jsx("span",{className:"selection-checkmark",children:""})}),l.jsxs("div",{className:"character-card-header",children:[l.jsx("div",{className:"character-icon",children:Qx(N)}),l.jsxs("div",{className:"character-name-block",children:[l.jsx("h3",{className:"character-class-name",children:u}),l.jsx("span",{className:"character-class-japanese",children:m})]})]}),l.jsxs("div",{className:"character-stats",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"HP"}),l.jsx("span",{className:"stat-value",children:p.hp})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"AP"}),l.jsx("span",{className:"stat-value",children:p.ap})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"Speed"}),l.jsx("span",{className:"stat-value",children:p.speed})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:"Energy"}),l.jsx("span",{className:"stat-value",children:p.cardActEnergy})]})]}),l.jsxs("div",{className:"unique-mechanic",children:[l.jsx("div",{className:"mechanic-title",children:h}),l.jsx("div",{className:"mechanic-description",children:b})]}),l.jsx("p",{className:"character-description",children:f})]})},$x=({cards:s,className:r=""})=>{const o=S.useMemo(()=>{const u=new Set;return s.filter(m=>u.has(m.cardTypeId)?!1:(u.add(m.cardTypeId),!0))},[s]);return s.length===0?l.jsxs("div",{className:`starter-deck-preview ${r}`,children:[l.jsxs("div",{className:"starter-deck-header",children:[l.jsx("h3",{className:"starter-deck-title",children:"Starter Deck"}),l.jsx("span",{className:"starter-deck-count",children:"0 cards"})]}),l.jsx("div",{className:"no-deck-message",children:"Starter deck is not yet available for this class."})]}):l.jsxs("div",{className:`starter-deck-preview ${r}`,children:[l.jsxs("div",{className:"starter-deck-header",children:[l.jsx("h3",{className:"starter-deck-title",children:"Starter Deck"}),l.jsxs("span",{className:"starter-deck-count",children:[s.length," cards"]})]}),l.jsx("div",{className:"starter-deck-cards",children:o.map(u=>l.jsx("div",{className:"starter-deck-card",children:l.jsx(Cl,{card:u,depth:1,isPlayable:!0})},u.cardTypeId))})]})},Vx=()=>{const[s,r]=S.useState(null),{navigateTo:o}=Oa(),{initializeWithClass:u}=Aa(),m=Iv(),f=s&&m.find(v=>v.class===s)||null,h=v=>{r(v)},b=()=>{!s||!f?.isAvailable||(u(s),Ku.save({player:{name:"Adventurer",playerClass:s,classGrade:"E",level:1,hp:f.stats.hp,maxHp:f.stats.hp,ap:f.stats.ap,maxAp:f.stats.ap,speed:f.stats.speed,deckCardIds:f.starterDeck.map(v=>v.id)},resources:{baseCampGold:0,baseCampMagicStones:{small:0,medium:0,large:0,huge:0}},inventory:{storageItems:[],equipmentSlots:{weapon:null,armor:null,helmet:null,boots:null,accessory1:null,accessory2:null}},progression:{sanctuaryProgress:{currentRunSouls:0,totalSouls:0,unlockedNodes:[],explorationLimitBonus:0},unlockedDepths:[1]}}),o("camp"))},p=s!==null&&f?.isAvailable;return l.jsxs("div",{className:"character-select-screen",children:[l.jsxs("header",{className:"character-select-header",children:[l.jsx("h1",{className:"character-select-title",children:"Choose Your Path"}),l.jsx("p",{className:"character-select-subtitle",children:"Select a class to begin your journey into the abyss"})]}),l.jsxs("div",{className:"character-select-content",children:[l.jsx("div",{className:"character-grid",children:m.map(v=>l.jsx(Xx,{classInfo:v,isSelected:s===v.class,onSelect:()=>h(v.class)},v.class))}),f&&l.jsx($x,{cards:f.starterDeck}),l.jsx("div",{className:"confirm-button-container",children:l.jsx("button",{className:"confirm-button",onClick:b,disabled:!p,children:"Begin Journey"})})]})]})},Jx={id:"exam_training_dummy",name:"Training Dummy",nameJa:"",description:"Basic training dummy for practicing swordsmanship",baseMaxHp:50,baseMaxAp:0,baseSpeed:40,startingGuard:!1,actEnergy:2,aiPatterns:[{phaseNumber:0,action:{name:"Wooden Strike",type:"attack",baseDamage:8,displayIcon:"",priority:0,energyCost:1}}]},Zx={id:"exam_guild_instructor",name:"Guild Instructor",nameJa:"",description:"Veteran warrior who trains guild members",baseMaxHp:120,baseMaxAp:0,baseSpeed:55,startingGuard:!1,actEnergy:3,aiPatterns:[{phaseNumber:1,action:{name:"Instructor's Strike",type:"attack",baseDamage:15,displayIcon:"",priority:0,energyCost:2}},{phaseNumber:2,action:{name:"Defensive Stance",type:"buff",baseDamage:0,guardGain:20,displayIcon:"",priority:1,energyCost:1}},{phaseNumber:0,action:{name:"Instructor's Strike",type:"attack",baseDamage:15,displayIcon:"",priority:0,energyCost:2},probability:.7},{phaseNumber:0,action:{name:"Defensive Stance",type:"buff",baseDamage:0,guardGain:20,displayIcon:"",priority:1,energyCost:1},probability:.3}]},Kx={id:"exam_veteran_warrior",name:"Veteran Warrior",nameJa:"",description:"Battle-hardened warrior with decades of experience",baseMaxHp:200,baseMaxAp:0,baseSpeed:60,startingGuard:!1,actEnergy:4,aiPatterns:[{phaseNumber:1,action:{name:"Skilled Slash",type:"attack",baseDamage:20,displayIcon:"",priority:0,energyCost:2}},{phaseNumber:2,action:{name:"Iron Defense",type:"buff",baseDamage:0,guardGain:30,displayIcon:"",priority:1,energyCost:2}},{phaseNumber:0,action:{name:"Skilled Slash",type:"attack",baseDamage:20,displayIcon:"",priority:0,energyCost:2},probability:.5},{phaseNumber:0,action:{name:"Combo Strike",type:"attack",baseDamage:12,hitCount:2,displayIcon:"",priority:0,energyCost:3,applyDebuffs:[{name:"bleed",stacks:1,duration:2,value:5,isPermanent:!1}]},probability:.3},{phaseNumber:0,action:{name:"Iron Defense",type:"buff",baseDamage:0,guardGain:30,displayIcon:"",priority:1,energyCost:2},probability:.2}]},Fx={id:"exam_sword_saint_phantom",name:"Phantom of the Sword Saint",nameJa:"",description:"Manifestation of a legendary sword saint's spirit",baseMaxHp:350,baseMaxAp:0,baseSpeed:70,startingGuard:!1,actEnergy:5,aiPatterns:[{phaseNumber:1,action:{name:"Divine Slash",type:"attack",baseDamage:25,displayIcon:"",priority:0,energyCost:3}},{phaseNumber:2,action:{name:"Sword Spirit Release",type:"attack",baseDamage:18,displayIcon:"",priority:1,energyCost:2,applyDebuffs:[{name:"defDownMinor",stacks:1,duration:2,value:20,isPermanent:!1}]}},{phaseNumber:5,condition:(s,r)=>s<=r*.5,action:{name:"Ultimate Art: Void Blade",type:"attack",baseDamage:40,displayIcon:"",priority:0,energyCost:5,applyDebuffs:[{name:"stun",stacks:1,duration:1,value:0,isPermanent:!1}]}},{phaseNumber:0,action:{name:"Divine Slash",type:"attack",baseDamage:25,displayIcon:"",priority:0,energyCost:3},probability:.6},{phaseNumber:0,action:{name:"Sword Spirit Release",type:"attack",baseDamage:18,displayIcon:"",priority:1,energyCost:2,applyDebuffs:[{name:"defDownMinor",stacks:1,duration:2,value:20,isPermanent:!1}]},probability:.4}]},Wx={id:"exam_magic_golem",name:"Magic Training Golem",nameJa:"",description:"Golem designed for mage training",baseMaxHp:45,baseMaxAp:0,baseSpeed:35,startingGuard:!0,actEnergy:2,aiPatterns:[{phaseNumber:0,action:{name:"Magic Bullet",type:"attack",baseDamage:10,displayIcon:"",priority:0,energyCost:1}}]},e1={id:"exam_wild_spirit",name:"Wild Spirit",nameJa:"",description:"Untamed spirit for summoner training",baseMaxHp:40,baseMaxAp:0,baseSpeed:50,startingGuard:!1,actEnergy:2,aiPatterns:[{phaseNumber:0,action:{name:"Spirit Blast",type:"attack",baseDamage:9,displayIcon:"",priority:0,energyCost:1}}]},a1=[Jx,Zx,Kx,Fx,Wx,e1];function t1(s){return a1.find(r=>r.id===s)}function n1(){const{gameState:s,setDepth:r,returnToCamp:o}=Oa(),{currentScreen:u,depth:m,battleMode:f,battleConfig:h}=s;return l.jsxs("div",{className:"app-container",children:[u==="character_select"&&l.jsx(Vx,{}),u==="camp"&&l.jsx(cb,{}),u==="battle"&&l.jsx(l.Fragment,{children:f==="exam"&&h?(()=>{const b=t1(h.enemyIds[0]);return b?l.jsx(lb,{examEnemy:b,onWin:h.onWin||(()=>{}),onLose:h.onLose||(()=>{})}):(console.error("Exam enemy not found:",h.enemyIds[0]),l.jsx("div",{children:"Error: Exam enemy not found"}))})():l.jsx(sb,{depth:m,onDepthChange:r,onReturnToCamp:o,onWin:h?.onWin,onLose:h?.onLose})}),u==="guild"&&l.jsx(hb,{}),u==="shop"&&l.jsx(Gb,{}),u==="blacksmith"&&l.jsx(ux,{}),u==="sanctuary"&&l.jsx(gx,{}),u==="library"&&l.jsx(Dx,{}),u==="storage"&&l.jsx(Bb,{}),u==="dungeon"&&l.jsx(Tx,{}),u==="dungeon_map"&&l.jsx(Px,{})]})}function s1(){return l.jsx(Zv,{children:l.jsx(Qv,{children:l.jsx($v,{children:l.jsx(vb,{children:l.jsx(Hx,{children:l.jsx(n1,{})})})})})})}Hh.createRoot(document.getElementById("root")).render(l.jsx(S.StrictMode,{children:l.jsx(s1,{})}));
