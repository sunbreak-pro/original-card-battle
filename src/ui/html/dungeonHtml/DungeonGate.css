/* DungeonGate - Invasion Preparations Styles */

/* Card styles (shared with Library, Battle, etc.) */
@import "../../css/card/index.css";
@import "../../css/card/card-grid.css";

.dungeon-gate-screen {
  width: 100vw;
  height: 105vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: linear-gradient(135deg, #0a0a0f 0%, #151520 50%, #0d0d15 100%);
  color: #e0e0e5;
  padding-bottom: 3vh;
  box-sizing: border-box;
  overflow: hidden;
}

/* ========== Main Layout ========== */

.dungeon-gate-screen .invasion-preparations-container {
  flex: 1;
  display: flex;
  gap: 2vw;
  width: 92vw;
  max-height: 80vh;
  margin-top: 3vh;
  overflow: hidden;
}

/* Left Panel (Tabs + Content) */
.dungeon-gate-screen .preparations-left-panel {
  flex: 6;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
}

/* Right Panel (Status + Depth + Start) */
.dungeon-gate-screen .preparations-right-panel {
  flex: 4;
  display: flex;
  flex-direction: column;
  gap: 2vh;
  min-width: 0;
}

/* ========== Tab Navigation ========== */

.dungeon-gate-screen .preparations-tabs {
  display: flex;
  gap: 0.5vw;
  flex-shrink: 0;
  margin-bottom: 0;
}

.dungeon-gate-screen .preparations-tab {
  padding: 1vh 2vw;
  font-size: 1.6vh;
  font-weight: bold;
  color: #888;
  background: rgba(30, 30, 40, 0.6);
  border: 1px solid rgba(100, 100, 120, 0.3);
  border-bottom: none;
  border-radius: 6px 6px 0 0;
  cursor: pointer;
  transition: all 0.2s ease;
}

.dungeon-gate-screen .preparations-tab:hover {
  color: #c0c0d0;
  background: rgba(50, 50, 70, 0.6);
  transform: none;
}

.dungeon-gate-screen .preparations-tab.active {
  color: #c9a0dc;
  background: rgba(40, 30, 55, 0.8);
  border-color: rgba(201, 160, 220, 0.4);
}

/* ========== Tab Content Area ========== */

.dungeon-gate-screen .preparations-tab-content {
  flex: 1;
  background: rgba(20, 18, 30, 0.7);
  border: 1px solid rgba(100, 100, 120, 0.2);
  border-radius: 0 8px 8px 8px;
  padding: 2vh 1.5vw;
  overflow-y: auto;
  min-height: 0;
}

/* ========== Player Status Panel ========== */

.dungeon-gate-screen .player-status-panel {
  background: rgba(20, 18, 30, 0.7);
  border: 1px solid rgba(100, 100, 120, 0.2);
  border-radius: 8px;
  padding: 2vh 1.5vw;
}

.dungeon-gate-screen .status-header {
  display: flex;
  align-items: baseline;
  gap: 1vw;
  margin-bottom: 1.5vh;
  padding-bottom: 1vh;
  border-bottom: 1px solid rgba(100, 100, 120, 0.2);
}

.dungeon-gate-screen .status-name {
  font-size: 2.2vh;
  font-weight: bold;
  color: #e0e0e5;
}

.dungeon-gate-screen .status-class {
  font-size: 1.6vh;
  color: #c9a0dc;
}

.dungeon-gate-screen .status-grade {
  font-size: 1.4vh;
  color: #8a7a9a;
}

.dungeon-gate-screen .status-stats {
  display: flex;
  flex-direction: column;
  gap: 0.6vh;
}

.dungeon-gate-screen .status-row {
  display: flex;
  justify-content: space-between;
  font-size: 1.5vh;
}

.dungeon-gate-screen .status-label {
  color: #8a8a9a;
}

.dungeon-gate-screen .status-value {
  color: #d0d0e0;
  font-weight: bold;
}

/* ========== Depth Selector ========== */

.dungeon-gate-screen .depth-selector {
  background: rgba(20, 18, 30, 0.7);
  border: 1px solid rgba(100, 100, 120, 0.2);
  border-radius: 8px;
  padding: 1.5vh 1.5vw;
}

.dungeon-gate-screen .depth-selector-label {
  font-size: 1.3vh;
  color: #6a6a7a;
  margin-bottom: 1vh;
  text-align: center;
}

.dungeon-gate-screen .depth-selector-buttons {
  display: flex;
  gap: 0.5vw;
  justify-content: center;
}

.dungeon-gate-screen .depth-selector-btn {
  width: 3.5vh;
  height: 3.5vh;
  font-size: 1.5vh;
  font-weight: bold;
  color: #888;
  background: rgba(30, 30, 40, 0.8);
  border: 1px solid rgba(100, 100, 120, 0.3);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dungeon-gate-screen .depth-selector-btn:hover {
  color: #c0c0d0;
  border-color: rgba(180, 180, 200, 0.5);
}

.dungeon-gate-screen .depth-selector-btn.depth-selected {
  color: #c9a0dc;
  border-color: rgba(201, 160, 220, 0.6);
  background: rgba(60, 40, 80, 0.6);
  box-shadow: 0 0 8px rgba(201, 160, 220, 0.3);
}

/* ========== Start Invasion Button ========== */

.dungeon-gate-screen .start-invasion-button {
  padding: 2vh 2vw;
  font-size: 2vh;
  font-weight: bold;
  color: #fff;
  background: linear-gradient(135deg, #3d2066 0%, #5a3494 100%);
  border: 2px solid #8b5cf6;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  letter-spacing: 0.1vw;
  margin-top: auto;
}

.dungeon-gate-screen .start-invasion-button:hover:not(:disabled) {
  background: linear-gradient(135deg, #4c2980 0%, #6b40b0 100%);
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
}

.dungeon-gate-screen .start-invasion-button:disabled {
  background: rgba(50, 50, 60, 0.6);
  border-color: rgba(100, 100, 120, 0.3);
  color: #666;
  cursor: not-allowed;
}

/* ========== Back Button ========== */

.dungeon-gate-screen .dungeon-gate-back-button {
  position: absolute;
  bottom: 3vh;
  left: 3vw;
  padding: 1.2vh 2vw;
  background: rgba(30, 30, 40, 0.8);
  border: 2px solid rgba(150, 150, 170, 0.3);
  border-radius: 8px;
  color: #c0c0d0;
  font-size: 1.6vh;
  cursor: pointer;
  transition: all 0.3s ease;
}

.dungeon-gate-screen .dungeon-gate-back-button:hover {
  background: rgba(50, 50, 70, 0.8);
  border-color: rgba(180, 180, 200, 0.5);
}

/* ==========================================================
   Deck Tab - Card grid using same sizing as Library
   ========================================================== */

.dungeon-gate-screen .deck-tab {
  display: flex;
  flex-direction: column;
  gap: 2vh;
}

.dungeon-gate-screen .deck-section {
  display: flex;
  flex-direction: column;
  gap: 1vh;
}

.dungeon-gate-screen .deck-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.dungeon-gate-screen .deck-section-title {
  font-size: 1.6vh;
  color: #a090b0;
  margin: 0;
  font-weight: bold;
}

.dungeon-gate-screen .deck-empty {
  font-size: 1.4vh;
  color: #666;
  font-style: italic;
  padding: 2vh 0;
  text-align: center;
}

.dungeon-gate-screen .deck-divider {
  height: 1px;
  background: rgba(201, 160, 220, 0.2);
  margin: 0.5vh 0;
}

/* Card grid - matches Library .card-grid pattern */
.dungeon-gate-screen .deck-card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(calc(var(--card-base-width, 15vh) * 0.75 + 1vw), 1fr));
  gap: 3vh 2vw;
  justify-items: center;
  padding: 1vh 0;
}

/* Card wrapper - matches Library .encyclopedia-card-wrapper sizing */
.dungeon-gate-screen .prep-card-wrapper {
  position: relative;
  width: calc(var(--card-base-width, 13vh) * 0.75);
  aspect-ratio: 2 / 3;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.dungeon-gate-screen .prep-card-wrapper.selected {
  z-index: 10;
  transform: scale(1.05) !important;
}

/* Card slot (wrapper + button) */
.dungeon-gate-screen .deck-card-slot {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.8vh;
}

/* Button container - absolute so it doesn't affect layout */
.dungeon-gate-screen .deck-edit-btn-container {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 0.5vh;
  z-index: 10;
}

/* Count badge on deck cards */
.dungeon-gate-screen .card-count {
  position: absolute;
  top: -.75vh;
  right: -1.5vw;
  background: rgba(201, 160, 220, 0.95);
  color: #fff;
  font-size: 1.3vh;
  font-weight: bold;
  padding: 0.3vh 0.6vw;
  border-radius: 4px;
  width: 3.2vh;
  text-align: center;
  z-index: 5;
  box-shadow: 0 0.2vh 0.5vh rgba(0, 0, 0, 0.4);
}

/* "In deck" indicator on available cards */
.dungeon-gate-screen .deck-in-deck-badge {
  position: absolute;
  top: -5%;
  right: -11%;
  background: rgba(60, 50, 80, 0.95);
  color: #c9a0dc;
  font-size: 1.1vh;
  font-weight: bold;
  padding: 0.5vh 0.7vw;
  border-radius: 3px;
  white-space: nowrap;
  z-index: 5;
  border: 1px solid rgba(201, 160, 220, 0.3);
}

/* Add/Remove buttons */
.dungeon-gate-screen .deck-edit-btn {
  position: static;
  z-index: 50;
  padding: 0.5vh 1.2vw;
  margin-top: 2vh;
  font-size: 1.5vh;
  font-weight: bold;
  border: 1px solid;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.dungeon-gate-screen .deck-remove-btn {
  color: #e00000;
  text-shadow: #000000 0 0 0.2vh;
  background: rgb(185, 44, 44, 0.5);
  border-color: rgb(225, 82, 82, 0.3);
}

.dungeon-gate-screen .deck-remove-btn:hover {
  color: rgb(255, 254, 254);
  text-shadow: #171717 0 0 0.2vh;
  background: rgba(186, 12, 12, 0.8);
  border-color: rgb(225, 82, 82, 1);
}

.dungeon-gate-screen .deck-add-btn {
  color: #4ade80;
  text-shadow: #000000 0 0 0.2vh;
  background: rgba(74, 222, 128, 0.5);
  border-color: rgba(74, 222, 128, 0.8);
}

.dungeon-gate-screen .deck-add-btn:hover {
  transform: scale(1.05);
  color: #ffffff;
  text-shadow: #000000 0 0 0.2vh;
  background: rgba(74, 222, 128, 1);
  border-color: rgba(74, 222, 128, 1);
}

/* ========== Inventory Tab ========== */

.dungeon-gate-screen .inventory-tab {
  display: flex;
  flex-direction: column;
  gap: 1.5vh;
}

.dungeon-gate-screen .inventory-capacity {
  font-size: 1.4vh;
  color: #8a8a9a;
  text-align: right;
}

.dungeon-gate-screen .inventory-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 1vh 0.8vw;
}

.dungeon-gate-screen .inventory-empty {
  font-size: 1.4vh;
  color: #666;
  font-style: italic;
  padding: 2vh 0;
}

.dungeon-gate-screen .inventory-item-card {
  position: relative;
  padding: 1vh 1vw;
  background: rgba(30, 30, 40, 0.6);
  border: 1px solid;
  border-radius: 6px;
  cursor: default;
  transition: all 0.2s ease;
  min-width: 8vw;
}

.dungeon-gate-screen .inventory-item-card:hover {
  background: rgba(40, 40, 55, 0.8);
}

.dungeon-gate-screen .inv-item-name {
  font-size: 1.3vh;
  color: #d0d0e0;
}

.dungeon-gate-screen .inv-item-stack {
  font-size: 1.1vh;
  color: #aaa;
  text-align: right;
}

/* ========== Equipment Tab ========== */

.dungeon-gate-screen .equipment-tab {
  display: flex;
  flex-direction: column;
  gap: 1.5vh;
}

.dungeon-gate-screen .equipment-slots-list {
  display: flex;
  flex-direction: column;
  gap: 0.8vh;
}

.dungeon-gate-screen .equipment-slot-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1vh 1vw;
  background: rgba(30, 30, 40, 0.5);
  border: 1px solid rgba(100, 100, 120, 0.2);
  border-radius: 6px;
  transition: background 0.2s ease;
}

.dungeon-gate-screen .equipment-slot-row:hover {
  background: rgba(40, 40, 55, 0.7);
}

.dungeon-gate-screen .equipment-slot-row.empty .slot-item-name {
  color: #555;
}

.dungeon-gate-screen .slot-label {
  font-size: 1.4vh;
  color: #8a8a9a;
  min-width: 6vw;
}

.dungeon-gate-screen .slot-item-name {
  font-size: 1.4vh;
  font-weight: bold;
}

/* ========== Tooltips (shared) ========== */

.dungeon-gate-screen .equipment-tooltip,
.dungeon-gate-screen .inventory-tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(15, 15, 25, 0.95);
  border: 1px solid rgba(150, 150, 170, 0.3);
  border-radius: 6px;
  padding: 1vh 1vw;
  min-width: 15vw;
  z-index: 50;
  pointer-events: none;
}

.dungeon-gate-screen .tooltip-name {
  font-size: 1.5vh;
  font-weight: bold;
  color: #e0e0e5;
  margin-bottom: 0.3vh;
}

.dungeon-gate-screen .tooltip-rarity {
  font-size: 1.2vh;
  color: #8a8a9a;
  margin-bottom: 0.5vh;
}

.dungeon-gate-screen .tooltip-desc {
  font-size: 1.2vh;
  color: #aaa;
  line-height: 1.4;
}

/* ========== Navigate to Storage Button ========== */

.dungeon-gate-screen .navigate-storage-btn {
  align-self: flex-start;
  padding: 1vh 2vw;
  font-size: 1.4vh;
  color: #a090b0;
  background: rgba(30, 30, 40, 0.6);
  border: 1px solid rgba(150, 150, 170, 0.3);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-top: 1vh;
}

.dungeon-gate-screen .navigate-storage-btn:hover {
  color: #c9a0dc;
  background: rgba(50, 40, 70, 0.6);
  border-color: rgba(201, 160, 220, 0.4);
}

/* ========== Responsive ========== */

@media (max-width: 800px) {
  .dungeon-gate-screen .invasion-preparations-container {
    flex-direction: column;
    overflow-y: auto;
  }

  .dungeon-gate-screen .preparations-left-panel,
  .dungeon-gate-screen .preparations-right-panel {
    flex: none;
    width: 100%;
  }

  .dungeon-gate-screen .preparations-right-panel {
    flex-direction: row;
    flex-wrap: wrap;
    gap: 1vh 2vw;
  }

  .dungeon-gate-screen .player-status-panel {
    flex: 1;
    min-width: 40vw;
  }

  .dungeon-gate-screen .depth-selector {
    flex: 1;
    min-width: 40vw;
  }

  .dungeon-gate-screen .start-invasion-button {
    width: 100%;
  }
}
