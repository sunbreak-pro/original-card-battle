/* =========================================
   Elemental Resonance Display (Mage)
   =========================================
   Resonance gauge, element indicator, and effect badges.
   Scoped under .battle-screen to avoid collisions.
   ========================================= */

/* Container */
.battle-screen .elemental-resonance-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.6vh;
  padding: 1.2vh 0.8vw;
  border: 0.25vh solid rgba(150, 150, 150, 0.5);
  border-radius: 0.8vh;
  background: rgba(30, 10, 50, 0.6);
  z-index: 50;
  width: 20vw;
  height: fit-content;
  transition: border-color 0.4s ease, background 0.4s ease, box-shadow 0.4s ease;
}

/* Level-based container styling */
.battle-screen .elemental-resonance-display.resonance-level-0 {
  border-color: rgba(150, 150, 150, 0.3);
}

.battle-screen .elemental-resonance-display.resonance-level-1 {
  border-color: var(--resonance-color);
  background: rgba(30, 10, 50, 0.7);
  box-shadow: 0 0 1.5vh color-mix(in srgb, var(--resonance-color) 30%, transparent);
}

.battle-screen .elemental-resonance-display.resonance-level-2 {
  border-color: var(--resonance-color);
  border-width: 0.3vh;
  background: rgba(30, 10, 50, 0.8);
  box-shadow: 0 0 2.5vh color-mix(in srgb, var(--resonance-color) 50%, transparent),
              inset 0 0 1vh color-mix(in srgb, var(--resonance-color) 15%, transparent);
}

/* =========================================
   Element Indicator
   ========================================= */
.battle-screen .resonance-element-indicator {
  display: flex;
  align-items: center;
  gap: 0.5vw;
  width: 100%;
  justify-content: center;
}

.battle-screen .resonance-element-icon {
  width: 3vh;
  height: 3vh;
  object-fit: contain;
  transition: transform 0.3s ease, filter 0.3s ease;
}

.battle-screen .resonance-element-icon.idle {
  width: 3vh;
  height: 3vh;
  border-radius: 50%;
  background: rgba(100, 100, 100, 0.4);
  border: 1px solid rgba(150, 150, 150, 0.3);
}

.battle-screen .resonance-element-icon.pulsing {
  animation: elementPulse 1.5s ease-in-out infinite;
}

.battle-screen .resonance-element-icon.max-glow {
  animation: elementPulse 0.8s ease-in-out infinite;
  filter: drop-shadow(0 0 0.8vh var(--resonance-color));
}

.battle-screen .resonance-element-name {
  font-size: 1.8vh;
  font-weight: bold;
  text-shadow: 0 0 0.4vh rgba(0, 0, 0, 0.8);
  transition: color 0.3s ease;
}

.battle-screen .resonance-element-name.idle-text {
  color: #666666;
  font-size: 1.6vh;
}

/* Light element needs dark text-shadow for contrast */
.battle-screen .resonance-element-name.light-element-text {
  text-shadow: 0 0 0.5vh rgba(0, 0, 0, 0.9), 0 0 0.2vh rgba(0, 0, 0, 0.6);
}

/* =========================================
   Resonance Gauge (3 segments)
   ========================================= */
.battle-screen .resonance-gauge {
  display: flex;
  gap: 0.4vw;
  width: 100%;
  justify-content: center;
}

.battle-screen .resonance-segment {
  flex: 1;
  height: 1.2vh;
  background: rgba(60, 60, 60, 0.6);
  border: 1px solid rgba(100, 100, 100, 0.4);
  border-radius: 0.3vh;
  transition: background 0.4s ease, box-shadow 0.4s ease, border-color 0.4s ease;
}

.battle-screen .resonance-segment.base-lit {
  background: color-mix(in srgb, var(--resonance-color) 20%, rgba(60, 60, 60, 0.6));
  border-color: color-mix(in srgb, var(--resonance-color) 30%, rgba(100, 100, 100, 0.4));
}

.battle-screen .resonance-segment.lit {
  background: var(--resonance-color);
  border-color: var(--resonance-color);
  box-shadow: 0 0 0.6vh color-mix(in srgb, var(--resonance-color) 60%, transparent);
}

.battle-screen .resonance-segment.max-pulse {
  animation: resonanceMaxPulse 1s ease-in-out infinite;
}

/* =========================================
   Info Row (multiplier + level label)
   ========================================= */
.battle-screen .resonance-info-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.8vw;
  width: 100%;
}

.battle-screen .resonance-multiplier {
  font-size: 1.6vh;
  font-weight: bold;
  color: var(--resonance-color);
  text-shadow: 0 0 0.3vh rgba(0, 0, 0, 0.8);
  transition: color 0.3s ease;
}

.battle-screen .resonance-multiplier .crit-bonus {
  font-size: 1.2vh;
  color: #ffd700;
  text-shadow: 0 0 0.4vh rgba(255, 215, 0, 0.5);
}

.battle-screen .resonance-level-text {
  font-size: 1.4vh;
  font-weight: bold;
  color: rgba(255, 255, 255, 0.7);
  transition: color 0.3s ease;
}

.battle-screen .resonance-level-text.light-element-text {
  text-shadow: 0 0 0.3vh rgba(0, 0, 0, 0.8);
}

/* =========================================
   Effect Badge
   ========================================= */
.battle-screen .resonance-effect-badge {
  font-size: 1.3vh;
  font-weight: bold;
  padding: 0.3vh 0.6vw;
  border-radius: 0.3vh;
  text-align: center;
  color: rgba(255, 255, 255, 0.5);
  background: rgba(60, 60, 60, 0.4);
  border: 1px solid rgba(100, 100, 100, 0.3);
  transition: all 0.4s ease;
}

.battle-screen .resonance-effect-badge.active {
  color: #ffffff;
  background: color-mix(in srgb, var(--resonance-color) 25%, rgba(30, 10, 50, 0.8));
  border-color: var(--resonance-color);
  box-shadow: 0 0 0.5vh color-mix(in srgb, var(--resonance-color) 30%, transparent);
}

/* =========================================
   Animations
   ========================================= */
@keyframes elementPulse {
  0%, 100% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.15);
    filter: brightness(1.3);
  }
}

@keyframes resonanceMaxPulse {
  0%, 100% {
    box-shadow: 0 0 0.6vh color-mix(in srgb, var(--resonance-color) 60%, transparent);
  }
  50% {
    box-shadow: 0 0 1.5vh var(--resonance-color),
                0 0 2.5vh color-mix(in srgb, var(--resonance-color) 40%, transparent);
  }
}
