import type { ItemRarity, EquipmentStatBonuses, EnhancedEquipmentData } from "@/types/itemTypes";
import type { EquipmentSlot } from "@/types/itemTypes";

// ============================================================================
// SWORDSMAN CLASS-SPECIFIC EQUIPMENT
// ============================================================================

export const SWORDSMAN_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  // --- Head Equipment (3) ---
  sw_helm_01: {
    id: "sw_helm_01",
    typeId: "sw_helm_01",
    name: "Swordsman's Helm",
    description: "剣士の基本兜。剣気5以上で被ダメージ軽減。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 100,
    maxDurability: 100,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 100,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_guard",
      name: "Sword Guard",
      nameJa: "剣気の守護",
      description: "Reduce damage taken based on sword energy level",
      descriptionJa: "剣気5以上で被ダメージ-15%、剣気10で-30%",
      effect: { type: "damageReduction", value: 15, condition: "highSwordEnergy" },
      unlockLevel: 0,
    }],
  },
  sw_helm_02: {
    id: "sw_helm_02",
    typeId: "sw_helm_02",
    name: "War God's Helm",
    description: "戦神の兜。剣気蓄積を加速。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 180,
    maxDurability: 180,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 180,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_acceleration",
      name: "Sword Acceleration",
      nameJa: "剣気加速",
      description: "Accelerate sword energy gain",
      descriptionJa: "物理カード使用時、剣気+2(通常+1)。ターン開始時、剣気+1",
      effect: { type: "classAbilityBonus", value: 1, classAbilityTarget: "swordEnergy" },
      unlockLevel: 0,
    }],
  },
  sw_helm_03: {
    id: "sw_helm_03",
    typeId: "sw_helm_03",
    name: "Sword God's Crown",
    description: "剣神の冠。剣気10で圧倒的火力。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 300,
    maxDurability: 300,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 300,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_explosion",
        name: "Sword Explosion",
        nameJa: "剣気爆発",
        description: "Massive damage boost at max sword energy",
        descriptionJa: "剣気10到達時、次の物理攻撃威力×2。剣気10維持中、全ダメージ+30%",
        effect: { type: "damageBonus", value: 30, condition: "highSwordEnergy" },
        unlockLevel: 0,
      },
      {
        id: "unyielding_will",
        name: "Unyielding Will",
        nameJa: "不屈の意志",
        description: "Emergency shield and revival",
        descriptionJa: "HP50%以下で自動シールド30(1回/戦闘)。死亡時HP1で復活(1回/ラン)",
        effect: { type: "bonusOnLowHp", value: 30 },
        unlockLevel: 3,
      },
    ],
  },

  // --- Body Equipment (3) ---
  sw_body_01: {
    id: "sw_body_01",
    typeId: "sw_body_01",
    name: "Swordsman's Armor",
    description: "剣士の基本鎧。被ダメージで剣気蓄積。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 150,
    maxDurability: 150,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 150,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_armor",
      name: "Sword Armor",
      nameJa: "剣気の鎧",
      description: "Gain AP and sword energy when hit",
      descriptionJa: "剣気1につきAP+5(最大+50)。被ダメージ時、剣気+1",
      effect: { type: "bonusPerSwordEnergy", value: 5 },
      unlockLevel: 0,
    }],
  },
  sw_body_02: {
    id: "sw_body_02",
    typeId: "sw_body_02",
    name: "War God's Armor",
    description: "戦神の鎧。カウンター型防御。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 280,
    maxDurability: 280,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 280,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_counter",
        name: "Sword Counter",
        nameJa: "剣気反撃",
        description: "Counter attack based on sword energy",
        descriptionJa: "被ダメージ時、剣気×5の反撃ダメージ。剣気10で反撃ダメージ×2",
        effect: { type: "counterAttack", value: 5 },
        unlockLevel: 0,
      },
      {
        id: "sword_shield",
        name: "Sword Shield",
        nameJa: "剣気シールド",
        description: "Shield generation at turn start",
        descriptionJa: "ターン開始時、剣気×3のシールド付与。剣気5以上でデバフ耐性+50%",
        effect: { type: "shieldOnTurnStart", value: 3 },
        unlockLevel: 3,
      },
    ],
  },
  sw_body_03: {
    id: "sw_body_03",
    typeId: "sw_body_03",
    name: "Sword God's Armor",
    description: "剣神の鎧。剣気システムを完全強化。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 450,
    maxDurability: 450,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 450,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_supremacy",
        name: "Sword Supremacy",
        nameJa: "剣気無双",
        description: "AoE attacks and damage boost at high sword energy",
        descriptionJa: "剣気5以上で全物理攻撃が範囲化。剣気10で全物理攻撃の威力+50%",
        effect: { type: "damageBonus", value: 50, condition: "highSwordEnergy" },
        unlockLevel: 0,
      },
      {
        id: "sword_recovery",
        name: "Sword Recovery",
        nameJa: "剣気回復",
        description: "HP recovery on sword energy consumption",
        descriptionJa: "剣気消費時、消費量×5のHP回復。剣気全消費時、次ターン剣気+5スタート",
        effect: { type: "healingBonus", value: 5 },
        unlockLevel: 3,
      },
    ],
  },

  // --- Weapon Equipment (3) ---
  sw_weapon_01: {
    id: "sw_weapon_01",
    typeId: "sw_weapon_01",
    name: "Swordsman's Blade",
    description: "剣士の基本剣。剣気でダメージ増加。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 80,
    maxDurability: 80,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 80,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_blade",
      name: "Sword Blade",
      nameJa: "剣気刃",
      description: "Physical damage scales with sword energy",
      descriptionJa: "物理攻撃威力+剣気×3。クリティカル時、剣気+2",
      effect: { type: "bonusPerSwordEnergy", value: 3 },
      unlockLevel: 0,
    }],
  },
  sw_weapon_02: {
    id: "sw_weapon_02",
    typeId: "sw_weapon_02",
    name: "War God's Greatsword",
    description: "戦神の大剣。火力特化。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 150,
    maxDurability: 150,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 150,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_slash",
        name: "Sword Slash",
        nameJa: "剣気斬",
        description: "Enhanced damage and crit at max sword energy",
        descriptionJa: "物理攻撃威力+剣気×7。剣気10で確定クリティカル+貫通80%",
        effect: { type: "bonusPerSwordEnergy", value: 7 },
        unlockLevel: 0,
      },
      {
        id: "sword_accumulation",
        name: "Sword Accumulation",
        nameJa: "剣気蓄積",
        description: "Bonus sword energy on card use",
        descriptionJa: "0-1コストカード使用時、剣気+2。2コスト以上で剣気+4",
        effect: { type: "classAbilityBonus", value: 2, classAbilityTarget: "swordEnergy" },
        unlockLevel: 3,
      },
    ],
  },
  sw_weapon_03: {
    id: "sw_weapon_03",
    typeId: "sw_weapon_03",
    name: "Sword God's Holy Blade",
    description: "剣神の聖剣。剣気システム極限強化。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 300,
    maxDurability: 300,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 300,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_release",
        name: "Sword Release",
        nameJa: "剣気解放",
        description: "Reduce cost and amplify full consumption attacks",
        descriptionJa: "剣気消費カードのコスト-1。剣気全消費時、ダメージ×3。全消費後、即座に剣気+5",
        effect: { type: "damageBonus", value: 200, condition: "highSwordEnergy" },
        unlockLevel: 0,
      },
      {
        id: "sword_resonance",
        name: "Sword Resonance",
        nameJa: "剣気共鳴",
        description: "Start with sword energy and increase cap",
        descriptionJa: "剣気5以上で貫通+50%。剣気10で確定クリティカル。戦闘開始時剣気+5、上限+5(最大15)",
        effect: { type: "penetrationBonus", value: 50, condition: "highSwordEnergy" },
        unlockLevel: 3,
      },
    ],
  },
};

// --- Left Hand Equipment (2) ---
export const SWORDSMAN_OFFHAND: Record<string, EnhancedEquipmentData> = {
  sw_offhand_01: {
    id: "sw_offhand_01",
    typeId: "sw_offhand_01",
    name: "Swordsman's Shield",
    description: "剣士の盾。剣気で防御強化。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 120,
    maxDurability: 120,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 120,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_shield_skill",
      name: "Sword Shield",
      nameJa: "剣気の盾",
      description: "Shield and counter based on sword energy",
      descriptionJa: "ターン開始時、剣気×4のシールド付与。被ダメージ時、攻撃者に剣気×3の反撃",
      effect: { type: "shieldOnTurnStart", value: 4 },
      unlockLevel: 0,
    }],
  },
  sw_offhand_02: {
    id: "sw_offhand_02",
    typeId: "sw_offhand_02",
    name: "War God's Short Sword",
    description: "戦神の小剣。二刀流で追加攻撃。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 100,
    maxDurability: 100,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 100,
    classRestriction: "swordsman",
    skills: [
      {
        id: "dual_wield",
        name: "Dual Wield",
        nameJa: "二刀流",
        description: "Chance for bonus attack",
        descriptionJa: "物理カード使用時、25%で追加攻撃(威力×0.5)。追加攻撃でも剣気+1",
        effect: { type: "damageBonus", value: 25 },
        unlockLevel: 0,
      },
      {
        id: "sword_chain",
        name: "Sword Chain",
        nameJa: "剣気連撃",
        description: "Increased bonus attack chance at high sword energy",
        descriptionJa: "剣気5以上で追加攻撃確率50%。剣気10で100%",
        effect: { type: "damageBonus", value: 50, condition: "highSwordEnergy" },
        unlockLevel: 3,
      },
    ],
  },
};

// --- Boots Equipment (2) ---
export const SWORDSMAN_BOOTS: Record<string, EnhancedEquipmentData> = {
  sw_boots_01: {
    id: "sw_boots_01",
    typeId: "sw_boots_01",
    name: "Swordsman's Boots",
    description: "剣士のブーツ。剣気でエナジー増加。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 70,
    maxDurability: 70,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 70,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_speed",
      name: "Sword Speed",
      nameJa: "剣気加速",
      description: "Bonus energy based on sword energy",
      descriptionJa: "剣気5以上でエナジー+1追加。剣気10でエナジー+2追加",
      effect: { type: "energyBonus", value: 1, condition: "highSwordEnergy" },
      unlockLevel: 0,
    }],
  },
  sw_boots_02: {
    id: "sw_boots_02",
    typeId: "sw_boots_02",
    name: "War God's Swift Boots",
    description: "戦神の疾風靴。追加行動チャンス。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 110,
    maxDurability: 110,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 110,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_rush",
        name: "Sword Rush",
        nameJa: "剣気突進",
        description: "Chance for extra card play",
        descriptionJa: "物理カード使用時、10%で即座にもう1枚カード使用可能。剣気10で確率30%",
        effect: { type: "drawBonus", value: 1 },
        unlockLevel: 0,
      },
      {
        id: "sword_evasion",
        name: "Sword Evasion",
        nameJa: "剣気回避",
        description: "Evasion bonus and sword energy on dodge",
        descriptionJa: "剣気5以上で回避率+20%。回避成功時、剣気+2",
        effect: { type: "statusResist", value: 20, condition: "highSwordEnergy" },
        unlockLevel: 3,
      },
    ],
  },
};

// --- Accessory Equipment (2) ---
export const SWORDSMAN_ACCESSORIES: Record<string, EnhancedEquipmentData> = {
  sw_acc_01: {
    id: "sw_acc_01",
    typeId: "sw_acc_01",
    name: "Sword Energy Ring",
    description: "剣気の指輪。剣気システム強化。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 50,
    maxDurability: 50,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 50,
    classRestriction: "swordsman",
    skills: [{
      id: "sword_enhance",
      name: "Sword Enhance",
      nameJa: "剣気強化",
      description: "Increase sword energy cap and starting energy",
      descriptionJa: "剣気上限+3(最大13)。戦闘開始時、剣気+3スタート。剣気1につき全ダメージ+1%",
      effect: { type: "bonusPerSwordEnergy", value: 1 },
      unlockLevel: 0,
    }],
  },
  sw_acc_02: {
    id: "sw_acc_02",
    typeId: "sw_acc_02",
    name: "War God's Bracelet",
    description: "戦神の腕輪。剣気10維持で自動攻撃。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 80,
    maxDurability: 80,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 80,
    classRestriction: "swordsman",
    skills: [
      {
        id: "sword_burst",
        name: "Sword Burst",
        nameJa: "剣気爆発",
        description: "Auto AoE attack at max sword energy",
        descriptionJa: "剣気10到達時、自動で全体攻撃(威力100+剣気×10)。剣気維持(消費しない)",
        effect: { type: "damageBonus", value: 100, condition: "highSwordEnergy" },
        unlockLevel: 0,
      },
      {
        id: "sword_cycle",
        name: "Sword Cycle",
        nameJa: "剣気循環",
        description: "Recover sword energy after consumption",
        descriptionJa: "剣気消費後、次ターン開始時に消費量の50%回復。剣気全消費後、即座に剣気+3",
        effect: { type: "classAbilityBonus", value: 3, classAbilityTarget: "swordEnergy" },
        unlockLevel: 3,
      },
    ],
  },
};

// ============================================================================
// MAGE CLASS-SPECIFIC EQUIPMENT
// ============================================================================

export const MAGE_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  // --- Head Equipment (3) ---
  mg_helm_01: {
    id: "mg_helm_01",
    typeId: "mg_helm_01",
    name: "Mage's Hat",
    description: "魔術士の帽子。共鳴で被ダメージ軽減。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 80,
    maxDurability: 80,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 80,
    classRestriction: "mage",
    skills: [{
      id: "resonance_guard",
      name: "Resonance Guard",
      nameJa: "共鳴の守護",
      description: "Reduce damage based on resonance level",
      descriptionJa: "共鳴Lv1以上で被ダメージ-10%、共鳴Lv2で-25%",
      effect: { type: "damageReduction", value: 10, condition: "maxResonance" },
      unlockLevel: 0,
    }],
  },
  mg_helm_02: {
    id: "mg_helm_02",
    typeId: "mg_helm_02",
    name: "Archmage's Hat",
    description: "大魔導師の帽子。共鳴蓄積を加速。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 140,
    maxDurability: 140,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 140,
    classRestriction: "mage",
    skills: [{
      id: "resonance_acceleration",
      name: "Resonance Acceleration",
      nameJa: "共鳴加速",
      description: "Accelerate resonance buildup",
      descriptionJa: "魔法カード使用時、共鳴+1段階。初手魔法が自動的に共鳴Lv1",
      effect: { type: "classAbilityBonus", value: 1, classAbilityTarget: "resonance" },
      unlockLevel: 0,
    }],
  },
  mg_helm_03: {
    id: "mg_helm_03",
    typeId: "mg_helm_03",
    name: "Magic God's Crown",
    description: "魔神の冠。共鳴効果極限強化。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 250,
    maxDurability: 250,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 250,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_explosion",
        name: "Resonance Explosion",
        nameJa: "共鳴爆発",
        description: "Massive magic boost at max resonance",
        descriptionJa: "共鳴Lv2到達時、次の魔法威力×2.5。共鳴Lv2維持中、全魔法威力+50%",
        effect: { type: "damageBonus", value: 50, condition: "maxResonance" },
        unlockLevel: 0,
      },
      {
        id: "element_mastery",
        name: "Element Mastery",
        nameJa: "属性の支配",
        description: "Enhanced resonance effects and persistence",
        descriptionJa: "全属性の共鳴効果+1段階。異なる属性使用時、50%で共鳴リセットしない",
        effect: { type: "bonusPerResonance", value: 1 },
        unlockLevel: 3,
      },
    ],
  },

  // --- Body Equipment (3) ---
  mg_body_01: {
    id: "mg_body_01",
    typeId: "mg_body_01",
    name: "Mage's Robe",
    description: "魔術士のローブ。共鳴でシールド付与。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 120,
    maxDurability: 120,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 120,
    classRestriction: "mage",
    skills: [{
      id: "resonance_armor",
      name: "Resonance Armor",
      nameJa: "共鳴の鎧",
      description: "Shield based on resonance level",
      descriptionJa: "共鳴Lv×30のシールド付与(ターン開始時)。被ダメージ時、共鳴維持",
      effect: { type: "shieldOnTurnStart", value: 30 },
      unlockLevel: 0,
    }],
  },
  mg_body_02: {
    id: "mg_body_02",
    typeId: "mg_body_02",
    name: "Archmage's Robe",
    description: "大魔導師のローブ。カウンター型防御。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 230,
    maxDurability: 230,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 230,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_counter",
        name: "Resonance Counter",
        nameJa: "共鳴反撃",
        description: "Counter with resonance magic",
        descriptionJa: "被ダメージ時、共鳴属性の魔法で反撃(威力30)。共鳴Lv2で反撃威力×2",
        effect: { type: "counterAttack", value: 30 },
        unlockLevel: 0,
      },
      {
        id: "resonance_shield",
        name: "Resonance Shield",
        nameJa: "共鳴シールド",
        description: "Enhanced shield and debuff resistance",
        descriptionJa: "ターン開始時、共鳴Lv×50のシールド。共鳴Lv2でデバフ耐性+80%",
        effect: { type: "shieldOnTurnStart", value: 50, condition: "maxResonance" },
        unlockLevel: 3,
      },
    ],
  },
  mg_body_03: {
    id: "mg_body_03",
    typeId: "mg_body_03",
    name: "Magic God's Robe",
    description: "魔神のローブ。共鳴システムを完全強化。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 400,
    maxDurability: 400,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 400,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_supremacy",
        name: "Resonance Supremacy",
        nameJa: "共鳴無双",
        description: "AoE magic and massive damage boost",
        descriptionJa: "共鳴Lv1以上で全魔法が範囲化。共鳴Lv2で全魔法の威力+60%",
        effect: { type: "damageBonus", value: 60, condition: "maxResonance" },
        unlockLevel: 0,
      },
      {
        id: "resonance_recovery",
        name: "Resonance Recovery",
        nameJa: "共鳴回復",
        description: "HP recovery and debuff cleanse",
        descriptionJa: "魔法使用時、共鳴Lv×15のHP回復。共鳴Lv2到達時、デバフ全解除",
        effect: { type: "healingBonus", value: 15 },
        unlockLevel: 3,
      },
    ],
  },

  // --- Weapon Equipment (3) ---
  mg_weapon_01: {
    id: "mg_weapon_01",
    typeId: "mg_weapon_01",
    name: "Mage's Staff",
    description: "魔術士の杖。共鳴で威力増加。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 60,
    maxDurability: 60,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 60,
    classRestriction: "mage",
    skills: [{
      id: "resonance_staff",
      name: "Resonance Staff",
      nameJa: "共鳴の杖",
      description: "Magic power scales with resonance",
      descriptionJa: "魔法威力+共鳴Lv×10%。共鳴Lv2で全魔法に貫通+30%",
      effect: { type: "bonusPerResonance", value: 10 },
      unlockLevel: 0,
    }],
  },
  mg_weapon_02: {
    id: "mg_weapon_02",
    typeId: "mg_weapon_02",
    name: "Archmage's Staff",
    description: "大魔導師の杖。火力特化。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 120,
    maxDurability: 120,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 120,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_amplify",
        name: "Resonance Amplify",
        nameJa: "共鳴増幅",
        description: "Enhanced magic power at resonance",
        descriptionJa: "共鳴Lv1で魔法威力+25%。共鳴Lv2で+50%、状態異常効果×2",
        effect: { type: "damageBonus", value: 25 },
        unlockLevel: 0,
      },
      {
        id: "resonance_maintain",
        name: "Resonance Maintain",
        nameJa: "共鳴維持",
        description: "Maintain resonance on element switch",
        descriptionJa: "異なる属性使用時、75%で共鳴リセットしない。共鳴Lv2到達時、次2枚の魔法コスト-1",
        effect: { type: "classAbilityBonus", value: 1, classAbilityTarget: "resonance" },
        unlockLevel: 3,
      },
    ],
  },
  mg_weapon_03: {
    id: "mg_weapon_03",
    typeId: "mg_weapon_03",
    name: "Magic God's Staff",
    description: "魔神の魔杖。共鳴システム極限強化。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 250,
    maxDurability: 250,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 250,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_release",
        name: "Resonance Release",
        nameJa: "共鳴解放",
        description: "Massive magic boost at max resonance",
        descriptionJa: "共鳴Lv2の魔法威力+100%。状態異常効果×3。共鳴Lv2で魔法が全体攻撃化",
        effect: { type: "damageBonus", value: 100, condition: "maxResonance" },
        unlockLevel: 0,
      },
      {
        id: "element_ultimate",
        name: "Element Ultimate",
        nameJa: "属性の極致",
        description: "Enhanced elemental effects",
        descriptionJa: "火:火傷+5、氷:凍結5T、雷:3体連鎖、闇:吸収80%、光:シールド+40。戦闘開始時任意属性Lv1",
        effect: { type: "bonusPerResonance", value: 5 },
        unlockLevel: 3,
      },
    ],
  },
};

// --- Mage Left Hand Equipment (2) ---
export const MAGE_OFFHAND: Record<string, EnhancedEquipmentData> = {
  mg_offhand_01: {
    id: "mg_offhand_01",
    typeId: "mg_offhand_01",
    name: "Mage's Grimoire",
    description: "魔術士の魔導書。共鳴で手札増加。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 80,
    maxDurability: 80,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 80,
    classRestriction: "mage",
    skills: [{
      id: "resonance_book",
      name: "Resonance Book",
      nameJa: "共鳴の書",
      description: "Draw cards based on resonance",
      descriptionJa: "手札+共鳴Lv(Lv2なら+2)。共鳴Lv2で次の魔法コスト-1",
      effect: { type: "drawBonus", value: 1 },
      unlockLevel: 0,
    }],
  },
  mg_offhand_02: {
    id: "mg_offhand_02",
    typeId: "mg_offhand_02",
    name: "Archmage's Grimoire",
    description: "大魔導師の魔導書。多属性コンボ支援。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 130,
    maxDurability: 130,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 130,
    classRestriction: "mage",
    skills: [
      {
        id: "multi_element_book",
        name: "Multi Element Book",
        nameJa: "多属性の書",
        description: "Bonus for using multiple elements",
        descriptionJa: "3属性以上使用時、全魔法威力+30%。属性切り替え時、次の魔法威力+60%",
        effect: { type: "damageBonus", value: 30 },
        unlockLevel: 0,
      },
      {
        id: "resonance_record",
        name: "Resonance Record",
        nameJa: "共鳴記録",
        description: "Maintain resonance history",
        descriptionJa: "共鳴リセット後、次の同属性魔法が自動的に共鳴Lv1。5属性全て使用時、全魔法威力+50%",
        effect: { type: "classAbilityBonus", value: 1, classAbilityTarget: "resonance" },
        unlockLevel: 3,
      },
    ],
  },
};

// --- Mage Boots Equipment (2) ---
export const MAGE_BOOTS: Record<string, EnhancedEquipmentData> = {
  mg_boots_01: {
    id: "mg_boots_01",
    typeId: "mg_boots_01",
    name: "Mage's Boots",
    description: "魔術士のブーツ。共鳴でエナジー増加。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 60,
    maxDurability: 60,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 60,
    classRestriction: "mage",
    skills: [{
      id: "resonance_speed",
      name: "Resonance Speed",
      nameJa: "共鳴加速",
      description: "Bonus energy based on resonance",
      descriptionJa: "共鳴Lv1以上でエナジー+1追加。共鳴Lv2でエナジー+2追加",
      effect: { type: "energyBonus", value: 1, condition: "maxResonance" },
      unlockLevel: 0,
    }],
  },
  mg_boots_02: {
    id: "mg_boots_02",
    typeId: "mg_boots_02",
    name: "Archmage's Swift Boots",
    description: "大魔導師の疾風靴。追加詠唱チャンス。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 95,
    maxDurability: 95,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 95,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_cast",
        name: "Resonance Cast",
        nameJa: "共鳴詠唱",
        description: "Chance for extra magic cast",
        descriptionJa: "魔法使用時、10%で即座にもう1枚魔法使用可能。共鳴Lv2で確率30%",
        effect: { type: "drawBonus", value: 1 },
        unlockLevel: 0,
      },
      {
        id: "resonance_evasion",
        name: "Resonance Evasion",
        nameJa: "共鳴回避",
        description: "Evasion bonus at resonance",
        descriptionJa: "共鳴Lv1以上で回避率+15%。共鳴Lv2で回避率+35%",
        effect: { type: "statusResist", value: 15, condition: "maxResonance" },
        unlockLevel: 3,
      },
    ],
  },
};

// --- Mage Accessory Equipment (2) ---
export const MAGE_ACCESSORIES: Record<string, EnhancedEquipmentData> = {
  mg_acc_01: {
    id: "mg_acc_01",
    typeId: "mg_acc_01",
    name: "Resonance Ring",
    description: "共鳴の指輪。共鳴蓄積加速。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 40,
    maxDurability: 40,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 40,
    classRestriction: "mage",
    skills: [{
      id: "resonance_enhance",
      name: "Resonance Enhance",
      nameJa: "共鳴強化",
      description: "Accelerate resonance and boost magic",
      descriptionJa: "初手魔法が自動的に共鳴Lv1。同属性1回でLv2到達。共鳴Lv1以上で全魔法威力+15%",
      effect: { type: "damageBonus", value: 15, condition: "maxResonance" },
      unlockLevel: 0,
    }],
  },
  mg_acc_02: {
    id: "mg_acc_02",
    typeId: "mg_acc_02",
    name: "Magic God's Bracelet",
    description: "魔神の腕輪。共鳴Lv2維持で自動攻撃。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 70,
    maxDurability: 70,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 70,
    classRestriction: "mage",
    skills: [
      {
        id: "resonance_burst",
        name: "Resonance Burst",
        nameJa: "共鳴爆発",
        description: "Auto AoE attack at max resonance",
        descriptionJa: "共鳴Lv2到達時、全体攻撃(威力80+属性効果)。共鳴維持",
        effect: { type: "damageBonus", value: 80, condition: "maxResonance" },
        unlockLevel: 0,
      },
      {
        id: "resonance_cycle",
        name: "Resonance Cycle",
        nameJa: "共鳴循環",
        description: "Bonus on resonance reset",
        descriptionJa: "共鳴リセット時、次の魔法威力+100%。5属性全て共鳴Lv2到達時、永続バフ(全魔法威力+50%)",
        effect: { type: "damageBonus", value: 100 },
        unlockLevel: 3,
      },
    ],
  },
};

// ============================================================================
// COMMON EQUIPMENT (No class restriction)
// ============================================================================

export const COMMON_HEAD_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  cm_helm_01: {
    id: "cm_helm_01",
    typeId: "cm_helm_01",
    name: "Warrior's Helm",
    description: "戦士の兜。汎用防御装備。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 110,
    maxDurability: 110,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 110,
    skills: [{
      id: "fortify",
      name: "Fortify",
      nameJa: "堅守",
      description: "Reduce damage taken",
      descriptionJa: "被ダメージ-12%。HP50%以下で被ダメージ-25%",
      effect: { type: "damageReduction", value: 12 },
      unlockLevel: 0,
    }],
  },
  cm_helm_02: {
    id: "cm_helm_02",
    typeId: "cm_helm_02",
    name: "Hero's Helm",
    description: "英雄の兜。生存保証装備。",
    itemType: "equipment",
    type: "helmet",
    equipmentSlot: "helmet",
    durability: 220,
    maxDurability: 220,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 220,
    skills: [
      {
        id: "unyielding",
        name: "Unyielding",
        nameJa: "不屈の意志",
        description: "Emergency shield and revival",
        descriptionJa: "HP50%以下で自動シールド40(1回/戦闘)。死亡時HP1で復活(1回/ラン)",
        effect: { type: "bonusOnLowHp", value: 40 },
        unlockLevel: 0,
      },
      {
        id: "hero_blessing",
        name: "Hero's Blessing",
        nameJa: "英雄の加護",
        description: "Stat and crit bonus",
        descriptionJa: "全ステータス+15%。クリティカル率+15%",
        effect: { type: "criticalBonus", value: 15 },
        unlockLevel: 3,
      },
    ],
  },
};

export const COMMON_BODY_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  cm_body_01: {
    id: "cm_body_01",
    typeId: "cm_body_01",
    name: "Warrior's Armor",
    description: "戦士の鎧。基本防御装備。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 160,
    maxDurability: 160,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 160,
    skills: [{
      id: "sturdy",
      name: "Sturdy",
      nameJa: "堅牢",
      description: "AP boost and damage reduction",
      descriptionJa: "AP+50。被ダメージ-10%",
      effect: { type: "damageReduction", value: 10 },
      unlockLevel: 0,
    }],
  },
  cm_body_02: {
    id: "cm_body_02",
    typeId: "cm_body_02",
    name: "Heavy Armor",
    description: "重装鎧。耐久特化。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 250,
    maxDurability: 250,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 250,
    skills: [
      {
        id: "iron_wall",
        name: "Iron Wall",
        nameJa: "鉄壁",
        description: "Shield on turn start and damage reduction",
        descriptionJa: "ターン開始時シールド+30。被ダメージ-20%",
        effect: { type: "shieldOnTurnStart", value: 30 },
        unlockLevel: 0,
      },
      {
        id: "counter_heavy",
        name: "Counter",
        nameJa: "反撃",
        description: "Counter attack when hit",
        descriptionJa: "被ダメージ時、攻撃者に20ダメージ反撃",
        effect: { type: "counterAttack", value: 20 },
        unlockLevel: 3,
      },
    ],
  },
  cm_body_03: {
    id: "cm_body_03",
    typeId: "cm_body_03",
    name: "Light Armor",
    description: "軽装鎧。攻守バランス。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 180,
    maxDurability: 180,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 180,
    skills: [
      {
        id: "agile",
        name: "Agile",
        nameJa: "軽快",
        description: "Energy boost and evasion",
        descriptionJa: "エナジー+1。回避率+15%",
        effect: { type: "energyBonus", value: 1 },
        unlockLevel: 0,
      },
      {
        id: "counter_light",
        name: "Counter",
        nameJa: "反撃",
        description: "Counter on successful evasion",
        descriptionJa: "回避成功時、攻撃者に30ダメージ反撃",
        effect: { type: "counterAttack", value: 30 },
        unlockLevel: 3,
      },
    ],
  },
  cm_body_04: {
    id: "cm_body_04",
    typeId: "cm_body_04",
    name: "Hero's Armor",
    description: "英雄の鎧。最強汎用鎧。",
    itemType: "equipment",
    type: "armor",
    equipmentSlot: "armor",
    durability: 320,
    maxDurability: 320,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 320,
    skills: [
      {
        id: "hero_guard",
        name: "Hero's Guard",
        nameJa: "英雄の守護",
        description: "Shield, damage reduction, debuff resistance",
        descriptionJa: "ターン開始時シールド+40。被ダメージ-25%。デバフ耐性+80%",
        effect: { type: "shieldOnTurnStart", value: 40 },
        unlockLevel: 0,
      },
      {
        id: "hero_power",
        name: "Hero's Power",
        nameJa: "英雄の力",
        description: "Damage and crit bonus",
        descriptionJa: "全ダメージ+25%。クリティカル率+20%",
        effect: { type: "damageBonus", value: 25 },
        unlockLevel: 3,
      },
    ],
  },
};

export const COMMON_WEAPON_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  cm_weapon_01: {
    id: "cm_weapon_01",
    typeId: "cm_weapon_01",
    name: "Warrior's Sword",
    description: "戦士の剣。基本物理武器。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 75,
    maxDurability: 75,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 75,
    skills: [{
      id: "sharp_edge",
      name: "Sharp Edge",
      nameJa: "鋭刃",
      description: "Physical damage and crit bonus",
      descriptionJa: "物理攻撃威力+15%。クリティカル率+10%",
      effect: { type: "damageBonus", value: 15 },
      unlockLevel: 0,
    }],
  },
  cm_weapon_02: {
    id: "cm_weapon_02",
    typeId: "cm_weapon_02",
    name: "Mage's Staff",
    description: "魔法使いの杖。基本魔法武器。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 65,
    maxDurability: 65,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 65,
    skills: [{
      id: "magic_boost",
      name: "Magic Boost",
      nameJa: "魔力増幅",
      description: "Magic damage and penetration",
      descriptionJa: "魔法威力+18%。貫通+20%",
      effect: { type: "damageBonus", value: 18 },
      unlockLevel: 0,
    }],
  },
  cm_weapon_03: {
    id: "cm_weapon_03",
    typeId: "cm_weapon_03",
    name: "Hero's Sword",
    description: "英雄の剣。物理火力特化。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 140,
    maxDurability: 140,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 140,
    skills: [
      {
        id: "hero_blade",
        name: "Hero's Blade",
        nameJa: "英雄の刃",
        description: "Major physical damage and crit",
        descriptionJa: "物理攻撃威力+30%。クリティカル率+20%、クリティカルダメージ+50%",
        effect: { type: "damageBonus", value: 30 },
        unlockLevel: 0,
      },
      {
        id: "pierce",
        name: "Pierce",
        nameJa: "貫通",
        description: "Penetration bonus",
        descriptionJa: "全物理攻撃に貫通+40%",
        effect: { type: "penetrationBonus", value: 40 },
        unlockLevel: 3,
      },
    ],
  },
  cm_weapon_04: {
    id: "cm_weapon_04",
    typeId: "cm_weapon_04",
    name: "Hero's Staff",
    description: "英雄の杖。魔法火力特化。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 125,
    maxDurability: 125,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 125,
    skills: [
      {
        id: "hero_magic",
        name: "Hero's Magic",
        nameJa: "英雄の魔力",
        description: "Major magic damage and penetration",
        descriptionJa: "魔法威力+40%。貫通+40%",
        effect: { type: "damageBonus", value: 40 },
        unlockLevel: 0,
      },
      {
        id: "magic_explosion",
        name: "Magic Explosion",
        nameJa: "魔力爆発",
        description: "Chance for double damage",
        descriptionJa: "魔法使用時、15%で威力×2。クリティカル率+15%",
        effect: { type: "criticalBonus", value: 15 },
        unlockLevel: 3,
      },
    ],
  },
  cm_weapon_05: {
    id: "cm_weapon_05",
    typeId: "cm_weapon_05",
    name: "Versatile Blade",
    description: "万能の剣。物理・魔法両対応。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 200,
    maxDurability: 200,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 200,
    skills: [
      {
        id: "versatile_edge",
        name: "Versatile Edge",
        nameJa: "万能の刃",
        description: "All damage and penetration bonus",
        descriptionJa: "全ダメージ+35%。貫通+50%",
        effect: { type: "damageBonus", value: 35 },
        unlockLevel: 0,
      },
      {
        id: "element_imbue",
        name: "Element Imbue",
        nameJa: "属性付与",
        description: "Random element on physical attacks",
        descriptionJa: "物理攻撃に火・氷・雷のランダム属性付与。状態異常確率+50%",
        effect: { type: "penetrationBonus", value: 50 },
        unlockLevel: 3,
      },
    ],
  },
  cm_weapon_06: {
    id: "cm_weapon_06",
    typeId: "cm_weapon_06",
    name: "Legendary Holy Sword",
    description: "伝説の聖剣。最強武器。",
    itemType: "equipment",
    type: "weapon",
    equipmentSlot: "weapon",
    durability: 350,
    maxDurability: 350,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 350,
    skills: [
      {
        id: "holy_power",
        name: "Holy Power",
        nameJa: "聖剣の力",
        description: "Massive damage, penetration, and crit",
        descriptionJa: "全ダメージ+50%。貫通+80%。クリティカル率+30%、クリティカルダメージ+100%",
        effect: { type: "damageBonus", value: 50 },
        unlockLevel: 0,
      },
      {
        id: "holy_blessing",
        name: "Holy Blessing",
        nameJa: "聖なる加護",
        description: "Lifesteal and revival",
        descriptionJa: "攻撃時HP回復+20。デバフ無効。死亡時HP1で復活(1回/戦闘)",
        effect: { type: "lifesteal", value: 20 },
        unlockLevel: 3,
      },
    ],
  },
};

export const COMMON_OFFHAND_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  cm_offhand_01: {
    id: "cm_offhand_01",
    typeId: "cm_offhand_01",
    name: "Warrior's Shield",
    description: "戦士の盾。基本防御。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 110,
    maxDurability: 110,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 110,
    skills: [{
      id: "guard_skill",
      name: "Guard",
      nameJa: "守護",
      description: "Shield on turn start and damage reduction",
      descriptionJa: "ターン開始時シールド+20。被ダメージ-10%",
      effect: { type: "shieldOnTurnStart", value: 20 },
      unlockLevel: 0,
    }],
  },
  cm_offhand_02: {
    id: "cm_offhand_02",
    typeId: "cm_offhand_02",
    name: "Mage's Grimoire",
    description: "魔法使いの魔導書。手札確保。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 75,
    maxDurability: 75,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 75,
    skills: [{
      id: "magic_book",
      name: "Magic Book",
      nameJa: "魔力の書",
      description: "Draw bonus and magic boost",
      descriptionJa: "手札+1。魔法威力+15%",
      effect: { type: "drawBonus", value: 1 },
      unlockLevel: 0,
    }],
  },
  cm_offhand_03: {
    id: "cm_offhand_03",
    typeId: "cm_offhand_03",
    name: "Hero's Shield",
    description: "英雄の盾。防御特化。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 200,
    maxDurability: 200,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 200,
    skills: [
      {
        id: "hero_shield",
        name: "Hero's Shield",
        nameJa: "英雄の守護",
        description: "Major shield and damage reduction",
        descriptionJa: "ターン開始時シールド+40。被ダメージ-25%",
        effect: { type: "shieldOnTurnStart", value: 40 },
        unlockLevel: 0,
      },
      {
        id: "shield_counter",
        name: "Shield Counter",
        nameJa: "反撃",
        description: "Counter and stun on shield break",
        descriptionJa: "被ダメージ時、攻撃者に30ダメージ反撃。シールド破壊時、攻撃者に気絶2ターン",
        effect: { type: "counterAttack", value: 30 },
        unlockLevel: 3,
      },
    ],
  },
  cm_offhand_04: {
    id: "cm_offhand_04",
    typeId: "cm_offhand_04",
    name: "Hero's Grimoire",
    description: "英雄の魔導書。リソース確保。",
    itemType: "equipment",
    type: "offhand",
    equipmentSlot: "accessory1",
    durability: 130,
    maxDurability: 130,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 130,
    skills: [
      {
        id: "hero_wisdom",
        name: "Hero's Wisdom",
        nameJa: "英雄の叡智",
        description: "Draw and damage bonus",
        descriptionJa: "手札+2。全威力+20%",
        effect: { type: "drawBonus", value: 2 },
        unlockLevel: 0,
      },
      {
        id: "magic_cycle",
        name: "Magic Cycle",
        nameJa: "魔力循環",
        description: "Energy recovery and card selection",
        descriptionJa: "カード使用時、10%でエナジー+1。ドロー時2枚から選択",
        effect: { type: "energyBonus", value: 1 },
        unlockLevel: 3,
      },
    ],
  },
};

export const COMMON_BOOTS_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  cm_boots_01: {
    id: "cm_boots_01",
    typeId: "cm_boots_01",
    name: "Warrior's Boots",
    description: "戦士のブーツ。基本靴。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 70,
    maxDurability: 70,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 70,
    skills: [{
      id: "sprint",
      name: "Sprint",
      nameJa: "疾走",
      description: "Evasion bonus",
      descriptionJa: "回避率+10%",
      effect: { type: "statusResist", value: 10 },
      unlockLevel: 0,
    }],
  },
  cm_boots_02: {
    id: "cm_boots_02",
    typeId: "cm_boots_02",
    name: "Mage's Boots",
    description: "魔法使いのブーツ。手札確保。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 60,
    maxDurability: 60,
    rarity: "common",
    quality: "normal",
    effects: [],
    upgradeLevel: 0,
    baseAp: 60,
    skills: [{
      id: "magic_shoes",
      name: "Magic Shoes",
      nameJa: "魔力の靴",
      description: "Draw bonus",
      descriptionJa: "手札+1",
      effect: { type: "drawBonus", value: 1 },
      unlockLevel: 0,
    }],
  },
  cm_boots_03: {
    id: "cm_boots_03",
    typeId: "cm_boots_03",
    name: "Swift Boots",
    description: "疾風のブーツ。機動力特化。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 105,
    maxDurability: 105,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 105,
    skills: [
      {
        id: "gale",
        name: "Gale",
        nameJa: "疾風",
        description: "Evasion and extra action chance",
        descriptionJa: "回避率+25%。カード使用時、10%で即座にもう1枚使用可能",
        effect: { type: "statusResist", value: 25 },
        unlockLevel: 0,
      },
      {
        id: "swift_foot",
        name: "Swift Foot",
        nameJa: "俊足",
        description: "Preemptive strike chance",
        descriptionJa: "先制攻撃確率+30%",
        effect: { type: "criticalBonus", value: 30 },
        unlockLevel: 3,
      },
    ],
  },
  cm_boots_04: {
    id: "cm_boots_04",
    typeId: "cm_boots_04",
    name: "Hero's Boots",
    description: "英雄のブーツ。最強靴。",
    itemType: "equipment",
    type: "boots",
    equipmentSlot: "boots",
    durability: 150,
    maxDurability: 150,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 150,
    skills: [
      {
        id: "hero_dash",
        name: "Hero's Dash",
        nameJa: "英雄の疾走",
        description: "Evasion and energy on dodge",
        descriptionJa: "回避率+35%。回避成功時エナジー+1",
        effect: { type: "statusResist", value: 35 },
        unlockLevel: 0,
      },
      {
        id: "hero_swift",
        name: "Hero's Swift",
        nameJa: "英雄の俊足",
        description: "Preemptive and cost reduction",
        descriptionJa: "先制攻撃確率+50%。初手カードコスト-1",
        effect: { type: "energyBonus", value: 1 },
        unlockLevel: 3,
      },
    ],
  },
};

export const COMMON_ACCESSORY_EQUIPMENT: Record<string, EnhancedEquipmentData> = {
  cm_acc_01: {
    id: "cm_acc_01",
    typeId: "cm_acc_01",
    name: "Critical Ring",
    description: "クリティカルリング。クリティカル特化。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 50,
    maxDurability: 50,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 50,
    skills: [{
      id: "crit_enhance",
      name: "Critical Enhance",
      nameJa: "クリティカル強化",
      description: "Crit rate and damage bonus",
      descriptionJa: "クリティカル率+25%。クリティカルダメージ+60%",
      effect: { type: "criticalBonus", value: 25 },
      unlockLevel: 0,
    }],
  },
  cm_acc_02: {
    id: "cm_acc_02",
    typeId: "cm_acc_02",
    name: "Penetration Ring",
    description: "貫通の指輪。貫通特化。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 50,
    maxDurability: 50,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 50,
    skills: [{
      id: "pierce_enhance",
      name: "Pierce Enhance",
      nameJa: "貫通強化",
      description: "Penetration and shield break bonus",
      descriptionJa: "全攻撃に貫通+40%。シールド破壊時、追加ダメージ+50%",
      effect: { type: "penetrationBonus", value: 40 },
      unlockLevel: 0,
    }],
  },
  cm_acc_03: {
    id: "cm_acc_03",
    typeId: "cm_acc_03",
    name: "Evasion Ring",
    description: "回避のリング。回避特化。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 45,
    maxDurability: 45,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 45,
    skills: [{
      id: "evasion_enhance",
      name: "Evasion Enhance",
      nameJa: "回避強化",
      description: "Evasion and heal on dodge",
      descriptionJa: "回避率+30%。回避成功時HP+15回復",
      effect: { type: "statusResist", value: 30 },
      unlockLevel: 0,
    }],
  },
  cm_acc_04: {
    id: "cm_acc_04",
    typeId: "cm_acc_04",
    name: "Energy Ring",
    description: "エナジーの指輪。リソース確保。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 40,
    maxDurability: 40,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 40,
    skills: [{
      id: "energy_enhance",
      name: "Energy Enhance",
      nameJa: "エナジー強化",
      description: "Initial and per-turn energy bonus",
      descriptionJa: "初期エナジー+2。毎ターンエナジー+1追加",
      effect: { type: "energyBonus", value: 2 },
      unlockLevel: 0,
    }],
  },
  cm_acc_05: {
    id: "cm_acc_05",
    typeId: "cm_acc_05",
    name: "Draw Ring",
    description: "ドローの指輪。手札確保。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 40,
    maxDurability: 40,
    rarity: "rare",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 40,
    skills: [{
      id: "draw_enhance",
      name: "Draw Enhance",
      nameJa: "ドロー強化",
      description: "Initial and per-turn draw bonus",
      descriptionJa: "初期手札+2。毎ターン手札+1追加",
      effect: { type: "drawBonus", value: 2 },
      unlockLevel: 0,
    }],
  },
  cm_acc_06: {
    id: "cm_acc_06",
    typeId: "cm_acc_06",
    name: "Collector's Charm",
    description: "魔石収集者のお守り。経済特化。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 60,
    maxDurability: 60,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 60,
    skills: [{
      id: "collector",
      name: "Collector",
      nameJa: "収集強化",
      description: "Drop and gold bonus",
      descriptionJa: "魔石ドロップ率+40%。ゴールド獲得量+30%。宝箱発見率+25%",
      effect: { type: "damageBonus", value: 0 },
      unlockLevel: 0,
    }],
  },
  cm_acc_07: {
    id: "cm_acc_07",
    typeId: "cm_acc_07",
    name: "Lucky Coin",
    description: "幸運のコイン。運特化。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 55,
    maxDurability: 55,
    rarity: "epic",
    quality: "good",
    effects: [],
    upgradeLevel: 0,
    baseAp: 55,
    skills: [{
      id: "lucky",
      name: "Lucky",
      nameJa: "幸運",
      description: "Drop and crit bonus",
      descriptionJa: "全ドロップ率+30%。クリティカル率+20%。隠し部屋発見率+40%",
      effect: { type: "criticalBonus", value: 20 },
      unlockLevel: 0,
    }],
  },
  cm_acc_08: {
    id: "cm_acc_08",
    typeId: "cm_acc_08",
    name: "Unyielding Will",
    description: "不屈の意志。最強生存装備。",
    itemType: "equipment",
    type: "accessory",
    equipmentSlot: "accessory2",
    durability: 100,
    maxDurability: 100,
    rarity: "legendary",
    quality: "master",
    effects: [],
    upgradeLevel: 0,
    baseAp: 100,
    skills: [
      {
        id: "unyielding_spirit",
        name: "Unyielding",
        nameJa: "不屈",
        description: "Major stat boost at low HP",
        descriptionJa: "HP50%以下で全能力+50%。HP30%以下で全能力+100%",
        effect: { type: "bonusOnLowHp", value: 50 },
        unlockLevel: 0,
      },
      {
        id: "revive",
        name: "Revive",
        nameJa: "復活",
        description: "Revival on death",
        descriptionJa: "死亡時HP50%で復活(1回/戦闘)。復活時デバフ全解除+シールド100",
        effect: { type: "healingBonus", value: 50 },
        unlockLevel: 3,
      },
    ],
  },
};

export const EquipmentData = {
  ...SWORDSMAN_EQUIPMENT,
  ...SWORDSMAN_OFFHAND,
  ...SWORDSMAN_BOOTS,
  ...SWORDSMAN_ACCESSORIES,
  ...MAGE_EQUIPMENT,
  ...MAGE_OFFHAND,
  ...MAGE_BOOTS,
  ...MAGE_ACCESSORIES,
  // Summoner equipment removed - class deprecated for 2-class version
  ...COMMON_HEAD_EQUIPMENT,
  ...COMMON_BODY_EQUIPMENT,
  ...COMMON_WEAPON_EQUIPMENT,
  ...COMMON_OFFHAND_EQUIPMENT,
  ...COMMON_BOOTS_EQUIPMENT,
  ...COMMON_ACCESSORY_EQUIPMENT,
}
export const EQUIPMENT_TEMPLATES: Record<
    EquipmentSlot,
    Record<ItemRarity, { name: string; icon: string }>
> = {
    weapon: {
        common: { name: "Iron Sword", icon: "\u{1F5E1}\u{FE0F}" },
        uncommon: { name: "Steel Blade", icon: "\u{2694}\u{FE0F}" },
        rare: { name: "Enchanted Sword", icon: "\u{1F52E}" },
        epic: { name: "Demon Slayer", icon: "\u{2694}\u{FE0F}" },
        legendary: { name: "Excalibur", icon: "\u{2728}" },
    },
    armor: {
        common: { name: "Leather Armor", icon: "\u{1F6E1}\u{FE0F}" },
        uncommon: { name: "Chain Mail", icon: "\u{1F517}" },
        rare: { name: "Plate Armor", icon: "\u{1F6E1}\u{FE0F}" },
        epic: { name: "Dragon Scale Armor", icon: "\u{1F409}" },
        legendary: { name: "Celestial Plate", icon: "\u{2728}" },
    },
    helmet: {
        common: { name: "Leather Cap", icon: "\u{1F393}" },
        uncommon: { name: "Iron Helm", icon: "\u{26D1}\u{FE0F}" },
        rare: { name: "Enchanted Helm", icon: "\u{1F451}" },
        epic: { name: "Crown of Thorns", icon: "\u{1F451}" },
        legendary: { name: "Crown of the Ancients", icon: "\u{2728}" },
    },
    boots: {
        common: { name: "Leather Boots", icon: "\u{1F462}" },
        uncommon: { name: "Iron Greaves", icon: "\u{1F9B6}" },
        rare: { name: "Swift Boots", icon: "\u{1F4A8}" },
        epic: { name: "Shadow Steps", icon: "\u{1F463}" },
        legendary: { name: "Wings of Mercury", icon: "\u{2728}" },
    },
    accessory1: {
        common: { name: "Copper Ring", icon: "\u{1F48D}" },
        uncommon: { name: "Silver Ring", icon: "\u{1F48E}" },
        rare: { name: "Enchanted Ring", icon: "\u{2728}" },
        epic: { name: "Ring of Power", icon: "\u{1F525}" },
        legendary: { name: "Ring of the Void", icon: "\u{1F300}" },
    },
    accessory2: {
        common: { name: "Bone Amulet", icon: "\u{1F4FF}" },
        uncommon: { name: "Silver Amulet", icon: "\u{1F3F5}\u{FE0F}" },
        rare: { name: "Enchanted Amulet", icon: "\u{1F4AB}" },
        epic: { name: "Dragon Heart Amulet", icon: "\u{2764}\u{FE0F}" },
        legendary: { name: "Amulet of Eternity", icon: "\u{267E}\u{FE0F}" },
    },
};

/**
 * Equipment stat bonuses by slot and rarity.
 * Based on design doc: HP+10~50, ATK+5%~30%, DEF+5%~30%, Speed, Energy.
 */
export const EQUIPMENT_STAT_BONUSES: Record<
    EquipmentSlot,
    Record<ItemRarity, EquipmentStatBonuses>
> = {
    weapon: {
        common:    { atkPercent: 5 },
        uncommon:  { atkPercent: 10 },
        rare:      { atkPercent: 15, speedBonus: 1 },
        epic:      { atkPercent: 22, speedBonus: 2 },
        legendary: { atkPercent: 30, speedBonus: 3, energyBonus: 1 },
    },
    armor: {
        common:    { hpBonus: 10, defPercent: 5, apBonus: 5 },
        uncommon:  { hpBonus: 15, defPercent: 8, apBonus: 8 },
        rare:      { hpBonus: 22, defPercent: 12, apBonus: 12 },
        epic:      { hpBonus: 32, defPercent: 18, apBonus: 18 },
        legendary: { hpBonus: 50, defPercent: 25, apBonus: 25 },
    },
    helmet: {
        common:    { hpBonus: 8, defPercent: 3, apBonus: 3 },
        uncommon:  { hpBonus: 12, defPercent: 5, apBonus: 5 },
        rare:      { hpBonus: 18, defPercent: 8, apBonus: 8 },
        epic:      { hpBonus: 25, defPercent: 12, apBonus: 12 },
        legendary: { hpBonus: 35, defPercent: 18, apBonus: 18 },
    },
    boots: {
        common:    { speedBonus: 1, apBonus: 2 },
        uncommon:  { speedBonus: 2, defPercent: 3, apBonus: 3 },
        rare:      { speedBonus: 3, defPercent: 5, apBonus: 5 },
        epic:      { speedBonus: 5, defPercent: 8, hpBonus: 10, apBonus: 8 },
        legendary: { speedBonus: 8, defPercent: 10, hpBonus: 15, apBonus: 12 },
    },
    accessory1: {
        common:    { hpBonus: 5, apBonus: 2 },
        uncommon:  { hpBonus: 8, atkPercent: 3, apBonus: 3 },
        rare:      { hpBonus: 12, atkPercent: 5, apBonus: 3 },
        epic:      { hpBonus: 18, atkPercent: 8, apBonus: 5, energyBonus: 1 },
        legendary: { hpBonus: 25, atkPercent: 12, apBonus: 8, energyBonus: 1 },
    },
    accessory2: {
        common:    { apBonus: 3 },
        uncommon:  { apBonus: 5, defPercent: 3 },
        rare:      { apBonus: 8, defPercent: 5, hpBonus: 8 },
        epic:      { apBonus: 12, defPercent: 8, hpBonus: 15 },
        legendary: { apBonus: 18, defPercent: 12, hpBonus: 22, energyBonus: 1 },
    },
};
